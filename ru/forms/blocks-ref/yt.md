# Список из YT

В этом блоке пользователь может ввести варианты ответов, которые подгружаются из [таблицы YT](https://yt.yandex-team.ru/docs/). При вводе текста работает подсказка по допустимым вариантам ответов. Ответы, которых нет в таблице, не принимаются.

Если в форме используется несколько блоков <q>Список из YT</q>, можно [настроить фильтрацию вариантов ответов](#param-filter). В этом случае набор допустимых ответов в одном блоке <q>Список из YT</q> будет меняться в зависимости от ответа, выбранного в другом блоке.

{% note warning %}

Таблица YT с вариантами ответов должна иметь не более 10 000 строк.

Данные из YT обновляются каждые 30 минут, поэтому варианты ответов могут загружаться с задержкой.

{% endnote %}


## Настройки блока {#sec_settings}

### Вопрос {#param-question}

Введите заголовок поля или формулировку вопроса.

{% include [question](../../_includes/forms/question.md) %}

{% include [id-required-hidden](../../_includes/forms/id-required-hidden.md) %}

### Ссылка на таблицу ответов {#param-link-tab-answer}

В разделе **Настройки** вставьте в поле ссылку на таблицу YT с вариантами ответов. Ссылка должна иметь вид: 

```
https://yt.yandex-team.ru/hume/navigation?path=//directory-name/table-name
```

### Добавить фильтр <q>Таблицы YT</q> {#param-filter}

С помощью этой опции можно фильтровать варианты ответов в блоке <q>Список из YT</q> — загружать из таблицы YT разные строки в зависимости от ответа, выбранного в другом блоке <q>Список из YT</q>. Для этого добавьте на форму по крайней мере два блока <q>Список из YT</q>:
    
- Родительский блок.

- Блок с фильтрацией, варианты ответов в котором будут зависеть от ответа, который пользователь выбрал в родительском блоке.

Чтобы фильтровать варианты ответов:

1. Добавьте на форму родительский блок <q>Список из YT</q> или выберите в качестве родительского существующий блок.

1. Создайте [таблицу ответов с дополнительным столбцом для фильтрации](#sec_filter).

1. Добавьте на форму блок с фильтрацией и в разделе **Настройки** укажите ссылку на созданную таблицу.

1. Включите опцию **Добавить фильтр <q>Таблицы YT</q>**.

1. В списке **Выберите фильтр** укажите родительский блок <q>Список из YT</q>. 

### Валидация {#param-validation}

Если нужно проверить, что введенный ответ соответствует определенному формату, можно использовать внешний валидатор. При выборе этой опции в настройках формы укажите [адрес сервера валидации](../validation.md).


## Создать таблицу ответов {#sec_table}

Чтобы создать таблицу ответов для блока <q>Список из YT</q>:

1. В [YT](https://yt.yandex-team.ru/) создайте таблицу.

1. Запишите в таблицу данные в следующем формате: 
    
    - В таблице должны быть столбцы с именами `id` и `name`. 
    
    - В столбце `id` должны быть записаны уникальные номера, например нумерация по порядку.
    
    - В столбце `name` должны быть записаны варианты ответов, которые будут доступны в блоке <q>Список из YT</q>.

1. Убедитесь, что у робота `robot-forms@` есть [доступ к таблице](https://yt.yandex-team.ru/docs/description/common/acl_manage). Робот также имеет доступ к таблице, если установлен режим **Доступно всем сотрудникам**.

1. Укажите [ссылку на таблицу](#param-link-tab-answer) в настройках блока <q>Список из YT</q>.


## Создать таблицу с фильтрацией ответов {#sec_filter}

Чтобы создать таблицу с фильтрацией ответов:

1. В [YT](https://yt.yandex-team.ru/) создайте таблицу.

1. Запишите в таблицу данные в следующем формате:
    
    - В таблице должны быть столбцы с именами `id`, `name` и `parent`.
    
    - В столбце `id` должны быть записаны уникальные номера, например нумерация по порядку.
    
    - В столбце `name` должны быть записаны варианты ответов, которые будут доступны в блоке <q>Список из YT</q>.
    
    - В столбце `parent` для каждого ответа должно быть указано значение `id` из строки в родительской таблице, при выборе которой ответ будет подгружаться в блок <q>Список из YT</q> с фильтрацией. Например, если в родительском блоке пользователь выберет ответ из строки со значением `id = 1`, то в блоке с фильтрацией будут доступны варианты ответа, у которых в столбце `parent` указан номер `1`.

1. Убедитесь, что у робота `robot-forms@` есть [доступ к таблице](https://yt.yandex-team.ru/docs/description/common/acl_manage). Робот также имеет доступ к таблице, если установлен режим **Доступно всем сотрудникам**.

1. Укажите ссылку на таблицу в настройках блока <q>Список из YT</q> и [включите фильтрацию ответов](#param-filter).