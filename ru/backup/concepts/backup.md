---
title: Резервные копии в {{ backup-full-name }}
description: В статье содержится информация о резервных копиях в {{ backup-name }}.
---

# Резервные копии

{% include [vm-running](../../_includes/backup/vm-running.md) %}


## Типы копий {#types}

* _Полная копия_ содержит все данные, необходимые для восстановления ВМ или сервера {{ baremetal-full-name }}. Из полных копий ВМ и серверы {{ baremetal-name }} восстанавливаются быстрее, чем из инкрементальных, но такие копии занимают больше места в хранилище и создаются дольше.
* _Инкрементальная копия_ содержит только те данные, которые отличаются от предыдущей копии ВМ или сервера {{ baremetal-name }}. Из инкрементальных копий ВМ и серверы восстанавливаются дольше, чем из полных копий, поскольку при восстановлении используются цепочки инкрементальных копий. Такие копии создаются быстрее и занимают меньше места, чем полные. Невыгодно использовать инкрементальное копирование, если между двумя последовательными копиями накапливается много различий.

{% include [av-note](../../_includes/backup/av-note.md) %}

Восстановить резервную копию ВМ на сервер {{ baremetal-name }} или резервную копию сервера {{ baremetal-name }} на ВМ невозможно.

{% note tip %}

Чтобы использовать преимущества обоих типов, сочетайте их. Например, создайте для одной ВМ или сервера {{ baremetal-name }} две [политики копирования](policy.md): в одной настройте создание полных копий раз в неделю, а в другой — создание инкрементальных копий раз в день.

{% endnote %}

### Особенности работы с LVM {#lvm}

{{ backup-name }} позволяет создавать резервные копии виртуальных машин и серверов {{ baremetal-name }} с логическими томами под управлением подсистемы [LVM](https://ru.wikipedia.org/wiki/LVM).

Восстановление ВМ и серверов {{ baremetal-name }} из таких резервных копий необходимо выполнять с учетом следующих особенностей:

{% list tabs group=backup_resource_type %}

- Виртуальная машина {#vm}

  * При восстановлении резервной копии на ту же ВМ, для которой эта резервная копия была создана, дополнительных действий не требуется: структура LVM-томов должна восстановиться без ошибок.
  * При восстановлении резервной копии на другую ВМ перед восстановлением необходимо создать на целевой ВМ в точности такую же разметку дисков и структуру томов LVM, какая была на исходной ВМ.

      {% note warning %}

      При восстановлении резервной копии с LVM-томами на виртуальную машину, отличную от исходной, успешное восстановление структуры LVM-томов не гарантируется.

      {% endnote %}

- Сервер {{ baremetal-name }} {#baremetal-server}

  * При восстановлении резервной копии на тот же сервер, для которого эта резервная копия была создана, дополнительных действий не требуется: структура LVM-томов должна восстановиться без ошибок.
  * При восстановлении резервной копии на другой сервер, отличный от исходного, [запросите]({{ link-console-support }}/tickets/create) в службе технической поддержки специальный загрузочный [ISO-образ](https://ru.wikipedia.org/wiki/ISO-образ) и загрузите целевой сервер с этого образа.

{% endlist %}

## Хранение копий {#storage}

Резервные копии, создаваемые в {{ backup-name }}, хранятся во внутренних бакетах хранилища {{ objstorage-full-name }}. 

Надежность хранения данных в {{ objstorage-name }} соответствует международным и национальным стандартам. Подробнее см. в разделе [{#T}](../../security/conform.md) документа о безопасности в {{ yandex-cloud }}.

Получить доступ к файлам копий и бакетам, в которых они хранятся, нельзя. Восстановить ВМ или сервер {{ baremetal-name }} из копии можно только средствами {{ backup-name }}.

### Архивы резервных копий {#archives}

Резервные копии объединяются в архивы. _Архив резервных копий_ — это совокупность всех резервных копий, созданных для одной ВМ или одного сервера {{ baremetal-name }} в рамках одной политики резервного копирования.

Использование архивов позволяет быстрее [удалять](../operations/backup-vm/batch-delete.md) резервные копии неактуальных ресурсов. Кроме того, удаление резервных копий целым архивом в меньшей степени нагружает [агент {{ backup-name }}](./agent.md) и менее подвержено возникновению ошибок, чем удаление резервных копий по отдельности.

## Пофайловое восстановление {#file-by-file}

C помощью {{ backup-name }} вы можете восстановить из резервной копии отдельные файлы и директории на любые из ВМ, [подключенных](vm-connection.md) к сервису. Подробнее см. в разделе [{#T}](../operations/backup-vm/recover-file-by-file.md).

Пофайловое восстановление на серверы {{ baremetal-name }} в настоящий момент невозможно.


## Примеры использования {#examples}

* [{#T}](../tutorials/backup-baremetal.md)
* [{#T}](../tutorials/vm-with-backup-policy/index.md)