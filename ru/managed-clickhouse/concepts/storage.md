# Типы хранилища

{% if audience != "internal" %}

{{ mch-name }} позволяет использовать для кластеров баз данных сетевое и локальное хранилища. Сетевое хранилище реализовано на базе сетевых блоков — виртуальных дисков в инфраструктуре {{ yandex-cloud }}. Локальное хранилище организуется на дисках, которые физически размещаются в серверах хостов БД.

{% include [storage-type-nrd](../../_includes/mdb/storage-type-nrd.md) %}

- Гибридное хранилище — компромиссный вариант. Часто используемые «горячие» данные хранятся на дисках стандартного (`network-hdd`) или быстрого сетевого (`network-ssd`) хранилища, редко используемые «холодные» данные — в объектном хранилище [{{ objstorage-full-name }}](../../storage).

## Особенности локального хранилища {#local-storage-features}

Локальное хранилище не обеспечивает отказоустойчивости хранения данных, а также влияет на тарификацию кластера в целом:

- Локальное хранилище в кластере из 1 хоста не обеспечивает отказоустойчивости: при отказе локального диска данные теряются безвозвратно. Поэтому при создании нового кластера {{ mch-name }} с использованием локального хранилища автоматически настраивается отказоустойчивая конфигурация из 2 хостов.
- Кластер с локальным хранилищем тарифицируется, даже если он остановлен. Подробнее — в [правилах тарификации](../pricing.md).

## Особенности нереплицируемого сетевого хранилища {#network-nrd-storage-features}

{% include [nrd-disks-preview](../../_includes/mdb/non-replicated-disks-preview.md) %}

{% include [nrd-storage-details](../../_includes/mdb/nrd-storage-details.md) %}

## Особенности гибридного хранилища {#hybrid-storage-features}

{% include [mch-hybrid-storage-preview-combined-note](../../_includes/mdb/mch-hybrid-storage-preview-combined-note.md) %}

Гибридное хранилище обеспечивает отказоустойчивость хранения данных и управление их размещением для таблиц на [движке MergeTree](https://clickhouse.tech/docs/ru/engines/table-engines/mergetree-family/mergetree/): данные автоматически перемещаются из локального или сетевого хранилища в {{ objstorage-name }} при их устаревании.

Для того, чтобы начать использовать гибридное хранилище, достаточно [создать](../operations/cluster-create.md#create-cluster) кластер нужного вида с версией {{ CH }} не ниже {{ mch-hs-version }}. Настройка объектного хранилища не требуется. Пример использования см. в разделе [{#T}](../tutorials/hybrid-storage.md).

Перенос холодных данных в {{ objstorage-name }} доступен только для таблиц на движке MergeTree. Данные других таблиц будут храниться как обычно — на локальном или сетевом хранилище.

При вставке в MergeTree-таблицу возможен один из двух вариантов поведения:
- Данные помещаются в локальное или сетевое хранилище кластера, чтобы обеспечить высокую скорость вставки. Затем строки, для которых истекло значение [TTL](https://clickhouse.tech/docs/ru/engines/table-engines/mergetree-family/mergetree/#mergetree-table-ttl) (время жизни), в фоновом режиме перемещаются в {{ objstorage-name }}.

  Настроить перемещение строк с истекшим сроком жизни в {{ objstorage-name }} и задать TTL можно при создании таблицы или позднее. Пример использования TTL см. в разделе [{#T}](../tutorials/hybrid-storage.md).

- Данные помещаются сразу в объектное хранилище, если локальное или сетевое хранилище полностью заполнено. В этом случае скорость вставки может быть медленнее.

{% else %}

{{ mch-name }} позволяет использовать для кластеров баз данных локальное хранилище. Локальное хранилище организуется на дисках, которые физически размещаются в серверах хостов БД.

При создании кластера вы можете выбирать между следующими типами хранилища:

* Быстрое локальное хранилище (`local-ssd`) — самые быстрые диски. Объем такого хранилища может составлять от 10 до 2048 ГБ.
* Медленное локальное хранилище (`local-hdd`) — более медленный, но вместительный тип хранилища. Доступен только для хостов с процессорами на платформах Broadwell или Cascade Lake и имеющих не меньше восьми vCPU. `local-hdd` имеет фиксированный объем: 10240 ГБ для Broadwell и 12800 ГБ для Cascade Lake.

{% endif %}
