# Шардирование таблиц {{ CH }}

{{ mch-name }} автоматически создает кластер с одним шардом. Этот шард включает все хосты кластера. 

Чтобы начать использовать шардирование, [добавьте](../operations/shards.md#add-shard) нужное количество шардов и создайте таблицу на базе движка [Distributed](https://clickhouse.yandex/docs/ru/operations/table_engines/distributed/). В статье по ссылке описаны стратегии шардирования и инструкции по созданию таблиц нужного вида, а также ограничения распределенных таблиц.

Подробнее о концепции шардирования читайте в разделе [{#T}](../concepts/sharding.md).

## Примеры шардирования {#example}

Допустим, что [создан кластер](../operations/cluster-create.md) {{ mch-name }} `chcluster` с:
- пятью шардами: `shard1, ..., shard5`;
- базой данных `db1` и таблицей `hits` в ней. 

Пусть необходимо включить шардирование для таблицы `hits`.

После включения шардирования любым из приведенных ниже способов, вы сможете отправлять `SELECT`- и `INSERT`-запросы к созданной распределенной таблице, и они будут обрабатываться согласно заданной конфигурации.

В примерах в качестве ключа шардирования используется случайное число `rand()`.

### Классическое шардирование { #shard-example }

В этом примере распределенная таблица, которая будет создана на основе `hits`, использует все шарды `shard1, ..., shard5` кластера `chcluster`. 

Чтобы создать распределенную таблицу `sharding` в кластере:
1. [Подключитесь](../operations/connect.md) к базе `db1`.
1. Создайте таблицу:
 
   ```
   CREATE TABLE sharding ENGINE = Distributed('{cluster}', db1, hits, rand());
   ```

При создании распределенной таблицы укажите в качестве первого параметра в `Distributed` идентификатор кластера `chcluster`, либо воспользуйтесь макросом `'{cluster}'`, который автоматически подставляет идентификатор кластера, в котором выполняется операция `CREATE TABLE`.

Чтобы узнать идентификатор кластера, [получите список кластеров в каталоге](../operations/cluster-list.md#list-clusters).

### Шардирование с использованием групп шардов { #shard-groups-example }

В этом примере распределенная таблица, которая будет создана на основе `hits`, использует шарды `shard1` и `shard2` кластера `chcluster`.

Чтобы создать распределенную таблицу `sharding` в кластере:
1. [Создайте](../operations/shard-groups.md) группу шардов `sgroup`, в которую входят шарды `shard1` и `shard2`, 
1. [Подключитесь](../operations/connect.md) к базе `db1`.
1. Создайте таблицу:
 
   ```
   CREATE TABLE sharding ENGINE = Distributed(sgroup, db1, hits, rand());
   ```