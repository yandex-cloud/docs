# История изменений в {{ mgp-full-name }}

В разделе представлена история изменений сервиса {{ mgp-name }}.

{% include [Tags](../_includes/mdb/release-notes-tags.md) %}

## II квартал 2023 {#q2-2023}

* Добавлена возможность восстановления резервной копии на любой момент времени (Point-in-Time-Recovery). Для новых кластеров функциональность включена по умолчанию.
* При восстановлении кластера теперь можно выбрать количество хостов и сегментов.
* Версия PXF обновлена до 6.6.0.
* В логи добавлены события по протоколу PXF.

## IV квартал 2022 {#q4-2022}

* Добавлена возможность [расширения кластера](operations/hosts/cluster-expand.md) через CLI и API с добавлением новых хостов-сегментов и перераспределением данных по всем сегментам. {{ tag-cli }} {{ tag-api }}
* Добавлена возможность просмотра резервных копий кластера, восстановления из них, а также изменения публичного доступа к кластеру через CLI. Подробнее см. в разделе [Релизы YC CLI](../cli/release-notes.md#version0.100.0). {{ tag-cli }}
* Добавлена функция `mdb_toolkit.table_privileges()`, позволяющая пользователю с ролью `mdb_admin` просматривать историю выдачи и отзыва привилегий в кластере. Подробнее см. в [документации {{ PG }}]({{ pg.docs.org }}/current/infoschema-table-privileges.html).
* Добавлена функция `mdb_toolkit.gp_workfile_usage_per_query()`, позволяющая пользователю с ролью `mdb_admin` просматривать информацию об активных запросах всех пользователей. Подробнее см. в [документации {{ GP }}]({{ gp.docs.vmware }}/6/greenplum-database/ref_guide-gp_toolkit.html#topic34).
* Доработан алгоритм создания кластера с помощью визарда: {{ tag-con }}
    * Размер кластера не может быть больше, чем `<максимальное количество хостов> × <максимальный размер диска для хоста>`.
    * Можно выбрать группу выделенных хостов, на которой будет создан кластер.
    * Если указан большой объем данных, визард предложит создать кластер на выделенных хостах.

## III квартал 2022 {#q3-2022}

* Добавлена возможность менять пароль для пользователя-администратора. {{ tag-cli }} {{ tag-tf }}
* Добавлена возможность [настройки СУБД и пулера соединений в {{ TF }}](https://github.com/yandex-cloud/terraform-provider-yandex/blob/master/CHANGELOG.md#0770-july-27-2022). {{ tag-tf }}
* Добавлена поддержка расширения [postgis]({{gp.docs.vmware}}/5/greenplum-database/ref_guide-extensions-postGIS.html).
* Добавлена возможность редактирования кластера и его параметров через CLI, а также возможность разрешения доступа из {{ data-transfer-full-name }}. Подробнее см. в разделе [Релизы YC CLI](../cli/release-notes.md#version0.94.0). {{ tag-cli }}
* Обновлен механизм переключения мастера: бывший мастер возвращается в кластер как реплика и становится доступным для нового переключения сразу после завершения первого.
* Добавлена функция `gp_cancel_backend` для принудительного завершения пользовательского запроса.
* Добавлена функция `gp_terminate_backend` для принудительного завершения пользовательского соединения с БД.
* Добавлена возможность расширения кластера новыми хостами-сегментами через [API](../glossary/rest-api.md) с перераспределением данных по всем сегментам.

## II квартал 2022 {#q2-2022}

* Добавлена поддержка CLI: доступны команды `{{ yc-mdb-gp }} cluster` и `{{ yc-mdb-gp }} hosts`. {{ tag-cli }}
* Добавлена возможность миграции базы данных из/в {{ mgp-name }} с помощью сервиса {{ data-transfer-full-name }}. Доступные приемники и источники приведены в [документации](../data-transfer/concepts/index.md#connectivity-matrix). Функциональность находится в стадии [Preview](../data-transfer/concepts/index.md#greenplum).
* Добавлена поддержка расширения [pgcrypto](https://gpdb.docs.pivotal.io/6-9/ref_guide/modules/pgcrypto.html).
* [Оптимизировано](https://github.com/wal-g/wal-g/pull/1257) создание резервных копий за счет особой обработки append-only сегментов.
* Добавлен модуль [diskquota](https://gpdb.docs.pivotal.io/6-19/ref_guide/modules/diskquota.html), который позволяет ограничивать схемы БД по месту на диске.
* Реализовано автоматическое переключение на резервный мастер через [gpactivatestandby](https://gpdb.docs.pivotal.io/6-3/utility_guide/ref/gpactivatestandby.html).
* Добавлены настройки `max_statement_mem` и `log_statement`, доступные при создании и изменении кластера.
* Добавлена возможность создавать кластер с нечетным количеством сегментов.
* Минимальный размер хранилища на сетевых SSD-дисках для мастер-хоста ограничен 100 ГБ.
* Оптимизирован процесс очистки (`VACUUM`):
  * операция выполняется параллельно по нескольким базам;
  * новые таблицы обрабатываются последними;
  * таблицы с активными блокировками исключаются.

## I квартал 2022 {#q1-2022}

* {{ mgp-full-name }} перешел в общий доступ. Теперь для него действует [соглашение об уровне обслуживания]({{ link-sla-greenplum }}) (SLA) и [правила тарификации](pricing/index.md).
* Добавлен [калькулятор](/promo/dwh-calculator/index) для расчета рекомендуемой конфигурации и оценки стоимости кластера.
* Доступна новая версия {{ GP }} 6.19 с исправлением известных ошибок. 
* Добавлена возможность скрывать содержимое внешних таблиц (external tables). 
* Добавлена возможность изменения размера хранилища, в том числе для локальных SSD-дисков.
* Добавлены [конфигурации](concepts/instance-types.md) `io-optimized` с увеличенным соотношением количества гигабайт RAM к количеству vCPU (8:1).

{% include [greenplum-trademark](../_includes/mdb/mgp/trademark.md) %}
