# Управление клиентскими процессами

{{ GP }} запускает новый внутренний процесс для каждого клиентского подключения. Пользователь-администратор или другой пользователь с [ролью](../concepts/cluster-users.md) `mdb_admin` может отменить и завершить эти клиентские серверные процессы с помощью двух функций:

* [mdb_toolkit.gp_cancel_backend()](#cancel-backend)
* [mdb_toolkit.gp_terminate_backend()](#terminate-backend)

## Получить список процессов {#list}

Чтобы получить список процессов, выполните запрос к представлению `pg_stat_activity`:

```sql
SELECT usename, pid, waiting, state, query, datname
FROM pg_stat_activity;
```

Результат:

```text
 usename |  pid     | waiting | state  |         query          | datname
---------+----------+---------+--------+------------------------+---------
  sammy  |   31861  |    f    | idle   | SELECT * FROM testtbl; | testdb
  billy  |   31905  |    t    | active | SELECT * FROM topten;  | testdb
```

Где:

* `usename` — имя пользователя.
* `pid` — идентификатор процесса.
* `waiting` — процесс ожидает транзакцию:

    * `t` — да.
    * `f` — нет.

* `state` — состояние процесса:

    * `active` — действующий.
    * `idle` — бездействующий.

* `query` — запрос.
* `datname` — имя базы данных.

## Завершить определенный процесс {#cancel-backend}

Чтобы завершить определенный серверный процесс, воспользуйтесь функцией:

```sql
mdb_toolkit.gp_cancel_backend(<идентификатор процесса>,<текст сообщения>)
```

Идентификатор процесса можно получить со [списком процессов в кластере](#list). Текст сообщения необязателен и передается клиенту при выполнении функции.

## Завершить соединение с базой данных {#terminate-backend}

Чтобы полностью завершить клиентское соединение с базой данных, воспользуйтесь функцией:

```sql
mdb_toolkit.gp_terminate_backend(<идентификатор процесса>,<текст сообщения>)
```

Идентификатор процесса можно получить со [списком процессов в кластере](#list). Текст сообщения необязателен и передается клиенту при выполнении функции.

{% include [greenplum-trademark](../../_includes/mdb/mgp/trademark.md) %}
