# Взаимосвязь ресурсов сервиса

Основная сущность, которой оперирует сервис {{ mgp-name }} — _кластер баз данных_.

Каждый кластер состоит из хостов баз данных — виртуальных машин с развернутыми серверами СУБД. Кластер {{ mgp-name }} включает:

* два _хоста-мастера_;
* два или больше _хостов-сегментов_.

Один из хостов-мастеров — _первичный_ (PRIMARY), а другой — _резервный_ (STANDBY). Первичный мастер принимает клиентские подключения и SQL-запросы и распределяет обработку запросов по хостам-сегментам. Резервный мастер непрерывно реплицирует данные первичного и пользовательских подключений не принимает. Кластер с двумя хостами-мастерами в случае отказа одного из них продолжает обрабатывать запросы.

На хостах-сегментах развернуты самостоятельные СУБД (_сегменты_), которые хранят части данных и исполняют большинство операций по обработке запросов. Каждый сегмент в кластере имеет одну реплику — зеркальный сегмент, который находится на другом хосте и хранит копию данных с основного сегмента.

{% if product == "yandex-cloud" %}

Все хосты кластера {{ mgp-name }} размещаются в одной зоне доступности: `{{ region-id }}-a` или `{{ region-id }}-b`. Создавать хосты в зоне `{{ region-id }}-c` нельзя. Подробнее см. в разделах [{#T}](../../overview/concepts/geo-scope.md) и [{#T}](../../overview/concepts/ru-central1-c-deprecation.md).

{% endif %}

Виртуальные машины, соответствующие хостам кластера, могут размещаться:

* На _стандартных хостах_ {{ yandex-cloud }}.

    Это физические серверы для размещения виртуальных машин кластера. Такие хосты выбираются случайным образом из пула доступных хостов, удовлетворяющих выбранной конфигурации кластера.

{% if product == "yandex-cloud" %}

* На _выделенных хостах_ {{ yandex-cloud }}.

    Это физические серверы для размещения исключительно ваших виртуальных машин. Эти виртуальные машины обеспечивают как работу кластера, так и работу других ваших сервисов, которые поддерживают выделенные хосты. Такие хосты выбираются из _групп выделенных хостов_, указанных при создании кластера.

    При таком варианте размещения обеспечивается физическая изоляция виртуальных машин. Кластер {{ mgp-name }}, использующий выделенные хосты, обладает всеми возможностями обычных кластеров.

    Подробнее см. в разделе [{#T}](../../compute/concepts/dedicated-host.md).

{% endif %}

При создании кластера необходимо указывать:

* _Класс хостов_ — шаблон виртуальной машины, по которому будут развертываться хосты кластера. Список доступных классов и их характеристики см. в разделе [{#T}](instance-types.md).

* _Окружение_ — среду, в которой будет развертываться кластер:
    * `PRODUCTION` — для стабильных версий ваших приложений.
    * `PRESTABLE` — для тестирования, в том числе самого сервиса {{ mgp-short-name }}. В Prestable-окружении раньше появляются новые возможности, улучшения и исправления ошибок. При этом не все обновления обеспечивают обратную совместимость.

{% include [monitoring-access](../../_includes/mdb/monitoring-access.md) %}

{% include [greenplum-trademark](../../_includes/mdb/mgp/trademark.md) %}
