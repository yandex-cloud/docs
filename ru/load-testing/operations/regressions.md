# Создать и настроить дашборд регрессий

В этой инструкции вы создадите дашборд [регрессий](../concepts/load-test-regressions.md) и настроите виджеты с графиками метрик.
Если у вас еще нет завершенных [нагрузочных тестов](../concepts/index.md), создайте тест и запустите его несколько раз подряд. Примеры сценариев нагрузочных тестов можно найти в разделе **Практические руководства**. 


[Смотреть видеоинструкцию о регрессионном тестировании в {{ load-testing-full-name }} на YouTube](https://www.youtube.com/watch?v=G24b3dQeqns).



Чтобы создать и настроить дашборд регрессий:

1. [Создайте дашборд](#create-dashboard).
1. [Выберите интервал времени](#set-interval).
1. [Добавьте графики регрессий](#first-chart).
1. [Добавьте текстовую информацию](#text-info).
1. [Сохраните/отредактируйте данные на дашборде](#save-edit).
1. [Добавьте/удалите дашборд](#add-delete).

## Создайте дашборд {#create-dashboard}

1. В [консоли управления]({{ link-console-main }}) выберите сервис **{{ ui-key.yacloud.iam.folder.dashboard.label_load-testing }}**.
1. На панели слева выберите ![image](../../_assets/load-testing/regressions.svg) **{{ ui-key.yacloud.load-testing.label_regressions-title }}**.
1. Создайте свой первый дашборд, нажав кнопку **{{ ui-key.yacloud.load-testing.button_create-regression-dashboard }}**.
1. В открывшемся диалоге введите имя дашборда и описание (опционально). Нажмите **{{ ui-key.yc-ui-datasphere.common.apply }}**.

## Выберите интервал времени {#set-interval}

На странице дашборда вверху расположена шкала времени, на которой выделен интервал времени для отображения регрессий.
Две голубые вертикальные черты означают границы интервала.
Красная вертикальная черта указывает на текущий момент.
Над шкалой времени расположена панель выбора длины интервала.

Настройте интервал так, чтобы в него попадали интересующие вас тесты.

{% cut "Как настроить интервал времени" %}

Вы можете изменить длину интервала одним из следующих способов:

1. Перетащите мышкой границу интервала на шкале времени в нужном направлении.
1. Выберите дату и время начала и конца интервала из выпадающего списка в левой части панели выбора длины интервала.
   Там же расположены дополнительные опции, такие как `Последние 5 минут`, `Последний час`, `Сегодня`, `Вчера` и т. д.
1. Кликните один из ярлыков в правой части панели выбора длины интервала:
   - **2w** - две недели;
   - **1M** - один месяц;
   - **2M** - два месяца;
   - **3M** - три месяца;
   - **6M** - полгода.
1. Задайте интервал в выпадающем списке справа от ярлыков.
   Для того, чтобы задать интервал, введите любое число в окошке выпадающего списка.
   Появятся опции с вариантами масштаба интервала — секунды (s), минуты (m), часы (h), дни (d), недели (w) и месяцы (M). 
   Для чисел 1 и 2 дополнительно есть опция год (y).

С помощью кнопок сдвига границ интервала ![image](../../_assets/load-testing/shift-left.svg) и ![image](../../_assets/load-testing/shift-right.svg) справа от выпадающего списка в панели выбора длины интервала можно передвинуть интервал относительно текущего момента (красной вертикальной черты). 
Величина сдвига определяется текущей величиной интервала.

Чтобы сдвинуть интервал к текущему моменту, нажмите кнопку **Сейчас** справа от кнопок сдвига интервала.

Масштаб отображения интервала можно изменить с помощью кнопок ![image](../../_assets/load-testing/minus.svg) и ![image](../../_assets/load-testing/plus.svg), расположенных справа на шкале времени.

{% endcut %}

## Добавьте график регрессии {#first-chart}

Чтобы начать оформление дашборда, добавьте первый график регрессии:

1. Нажмите кнопку **{{ ui-key.yc-ui-datasphere.common.edit }}** в центре экрана.
1. Нажмите на панель ![image](../../_assets/load-testing/plus.svg) **{{ ui-key.yacloud.load-testing.button_create-chart }}**.
1. В открывшемся диалоге:
   - В поле **{{ ui-key.yacloud.load-testing.field_chart-name }}** укажите название графика регрессии.
   - В поле **{{ ui-key.yc-ui-datasphere.common.description }}** дайте описание регрессии (опционально).
   - Из выпадающего списка **{{ ui-key.yacloud.load-testing.field_test-data-type }}** выберите опцию **{{ ui-key.yacloud.load-testing.value_cumulative-quantiles-chart-type }}**.
1. В списке **{{ ui-key.yacloud.load-testing.label_quantile }}** отметьте значения, которые нужно добавить в график, и укажите для каждого из них условие, накладываемое на значение (опционально).
1. В секции **{{ ui-key.yacloud.load-testing.label_test-rules-section }}** укажите имя, общее для тестов, которые вы хотите включить в выборку (опционально). Имя теста служит фильтром: если его не указать, все ваши тесты попадут в выборку.
1. Также вы можете отфильтровать тесты с помощью меток. Для этого в поле **{{ ui-key.yacloud.load-testing.label_test-tags }}** нажмите кнопку **{{ ui-key.yacloud.load-testing.button_add-tag }}** и выберите метку и значение.
   Метки должны быть заданы хотя бы для одного из ваших тестов.

   {% note info %}

   Чтобы добавить метки к тестам, перейдите на страницу ![image](../../_assets/load-testing/test.svg)**{{ ui-key.yacloud.load-testing.label_tests-list }}**, выберите тесты из списка и нажмите кнопку **Добавить метки**.
   Добавьте метки в формате `ключ:значение`.
   
   {% endnote %}

1. Просмотрите список отфильтрованных тестов в секции **Тесты, попадающие в регрессию**.
1. Чтобы сохранить график на дашборд, нажмите кнопку **Создать**.

Добавьте второй график регрессии: 

1. На только что созданном виджете первого графика справа вверху нажмите кнопку копирования ![image](../../_assets/load-testing/edit-copy.svg).
1. Укажите новое название и описание.
1. Из выпадающего списка **{{ ui-key.yacloud.load-testing.field_test-data-type }}** выберите опцию **{{ ui-key.yacloud.load-testing.value_instances-chart-type }}**.
1. В списке опций отметьте значения, которые нужно добавить в график.
1. Чтобы сохранить график на дашборд, нажмите кнопку **Создать**.
1. Расположите новый виджет рядом с первым. Если нужно, настройте высоту и ширину виджета.

## Добавьте текстовую информацию {#text-info}

Чтобы сделать дашборд понятным другим пользователям, добавьте общий заголовок для графиков и пояснительный текст:

1. В панели внизу страницы нажмите кнопку ![image](../../_assets/load-testing/header.svg) **Title**.
1. Укажите заголовок и выберите размер заголовка.
1. Нажмите кнопку **Добавить**.
1. Перетащите заголовок в позицию над графиками. При необходимости измените высоту и ширину поля заголовка.
1. В панели внизу страницы нажмите кнопку ![image](../../_assets/load-testing/text.svg) **Text**.
1. Добавьте текст, поясняющий отраженные на графиках результаты. В тексте вы можете использовать форматирование, добавлять ссылки, изображения, формулы, код и т. п.
1. Нажмите кнопку **Добавить**.
1. При необходимости измените высоту и ширину поля пояснительного текста.

## Сохраните/отредактируйте данные на дашборде {#save-edit}

Чтобы сохранить график и пояснительную информацию на дашборде, нажмите кнопку **Сохранить** в правом верхнем углу страницы.
Вы всегда можете добавить, удалить или отредактировать данные на дашборде, перейдя в режим редактирования. Для этого нажмите **Редактировать** в правом верхнем углу страницы.
Также в режим редактирования дашборда можно перейти из списка дашбордов на странице ![image](../../_assets/load-testing/regressions.svg) **{{ ui-key.yacloud.load-testing.label_regressions-title }}**. Для этого в списке дашбордов нажмите ![image](../../_assets/options.svg) напротив нужного дашборда и выберите опцию **{{ ui-key.yc-ui-datasphere.common.edit }}**.

В режиме редактирования вы можете:
- Отредактировать элемент. Для этого нажмите кнопку ![image](../../_assets/load-testing/edit-pen.svg).
- Скопировать элемент. Для этого нажмите кнопку ![image](../../_assets/load-testing/edit-copy.svg).
- Удалить элемент. Для этого нажмите кнопку ![image](../../_assets/load-testing/edit-cross.svg).

## Добавьте/удалите дашборд {#add-delete}

Чтобы добавить новый дашборд, на странице ![image](../../_assets/load-testing/regressions.svg) **{{ ui-key.yacloud.load-testing.label_regressions-title }}** нажмите кнопку **Создать дашборд** в правом верхнем углу страницы.

Чтобы удалить дашборд, на странице ![image](../../_assets/load-testing/regressions.svg) **{{ ui-key.yacloud.load-testing.label_regressions-title }}** в списке дашбордов нажмите ![image](../../_assets/options.svg) напротив нужного дашборда и выберите опцию **{{ ui-key.yc-ui-datasphere.common.delete }}**.
