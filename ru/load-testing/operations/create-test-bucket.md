# Создать тест с данными из бакета

В {{ load-testing-name }} тестовые данные можно загрузить из [бакета](../../storage/concepts/bucket.md) [{{ objstorage-full-name }}](../../storage/index.yaml). Этот способ позволяет:
* работать с тестовыми данными больших размеров (больше 100 МБ);
* хранить данные и легко их переиспользовать;
* обеспечить максимальную безопасность (тестовые данные не покидают облако пользователя и связанных с ним сетей).

## Подготовка инфраструктуры {#infrastructure-prepare}

1. [Создайте](create-agent.md) агент тестирования.
1. Привяжите бакет к {{ load-testing-name }}:
    1. В [консоли управления]({{ link-console-main }}) выберите каталог для тестирования.
    1. В списке сервисов выберите **{{ load-testing-name }}**.
    1. На вкладке ![image](../../_assets/load-testing/storage.svg) **Хранилище тестовых данных** нажмите **Привязать бакет**.
    1. Выберите бакет.
1. [Загрузите](../../storage/operations/objects/upload.md) файл с тестовыми данными в бакет.
1. Выдайте сервисному аккаунту, привязанному к [агенту](../concepts/agent.md), права на чтение в бакете. Для этого отредактируйте [ACL](../../storage/concepts/acl.md) бакета:
    1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором находится бакет.
    1. В списке сервисов выберите **{{ objstorage-name }}**.
    1. Напротив нужного бакета нажмите ![image](../../_assets/horizontal-ellipsis.svg) и выберите **ACL бакета**.
    1. В открывшемся окне ведите имя сервисного аккаунта, выберите права на чтение в бакете — `READ` и нажмите кнопку **Добавить**.
    1. Нажмите кнопку **Сохранить**.

    Сервисному аккаунту будут предоставлены права на чтение данных только из этого бакета.

    {% note info %}

    Вместо редактирования ACL бакета вы можете [назначить](../../iam/operations/roles/grant.md#access-to-sa) сервисному аккаунту [роль](../../storage/security/#storage-editor) `storage.editor`. 

    Этот способ менее безопасный, поскольку у сервисного аккаунта будут права на выполнение любых операций со всеми бакетами в [каталоге](../../resource-manager/concepts/resources-hierarchy.md#folder): создание, удаление, изменение или открытие публичного доступа.

    {% endnote %}

## Создание теста {#create-test}

1. В [консоли управления]({{ link-console-main }}) выберите каталог для тестирования.
1. В списке сервисов выберите **{{ load-testing-name }}**.
1. На вкладке ![image](../../_assets/load-testing/test.svg) **Тесты** нажмите **Создать тест**.
1. Выберите агент тестирования и [лог-группу](../../logging/concepts/log-group.md) или создайте их.
1. В блоке **Тестовые данные**:
    1. Выберите способ передачи данных: **Из бакета**.
    1. Найдите бакет в выпадающем списке и укажите путь к файлу с тестовыми данными. Если файл не был загружен заранее:

        1. Выберите способ передачи данных: **Локальный файл**.
        1. Нажмите **Выбрать файл** и загрузите файл с тестовыми данными с вашего компьютера.
        1. Включите опцию **Сохранить в {{ objstorage-name }}**.
        1. Выберите или [создайте](../../storage/operations/buckets/create.md) бакет, в который хотите сохранить данные.

1. В зависимости от выбранного способа настройки задайте параметры в блоке **Настройка теста**:

    {% include [test settings](../../_includes/load-testing/test-settings.md) %}

1. Нажмите **Создать**.