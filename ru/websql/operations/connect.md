# Управление подключениями

В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) сервиса {{ websql-full-name }} вы можете:

* создать подключение к публично доступным БД или кластерам управляемых БД. Подробнее о создании подключений см. в [инструкции](create-connection.md);
* [посмотреть информацию о кластере управляемых БД](#view-cluster-settings);
* [посмотреть информацию о подключении](#view-connection-settings);
* [посмотреть информацию о БД](#view-db-settings);
* [изменить настройки подключения](#change-connection-settings);
* [обновить подключение](#update-connection);
* [добавить подключение к кластеру управляемых БД](#add-connection-to-cluster);
* [удалить неиспользуемое подключение](#delete-connection).

## Посмотреть информацию о кластере управляемых БД {#view-cluster-settings}

Чтобы посмотреть настройки кластера:

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите кластер управляемых БД.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия кластера и выберите **Информация о кластере**.

Откроется панель с настройками кластера.

## Просмотреть информацию о подключении {#view-connection-settings}

Чтобы посмотреть настройки подключения:

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите подключение.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия подключения и выберите **Информация о подключении**.

Откроется панель с настройками подключения.

В рамках одного подключения выделены группы таблиц и представлений (`VIEW`). Подробнее о том, как посмотреть информацию о таблицах и представлениях, см. в [инструкции](view-db-objects-info.md).

## Посмотреть информацию о БД {#view-db-settings}

Чтобы посмотреть настройки базы данных:

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите БД.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия БД и выберите **Информация о базе данных**.

Откроется панель с настройками БД.

## Изменить настройки подключения {#change-connection-settings}

### Изменить настройки подключения к кластеру управляемых БД {#change-cluster-connection-settings}

Чтобы изменить настройки подключения:

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите подключение.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия подключения и выберите **Изменить подключение**.
1. Укажите новое имя подключения.
1. В поле **Кластер** выберите кластер управляемых БД, к которому вы хотите подключиться. 
1. Укажите **Имя пользователя**, от лица которого будете подключаться к БД в кластере.
1. Если вы хотите изменить пароль, выберите настройку **Изменить пароль** и введите новый пароль пользователя.
1. Перечислите **Базы данных**, к которым вы хотите подключиться. Вы можете подключиться только к существующим в этом кластере БД. У пользователя, которого вы указали, должен быть настроен доступ к ним.
1. Нажмите **Применить**.

### Изменить настройки подключения к публично доступной БД {#change-public-db-connection-settings}

Чтобы изменить настройки подключения:

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите подключение.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия подключения и выберите **Изменить подключение**.
1. Укажите новое имя подключения.
1. В разделе **Хосты** задайте конфигурацию хостов:
    * укажите FQDN хоста c БД и номер порта для подключения к БД;
    * для {{ CH }} также укажите порт Native Protocol и имя [шарда](../../managed-clickhouse/operations/shards.md#list-shards).
    * (Опционально) Включите использование [TLS](../../glossary/tls.md).

        Если в вашей компании есть [центр авторизации (CA)](../../glossary/tls.md#authentication), по умолчанию будет использоваться выпущенный им сертификат. Если в компании нет СА, загрузите TLS-сертификат сервера.

1. Укажите **Имя пользователя**, от лица которого будете подключаться к БД в кластере.
1. Если вы хотите изменить пароль, выберите настройку **Изменить пароль** и введите новый пароль пользователя.
1. Перечислите **Базы данных**, к которым вы хотите подключиться. Вы можете подключиться только к существующим БД. У пользователя, которого вы указали, должен быть настроен доступ к ним.
1. Нажмите **Применить**.

## Обновить подключение {#update-connection}

В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) можно просматривать статус подключений и обновлять их или переподключаться к БД. Активные подключения отмечены зеленым цветом, неактивные — красным.

{% note tip %}

Используйте поле поиска на панели **Подключения**, чтобы найти подключение с нужной БД, таблицей или схемой.

{% endnote %}

### Обновить активное подключение {#update-active-connection}

1. Выберите активное подключение к БД.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия БД и выберите **Обновить базу данных**.

В результате будет обновлена вся иерархия данной БД, включая таблицы и представления. Если какую-то таблицу удалили из БД, то для отображения изменений в {{ websql-full-name }} необходимо обновить подключение.

Для обновления всех активных подключений нажмите ![image](../../_assets/console-icons/arrows-rotate-right.svg) в правом верхнем углу раздела ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}).

### Переподключить неактивное подключение {#reconnect-inactive-connection}

1. Выберите неактивное подключение.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия БД и выберите **Переподключиться**.

## Добавить подключение к кластеру управляемых БД {#add-connection-to-cluster}

Подключения к БД одного кластера группируются в разворачивающийся список под именем этого кластера. В настройках подключения у таких БД URL и номер порта будут одинаковыми.

Если у вас уже есть подключение к БД в кластере, вы можете добавить подключение к другой БД в этом же кластере:

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите нужный кластер в дереве подключений.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от названия кластера и выберите **Добавить подключение**.
1. В появившемся окне поля **Тип базы данных** и **Кластер** будут заполнены автоматически. Укажите название подключения, имя БД и необходимые для доступа к ней логин и пароль.
1. Нажмите **Подключиться**.

## Удалить подключение {#delete-connection}

1. В разделе ![image](../../_assets/console-icons/folder-tree.svg) [**Подключения**]({{ websql-link }}) выберите подключение.
1. Нажмите ![image](../../_assets/console-icons/ellipsis.svg) справа от его названия и выберите **Удалить подключение**.
1. В открывшемся окне нажмите **Применить**.

Подключение будет удалено как из {{ websql-full-name }}, так и из {{ connection-manager-name }} сервиса {{ metadata-hub-name }}.

Вы также можете удалить подключение в {{ connection-manager-name }} сервиса {{ metadata-hub-name }}. Это подключение автоматически удалится из {{ websql-full-name }}. Удаление осуществляется только в рамках каталога пользователя.

{% include [clickhouse-disclaimer](../../_includes/clickhouse-disclaimer.md) %}
