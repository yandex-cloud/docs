# Изменение настроек кластера

После создания кластера вы можете:

* [Изменить имя и описание кластера](#change-name-and-description).

* [Изменить класс хостов](#change-resource-preset).

* [Увеличить размер дисков хостов {{ RD }}](#change-disk-size).

* [Настраивать серверы](#change-redis-config) {{ RD }} согласно [документации {{ RD }}](https://redis.io/documentation). Список поддерживаемых настроек приведен [в справочнике API](../api-ref/Cluster/update.md).

## Изменить имя и описание кластера {#change-name-and-description}

{% list tabs %}

- Консоль управления

  1. Перейдите на страницу каталога и выберите сервис **{{ mrd-name }}**.
  2. Выберите кластер и нажмите на кнопку **Изменить кластер** в верхней части страницы.
  3. В разделе **Базовые параметры** задайте новые имя и описание кластера.
  4. Нажмите кнопку **Сохранить изменения**.

- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы изменить [класс хостов](../concepts/instance-types.md) для кластера:
  
  1. Посмотрите описание команды CLI для изменения кластера:
  
     ```
     $ {{ yc-mdb-rd }} cluster update --help
     ```
  
  2. Укажите новые имя и описание в команде изменения кластера:
  
     ```
     $ {{ yc-mdb-rd }} cluster update <имя кластера> \
          --name "<новое имя кластера>" \
          --description "<новое описание кластера>"
     ```
- API
  
  Чтобы изменить имя и описание кластера, воспользуйтесь методом API [update](../api-ref/Cluster/update.md): передайте в запросе нужные значения в параметрах `name` и `description`.

{% endlist %}


## Изменить класс хостов {#change-resource-preset}

{% list tabs %}

- Консоль управления

  1. Перейдите на страницу каталога и выберите сервис **{{ mrd-name }}**.
  2. Выберите кластер и нажмите на кнопку **Изменить кластер** в верхней части страницы.
  3. В разделе **Класс хоста** задайте:
     * **Тип** - тип виртуальной машины, на которой разворачиваются хосты:
        * `high-memory` — с увеличенным объемом RAM на 1 vCPU;
        * `burstable` — с неполной гарантированной долей vCPU. ВМ с гарантированной долей меньше 100% обеспечивают указанный уровень производительности с вероятностью временного повышения вплоть до 100%. Кластеры с такими хостами подходят для задач, которые не требуют постоянной гарантии производительности (например, тестирование).
     * **Память** - объем оперативной памяти, доступный {{ RD }} на хосте.
  4. Нажмите кнопку **Сохранить изменения**.

- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы изменить [класс хостов](../concepts/instance-types.md) для кластера:
  
  1. Посмотрите описание команды CLI для изменения кластера:
  
     ```
     $ {{ yc-mdb-rd }} cluster update --help
     ```
  
  1. Запросите список доступных классов хостов (в колонке `ZONES` указаны зоны доступности, в которых можно выбрать соответствующий класс):
  
     {% if audience != "internal" %}
     
     ```bash
     $ {{ yc-mdb-rd }} resource-preset list

     +-------------+--------------------------------+----------+
     |     ID      |            ZONE IDS            |  MEMORY  |
     +-------------+--------------------------------+----------+
     | b1.nano     | ru-central1-a, ru-central1-b,  | 2.0 GB   |
     |             | ru-central1-c                  |          |
     | b1.small    | ru-central1-a, ru-central1-b,  | 4.0 GB   |
     |             | ru-central1-c                  |          |
     | hm1.nano    | ru-central1-a, ru-central1-b,  | 8.0 GB   |
     |             | ru-central1-c                  |          |
     | hm1.micro   | ru-central1-a, ru-central1-b,  | 12.0 GB  |
     | ...                                                     |
     +-----------+----------------------------------+----------+
     ```
     
     {% else %}
     
     ```bash
     $ {{ yc-mdb-rd }} resource-preset list
     ```
     
     {% endif %}
  
  3. Укажите нужный класс в команде изменения кластера:
  
     ```
     $ {{ yc-mdb-rd }} cluster update <имя кластера>
          --resource-preset <ID класса>
     ```
     
     {{ mrd-short-name }} запустит операцию изменения класса хостов для кластера.
     
- API
  
  Изменить [класс хостов](../concepts/instance-types.md) кластера можно с помощью метода API [update](../api-ref/Cluster/update.md): передайте в запросе нужные значения в параметре `configSpec.resources.resourcePresetId`.
  
  Список поддерживаемых значений запрашивайте методом [list](../api-ref/ResourcePreset/list.md) для ресурсов `ResourcePreset`.
  
{% endlist %}


## Увеличить размер дисков хостов {{ RD }} {#change-disk-size}

{% list tabs %}

- Консоль управления

  1. Перейдите на страницу каталога и выберите сервис **{{ mrd-name }}**.
  2. Выберите кластер и нажмите на кнопку **Изменить кластер** в верхней части страницы.
  3. В разделе **Класс хоста** в поле **Размер диска** задайте размер дисков хостов {{ RD }}. Размер жесткого диска можно только увеличить.
  4. Нажмите кнопку **Сохранить изменения**.

- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы увеличить размер дисков хостов {{ RD }}:
  
  1. Посмотрите описание команды CLI для изменения кластера:
  
     ```
     $ {{ yc-mdb-ch }} cluster update --help
     ```

  1. Проверьте, что в облаке хватает квоты на увеличение размера дисков: откройте страницу [Квоты]({{ link-console-quotas }}) для вашего облака и проверьте, что в секции **Managed Databases** не исчерпано место в строке **hddSpace**.

  1. Укажите нужный размер диска в ГБ в команде изменения кластера. Новый объем должен быть больше предыдущего.
  
     ```
     $ {{ yc-mdb-ch }} cluster update <имя кластера>
          ---disk-size <размер диска в ГБ>
     ```
     
     {% note info %}
     
     Максимальный размер диска зависит от выбранного [класса хостов](../concepts/instance-types.md).
     
     {% endnote %}
     

     Если все условия выполнены, {{ mrd-short-name }} запустит операцию по увеличению размера дисков хостов {{ RD }}.
     
- API
  
  Изменить размер дисков хостов {{ RD }} можно с помощью метода API [update](../api-ref/Cluster/update.md): передайте в запросе нужные значения в параметре `configSpec.resources.diskSize`.
  
  Проверьте, что в облаке хватает квоты на увеличение размера дисков: откройте страницу [Квоты]({{ link-console-quotas }}) для вашего облака и проверьте, что в секции **Managed Databases** не исчерпано место в строке **hddSpace**.
  
{% endlist %}


## Изменить настройки {{ RD }} {#change-redis-config}

Вы можете изменить настройки СУБД для хостов вашего кластера. Все поддерживаемые настройки описаны [в справочнике API](../api-ref/Cluster/update.md).

{% list tabs %}

- Консоль управления

  1. Перейдите на страницу каталога и выберите сервис **{{ mrd-name }}**.
  2. Выберите кластер и нажмите на кнопку **Изменить кластер** в верхней части страницы.
  3. В разделе **Настройки СУБД** нажмите кнопку **Настроить**.
  4. Настройте доступные параметры в соответствии с [документацией {{ RD }}](https://redis.io/documentation).
  5. Нажмите кнопку **Сохранить**.


- API
  
  Изменить настройки СУБД для кластера можно с помощью метода API [update](../api-ref/Cluster/update.md): передайте в запросе нужные значения в параметре `configSpec.redisConfig_5_0`.
  
{% endlist %}
