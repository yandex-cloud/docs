# Как начать работать с {{ mrd-short-name }}

{% if audience == "internal" %}

Для внутреннего сервиса MDB развернут [веб-интерфейс]({{console-link}}), где кластер БД можно накликать. Подробнее про квоты и соответствие ABC-сервисов облакам и каталогам читайте в разделе [{#T}](../mdb/access.md).

## Доступ к кластерам БД {#access}

В [Панчере](https://puncher.yandex-team.ru/) уже сделаны правила для доступа к кластерам MDB: из [серверных сетей Яндекса](https://puncher.yandex-team.ru/tasks?id=5cb878a6d5626d264a13ff8a), и [для штатных разработчиков](https://puncher.yandex-team.ru/tasks?id=5d0254aad89cb03fee5006d4).

Если этих правил не хватает, запросите доступ к макросу `_PGAASINTERNALNETS_`. Для подключения к кластерам {{ RD }} нужен доступ к портам 26379 (Sentinel) и 6379 (Redis).


{% include [cli-setup](../_includes/mdb/internal/cli-setup.md) %}

   Если все сделано правильно, должен заработать запрос списка кластеров:

   ```bash
   {{ yc-mdb-rd }} cluster list
   ```

{% else %}

Чтобы воспользоваться сервисом, нужно создать кластер и виртуальную машину, с которой вы будете к нему подключаться:

1. Чтобы создать кластер баз данных, понадобится только доступный вам каталог в Яндекс.Облаке. Если у вас уже есть каталог в Яндекс.Облаке, откройте страницу этого каталога в консоли управления. Если каталога еще нет, создайте его:

    {% include [create-folder](../_includes/create-folder.md) %}

1. Создайте виртуальную машину (на основе [Linux](../compute/quickstart/quick-create-linux.md) или [Windows](../compute/quickstart/quick-create-windows.md)), с которой вы будете обращаться к кластеру БД.

{% endif %}

Быстро создать кластер и проверить подключение к нему:

1. В консоли управления выберите каталог, в котором нужно создать кластер БД.
1. Выберите сервис **{{ mrd-full-name }}**.
1. Нажмите кнопку **Создать кластер**.
1. Задайте параметры кластера и нажмите кнопку **Создать кластер**.
1. Когда кластер будет готов к работе, его статус на панели {{ mrd-short-name }} сменится на **RUNNING**.
1. К БД можно подключиться с помощью утилиты [redis-cli](https://redis.io/topics/rediscli):
    ```
    $ redis-cli -h <FQDN любого хоста> \
                -p 26379
    $ <FQDN хоста>:26379> sentinel get-master-addr-by-name <имя кластера>
    1) "<имя мастера>"
    2) "6379"

    $ redis-cli -h <FQDN мастера> \
                -p 6379
    $ <FQDN мастера>:6379> auth <пароль для кластера>
    OK
    $ <FQDN мастера>:6379> set foo bar
    OK
    ```
