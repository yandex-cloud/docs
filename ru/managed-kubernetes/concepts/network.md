# Сеть в {{ managed-k8s-name }}

При [создании кластера {{ k8s }}](../operations/kubernetes-cluster/kubernetes-cluster-create.md) вы можете задать:
* [Сеть и подсеть](../../vpc/concepts/network.md#network) для [мастера](./index.md#master).
* Диапазон IP-адресов для [подов](./index.md#pod).
* Диапазон IP-адресов для [сервисов](./index.md#service).
* Маску подсети узлов.

Дополнительно вы можете:
* Запросить [публичный IP-адрес](../../vpc/concepts/ips.md) для доступа к [кластеру](./index.md#kubernetes-cluster) извне {{ yandex-cloud }}.
* Настроить [контроллеры сетевых политик](network-policy.md) для управления адресным пространством внутри кластера.

## Сетевые ресурсы {#network-resources}

При работе с кластером {{ k8s }} на инфраструктуре {{ yandex-cloud }} задействуются следующие ресурсы:
* Подсети.

  При создании кластера без туннельного режима {{ managed-k8s-name }} резервирует две подсети: для подов и сервисов. Для кластера с [туннельным режимом](network-policy.md#cilium) подсети в адресном пространстве облачной сети не резервируются.
* Публичные IP-адреса.

  При [создании группы узлов](../operations/node-group/node-group-create.md) с публичным адресом каждому узлу в группе будет присвоен публичный IP-адрес.

## Управление адресным пространством {#address-space}

Для кластеров {{ k8s }}, не использующих туннельный режим, установлены следующие ограничения:
* Диапазоны создаваемых подсетей не должны пересекаться с уже существующими диапазонами.
* Для узлов доступна только половина возможного диапазона подсетей.

Для подов, узлов и сервисов таких кластеров доступны диапазоны подсетей:
* `10.0.0.0/8`.
* `172.16.0.0/12`.
* `192.168.0.0/16`.

Маска подсети узлов и размер подсети для подов определяет максимальное количество узлов в кластере и максимальное количество подов на узле.

{% note info %}

Изменение значений маски подсети узлов или размера подсети для подов кластера влияет на параметры только вновь создаваемых групп узлов. Параметры существующих групп узлов при этом не изменяются.

{% endnote %}

Для кластеров в [туннельном режиме](network-policy.md#cilium) доступны диапазоны подсетей:
* `10.0.0.0/8`.
* `172.16.0.0/12`.
* `192.168.0.0/16`.
* `100.64.0.0/10`.

{% note info %}

Для таких кластеров не действуют ограничения в половину возможного диапазона подсетей и пересечения диапазонов.

{% endnote %}

Например, при [создании кластера](../operations/kubernetes-cluster/kubernetes-cluster-create.md) со следующими параметрами:
* Туннельный режим не задействован.
* Диапазон IP-адресов для подов: `10.1.0.0/16`.
* Диапазон IP-адресов для сервисов: `10.2.0.0/16`.
* Маска подсети узлов: `24`.

Для кластера будут доступны:
* Диапазоны IP-адресов для узлов: `10.1.128.0/24` – `10.1.255.0/24`.
* IP-адреса для подов на каждом узле: `10.1.128.2` – `10.1.128.255`, `10.1.129.2` – `10.1.129.255`, и т. д.

## Имя узла и FQDN {#hostname}

{{ managed-k8s-name }} генерирует имя для каждого узла при его создании. Это имя будет являться [доменным именем узла (FQDN)](../../compute/concepts/network.md#hostname). Имя узла и FQDN невозможно изменить.

Используйте FQDN для доступа к узлу в рамках одной облачной сети. Подробнее см. в разделе [{#T}](../../vpc/concepts/address.md).

## Публичный доступ к узлам кластера {#public-access-to-a-host}

Любой узел кластера {{ k8s }} может быть доступен извне {{ yandex-cloud }}, если вы запросили публичный адрес при создании группы узлов.

Чтобы подключиться к такому узлу из интернета, используйте его публичный IP-адрес.

Вы можете запросить публичный IP-адрес:
* для мастера только при [создании кластера](../operations/kubernetes-cluster/kubernetes-cluster-create.md);
* для узлов при [создании](../operations/node-group/node-group-create.md) или [изменении](../operations/node-group/node-group-update.md#node-internet-access) группы.

При удалении узла соответствующий ему публичный IP-адрес отзывается.