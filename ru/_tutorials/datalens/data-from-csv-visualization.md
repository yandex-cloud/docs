# Визуализация данных из файла

В качестве исходных данных будет использоваться файл [SuperHeroes.csv](https://storage.yandexcloud.net/datalens/SuperHeroes.csv) с информацией о супергероях — имя, пол, раса, издатель комиксов и т. д.

В этом сценарии продемонстрировано, как {{ datalens-short-name }} можно использовать для исследования зависимостей, например:
- Веса супергероя от его пола.
- Веса супергероя от его принадлежности к лагерю хороших или плохих.

Для визуализации и исследования данных [подготовьте {{ datalens-short-name }} к работе](#before-you-begin), затем выполните следующие шаги:

1. [Создайте подключение](#step1).
1. [Создайте датасет](#step2).
1. [Создайте первый чарт](#step3).
1. [Создайте второй чарт](#step4).
1. [Создайте дашборд](#step5).
1. [Добавьте чарты на дашборд](#step6).
1. [Добавьте селекторы на дашборд](#step7).
1. [Настройте отображение виджетов и приступите к исследованию зависимостей](#step8).
1. [Продолжите исследования данных о супергероях](#step9).


## Перед началом работы {#before-you-begin}

{% include [before-you-begin](../includes/before-you-begin-datalens.md) %}


## Шаг 1. Создайте подключение и датасет {#step1}

Создайте датасет на основе [подключения](../../datalens/concepts/connection.md) типа **Файлы**.

1. Перейдите на [главную страницу]({{ link-datalens-main }}) {{ datalens-short-name }}.
1. Нажмите кнопку **Создать подключение**.

   ![image](../../_assets/datalens/solution-01/01-create-connection.png)

1. Выберите **Файлы**.

   ![image](../../_assets/datalens/solution-01/select-file-connection.png)

1. Нажмите кнопку **Загрузить файлы**.

   ![image](../../_assets/datalens/solution-01/03-choose-file.png)

1. Выберите необходимый файл. В данном примере **SuperHeroes.csv** ([ссылка на скачивание](https://storage.yandexcloud.net/datalens/SuperHeroes.csv)).

   Дождитесь, когда на экране появится содержимое таблицы.

1. Нажмите кнопку **Создать подключение**.

   ![image](../../_assets/datalens/solution-01/04-save-file-connection.png)

1. Введите имя подключения `SuperHeroes` и нажмите **Создать**.

   ![image](../../_assets/datalens/solution-01/04-2-save-file-connection.png)

1. После сохранения нажмите кнопку **Создать датасет**.

   ![image](../../_assets/datalens/solution-01/05-create-dataset_file_connection.png)

## Шаг 2. Создайте датасет {#step2}

1. Если в рабочей области нет таблицы **SuperHeroes.csv**, то перетащите таблицу из панели выбора в рабочую область.

    ![image](../../_assets/datalens/solution-01/06-Drag-Table-file.png)

1. Перейдите на вкладку **Поля**.

    ![image](../../_assets/datalens/solution-01/07-Fields-Tab.png)

1. Создайте поле с показателем среднего веса супергероя:

    1. Нажмите значок ![image](../../_assets/datalens/horizontal-ellipsis.svg) в строке **Weight**.
    1. Выберите **Дублировать**.

         ![image](../../_assets/datalens/solution-01/08-Weight-Duplication.png)

    1. Переименуйте дубликат поля **Weight (1)** в **Weight avg**: нажмите на имя строки, удалите текущее имя и введите новое.
    1. В столбце **Агрегация** для поля **Weight avg** выберите **Среднее**.

        ![image](../../_assets/datalens/solution-01/09-Weght-AVG.png)

1. В правом верхнем углу нажмите кнопку **Сохранить**.

    ![image](../../_assets/datalens/solution-01/10-Save-Dataset.png)

1. Введите имя датасета **SuperHeroes dataset**, нажмите **Создать**.

1. После сохранения датасета нажмите **Создать чарт**.

    ![image](../../_assets/datalens/solution-01/11-Create-Chart.png)

## Шаг 3. Создайте первый чарт {#step3}

Для визуализации разделения по половому признаку создайте [чарт](../../datalens/concepts/chart/index.md) — столбчатую диаграмму.

1. Добавьте на график имена супергероев. Для этого из раздела **Измерения** перетащите поле **Name** в секцию **X**.
1. Добавьте на график веса супергероев. Для этого из раздела **Показатели** перетащите поле **Weight avg** в секцию **Y**.

    ![image](../../_assets/datalens/solution-01/12-Chart-XY.png)

1. Отсортируйте график по весам, например, по убыванию.

    1. Из первой колонки из раздела **Показатели** перетащите поле **Weight avg** в секцию **Сортировка**.

        ![image](../../_assets/datalens/solution-01/13-Chart-Sort.png)

1. Оставьте на графике только тех супергероев, чей вес известен (больше нуля).

    1. Из первой колонки из раздела **Показатели** перетащите поле **Weight avg** в секцию **Фильтры**.
    1. В открывшемся окне укажите операцию **Больше** и значение **0**.
    1. Нажмите кнопку **Применить фильтр**.

        ![image](../../_assets/datalens/solution-01/14-Chart-Filter.png)

1. Добавьте на график цветовое разделение супергероев по половому признаку. Для этого из раздела **Измерения** перетащите поле **Gender** в секцию **Цвета**.

    ![image](../../_assets/datalens/solution-01/15-Chart-Color.png)

1. Переопределите цвета значений измерения **Gender**.

    1. Нажмите значок настройки в секции **Цвета**.

        ![image](../../_assets/datalens/solution-01/16-Chart-Color-Set-Buttun.png)

    1. Выберите цвета: **Female** — розовый, **Male** — синий, **unknown** — оранжевый.

        ![image](../../_assets/datalens/solution-01/17-Chart-Color-Set1.png)

1. Сохраните чарт.

    1. В правом верхнем углу нажмите кнопку **Сохранить**.

        ![image](../../_assets/datalens/solution-01/18-Chart-Save.png)

    1. В открывшемся окне введите название чарта **SuperHeroes — gender** и нажмите кнопку **Сохранить**.

## Шаг 4. Создайте второй чарт {#step4}

Для визуализации по принадлежности к лагерю хороших или плохих создайте чарт — столбчатую диаграмму.

1. Скопируйте чарт, получившийся на предыдущем шаге.

    1. Нажмите значок галочки рядом с кнопкой **Сохранить** в верхнем правом углу.
    1. Нажмите **Сохранить как**.

        ![image](../../_assets/datalens/solution-01/19-Chart-SaveAs.png)

    1. В открывшемся окне введите название нового чарта **SuperHeroes — alignment**.
    1. Нажмите кнопку **Готово**.

1. Добавьте на график цветовое разделение супергероев по принадлежности к лагерю хороших или плохих. Для этого из раздела **Измерения** перетащите поле **Alignment** в секцию **Цвета**.

    Предыдущее значение секции (поле **Gender**) будет заменено на **Alignment**.

    ![image](../../_assets/datalens/solution-01/20-Charts-Alignment.png)

1. Переопределите цвета значений измерения **Alignment**.

    1. Нажмите значок настройки в секции **Цвета**.
    1. Выберите цвета: **good** — зеленый, **neutral** — синий, **bad** — красный, **unknown** — оранжевый.

        ![image](../../_assets/datalens/solution-01/21-Chart-Color-Set2.png)

1. В правом верхнем углу нажмите кнопку **Сохранить**.

## Шаг 5. Создайте дашборд {#step5}

Создайте [дашборд](../../datalens/concepts/dashboard.md), на который будут добавлены чарты.

1. Перейдите на [главную страницу]({{ link-datalens-main }}) {{ datalens-short-name }}.
1. Нажмите кнопку **Создать дашборд**.

    ![image](../../_assets/datalens/solution-01/22-Create-Dashboard.png)

1. Введите название дашборда **SuperHeroes dashboard** и нажмите кнопку **Создать**.

## Шаг 6. Добавьте чарты на дашборд {#step6}


1. При первом открытии после сохранения дашборд открывается в режиме редактирования. Если вы открыли его повторно, то нажмите **Редактировать** в правом верхнем углу.

    ![image](../../_assets/datalens/solution-01/23-Dash-Edit.png)

1. Нажмите кнопку **Добавить**.
1. Выберите **Чарт**.

    ![image](../../_assets/datalens/solution-01/24-Dash-Add-Chart.png)

1. В открывшемся окне нажмите кнопку **Выбрать** и выберите чарт **SuperHeroes — gender**.

   После этого автоматически заполнится поле **Название**.

1. Нажмите кнопку **Добавить**.

    ![image](../../_assets/datalens/solution-01/25-Dash-Gender-Add.png)

1. Добавьте еще один чарт. Пройдите шаг 6 сначала и укажите в пункте 4 чарт **SuperHeroes — alignment**.

    ![image](../../_assets/datalens/solution-01/26-Dash-Aligmnnent-Add.png)

## Шаг 7. Добавьте селекторы на дашборд {#step7}

Добавьте [селекторы](../../datalens/dashboard/selector.md), чтобы иметь возможность фильтровать супергероев по расам (поле **Race**) и издательствам (поле **Publisher**).

1. Нажмите кнопку **Добавить**.
1. Выберите **Селектор**.

    ![image](../../_assets/datalens/solution-01/27-Add-Selector.png)

1. Выберите датасет **SuperHeroes dataset**.
1. Выберите поле **Race**.

    После этого автоматически заполнится поле **Название**.

1. Нажмите галочку **Показывать** напротив заголовка селектора.
1. Включите опцию **Множественный выбор**.
1. Нажмите кнопку **Добавить**.

    ![image](../../_assets/datalens/solution-01/28-Selector-Race.png)

1. Добавьте еще один селектор. Пройдите шаг 7 сначала и укажите в пункте 4 поле **Publisher**.

    ![image](../../_assets/datalens/solution-01/29-Selector-Publisher.png)

## Шаг 8. Настройте отображение виджетов и приступите к исследованию зависимостей {#step8}

1. Перетащите селекторы наверх страницы рядом друг с другом.
1. Растяните чарты по ширине и расположите рядом друг с другом.
1. В правом верхнем углу нажмите кнопку **Сохранить**.

    ![image](../../_assets/datalens/solution-01/30-Dash.png)

1. Примените различные фильтры и исследуйте зависимости веса от пола и лагеря супергероя.

    ![image](../../_assets/datalens/solution-01/31-Final-Dash.png)

    В датасете, который был исследован, прослеживаются следующие зависимости:
    - Мужчины в основном тяжелее женщин.
    - Плохие супергерои в основном тяжелее хороших.

## Шаг 9. Продолжите исследование данных о супергероях {#step9}

Вы можете создать новые показатели в датасете, например, средний рост (среднее от поля **Height**) и количество супергероев (количество уникальных от поля **Name**) и ответить на вопросы:

- Представителей какой расы больше всего?
- Есть ли зависимость роста от принадлежности к лагерю хороших или плохих?
- Какая студия создала больше всего супергероев?
