---
title: Управление доступом сервисов к ресурсам в облаке пользователя
description: Из этой статьи вы узнаете об управлении доступом сервисов к ресурсам пользователя в облаке {{ yandex-cloud }}.
---

# Доступ сервисов к ресурсам пользователя



{% include notitle [preview](../../_includes/note-preview.md) %}


Платформа {{ yandex-cloud }} включает в себя набор [сервисов](../../overview/concepts/services.md). Некоторым сервисам для выполнения определенных задач необходим доступ к различным ресурсам в [облаке](../../resource-manager/concepts/resources-hierarchy.md#cloud) пользователя. Например, сервису {{ connection-manager-full-name }} для управления подключениями к базам данных требуются права на создание секретов {{ lockbox-full-name }} в облаке пользователя, а также права на управление созданными секретами.

{{ iam-full-name }} позволяет управлять доступом сервисов к ресурсам в облаке пользователя, при необходимости [включая](../operations/service-control/enable-disable.md#enable) или [выключая](../operations/service-control/enable-disable.md#disable) нужные сервисы.

_Доступ сервиса_ — это совокупность прав доступа, необходимых для создания и функционирования ресурсов этого сервиса в облаке пользователя. Такие права доступа назначаются специальным сервисным аккаунтам — [сервисным агентам](#service-agent), от имени которых сервис осуществляет доступ к ресурсам пользователя в облаке.

## Статус сервиса {#access-status}

Сервисы в облаке {{ yandex-cloud }} могут иметь следующие статусы:

* `DEFAULT` — статус по умолчанию.

    У сервиса нет [сервисных агентов](#service-agent), но при попытке выполнить в сервисе операцию, требующую доступа к другим ресурсам в облаке пользователя (например, создать [подключение](../../metadata-hub/concepts/connection-manager.md) в сервисе {{ connection-manager-full-name }}), сервисные агенты будут автоматически созданы, а статус сервиса изменится на `ENABLED`.
* `ENABLED` — сервис включен. У сервиса есть сервисные агенты, сервис имеет доступ к ресурсам в облаке пользователя.

    Когда статус сервиса в облаке меняется на `ENABLED`, для этого сервиса в данном облаке автоматически создаются сервисные агенты, обладающие необходимыми правами на действия с ресурсами пользователя в этом облаке.

* `DISABLED` — сервис выключен. У сервиса нет сервисных агентов, сервис не имеет доступа к ресурсам в облаке пользователя.

    Когда статус сервиса в облаке меняется на `DISABLED`, сервисные агенты этого сервиса в данном облаке автоматически удаляются.

## Сервисные агенты {#service-agent}

_Сервисные агенты_ — это специальные системные сервисные аккаунты, принадлежащие определенным сервисам в облаке пользователя и предоставляющие таким сервисам доступ к ресурсам в этом облаке. Количество сервисных агентов и конкретный набор доступов, выданных им, могут различаться в зависимости от сервиса, которому эти сервисные агенты принадлежат.

{% note info %}

В настоящее время нельзя просмотреть или изменить набор ролей, назначенных сервисным агентам по умолчанию. В будущем такая возможность появится.

{% endnote %}

Сервисные агенты создаются в особом системном каталоге в облаке пользователя. Этот каталог управляется системой и недоступен пользователю даже при наличии у него ролей администратора или владельца облака.

У сервисного агента есть права на действия с ресурсами только в том облаке, в котором этот сервисный агент создан.

Пользователь не может напрямую создавать или удалять сервисных агентов. Сервисные агенты в необходимом количестве и с нужными правами доступа автоматически создаются при [включении сервисов](../operations/service-control/enable-disable.md#enable) и автоматически удаляются при их [выключении](../operations/service-control/enable-disable.md#disable). При повторном включении сервиса для него создаются новые сервисные агенты с новыми идентификаторами.

Роли, автоматически назначенные сервисным агентам, отозвать нельзя: такие доступы можно удалить, лишь [выключив](../operations/service-control/enable-disable.md#disable) сервис, в результате чего его сервисные агенты будут удалены.


Если у сервиса есть ресурсы, использующие доступ к другим ресурсам в облаке пользователя, выключить этот сервис нельзя. Чтобы выключить такой сервис, предварительно удалите все ресурсы этого сервиса, использующие доступ к другим ресурсам в данном облаке пользователя.

Если в облаке пользователя выключить сервис, но такой сервис продолжит функционировать, но созданные в данном облаке ресурсы этого сервиса не смогут получать доступ к другим ресурсам в этом облаке.

## Доступом каких сервисов можно управлять {#service-list}

В настоящий момент вы можете управлять доступом следующих сервисов:

Сервис | Идентификатор
--- | ---
{{ compute-full-name }} — [Шифрование дисков](../../compute/concepts/encryption.md) | `disk-encryption`
[{{ ml-platform-full-name }}](../../datasphere/index.yaml) | `datasphere`
{{ metadata-hub-full-name }} — [{{ connection-manager-name }}](../../metadata-hub/concepts/connection-manager.md) | `connection-manager`
{{ sd-full-name }} — [Контроль данных (DSPM)](../../security-deck/concepts/dspm.md) | `dspm`
[{{ websql-full-name }}](../../websql/index.yaml) | `websql`

В будущем у администраторов облака появится возможность управлять доступами всех сервисов, требующих прав на действия с ресурсами в облаке {{ yandex-cloud }}. С помощью [CLI](../../cli/cli-ref/managed-services/iam/service-control/list.md) вы можете [получить](../operations/service-control/list-get.md#list) актуальный список сервисов, доступом которых можно управлять.

{% include [service-control-access](../../_includes/iam/service-control-access.md) %}

#### См. также {#see-also}

* [{#T}](../operations/service-control/list-get.md)
* [{#T}](../operations/service-control/enable-disable.md)
