# Безопасное использование Яндекс.Облака

В разделе представлены рекомендации по использованию возможностей сервиса {{ iam-short-name }} для обеспечения безопасной работы с сервисами Яндекс.Облака.

## Не давайте лишних прав доступа {#restrict-access}

Для критически важных ресурсов:

* Назначайте минимально необходимые для работы [роли](../concepts/access-control/roles.md). Например, чтобы в {{ compute-name }} разрешить использовать образы для создания виртуальных машин, [назначьте роль](../operations/roles/grant.md) `compute.images.user`, а не `editor` или выше.
* Старайтесь назначать сервисные роли вместо примитивных (`viewer`, `editor`, `admin`). Примитивные роли действуют для ресурсов любого из сервисов Яндекс.Облака.

    Используйте примитивные роли, если нет подходящей сервисной роли или вы хотите дать пользователю широкие полномочия.
* Назначайте только роли, которые необходимы сейчас. Не назначайте роли, которые могут потребоваться только в будущем.
* Помните, что когда вы назначаете роль на каталог или облако, разрешения этой роли [унаследуют все вложенные ресурсы](../concepts/access-control/index.md#inheritance).
* Назначайте роли [администратора](../concepts/access-control/roles.md#admin) и [владельца облака](../concepts/access-control/roles.md#owner) только тем, кто должен управлять доступом к ресурсам в вашем проекте.

    Администратор может лишить прав доступа другого администратора, а владелец — отозвать у другого владельца его роль. Еще эти роли включают все разрешения роли `editor` — они позволяют создавать, изменять и удалять ресурсы.

## Защитите свой аккаунт на Яндексе {#protect-account}

* {% include [yandex-account-2fa-warning.md](../../_includes/iam/yandex-account-2fa-warning.md) %}
* Держите в секрете ваш [OAuth-токен](../concepts/authorization/oauth-token.md), с его помощью можно получить [IAM-токен](../concepts/authorization/iam-token.md) и выполнять любые операции в облаке от вашего имени.

    Если кто-то мог узнать ваш OAuth-токен, [отзовите его](https://yandex.ru/dev/oauth/doc/dg/reference/token-invalidate-docpage/) и выпустите новый.
* Старайтесь не использовать OAuth-токен для аутентификации, если можно использовать IAM-токен. OAuth-токен действует 1 год, а IAM-токен — {{ iam-token-lifetime }}. Если ваш токен будет скомпрометирован, у злоумышленника будет ограниченное время, чтобы воспользоваться им.

## Используйте сервисные аккаунты {#use-sa}

Используйте [сервисные аккаунты](../concepts/users/service-accounts.md) для автоматизации работы с Яндекс.Облаком и следуйте этим рекомендациям:

* Контролируйте доступ к вашим сервисным аккаунтам. Роль `editor` на сервисный аккаунт позволит пользователю выполнять операции, разрешенные этому сервисному аккаунту. Если сервисный аккаунт — администратор в облаке, то пользователь сможет сделать себя администратором с его помощью.
* Создавайте отдельные сервисные аккаунты для выполнения разных задач. Так вы сможете назначить им только те роли, которые необходимы. В любой момент вы сможете отозвать роли у сервисного аккаунта или удалить его, не затронув другие аккаунты.
* Давайте сервисным аккаунтам имена, которые позволят понять, для чего аккаунт используется и какие разрешения он должен иметь.
* Держите в секрете [ключи сервисного аккаунта](../concepts/users/service-accounts#sa-key) — с их помощью можно выполнять операции от имени сервисного аккаунта. Не храните ключи сервисного аккаунта в исходном коде.

    Периодически отзывайте старые ключи и выпускайте новые. Особенно если кто-то мог узнать ваш секретный ключ.
* Не используйте ключи для аутентификации, если можно использовать [IAM-токен](../concepts/authorization/iam-token.md). Срок жизни ключей неограничен, а IAM-токен действует {{ iam-token-lifetime }}.
* Если вы выполняете операции изнутри виртуальной машины, [привяжите к ней сервисный аккаунт](../../compute/operations/vm-connect/auth-inside-vm.md). Тогда для аутентификации не нужно хранить ключи сервисного аккаунта на виртуальной машине — IAM-токен будет доступен [по ссылке на сервис метаданных](../../compute/operations/vm-connect/auth-inside-vm#auth-inside-vm).