# Мониторинг состояния кластера и хостов

Вы можете отслеживать состояние кластера {{ mmy-name }} и отдельных его хостов с помощью инструментов мониторинга в консоли управления. Эти инструменты предоставляют диагностическую информацию в виде графиков.

Период обновления графиков:

* Для хостов стандартной конфигурации и хостов с увеличенным соотношением количества гигабайт RAM к количеству vCPU (`memory-optimized`): {{ graph-update }}.
* Для хостов с гарантированной долей vCPU ниже 100% (`burstable`): {{ graph-update-burstable }}.

## Мониторинг состояния кластера {#monitoring-cluster}

Для просмотра детальной информации о состоянии кластера {{ mmy-name }}:

1. Перейдите на страницу каталога и выберите сервис **{{ mmy-name }}**.
1. Нажмите на имя нужного кластера и выберите вкладку **Мониторинг**.

На странице появятся следующие графики:

- **Threads** — количество потоков, запущенных демоном `mysqld`.

    - **Threads connected** — количество открытых потоков.

        Приближение графика к максимальному значению может означать, что открытые соединения не закрываются.

        Максимальное значение задает параметр `max_connections`, указанный в [дополнительных настройках {{ MY }}](update.md#change-mysql-config).

    - **Threads running** — количество запущенных потоков.

        При увеличении нагрузки на кластер это значение будет быстро расти.

    - **Threads cached** — количество кешированных потоков.

       При нормальной работе кластера процесс `mysqld` кеширует большую часть соединений.

- **Is Alive** — показывает доступность кластера в виде суммы состояний его хостов.

    Каждый хост в состоянии **Alive** увеличивает общую доступность на 1. При выходе из строя одного из хостов общая доступность уменьшается на 1.
    Для повышения доступности кластера вы можете [добавить в него хосты](hosts.md#add).

- **Queries** — среднее количество поступающих в кластер запросов (в секунду).

- **Slow Queries** — количество SQL-запросов, выполняющихся дольше, чем указано в [параметре](update.md#change-mysql-config) `long_query_time`.

- **Is Primary** — показывает, какой хост является мастером и как долго.

- **Disk usage on master, [bytes]** — показывает, как используется место на текущем хосте-мастере. На графике отображаются (в байтах):

    - **Free** — объем свободного места в хранилище.

    - **Used binlogs** и **Used relaylogs** — объем, занятый служебными логами {{ MY }}. Подробнее [binlogs](https://dev.mysql.com/doc/refman/8.0/en/mysqlbinlog.html) и [relaylogs](https://dev.mysql.com/doc/refman/8.0/en/replica-logs-relaylog.html) описаны в документации {{ MY }}.

    - **Used** — объем, занятый данными.

## Мониторинг состояния хостов {#monitoring-hosts}

Для просмотра детальной информации о состоянии отдельных хостов {{ mmy-name }}:

1. Перейдите на страницу каталога и выберите сервис **{{mmy-name }}**.
1. Нажмите на имя нужного кластера, затем выберите вкладку **Хосты**.
1. Перейдите на страницу **Мониторинги**.
1. Выберите нужный хост из выпадающего списка.

На этой странице выводятся графики, показывающие нагрузку на отдельный хост кластера:

- **CPU** — загрузка процессорных ядер. При повышении нагрузки значение **Idle** уменьшается.

- **Memory** — использование оперативной памяти (RAM) в байтах. При высоких нагрузках значение параметра **Free** уменьшается, а **Used** и других растет.

- **Disk Bytes** — средний объем данных, записанных в хранилище и прочитанных из него (в байтах).

- **Disk IOPS** — среднее количество операций ввода-вывода в хранилище.

- **Network Bytes** — средний объем данных, отправленных в сеть и полученных из нее (в байтах).

- **Network Packets** — среднее количество пакетов, отправленных в сеть и полученных из нее.

На графиках **Disk bytes** и **Disk IOPS** характеристика **Read** растет при активном чтении из базы данных, а **Write** — при записи в нее.

Для хостов с ролью **Replica** нормально преобладание **Received** над **Sent** на графиках **Network Bytes** и **Network Packets**.
