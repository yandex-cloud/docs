# Подключение

#### Как подключиться к кластеру? {#how-to-connect}

Посмотрите примеры подключения в [документации](../operations/connect.md#connection-string) или на странице кластера в [консоли управления]({{ link-console-main }}) (нажмите кнопку **Подключиться** на панели сверху).

{{ MY }}-хосты с публичным доступом поддерживают только соединения с [SSL-сертификатом](../operations/connect.md#get-ssl-cert).

Существуют также [{#T}](../operations/connect.md#special-fqdns), указывающие на **Текущий мастер** и **Наименее отстающую реплику** кластера.

#### Почему не получается подключиться из интернета? {#from-internet}

Проверьте, имеет ли хост публичный доступ. Для этого в [консоли управления]({{ link-console-main }}):
1. Перейдите на страницу каталога и выберите сервис **{{ mmy-short-name }}**.
1. Нажмите на имя нужного кластера, затем выберите вкладку **Хосты**.
1. Посмотрите значение в столбце **Публичный доступ** у нужного хоста.

{{ MY }}-хосты с публичным доступом поддерживают только соединения с [SSL-сертификатом](../operations/connect.md#get-ssl-cert).

Дополнительно:
* Если публичный доступ в вашем кластере настроен только для некоторых хостов, автоматическая смена мастера может привести к тому, что вы не сможете подключиться к мастеру из интернета.
* Если вы используете [{#T}](../operations/connect.md#special-fqdns), проверьте в списке хостов, что текущий мастер или реплика имеют публичный доступ.
{% if audience != "internal" %}
* Если вы используете [{#T}](../concepts/network.md#security-groups), проверьте их [настройки](../operations/connect.md#configure-security-groups).
{% endif %}

#### Почему не получается подключиться из {{ yandex-cloud }}? {#from-yc}

Проверьте, что вы подключаетесь с виртуальной машины {{ yandex-cloud }}, расположенной в той же виртуальной сети, что и кластер {{ MY }}.

Для этого в консоли управления:
1. Перейдите на страницу каталога, выберите сервис **{{ mmy-short-name }}** и нажмите на имя нужного кластера.
1. Проверьте значение параметра **Облачная сеть** и перейдите по ссылке названия сети, чтобы посмотреть ее подсети.
1. Убедитесь, что виртуальная машина расположена в одной из подсетей той же сети.

Дополнительно:
* Если вы подключаетесь к хосту с публичным доступом, то соединение возможно только с [SSL-сертификатом](../operations/connect.md#get-ssl-cert).
* Если вы используете [{#T}](../operations/connect.md#special-fqdns), проверьте в списке хостов, что текущий мастер или реплика имеют публичный доступ.
{% if audience != "internal" %}
* Если вы используете [{#T}](../concepts/network.md#security-groups), проверьте их настройки.
{% endif %}

#### Почему не получается подключиться к многохостовому кластеру? {#to-multi-host-cluster}

Если публичный доступ в вашем кластере настроен только для некоторых хостов, автоматическая смена мастера может привести к тому, что вы не сможете подключиться к мастеру из интернета.

Проверьте, имеет ли хост публичный доступ. Для этого в [консоли управления]({{ link-console-main }}):
1. Перейдите на страницу каталога и выберите сервис **{{ mmy-short-name }}**.
1. Нажмите на имя нужного кластера, затем выберите вкладку **Хосты**.
1. Посмотрите значение в столбце **Публичный доступ** у нужного хоста.

Дополнительно:

* Если вы используете [{#T}](../operations/connect.md#special-fqdns), проверьте в списке хостов, что текущий мастер или реплика имеют публичный доступ.

{% if audience != "internal" %}

* Если после добавления хоста к нему невозможно подключиться, убедитесь, что [группа безопасности](../concepts/network.md#security-groups) кластера настроена корректно для подсети, в которую помещен хост.

{% endif %}

#### Почему может быть превышен лимит соединений? {#connection-limit}

Максимальное количество одновременных подключений к хосту кластера {{ mmy-short-name }} задается параметром `max_connections` и по умолчанию равно величине `<количество МБ RAM на одном хосте> ÷ 32`, но не менее 100.

Например, для хоста класса {{ s1-micro }} значение параметра `max_connections` по умолчанию равно 8192 ÷ 32 = 256.

Вы можете [изменить](../operations/update.md#change-mysql-config) значение **Max connections** в настройках кластера.
