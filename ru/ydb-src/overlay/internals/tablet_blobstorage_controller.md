### –ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º?
–¢–∞–±–ª–µ—Ç–∫–∞ **DS-Controller** (Distributed Storage Controller) —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ BlobStorage. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —É–∑–ª–∞—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ BlobStorage **DS-Controller** –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∑–∞–ø—É—â–µ–Ω–Ω—ã–º –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ —Å–µ—Ä–≤–∏—Å–æ–º **[Warden](glossary.md#blobstoragenodewarden)** (BlobStorage Node Warden). **DS-Controller** —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ:

- **[PDisk-–∞—Ö](pdisk.md)** –∏ —Å–ª–æ—Ç–∞—Ö –Ω–∞ –Ω–∏—Ö;
- **[VDisk-–∞—Ö](vdisk.md)**;
- **[BlobStorage –≥—Ä—É–ø–ø–∞—Ö](glossary.md#blobstoragegroup)**.

DS-Controller —Ä–∞–∑–¥–∞–µ—Ç —Ö—Ä–∞–Ω–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é Warden-–∞–º –Ω–æ–¥ –ø–æ –∑–∞–ø—Ä–æ—Å—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –Ω–æ–¥–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞.
DS-Controller –≤—ã–¥–∞–µ—Ç –ì—Ä—É–ø–ø—ã **[Hive-—É](tablet_hive.md)** –ø–æ –∑–∞–ø—Ä–æ—Å—É –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞–Ω–∞–ª–∞—Ö —Ç–∞–±–ª–µ—Ç–æ–∫.
–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ **DS-Controller** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ PDisk-–∞—Ö, —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –¥–ª—è VDisk-–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ [CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](../api/cli.md).

### –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ (—Å—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö)

**State** - —Ç–∞–±–ª–∏—Ü–∞ (—Å—Ç—Ä–æ–∫–∞) —Å –æ–±—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

|**üîë**|**–ò–º—è –∫–æ–ª–æ–Ω–∫–∏**|**–¢–∏–ø**|**–û–ø–∏—Å–∞–Ω–∏–µ**|
| --- | --- | --- | --- |
|X|FixedKey|Bool|–ü—Å–µ–≤–¥–æ-–∫–ª—é—á, –≤—Å–µ–≥–¥–∞ true|
| |NextGroupID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–ª–µ–¥—É—é—â–µ–π BS –≥—Ä—É–ø–ø—ã|

**Node** - —Å–ø–∏—Å–æ–∫ –Ω–æ–¥.

|**üîë**|**–ò–º—è –∫–æ–ª–æ–Ω–∫–∏**|**–¢–∏–ø**|**–û–ø–∏—Å–∞–Ω–∏–µ**|
| --- | --- | --- | --- |
|X|ID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–æ–¥—ã|
| |NextPDiskID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ PDisk'–∞ –Ω–∞ —ç—Ç–æ–π –Ω–æ–¥–µ|

**PDisk** - —Å–ø–∏—Å–æ–∫ PDisk'–æ–≤.

|**üîë**|**–ò–º—è –∫–æ–ª–æ–Ω–∫–∏**|**–¢–∏–ø**|**–û–ø–∏—Å–∞–Ω–∏–µ**|
| --- | --- | --- | --- |
|X|NodeID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–æ–¥—ã|
|X|PDiskID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä PDisk'a|
| |Path|ByteString|–ü—É—Ç—å –∫ –¥–∏—Å–∫—É –Ω–∞ –Ω–æ–¥–µ|
| |Category|Uint64|–¢–∏–ø –¥–∏—Å–∫–∞ (SSD –∏ —Ç.–ø.)|
| |PhysicalLocation|ByteString|–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∏—Å–∫–∞ (—Å—Ç–æ–π–∫–∞/—Å–µ—Ä–≤–µ—Ä –∏ —Ç.–ø.)|
| |Guid|Uint64|GUID –¥–∏—Å–∫–∞|

**Group** - —Å–ø–∏—Å–æ–∫ BS –≥—Ä—É–ø–ø

|**üîë**|**–ò–º—è –∫–æ–ª–æ–Ω–∫–∏**|**–¢–∏–ø**|**–û–ø–∏—Å–∞–Ω–∏–µ**|
| --- | --- | --- | --- |
|X|ID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã|
| |Generation|Uint32|–ü–æ–∫–æ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã|
| |ErasureSpecies|Uint32|–¢–∏–ø –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è|
| |Owner|Uint64|–í–ª–∞–¥–µ–ª–µ—Ü –≥—Ä—É–ø–ø—ã|
| |DesiredPDiskCategory|Uint64|–ñ–µ–ª–∞–µ–º—ã–π —Ç–∏–ø PDisk'–∞|
| |DesiredVDiskCategory|Uint64|–ñ–µ–ª–∞–µ–º—ã–π —Ç–∏–ø VDisk'–∞|

**VSlot** - —Å–ø–∏—Å–æ–∫ VSlot'–æ–≤

|**üîë**|**–ò–º—è –∫–æ–ª–æ–Ω–∫–∏**|**–¢–∏–ø**|**–û–ø–∏—Å–∞–Ω–∏–µ**|
| --- | --- | --- | --- |
|X|NodeID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–æ–¥—ã|
|X|PDiskID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä PDisk'–∞|
|X|VSlotID|Uint32|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä VSlot'–∞|
| |Category|Uint64|–¢–∏–ø –¥–∏—Å–∫–∞ (Log –∏ —Ç.–ø.)|
| |GroupID|Uint32|–ì—Ä—É–ø–ø–∞, –∑–∞–Ω—è–≤—à–∞—è —ç—Ç–æ—Ç VSlot. Null, –µ—Å–ª–∏ —Å–ª–æ—Ç —Å–≤–æ–±–æ–¥–µ–Ω.|
| |GroupGeneration|Uint32|–ü–æ–∫–æ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã|
| |RingIdx|Uint32|–ù–æ–º–µ—Ä –∫–æ–ª—å—Ü–∞ –≤ –¥–æ–º–µ–Ω–µ|
| |FailDomainIdx|Uint32|–ù–æ–º–µ—Ä —Ñ–µ–π–ª-–¥–æ–º–µ–Ω–∞|
| |VDiskIdx|Uint32|–ù–æ–º–µ—Ä VDisk'–∞ –≤ —Ñ–µ–π–ª-–¥–æ–º–µ–Ω–µ|

### –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è DS-Controller –∏ Warden

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Warden –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **DS-Controller** —Å–æ–±—ã—Ç–∏–µ TEvControllerRegisterNode. –í –æ—Ç–≤–µ—Ç DS-Controller –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç NodeWardenServiceSet —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö PDisk-–æ–≤ –∏ VDisk-–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ Warden –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —Å–≤–æ–µ–π –Ω–æ–¥–µ.
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å DS-Proxy, Warden –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **DS-Controller** —Å–æ–±—ã—Ç–∏–µ TEvControllerGetGroup —Å –Ω–æ–º–µ—Ä–æ–º –ì—Ä—É–ø–ø—ã. –í –æ—Ç–≤–µ—Ç **DS-Controller** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç NodeWardenServiceSet —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–π –ì—Ä—É–ø–ø—ã.

![](../_assets/nodewarden.png)

**NodeWardenServiceSet** - —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è, –æ–ø–∏—Å—ã–≤–∞—é—â–µ–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤ BlobStorage: PDisk-–æ–≤, VDisk-–æ–≤ –∏ Proxy.

**PDisks** - –∑–∞–¥–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π PDisk:

  * NodeId –Ω–æ–¥—ã, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç PDisk
  * PDiskID - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∏–Ω–¥–µ–∫—Å) PDisk-–∞ –Ω–∞ —ç—Ç–æ–π –Ω–æ–¥–µ
  * Path - –ø—É—Ç—å –∫ –±–ª–æ—á–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∏–ª–∏ —Ñ–∞–π–ª—É, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º—É PDisk-–æ–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  * FileSize - —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö (0 –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –±–ª–æ—á–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
  * PDiskGuid - –≥–ª–æ–±–∞–ª—å–Ω–æ-—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä PDisk-–∞, –∑–∞–¥–∞–≤–∞–µ–º—ã–π –ø—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

**VDisks** - –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π VDisk –∫–∞–∫ –ø–∞—Ä—É VDiskID –∏ VDiskLocation.

**VDiskID** - –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–µ—Å—Ç–æ VDisk-–∞ –≤ –≥—Ä—É–ø–ø–µ

  * GroupID - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥–∞–Ω–Ω—ã–π VDisk
  * GroupGeneration - –ø–æ–∫–æ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã (–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑—ã–≤–∞—Ç—å 0, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
  * Ring - –∏–Ω–¥–µ–∫—Å –ö–æ–ª—Ü–∞ –≤ –ì—Ä—É–ø–ø–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–π VDisk
  * Domain - –∏–Ω–¥–µ–∫—Å –§–µ–π–ª-–î–æ–º–µ–Ω–∞ –≤ –ö–æ–ª—å—Ü–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –¥–∞–Ω–Ω—ã–π VDisk
  * VDisk - –∏–Ω–¥–µ–∫—Å –¥–∞–Ω–Ω–æ–≥–æ VDisk-–∞ –≤ –§–µ–π–ª-–î–æ–º–µ–Ω–µ

**VDiskLocation** - –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ VDisk-–∞:

  * NodeId –Ω–æ–¥—ã, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —ç—Ç–æ—Ç VDisk –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º PDisk (PDisk –∏ VDisk –Ω–µ –º–æ–≥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–æ–¥–∞—Ö)
  * PDiskID - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä PDisk-–∞ –Ω–∞ —ç—Ç–æ–π –Ω–æ–¥–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ VDisk-–æ–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
  * PDiskGuid - –≥–ª–æ–±–∞–ª—å–Ω–æ-—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä PDisk-–∞
  * VDiskSlotID - –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –Ω–∞ PDisk-–µ, –∑–∞–Ω–∏–º–∞–µ–º–æ–≥–æ —ç—Ç–∏–º VDisk-–æ–º (–æ–¥–∏–Ω —Å–ª–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–Ω—è—Ç –±–æ–ª–µ–µ —á–µ–º 1 PDisk-–æ–º, –Ω–æ–º–µ—Ä–∞ —Å–ª–æ—Ç–æ–≤ –æ—Ç 0 –¥–æ ~2000000 –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –≤–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –æ–¥–∏–Ω PDisk —Å–ø–æ—Å–æ–±–µ–Ω –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ ~250 VDisk-–æ–≤)

**Groups** - –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≥—Ä—É–ø–ø—É BlobStorage:

  * GroupId - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã
  * GroupGeneration - –ø–æ–∫–æ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã (–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑—ã–≤–∞—Ç—å 0, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
  * ErasureSpecies - –≤–∏–¥ Erasure-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–π –≤ –¥–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ

**Rings** - –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–ª—å—Ü–æ –ì—Ä—É–ø–ø—ã.

**FailDomains** - –û–ø–∏—Å—ã–≤–∞–µ—Ç –§–µ–π–ª-–¥–æ–º–µ–Ω –∫–æ–ª—å—Ü–∞. –í—Å–µ —Ñ–µ–π–ª-–¥–æ–º–µ–Ω—ã –∫–æ–ª—å—Ü–∞ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ VDisk-–æ–≤. –ü—Ä–∏ —ç—Ç–æ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ VDisk-–æ–≤ –≤ –∫–æ–ª—å—Ü–µ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 32. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –§–µ–π–ª-–¥–æ–º–µ–Ω–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ –≥—Ä—É–ø–ø–µ –≤–∏–¥–∞ Erasure-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è.

**VDiskLocations** - –û–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ VDisk-–∞.
