----
title: Управление доступом в Yandex Database
description: "Управление доступом в сервисе по созданию и управлению базами данных Yandex Database. Чтобы разрешить доступ к ресурсам сервиса YDB (базы данных и их пользователи), назначьте пользователю нужные роли из приведенного списка."
----

# Управление доступом

{% if audience == "internal" %}

В {{ ydb-short-name }} используется аутентификация на основе токенов, которые пересылаются пользователем вместе с запросом.

## Аутентификация {#authentication}

### Консоль управления {#web-ui}

В [веб-интерфейсе](https://ydb.yandex-team.ru/) для [аутентификации](../concepts/iam.md) используются cookies пользователя в домене yandex-team.ru (проверка через blackbox). Пользователь консоли управления аутентифицируется автоматически, не требуется совершать дополнительные действия для аутентификации.

### OAuth токен для использования в приложении {#oath-app}

Для аутентификации при обращении к БД в {{ ydb-short-name }} из приложения понадобится OAuth токен.

* Для того, чтобы получить персональный токен, следует нажать на иконку шестеренки в [веб-интерфейсе](https://ydb.yandex-team.ru/), после чего нажать на кнопку "Give me my token". Полученный в результате персональный токен можно использовать в приложении.
* Для того, чтобы использовать роботного пользователя для доступа к БД потребуется:
    * получить для робота OAuth токен (подойдёт YQL токен);
    * [сообщить](https://st.yandex-team.ru/createTicket?template=1918&queue=YDBREQUESTS) логин робота и название базы, чтобы администратор системы выдал созданному роботу корректные права доступа к базе.

![Give me my token](../_assets/db_ui_give_me_token.png)

### OAuth токен для использования в консоли управления {#oath-ui}

Возможно использование OAuth токена вместо cookies в [веб-интерфейсе YDB](https://ydb.yandex-team.ru/). Чтобы для аутентификации по умолчанию использовался OAuth токен следует нажать на кнопку "Use my token by default" (см. рисунок выше).

## Авторизация {#authorization}

Пользователю, инициировавшему создание БД выдаются права *use*.

Права *use* дают возможность:

* создавать и удалять таблицы и директории в БД;
* выполнять операции чтения и записи над данными и атрибутами схемы;
* выдавать права доступа другим пользователям, но только в рамках перечисленных выше прав *use*.

Управление правами в текущей версии возможно только через [С++](https://a.yandex-team.ru/arc/trunk/arcadia/kikimr/public/sdk/cpp/client/ydb_scheme.h) и [Python](https://a.yandex-team.ru/arc/trunk/arcadia/kikimr/public/sdk/python/client/scheme.py) SDK, которые содержат методы предоставления, отзыва, изменения выданного списка прав, а также метод смены владельца таблицы, директории или БД.

Пользователь не может самостоятельно изменять параметры БД или удалять БД. В текущей версии эти действия может совершить только  администратор системы.

Для изменения параметров БД следует заполнить [форму](https://st.yandex-team.ru/createTicket?template=1918&queue=YDBREQUESTS).

Для удаления БД следует заполнить [форму](https://st.yandex-team.ru/createTicket?template=1919&queue=YDBREQUESTS).

{% else if audience == "external" %}

Пользователь {{ yandex-cloud }} может выполнять только те операции над ресурсами, которые разрешены назначенными ему ролями. Пока у пользователя нет никаких ролей, почти все операции ему запрещены.

Чтобы разрешить доступ к ресурсам сервиса {{ ydb-short-name }} (базы данных и их пользователи), назначьте пользователю нужные роли из приведенного ниже списка. На данный момент роль может быть назначена только на родительский ресурс (каталог или облако), роли которого наследуются вложенными ресурсами.

{% if deploy != "arc" %}
{% note info %}

Подробнее о наследовании ролей читайте в разделе [{#T}](../../resource-manager/concepts/resources-hierarchy.md#access-rights-inheritance) документации сервиса {{ resmgr-full-name }}.

{% endnote %}
{% endif %}

## Назначение ролей {#grant-roles}

Чтобы назначить пользователю роль:

{% if deploy != "arc" %}
{% include [grant-role-console](../../_includes/grant-role-console.md) %}
{% endif %}

## Роли {#roles}

Ниже перечислены все роли, которые учитываются при проверке прав доступа в сервисе {{ ydb-short-name }}.

{% if deploy != "arc" %}
{% include [cloud-roles](../../_includes/cloud-roles.md) %}
{% endif %}

### {{ roles-viewer }}

Пользователь с ролью `{{ roles-viewer }}` может просматривать информацию о ресурсах, например посмотреть список хостов или получить информацию о кластере БД.

### {{ roles-editor }}

Пользователь с ролью `{{ roles-editor }}` может управлять любыми ресурсами, например создать кластер БД, создать или удалить хост в кластере.

Помимо этого роль `{{ roles-editor }}` включает в себя все разрешения роли `{{ roles-viewer }}`.

### {{ roles-admin }}

Пользователь с ролью `{{ roles-admin }}` может управлять правами доступа к ресурсам, например разрешить другим пользователям создавать кластеры БД или просматривать информацию о них.

Помимо этого роль `{{ roles-admin }}` включает в себя все разрешения роли `{{ roles-editor }}`.

{% endif %}
