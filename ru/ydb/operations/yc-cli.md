# Управление базами данных с помощью YC CLI

В данной статье даны описания наиболее часто используемых команд. Полное описание всех команд сервиса {{ ydb-name }} в {{ yandex-cloud }} CLI находится в контекстной справке, которая также опубликована [в документации {{ yandex-cloud }}](../../cli/).

{% include [cli-install](../../_includes/cli-install.md) %}

{% include [default-catalogue](../../_includes/default-catalogue.md) %}

## Создание базы данных {#create}

Вы можете создать БД в бессерверной (Serverless) конфигурации или с выделенными серверами (Dedicated). Подробнее о различиях в конфигурациях читайте в разделе [Serverless и Dedicated режимы работы](../concepts/serverless-and-dedicated.md).

{% list tabs %}

- Serverless

  Для создания Serverless БД данных выполните следующую команду, заменив `<name>` именем создаваемой БД:

  ```bash
  yc ydb database create <name> --serverless
  ```

  >Пример
  >
  >Создание Serverless БД с именем `testdb`:
  >
  >```bash
  >yc ydb database create testdb --serverless
  >```

  Любая создавая Serverless БД является георезервированной в трех зонах доступности.

  Все параметры можно будет изменить в дальнейшем [командой `update`](#update) CLI, или в консоли управления.

- Dedicated

  Для создания Dedicated БД выполните следующую команду, заменив `<name>` именем создаваемой бБД, и указав дополнительные параметры:

  ```bash
  yc ydb database create <name> --dedicated <параметры>
  ```

  Обязательные параметры определяют выделяемые для БД ресурсы и сеть:
  * `--network-name STR` — имя облачной сети, в которой будет создана БД. Может быть указана сеть `default`.
  * `--storage STR` — тип носителя и количество групп хранения в формате `type=<type>,groups=<groups>`. Для типа `ssd` одна группа хранения вмещает 100GB данных.
  * `--resource-preset STR` — конфигурация вычислительных ресурсов узла. Возможные значения перечислены в колонке «Имя конфигурации» в таблице пункта [Вычислительные ресурсы](../concepts/index.md#resource-presets) на странице о БД.

  Также могут быть указаны дополнительные параметры, ключевыми из которых являются:
  * `--public-ip` — флаг назначения публичных IP-адресов. Без этого флага вы не сможете подключиться к создаваемой БД из интернета.
  * `--fixed-size INT` — количество узлов в кластере, по умолчанию 1. Узлы выделяются в разных зонах доступности, таким образом конфигурация из трех узлов будет географически распределена в трех зонах доступности.
  * `--async` — флаг асинхронного создания. Создание Dedicated БД может занимать значительное время, измеряемое минутами. Вы можете указать данный флаг для того, чтобы управление было возвращено сразу как только команда на создание БД будет принята облаком.

  **Примеры**
  
  Создание минимальной одноузловой Dedicated базы данных {{ ydb-short-name }} с именем `dedb`, доступной из Интернета:

  ```bash
  yc ydb database create dedb --dedicated --network-name default \
    --storage type=ssd,groups=1 --resource-preset medium --public-ip
  ```  

  Асинхронное создание трехузловой георезервированной Dedicated базы данных {{ ydb-short-name }} с хранилищем в 300 ГБ и вычислительным узлами по 64 ГБ RAM, с именем `dedb3`, доступной из Интернета:

  ```bash
  yc ydb database create dedb3 --dedicated --network-name default \
    --storage type=ssd,groups=3 --resource-preset medium-m64 --public-ip \
    --fixed-size 3 --async
  ```

{% endlist %}

## Список баз данных {#list}

Для получения списка БД в текущем облачном каталоге выполните следующую команду:

```bash
yc ydb database list
```

## Параметры базы данных {#get}

Для получения значений текущих параметров БД выполните следующую команду, заменив `<name>` на имя нужной БД:

```bash
yc ydb database get <name>
```

## Изменение параметров базы данных {#update}

Для изменения параметров БД воспользуйтесь командой `update`. Перечень названий доступных для изменения параметров можно получить в контекстной справке по данной команде:

```bash
yc ydb database update --help
```

У Serverless и Dedicated БД есть только один общий параметр: имя БД. Имена параметров Serverless БД начинаются на `sls-`. Другие параметры применимы только к Dedicated БД.

>Примеры
>
>Переименование БД `dbtest` в `mydb`:
>
>```bash
>yc ydb database update dbtest --new-name mydb
>```
>
>Установка ограничения на потребление 100 Request Units в секунду для Serverless БД с именем `db5`:
>
>```bash
>yc ydb database update db5 --sls-throttling-rcu 100
>```

## Удаление базы данных {#delete}

Для удаления БД воспользуйтесь командой `delete`:

```bash
yc ydb database delete <name>
```