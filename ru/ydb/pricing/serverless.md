---
editable: false
---

# Правила тарификации для бессерверного режима {{ ydb-name }}

{% include [currency-choice](../_includes/pricing/currency-choice.md) %}

При использовании бессерверного режима {{ ydb-name }} плата взимается за каждый выполненный к базе данных запрос. Указывать, какие ресурсы требуются для работы, нет необходимости, база данных оперативно адаптируется к изменению пользовательской нагрузки в рамках выделенных пользователю [квот](../_includes/ydb-limits.md). Помимо запросов пользователь оплачивает хранимые в {{ ydb-name }} данные на почасовой основе. Дополнительно тарифицируются другие операции, такие как восстановление из резервной копии.
## Из чего складывается стоимость использования бессерверного режима {{ ydb-name }} {#rules}

При работе {{ ydb-name }} в бессерверном режиме вы оплачиваете:

* операции с данными;
* объем хранимых данных, включая служебные данные, например, индексы;
* дополнительные пользовательские операции, такие как восстановление данных из резервной копии.

Дополнительно оплачиваются иные потребляемые ресурсы:

* место, занятое в сервисе {{ objstorage-name }} для хранения резервных копий по требованию;
* объем исходящего трафика из {{ yandex-cloud }} в интернет.

{% include [pricing-gb-size](../_includes/pricing/pricing-gb-size.md) %}

### Операции с данными и единица запроса {#rules-ru}

Бессерверный режим работы {{ ydb-full-name }} поддерживает несколько способов работы с данными:

* YQL - диалект SQL для работы с реляционными таблицами, поддерживаемый в {% if deploy != "arc" %}[SDK](../ydb-sdk/index.md), [CLI](../quickstart/yql-api/ydb-cli.md) и [консоли управления {{ ydb-short-name }}](../quickstart/yql-api/ydb-ui.md){% else %}SDK, CLI и консоли управления{% endif %}.
* Document API — HTTP API, совместимый с Amazon DynamoDB. С помощью этого API можно выполнять операции над документными таблицами.

Кроме этого, к базе данных могут быть сделаны запросы через специализированные API, доступные в виде отдельных функций в SDK, CLI или консоли управления {{ ydb-short-name }}.

Для расчета стоимости запросов в {{ ydb-short-name }} используется понятие _единица запроса (RU — Request Unit)_. Каждый выполненный запрос, в зависимости от его типа, сложности и размера данных приводит к потреблению определенного количества RU. Итоговая стоимость всех выполненных запросов к {{ ydb-short-name }} складывается из стоимости каждого запроса, выраженной в RU.

Правила расчета стоимости запросов к {{ ydb-short-name }} в Request Units:

* [YQL](request_units_yql.md).
* [Document API](request_units_docapi.md).
* [Специальные API](request_units_special.md).

#### Тарифы на потребление Request Units {#prices-ru}

* **За фактическое потребление (on-demand)**. Стоимость использования {{ ydb-short-name }} за некоторый период будет равна сумме потраченных Request Units, умноженной на цену 1 Request Unit, за вычетом предоставляемого ежемесячно {% if audience == external %}[бесплатного пакета](../../billing/concepts/serverless-free-tier.md#ydb){% else %}бесплатного пакета{% endif %}. Если запросов к базе данных не было, или количество потраченных в текущем месяце Request Units меньше бесплатного пакета, плата за фактическое потребление Request Units не взимается.
* **Выделенная пропускная способность (provisioned capacity)**. Если ваша нагрузка носит предсказуемый характер и имеет постоянную составляющую, вы можете сократить стоимость использования {{ ydb-short-name }} за счет оплаты части (или всех) потраченных Request Units по почасовому тарифу. Для этого нужно установить отличное от нуля значение параметра базы данных «Выделенная пропускная способность, RU/с». Вам начнут делаться начисления по специальному тарифу, ставка которого задается за RU/с×час, тарификация посекундная. Потребление Request Units в пределах заданной пропускной способности не будет учитываться в трате Request Units по тарифу on-demand.
* **Резерв выделенной пропускной способности (reserved capacity)**. Если вы уверены в предсказуемости и постоянности нагрузки, вы можете дополнительно сократить стоимость использования {{ ydb-short-name }} за счет гарантии оплаты определенной выделенной пропускной способности в течение 1 года или 3 лет.

### Объем хранимых данных {#rules-storage}

{% if audience != "external" %}

Явным образом выделять хранилище для данных в {{ ydb-name }} Serverless не требуется. Мощности для хранения данных выделяются системой автоматически. Данные, записанные пользователем, хранятся в специальных структурах данных {{ ydb-name }}, которые оптимизированы под эффективную запись, чтение по первичному ключу и других операций. Объем хранимых данных в {{ ydb-name }} Serverless рассчитывается как хранилище выделенное для указанных структур данных. Например, создание глобального индекса приводит к увеличению размера хранилища на размер данного индекса. {{ ydb-name }} Serverless непрерывно следит за размером таблиц для оперативной реакции на уменьшение и увеличения объема хранимых данных.

{% else %}

В бессерверном режиме мощности для хранения данных выделяются автоматически. Объем хранимых данных при этом рассчитывается как совокупный объем пользовательских и служебных данных, которые хранятся в БД. Например, создание глобального индекса приводит к увеличению размера хранилища на размер такого индекса.

{% endif %}

### Создание резервных копий {#rules-backup-storage}

{% if audience != "external" %}

{{ ydb-name }} Serverless обеспечивает автоматическое регулярное создание резервной копии базы данных раз в сутки. Резервная копия сохраняется в сервисе {{ objstorage-full-name }}. Система хранит последние 2 резервные копии базы. В случае удаление базы данных последняя резервная копия хранится в течении 2-х дней. Описанная услуга резервного копирования предоставляется бесплатно.

Пользователь может выполнить резервное копирование базы данных в сервисе {{ ydb-name }} Serverless по требованию. В этом случае стоимость резервной копии рассчитывается исходя из цены за 1 ГБ выгруженных из {{ ydb-name }} Serverless данных. Объем данных округляется до целых ГБ в большую сторону. Дополнительно оплачивается работа с сервисом {{ objstorage-full-name }} по ценам этого сервиса.

В случае выгрузки данных при помощи утилиты ```ydb tools dump``` тарификация производится по тарифам операции `ReadTable`.

{% else %}

#### Автоматические резервные копии {#rules-auto-backup-storage}

{{ ydb-name }} автоматические создает и бесплатно хранит 2 полные резервные копии ваших баз за два последних дня. Плата за хранение автоматических резервных копий не взимается.

#### Резервные копии по требованию {#rules-auto-backup-storage}

Вы можете принудительно выполнить резервное копирование базы данных с сохранением копии в сервисе {% if audience == external %}[{{ objstorage-full-name }}](../../storage/index.yaml){% else %}Object Storage{% endif %}. Стоимость такой операции зависит от объема скопированных данных. При расчете стоимости фактический объем округляется в большую сторону до значений, кратных 1 ГБ.

{% note warning %}

В случае выгрузки данных при помощи утилиты ```ydb tools dump``` тарификация производится по тарифам операции `ReadTable`.

{% endnote %}

{% endif %}

### Восстановление из резервной копии {#rules-backup-restore}

{% if audience != "external" %}

{{ ydb-name }} Serverless предлагает механизм восстановления базы и/или отдельных таблиц из резервной копии, хранимой в сервисе {% if audience == external %}[{{ objstorage-full-name }}](../../storage/index.yaml){% else %}Object Storage{% endif %}. Восстановление данных из резервной копии осуществляется по требованию и тарифицируется исходя из цены восстановления за 1 ГБ. Объем данных округляется до целых ГБ в большую сторону.

В случае восстановления данных при помощи утилиты ```ydb tools restore``` тарификация производится по цене записи строки в базу данных для каждой восстановленной строки.

{% else %}

Вы можете восстанавливать базы и/или отдельные таблицы из резервных копий, которые хранятся в сервисе {{ objstorage-name }}. Стоимость такой операции зависит от объема восстановленных данных. При расчете стоимости фактический объем округляется в большую сторону до значения, кратного 1 ГБ.

{% note warning %}

В случае восстановления данных при помощи утилиты ```ydb tools restore``` тарификация производится по цене записи строки в базу данных для каждой восстановленной строки.

{% endnote %}

{% endif %}

## Скидка за резервируемый объем ресурсов {#cvos}

{% if audience != "external" %}

Сервис {{ ydb-name }} предоставляет возможность зарезервировать пропускную способность к базе данных в виде единиц запросов с существенной скидкой относительно цены за запросы по требованию. Резерв выражается в виде количества единиц запросов в секунду к базе данных. Пользователь может выбирать размер резерва с шагом 100 RU/sec. Резерв пропускной способности в 100 RU/sec означает, что если реальная пользовательская нагрузка не превышает 100 RU/sec, то ее стоимость покрывается из резерва. То есть нагрузка в 80 RU/sec будет полностью покрываться из резерва. Превышение этой нагрузки тарифицируется по ценам запросов по требованию. То есть при реальной нагрузке в 120 RU/sec и оформленном резерве в 100 RU/sec пользователь заплатит за 20 RU/sec по цене операций с данными по требованию. Если пользователь не исчерпал резерв, так как реальная нагрузка была ниже указанной в резерве, резерв сгорает. Оплата резервов выгодна тем пользователям, у которых нагрузка на базу является значительной и постоянной.

Стоит отметить, что резерв аггрегируется на окне <span style="color: red;">в 5 минут</span>. То есть при оплате резерва в 100 RU/sec, не обязательно потреблять каждую секунду 100 RU, нагрузка может плавать на протяжении указанного времени, в какую-т секунду нагрузка может составлять 150 RU, в другую -- 50 RU.

В консоли управления вы можете увидеть потенциальную экономию для текущего потребления ресурсов при переводе их на схему CVoS, а также предварительно рассчитать месячные платежи для нужного количества ядер процессора и оперативной памяти.

<span style="color: red;">Серьезно подумать о необходимости ссылаться на [CVoS](https://cloud.yandex.ru/docs/billing/operations/purchase-cvos)</span>

{% if deploy != "arc" %}
{% include [cvos](../_includes/pricing/cvos.md) %}
{% endif %}

{% else %}

Вы можете получить гарантированную скидку за потребление ресурсов сервиса, запланированное на месяц, на год или на три года вперед.

Бессерверный режим {{ ydb-name }} предоставляет {% if deploy != "arc" %}[CVoS](../../billing/concepts/cvos.md){% else %}CVoS{% endif %}на определенное количество запросов, выраженных в единицах RU, в секунду. Вы можете выбирать размер резерва с шагом 100 RU/с.

При вычислении реального объема потребления количество запросов усредняется каждые пять минут. То есть, например, при резерве 100 RU/с не обязательно потреблять каждую секунду 100 RU. На протяжении интервала усреднения нагрузка может изменяться и составлять в один момент 150 RU/с, в другую — 50 RU/с.

{% endif %}

{% if audience == "external" %}

## Цены {#prices}

{% if region == "ru" %}

{% include notitle [rub-serverless](../../_pricing/ydb/rub-serverless.md) %}

{% endif %}

{% if region == "kz" %}

{% include notitle [kzt-serverless](../../_pricing/ydb/kzt-serverless.md) %}

{% endif %}

{% if region == "int" %}

{% include notitle [usd-serverless](../../_pricing/ydb/usd-serverless.md) %}

{% endif %}

{% if region == "ru" %}

{% include notitle [rub-egress-traffic.md](../../_pricing/rub-egress-traffic.md) %}

{% endif %}

{% if region == "kz" %}

{% include notitle [kzt-egress-traffic.md](../../_pricing/kzt-egress-traffic.md) %}

{% endif %}

{% if region == "int" %}

{% include notitle [usd-egress-traffic.md](../../_pricing/usd-egress-traffic.md) %}

{% endif %}


{% if audience != "external" %}

## Примеры расчета стоимости {#simple-example}


{% list tabs %}

- Простой пример

  Здесь простой пример

- Развернутый пример

  Здесь развернутый пример

{% endlist %}

{% endif %}

{% endif %}
