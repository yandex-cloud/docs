# Правила тарификации для бессерверного режима {{ ydb-name }}

{% include [currency-choice](../_includes/pricing/currency-choice.md) %}

При использовании бессерверного режима {{ ydb-name }} плата взимается за каждый выполненный к базе данных запрос. Указывать, какие ресурсы требуются для работы, нет необходимости, база данных оперативно адаптируется к изменению пользовательской нагрузки. Помимо запросов пользователь оплачивает хранимые в {{ ydb-name }} данные на почасовой основе. Дополнительно тарифицируются другие операции, такие как восстановление из резервной копии.

## Из чего складывается стоимость использования бессерверного режима {{ ydb-name }} {#rules}

При работе {{ ydb-name }} в бессерверном режиме вы оплачиваете:

* операции с данными;
* объем хранимых данных, включая служебные данные, например, индексы;
* дополнительные пользовательские операции, такие как восстановление данных из резервной копии.

Дополнительно оплачиваются иные потребляемые ресурсы:

* место, занятое в сервисе Object Storage для хранения резервных копий по требованию;
* объем исходящего трафика из Yandex Cloud в интернет.

{% include [pricing-gb-size](../_includes/pricing/pricing-gb-size.md) %}

### Операции с данными и единица запроса {#rules-ru}

Бессерверный режим работы Yandex {{ ydb-name }} поддерживает несколько способов работы с данными:

* YQL - диалект SQL для работы с реляционными таблицами, поддерживаемый в [SDK](https://ydb.tech/ru/docs/reference/ydb-sdk/), [CLI](https://ydb.tech/ru/docs/reference/ydb-cli/) и консоли управления YDB.
* Document API — HTTP API, совместимый с Amazon DynamoDB. С помощью этого API можно выполнять операции над документными таблицами.

Кроме этого, к базе данных могут быть сделаны запросы через специализированные API, доступные в виде отдельных функций в SDK, CLI или консоли управления YDB.

Для расчета стоимости запросов в YDB используется понятие _единица запроса (RU — Request Unit)_. Каждый выполненный запрос, в зависимости от его типа, сложности и размера данных приводит к потреблению определенного количества RU. Итоговая стоимость всех выполненных запросов к YDB складывается из стоимости каждого запроса, выраженной в RU.

Правила расчета стоимости запросов к YDB в Request Units:

* [YQL](ru-yql.md).
* [Document API](ru-docapi.md).
* [Специальные API](ru-special.md).
* [Операции с топиками](ru-topics.md).

#### Тарифы на потребление Request Units {#prices-ru}

* **За фактическое потребление (on-demand)**. Стоимость использования YDB за некоторый период будет равна сумме потраченных Request Units, умноженной на цену 1 Request Unit, за вычетом предоставляемого ежемесячно [бесплатного пакета](../../billing/concepts/serverless-free-tier.md#ydb). Если запросов к базе данных не было, или количество потраченных в текущем месяце Request Units меньше бесплатного пакета, плата за фактическое потребление Request Units не взимается.
* **Выделенная пропускная способность (provisioned capacity)**. Если ваша нагрузка носит предсказуемый характер и имеет постоянную составляющую, вы можете сократить стоимость использования YDB за счет оплаты части (или всех) потраченных Request Units по почасовому тарифу. Для этого нужно установить отличное от нуля значение параметра базы данных «Выделенная пропускная способность, RU/с». Вам начнут делаться начисления по специальному тарифу, ставка которого задается за RU/с×час, тарификация посекундная. Потребление Request Units в пределах заданной пропускной способности не будет учитываться в трате Request Units по тарифу on-demand.

### Объем хранимых данных {#rules-storage}

В бессерверном режиме мощности для хранения данных выделяются автоматически. Объем хранимых данных при этом рассчитывается как совокупный объем пользовательских и служебных данных, которые хранятся в БД. Например, создание глобального индекса приводит к увеличению размера хранилища на размер такого индекса.

Для работающих в режиме тарификации по фактическому использованию топиков также тарифицируется фактически используемое дисковое пространство. Оно занимается в момент публикации каждого сообщения в топик, и освобождается в момент истечения Retention Period, настроенного в данном топике.

### Создание резервных копий {#rules-backup-storage}

#### Автоматические резервные копии {#rules-auto-backup-storage}

{{ ydb-name }} автоматические создает и бесплатно хранит 2 полные резервные копии ваших баз за два последних дня. Плата за хранение автоматических резервных копий не взимается.

#### Резервные копии по требованию {#rules-auto-backup-storage}

Вы можете принудительно выполнить резервное копирование базы данных с сохранением копии в сервисе [{{ objstorage-full-name }}](../../storage/). Стоимость такой операции зависит от объема скопированных данных. При расчете стоимости фактический объем округляется в большую сторону до значений, кратных 1 ГБ.

{% note warning %}

В случае выгрузки данных при помощи утилиты ```ydb tools dump``` тарификация производится по тарифам операции `ReadTable`.

{% endnote %}

### Восстановление из резервной копии {#rules-backup-restore}

Вы можете восстанавливать базы и/или отдельные таблицы из резервных копий, которые хранятся в сервисе Object Storage. Стоимость такой операции зависит от объема восстановленных данных. При расчете стоимости фактический объем округляется в большую сторону до значения, кратного 1 ГБ.

{% note warning %}

В случае восстановления данных при помощи утилиты ```ydb tools restore``` тарификация производится по цене записи строки в базу данных для каждой восстановленной строки.

{% endnote %}

## Цены {#prices}


{% include notitle [rub-serverless](../../_pricing/ydb/rub-serverless.md) %}





{% include notitle [rub-egress-traffic.md](../../_pricing/rub-egress-traffic.md) %}



