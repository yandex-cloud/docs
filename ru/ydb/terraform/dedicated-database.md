# Создание и изменение параметров выделенной базы данных {#ydb-dedicated-create}

Для создания выделенной базы данных нужно добавить следующий блок кода в конфигурационный файл проекта после блока с [инициализацией провайдера](./configure.md): 

```tf
resource "yandex_ydb_database_dedicated" "my_database_2" {
  name = "dedicated-base"
  folder_id = "<идентификатор каталога в {{ yandex-cloud }}>"
  
  resource_preset_id = "medium"
  scale_policy {
    fixed_scale {
      size = 2 # Количество виртуальных машин в базе
    }
  }

  storage_config {
    group_count = 1
    storage_type_id = "ssd"
  }

  location_id = "ru-central1"
  network_id  = "enpv06v9b6ogg372hc71" # ID сети, в которой будет создана база
  subnet_ids = [
    "e2lekh3vqf1pvao73lfv", "e9bmliplcipm13ek7uco", "b0cm0qpcf4q5vcfb2pc2" 
  ]
}
```

Опишем группы настроек выделенной базы данных. Сначала задаются два параметра, определяющие название базы данных и её месторасположение в {{ yandex-cloud }}:
* `name` — имя базы данных (строчные латинские буквы, цифры и дефисы. Первый символ – буква, последний символ - не дефис. Длина: от 3 до 63 симв.). Обязательный параметр;
* `folder_id` – идентификатор директории (каталога) в {{ yandex-cloud }}, где будет создана база данных. Обязательный параметр.

Далее можно определить количество виртуальных машин выделенных для работы базы данных и их конфигурацию:
* `resource_preset_id` – наименование шаблона конфигурации виртуальной машины. Доступны следующие шаблоны: `medium`, `medium-m64`, `medium-m96`, `large`, `xlarge`. Отличаются они платформой процессора, количеством vCPU, объёмом оперативной памяти. С подробным  описанием конфигураций шаблонов виртуальных машин можно ознакомиться в этой [статье](../concepts/resources.md#resource-presets);
* `scale_policy.fixed_scale.size` – параметр задаёт количество виртуальных машин, которые будет использовать база данных. Минимальное рекомендуемое количество виртуальных машин – от двух штук (для продакшна).

Конфигурирование свойств хранения данных описывается блоком `storage_config`, в котором задаются следующие опции:
* `group_count` – количество [групп хранения](https://ydb.tech/ru/docs/concepts/databases#storage-groups),  определяющих суммарный объем хранилища. Одна группа хранения кратна 100 Gb дискового пространства, задавать группам хранения можно только целочисленные значения;
* `storage_type_id` – тип хранилища данных. Может быть `ssd` или `hdd`.

Последний набор свойств определяющий свойства создания выделенной базы – сетевой набор свойств:
* `location_id` – локация базы данных в соответствии с зоной доступности, которая устанавливается в блоке инициализации провайдера;
* `network_id` – идентификатор облачной сети в инсталяции {{ yandex-cloud }};
* `subnet_ids` – список идентификаторов подсетей, в которых будет работать база. Указываются все подсети принадлежащие сети в инсталяции {{ yandex-cloud }}.

После заполнения всех свойств выделенной базы можно выполнить команду `terraform validate`, чтобы убедиться в том, что в конфигурационном файле нет ошибок. Затем выполняется команда `terraform plan` для сверки конфигурации существующей инфраструктуры с изменениями содержащимися в конфигурационном файле. В завершении выполняется команда `terraform apply`, которая уже разворачивает создаваемый ресурс в облаке.

Время создания выделенной базы зависит от количества виртуальных машин для обработки данных и групп хранения. Для удаления выделеной базы достаточно удалить ресурс `"yandex_ydb_database_dedicated"` из конфигурационного файла и применить последовательность команд: `terraform validate`, `terraform plan`, `terraform apply`. 