---
sourcePath: ru/ydb/yql/reference/yql-docs-core-2/syntax/_includes/expressions/tables.md
---
## Табличные выражения {#table-contexts}

Табличное выражения – это выражение, которое возвращает таблицу. Табличными выражениями в YQL являются:
* подзапросы: `(SELECT key, subkey FROM T)`
* [именованные подзапросы](#named-nodes): `$foo = SELECT * FROM T;` (использование именованного подзапроса `$foo` является табличным выражением)

Семантика табличного выражения зависит от контекста в котором оно используется. В YQL табличные выражения могут применяться в следующих контекстах:
* табличный контекст - после [FROM](../../select.md#from).
Здесь табличные выражения работают как ожидается – например `$input = SELECT a, b, c FROM T; SELECT * FROM $input` вернет таблицу с тремя колонками.
Табличный контекст также возникает после [UNION ALL](../../select.md#unionall), [JOIN](../../join.md#join);
* векторный контекст - после [IN](#in). В этом контексте табличное выражение обязано содержать ровно одну колонку (имя этой колонки никак не влияет на результат выражения).
Табличное выражение в векторном контексте типизируется как список (тип элемента списка при этом совпадает с типом колонки). Пример: `SELECT * FROM T WHERE key IN (SELECT k FROM T1)`;
* скалярный контекст возникает _во всех остальных случаях_. Как и в векторном контексте,
табличное выражение должно содержать ровно одну колонку, но значением табличного выражения будет скаляр –
произвольно выбранное значение этой колонки (если получилось ноль строк, то результатом будет `NULL`). Пример: `$count = SELECT COUNT(*) FROM T; SELECT * FROM T ORDER BY key LIMIT $count / 2`;

Порядок строк в табличном контексте, порядок элементов в векторном контексте и правило выбора значения в скалярном контексте (в случае если значений несколько) не определены. На этот порядок также нельзя повлиять с помощью `ORDER BY`: `ORDER BY` без `LIMIT` в табличных выражениях будет игнорироваться с выдачей предупреждения, а использование `ORDER BY` с `LIMIT` определяет множество элементов, но не порядок внутри этого множества.

