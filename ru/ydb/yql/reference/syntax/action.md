# ACTION
Действие, которое представляет собой параметризуемый блок из нескольких выражений верхнего уровня.

[`DEFINE ACTION`](#define-action) объявляет действие, к которому затем можно многократно обращаться с помощью [`DO`](#do).

`DO ACTION` можно использовать в теле условия [`EVALUATE IF`](#evaluate-if) или цикла [`EVALUATE FOR`](#evaluate-for).

## DEFINE ACTION {#define-action}

Объявляет `ACTION`, состоящее из указанных выражений.

**Синтаксис**

1. `DEFINE ACTION` — объявление действия.
1. [Именованное выражение](expressions.md#named-nodes), по которому объявляемое действие доступно далее в запросе.
1. В круглых скобках — список именованных выражений, по которым внутри действия можно обращаться к параметрам.
1. Ключевое слово `AS`.
1. Список выражений верхнего уровня.
1. `END DEFINE` — маркер последнего выражения внутри действия.

## DO {#do}

Выполняет `ACTION` с указанными параметрами.

**Синтаксис**
1. `DO` — выполнение действия.
1. Именованное выражение, по которому объявлено действие.
1. В круглых скобках — список значений для использования в роли параметров.

`EMPTY_ACTION` — действие, которое ничего не выполняет.

{% note info "Примечание" %}

В больших запросах объявление действий можно выносить в отдельные файлы и подключать их в основной запрос с помощью `EXPORT + IMPORT`. Для объявления работающих с таблицами действий в отдельной библиотеке, в ней обязательно должно присутствовать `USE my_cluster;`, так как их компиляция зависит от типа кластера.

{% endnote %}

**Пример**

```sql
DEFINE ACTION $hello_world($name) AS
    $name = $name ?? "world";
    SELECT "Hello, " || $name || "!";
END DEFINE;

DO EMPTY_ACTION();
DO $hello_world(NULL);
DO $hello_world("John");
