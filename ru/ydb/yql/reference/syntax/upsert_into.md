# UPSERT INTO

Сохраняет данные в указанную таблицу с перезаписью строк по некоторому набору ключевых колонок: при отсутствии записи с заданным ключом в таблице она добавляется в неизменном виде, в противном случае происходит обновление неключевых колонок в присутствующей в таблице строке. Значения колонок не участвующих в операции не меняются.

{% note info %}

Для увеличения скорости выполнения запросов рекомендуется использовать выражения UPSERT и REPLACE (а не INSERT и UPDATE), так как перед их выполнением не производится чтение данных.

{% endnote %}

С помощью конструкции UPSERT INTO можно:

* сохранить результат выборки [SELECT](select.md);
* сохранить константные значения с помощью ключевого слова VALUES.

Сохранение результата выборки SELECT:

```sql
UPSERT INTO my_table
SELECT Key AS Key1, "Empty" AS Key2, Value AS Value1
FROM my_table1;

COMMIT;
```

Сохранение константных значений с помощью VALUES:

```sql
UPSERT INTO my_table (Key1, Key2, Value2) VALUES
    (1u, "One", 101),
    (2u, "Two", 102);
COMMIT;
```
