Данная статья представляет собой сокращенную выписку из официальной документации [Re2](https://github.com/google/re2/wiki/Syntax)

Регулярные выражения - это обозначения для описания наборов символьных строк. Когда конкретная строка входит в набор, описываемый регулярным выражением, мы часто говорим, что регулярное выражение соответствует строке.

Самое простое регулярное выражение - это один буквальный символ. За исключением таких метасимволов, как *+?()|, символы соответствуют друг другу. Чтобы сопоставить метасимвол, экранируйте его обратной косой чертой: \+ соответствует буквальному символу плюса.

Два регулярных выражения можно чередовать или объединять, чтобы сформировать новое регулярное выражение: если e 1 соответствует s, а e 2 соответствует t , то e 1 |e 2 соответствует s или t , а e 1 e 2 соответствует st .

Метасимволы *, +и ? являются операторами повторения: e 1* соответствует последовательности из нуля или более (возможно, разных) строк, каждая из которых соответствует e 1 ; e 1+ соответствует одному или нескольким; e 1? соответствует нулю или единице.

Приоритет операторов, от самого слабого до самого сильного связывания, - это сначала чередование, затем конкатенация и, наконец, операторы повторения. Явные круглые скобки могут использоваться для обозначения разных значений, как и в арифметических выражениях. Некоторые примеры: ab|cd эквивалентно (ab)|(cd); ab* эквивалентно a(b*).

Синтаксис, описанный до сих пор, является большей частью традиционного синтаксиса регулярных выражений egrep Unix . Этого подмножества достаточно для описания всех обычных языков: грубо говоря, обычный язык - это набор строк, которые могут быть сопоставлены за один проход по тексту, используя только фиксированный объем памяти. Новые средства регулярных выражений (особенно Perl и те, которые его скопировали) добавили много новых операторов и управляющих последовательностей, которые делают регулярные выражения более краткими, а иногда и более загадочными, но обычно не более мощными.




|виды односимвольных выражений|Примеры|
|---|---|
|любой символ, возможно, включая новую строку  (s=true)|.|
|класс символов|[xyz]|
|все символы кроме указанных символов|[^xyz]|
|класс символов Perl <a href="#perl">(link)</a>|\d|
|все символы за исключением символов класса Perl|\D|
|ASCII character class <a href="#ascii">(link)</a>|[[:alpha:]|
|все символы за исключением  ASCII character class|[[:^alpha:]|
|набор символов Unicode (однобуквенные обозначения)|\pN|
|набор символов Unicode |\p{Greek}<|
|все символы за исключением однобуквенных классов Unicode |\PN|
|все символы за исключением  классов Unicode|\P{Greek}|




| | Композиция выражений |
|---|--------------|
|xy|x с последующим y|
|x\|y|`x`или `y`(предпочтительно `x`)|

| | Повторы|
|---|--------------|
|x*|ноль или больше  x, предпочтительно больше|
|x+|один или больше  x, предпочтительно больше|
|x?|ноль или один x, предпочтительно один|
|x{n,m}|повторять x от n до m раз, предпочтительно больше, m > n|
|x{n,}|повторять x от n до бесконечности раз, предпочтительно больше|
|x{n}|повторять x точно n раз|
|x*?|ноль или больше x, предпочтительно меньше|
|x+?|один или больше  x, предпочтительно меньше|
|x??|ноль или один x, предпочтительно ноль|
|x{n,m}?|повторять x от n до m раз, предпочтительно меньше|
|x{n,}?|повторять x от n до бесконечности раз, предпочтительно меньше|
|x{n}?|повторять x точно n раз|

Ограничение реализации: Формы подсчета x{n,m}, x{n,}, и x{n} не позволяют задавать значения больше 1000. Неограниченные повторы с помощью символов * и + не ограничиваются.

| | Группировка |
|---|-----------|
|<code>(re)</code>|пронумерованная группа захвата|
|<code>(?P&lt;name&gt;текст)</code>|именованная группа захвата<br />при выводе Вы можете обращаться к ней через name<br />Пример|
|<code>(?:текст)</code>|группа без захвата|
|<code>(?flags)</code>|установить флаги в текущей группе; не захватывающий<br />Пример<br />```$capture = Re2::Capture(@@(?i)(вася)@@);```<br />находит Вася|
|<code>(?flags:текст)</code>|установить флаги  в текущей группе; не захватывающий<br />Пример:<br />```$capture = Re2::Capture(@@(?i:вася)@@);```<br />находит Вася|

**Пример:**

```
$value = "Вася ел та-та  банан и сосал сушку"u;
$capture = Re2::Capture(@@.*(?P<foo>ба\pL* )@@);

SELECT
  $capture($value) AS capture,
  $capture($value).foo AS capture_member,
  $capture($value)._0 AS member0
```
Результат:

![Вывод](..\..\assets\re2-ex1.png)



| | Флаги|
|---|-----------|
|<code>i</code>|без учета регистра (по умолчанию false)|
|<code>m</code>|многострочный режим: `^`и `$`соответствие начальной / конечной строке в дополнение к начальному / конечному тексту (по умолчанию false)|
|<code>s</code>|разрешить `.`совпадать с `\n`(по умолчанию false)|
|<code>U</code>|ungreedy: поменять местами значения `x*`и `x*?`, `x+`и и `x+?`т. д. (по умолчанию false)|

Синтаксис флага: xyz (установить) или -xyz (очистить) или xy-z (установить xy, очистить z).



| | Пустые строки |
|---|-----------|
|<code>^</code>|в начале текста или строки ( `m`= true)|
|<code>$</code>|конце текста (например, `\z`нет `\Z`) или строки ( `m`= истина)|
|<code>\A</code>|в начале текста|
|<code>\b</code>|на ASCII границе слова ( `\w`с одной стороны , и `\W`, `\A`или `\z`с другой стороны )|
|<code>\B</code>|не на границе слова ASCII|
|<code>\z</code>|at end of text|

| | Элементы класса                                          |
|---|----------------------------------------------------------|
|<code>x</code>| одиночный символ                                              |
|<code>A-Z</code>| диапазон символов (включительно)                             |
|<code>\d</code>| Класс символов Perl                  |
|<code>[:foo:]</code>| Класс символов ASCII `foo` |
|<code>\p{Foo}</code>| Класс символов Unicode `Foo` |
|<code>\pF</code>| Класс символов Unicode `F`(однобуквенное имя) |

| | Именованные классы символов |
|---|----------------------------------------------------------|
|<code>[\d]</code>|цифры (≡ `\d`)|
|```[^\d]```|не цифры (≡ `\D`)|
|<code>[\D]</code>|не цифры (≡ `\D`)|
|<code>[^\D]</code>|не цифры (≡ `\D`)|
|<code>[[:name:]]</code>|именованный класс ASCII  (≡ <code>[:name:]</code>)|
|<code>[^[:name:]]</code>|кроме именованный класс ASCII (≡ <code>[:^name:]</code>)|
|<code>[\p{Name}]</code>|именованное свойство Unicode внутри символьного класса (≡ <code>\p{Name}</code>)|
|<code>[^\p{Name}]</code>|кроме именованное свойство Unicode внутри символьного класса (≡ <code>\P{Name}</code>)|

| | Perl character classes (all ASCII-only)|
|---|----------------------------------------------------------|
|<code>\d</code>|digits (≡ <code>[0-9]</code>)|
|<code>\D</code>|not digits (≡ <code>[^0-9]</code>)|
|<code>\s</code>|whitespace (≡ <code>[\t\n\f\r ]</code>)|
|<code>\S</code>|not whitespace (≡ <code>[^\t\n\f\r ]</code>)|
|<code>\w</code>|word characters (≡ <code>[0-9A-Za-z_]</code>)|
|<code>\W</code>|not word characters (≡ <code>[^0-9A-Za-z_]</code>)|


| | Unicode character class names--general category|
|---|----------------------------------------------------------|
|<code>C</code>|other|
|<code>Cc</code>|control|
|<code>Cf</code>|format|
|<code>Co</code>|private use|
|<code>Cs</code>|surrogate|
|<code>L</code>|letter|
|<code>Ll</code>|lowercase letter|
|<code>Lm</code>|modifier letter|
|<code>Lo</code>|other letter|
|<code>Lt</code>|titlecase letter|
|<code>Lu</code>|uppercase letter|
|<code>M</code>|mark|
|<code>Mc</code>|spacing mark|
|<code>Me</code>|enclosing mark|
|<code>Mn</code>|non-spacing mark|
|<code>N</code>|number|
|<code>Nd</code>|decimal number|
|<code>Nl</code>|letter number|
|<code>No</code>|other number|
|<code>P</code>|punctuation|
|<code>Pc</code>|connector punctuation|
|<code>Pd</code>|dash punctuation|
|<code>Pe</code>|close punctuation|
|<code>Pf</code>|final punctuation|
|<code>Pi</code>|initial punctuation|
|<code>Po</code>|other punctuation|
|<code>Ps</code>|open punctuation|
|<code>S</code>|symbol|
|<code>Sc</code>|currency symbol|
|<code>Sk</code>|modifier symbol|
|<code>Sm</code>|math symbol|
|<code>So</code>|other symbol|
|<code>Z</code>|separator|
|<code>Zl</code>|line separator|
|<code>Zp</code>|paragraph separator|
|<code>Zs</code>|space separator|

