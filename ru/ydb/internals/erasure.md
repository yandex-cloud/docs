---
sourcePath: overlay/internals/erasure.md
---
На данный момент KiKiMR поддерживает следующие режимы:

* none - данные хранятся в виде 1 фрагмента без избыточности, при потере фрагмента восстановление невозможно. Для работы небоходим по крайней мере 1 fail domain. Работоспособность теряется при потере хотя бы одного fail-domain-а.

* mirror-3 - данные хранятся в виде 3 полноценных реплик, восстановление возможно при потере не более 2 реплик. Для работы небоходимо по крайней мере 4 fail domain-а, работоспособность сохраняется при потере не более 1 fail-domain-а. 

* mirror-3-2 - данные хранятся в виде 3 полноценных реплик, восстановление возможно при потере не более 2 реплик. Для работы небоходимо по крайней мере 5 fail domain-ов, работоспособность сохраняется при потере не более 2 fail-domain-ов.

* block-M-N (block-3-1, block-3-2, block-4-2) - данные хранятся в виде M фрагментов, являющихся непересекающимися подстроками исходных данных, дополняемых N фрагментами избыточности. Восстановление возможно при потере не более N реплик. Может позволить минимизировать количество IOPS при чтении небольших фрагментов больших logoblob-ов. Для работы необходимо по крайней мере M+2*N fail domain-ов, работоспособность сохраняется при потере не более N fail-domain-ов.

* stripe-M-N (stripe-3-1, stripe-3-2, stripe-4-2) - данные хранятся в виде M фрагментов, аналогичных "полосатому" raid-0, дополненных N фрагментами избыточности. Восстановление возможно при потере не более N реплик. Mожет позволить минимизировать объем считываемых данных при чтении фрагментов больших logoblob-ов с восстановлением. Для работы небоходимо по крайней мере M+2*N fail domain-ов, работоспособность сохраняется при потере не более N fail-domain-ов.

Под потерей fail-domain-а подразумевается потеря хотя бы одного VDisk из этого fail-domain-а.

В режимах block-M-1 и stripe-M-1 избыточный фрагмент вычисляется как XOR от M фрагментов данных.
В режимах block-M-2 и stripe-M-2 используется схема EVENODD.