Таблетки адресуются по уникальному TabletId. Но вот незадача - сообщения посылаются на ActorID. Что бы преодолеть этот разрыв без загружения клиентов таблетки деталями резолва таблеток, адресации и отслеживания жизненного цикла таблетки введён инструмент - Таблеточные Пайпы. Фактически это набор функций и служебных акторов, позволяющих

  * Устанавливать соединение с текущим инстансом таблетки (лидером или одним из фолловеров в зависимости от настроек).
  * Доставлять сообщения в определённом порядке.
  * Отслеживать инциденты смерти, переезда и рестарта инстанса таблетки.
  * И самое главное - отсылать сообщения таблетке по её TabletID не зная фактического положения в кластере.

Реализация опирается на служебные клиентский и серверный акторы пайпа, первым из которых управляет клиент, а второй - управляется таблеткой-адресатом.

Важно:

  * пайп однонаправленный, т.е. запросы через пайп проходят только от клиента к таблетке, обратные ответы отсылаются непосредственно на клиент. 
  * в рамках одного пайпа гарантируется упорядоченность доставки и нотификация о разрыве пайпа, но нет способа - в силу свойств распределённой системы - узнать какие конкретно сообщения из числа отправленных были доставлены и обработаны, а какие - не доставлены, или не обработаны.
  * но можно гарантировать что если новый пайп на ретраях клиент открывает только после получения сообщения о дисконекте стартого - то таблетка-адресат не получит сообщения от старого пайпа вперемешку с сообщениями по новому пайпу.
