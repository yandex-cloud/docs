# Режимы работы OLTP или OLAP

При работе с базами данных выделяют два основных сценария: On-line Transaction Processing (Онлайн обработка транзакций, [OLTP](../../glossary/oltp.md)) и On-line Analytical Processing (Онлайн аналитическая обработка, [OLAP](../../glossary/olap.md)).

Режим OLTP ориентирован на быстрое выполнение большого потока транзакций, каждая из которых обрабатывает сравнительно небольшой объем данных. А режим OLAP в основном предназначен для анализа данных с более низким относительно OLTP числом транзакций, но со значительно большим объемом обрабатываемых данных.

## Analytics β {#beta-analytics}

OLTP-возможности Serverless {{ ydb-full-name }} используются в стадии Production большим количеством пользователей. Возможности работы в сценарии OLAP находятся в данный момент в стадии {{ preview-stage }}. Для уменьшения взаимовлияния типов нагрузок друг на друга развернут отдельный тип базы данных для OLAP нагрузок под названием `Analytics β`.

Базы данных `Analytics β` — это полностью управляемые ([serverless](serverless-and-dedicated.md)) базы данных {{ ydb-short-name }}, предназначенные для аналитической обработки данных. С их помощью удобно решать задачи периодического анализа данных, строить [витрины данных](../../glossary/datamart.md) или выполнять любые другие аналитические задачи.


{% note info %}

В настоящий момент использование баз данных `Analytics β` не тарифицируется. Оплачивается только используемое место хранения данных по тарифам [Serverless {{ ydb-full-name }}](../pricing/serverless.md#rules-storage).

{% endnote %}


## Выделенные базы данных {{ ydb-full-name }} {#olap}

OLAP-обработка данных доступна в стадии {{ preview-stage }} в выделенных (dedicated) базах данных {{ ydb-full-name }}.

{% note warning %}

При работе внутри одной базы данных OLAP- и OLTP-нагрузки делят общие ресурсы базы данных, при этом профили использования ресурсов базы данных для OLAP- и OLTP-нагрузок существенно отличаются друг от друга. Не рекомендуется объединять в рамках одной базы данных production нагрузки разных типов из-за взаимовлияния профилей нагрузки друг на друга.

{% endnote %}

## Колоночные таблицы {#column_table}

Используемые в OLAP-нагрузках данные рекомендуется хранить в [колоночных таблицах]({{ ydb.docs }}/concepts/datamodel/table#column-oriented-tables).

Колоночные таблицы {{ ydb-short-name }} хранят данные каждого столбца отдельно (независимо) от других столбцов. Такой принцип хранения данных оптимизирован для использования в OLAP-сценариях, так как при построении аналитических отчетов часто используются лишь несколько столбцов исходных данных и колоночное хранение позволяет считывать с дисков только те столбцы, которые непосредственно участвуют в запросе. Еще один плюс такого подхода — высокая степень сжатия данных, так как в рамках каждого столбца зачастую хранятся повторяющиеся или близкие данные. Минусом является то, что выполнение операций над полными строками становится более затратным из-за необходимости восстанавливать их на лету из отдельных ячеек.

На данный момент основной сценарий использования колоночных таблиц {{ ydb-short-name }} — запись данных с возрастающим первичным ключом (например, время события), анализ этих данных и удаление устаревающих данных по TTL. Оптимальным способом добавления данных в колоночные таблицы {{ ydb-short-name }} является пакетная запись, выполняемая блоками в единицы мегабайт.

{% note info %}

В настоящий момент управление данными колоночных таблиц через SQL-конструкции `INSERT INTO`, `UPSERT`, `UPDATE`, `REPLACE`, `DELETE` не поддерживаются. Для записи данных используйте поставку данных из внешних систем ([ydb import]({{ ydb.docs }}/reference/ydb-cli/export-import/import-file), [Data Transfer](../../data-transfer/transfer-matrix.md), [Fluent Bit]({{ ydb.docs }}/integrations/fluent-bit), [Logstash](https://github.com/ydb-platform/ydb-logstash-plugins)) или API-метод SDK [BulkUpsert]({{ ydb.docs }}/reference/ydb-sdk/recipes/bulk-upsert). Для удаления данных используйте [TTL]({{ ydb.docs }}/concepts/ttl).

{% endnote %}

## Смотрите также {#see-also}

* [Описание колоночных таблиц]({{ ydb.docs }}/concepts/datamodel/table#column-tables)
* [Выбор первичного ключа колоночной таблицы]({{ ydb.docs }}/best_practices/pk-olap-scalability)
