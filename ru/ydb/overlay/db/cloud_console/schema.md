# Таблицы директории

В этом разделе описано, как с помощью облачной консоли управления создать, отредактировать или удалить таблицы и директории.

Для создания таблицы вам понадобится [база данных](create_manage_database#create-db.md).

## Создать таблицу {#create-table}

Вы можете создавать таблицы двух типов:

* YDB-таблица — реляционная таблица с индексом по первичному ключу. Таблица YDB всегда упорядочена по первичному ключу.
* Документная таблица — тип таблиц, совместимый с Amazon DynamoDB. Этот тип таблиц доступен только в бессерверном режиме работы {{ ydb-name }}.

  Документная таблица содержит данные в виде набора элементов. Каждый элемент представляет собой набор атрибутов. Атрибут — единица данных, представленная в документной таблице в виде пары ключ-значение, атрибуты во много похожи на столбцы реляционных таблиц. При создании документной таблицы обязательно требуется задать первичный ключ, который служит уникальным идентификатором элементов таблицы. Первичный ключ представляет собой набор атрибутов. Все элементы таблицы обязаны содержать атрибуты, входящие в первичный ключ таблицы. За исключением первичного ключа, элементы могут содержать произвольные атрибуты произвольных типов.

{% list tabs %}

- YDB-таблица

  1. В [консоли управления]({{ link-console-main }}) перейдите на страницу каталога и выберите сервис **{{ ydb-name }}**.
  1. Выберите базу данных, в которой нужно создать таблицу.
  1. Выберите **Создать** → **Таблица** в правой части страницы.
  1. Настройте параметры таблицы:
     * **Имя** таблицы. Должно быть уникальным в рамках базы данных.
     * **Тип** таблицы — YDB-таблица.
  1. Добавьте колонки:
     * **Имя** колонки. Должно быть уникальным в рамках таблицы.
     * **Тип** данных колонки. Независимо от типа данных, каждая колонка может содержать значение `NULL`.
     * **Первичный ключ**. Укажите, входит ли колонка в состав первичного ключа. По первичному ключу автоматически строятся первичные индексы.
  1. При необходимости настройте [вторичные индексы](../../concepts/secondary_indexes.md):
     * **Имя** вторичного индекса. Должно быть уникальным в рамках таблицы.
     * **Ключ** — одна или несколько колонок, которые образуют ключ для построения вторичного индекса.
  1. Настройте политику [партиционирования](../../concepts/datamodel.md#partitioning):
     * **Нет** — таблица не партиционируется.
     * **Равномерно** — весь диапазон значений ключевой колонки типа Uint32 или Uint64 (от 0 до максимального значения) разбивается на интервалы одинаковой длины. При использовании такой политики задайте число интервалов в поле **Количество**.
     * **Явно** — позволяет явно указать значения ключей, которые будут выступать границами для первоначального разбиения таблицы на партиции. Чтобы добавить очередное граничное значение, нажмите кнопку **Добавить ключ-границу шарда**.
  1. Настройте автопартицирование:
     * **By size** — если включено, то партиция разделяется на две при достижении определенного размера данных.
     * **By load** — если включено, то партиция разделяется на две если в течение некоторого промежутка времени испытывает высокую нагрузку (потребляет много процессорного времени).
  1. Задайте расширенные настройки таблицы:
     * **Autopartition by size MBs** — пороговое значение размера данных, при котором срабатывает автопартицирование по размеру.
     * **Min partitions** — количество партиций в таблице, ниже которого не происходит слияние партиций по размеру или нагрузке.
     * **Max partitions** — количество партиций в таблице, выше которого не происходит разбиение по размеру или нагрузке.
     * **Key bloom filter** — если включено, использует [Блум-фильтр](https://en.wikipedia.org/wiki/Bloom_filter) для поиска по ключу. В некоторых случаях позволяет ускорить чтение по ключу.
  1. Нажмите кнопку **Создать таблицу**.

  Для создания YDB-таблиц также можно воспользоваться командой [`CREATE TABLE`](../../yql/reference/syntax/create_table.md) языка запросов [YQL](../../getting_started/yql.md).

- Документная таблица

  {% note info %}

  Документные таблицы доступны только в бессерверном режиме работы {{ ydb-name }}.

  {% endnote %}

  1. В [консоли управления]({{ link-console-main }}) перейдите на страницу каталога и выберите сервис **{{ ydb-name }}**.
  1. Выберите базу данных, в которой нужно создать таблицу.
  1. Выберите **Создать** → **Таблица** в правой части страницы.
  1. Настройте параметры таблицы:
     * **Имя** таблицы. Должно быть уникальным в рамках базы данных.
     * **Тип** таблицы — документная таблица.
  1. Добавьте колонки:
     * **Имя** колонки. Должно быть уникальным в рамках таблицы.
     * **Тип** данных колонки. Независимо от типа данных, каждая колонка может содержать значение `NULL`.
     * **Ключ партицирования** — простой первичный ключ, который состоит из одного атрибута. YDB использует значение ключа партицирования в качестве входных данных для внутренней функции хеширования. Результат вычисления хеш-функции определяет партицию, на которой элемент будет храниться.
     * **Ключ сортировки**. Первичный ключ может быть составным и состоять из ключа партицирования и ключа сортировки. Все элементы с одинаковым ключом партицирования будут храниться вместе, отсортированные по значению ключа сортировки. Если в документной таблице задан ключ партицирования и ключ сортировки, два элемента могут содержать одинаковое значение ключа партицирования, но должны содержать различные значения ключа сортировки.
  1. Нажмите кнопку **Создать таблицу**.

{% endlist %}

## Изменить структуру таблицы {#alter-table}

В облачной консоли {{ ydb-short-name }} можно добавлять неключевые колонки в таблицу и изменять настройки автопартицирования таблиц.

1. В [консоли управления]({{ link-console-main }}) перейдите на страницу каталога и выберите сервис **{{ ydb-name }}**.
1. Выберите базу данных, в которой нужно изменить таблицу.
1. Найдите таблицу в списке и выберите ![image](../../../_assets/horizontal-ellipsis.svg) → **Изменить**.
1. Добавьте новые колонки в таблицу и укажите их параметры:
   * **Имя** колонки. Должно быть уникальным в рамках таблицы.
   * **Тип** данных колонки. Независимо от типа данных, каждая колонка может содержать значение NULL.
1. Чтобы удалить неключевые колонки из таблицы, нажмите на значок ![image](../../../_assets/cross.svg) в нужной строке. Удалить колонки, которые образуют первичный ключ, невозможно.
1. Настройте автопартицирование:
   * **By size** — если включено, то партиция разделяется на две при достижении определенного размера данных.
   * **By load** — если включено, то партиция разделяется на две если в течение некоторого промежутка времени испытывает высокую нагрузку (потребляет много процессорного времени).
1. Задайте расширенные настройки таблицы:
   * **Autopartition by size MBs** — пороговое значение размера данных, при котором срабатывает автопартицирование по размеру.
   * **Min partitions** — количество партиций в таблице, ниже которого не происходит слияние партиций по размеру или нагрузке.
   * **Max partitions** — количество партиций в таблице, выше которого не происходит разбиение по размеру или нагрузке.
   * **Key bloom filter** — если включено, использует [Блум-фильтр](https://en.wikipedia.org/wiki/Bloom_filter) для поиска по ключу. В некоторых случаях позволяет ускорить чтение по ключу.
1. Нажмите кнопку **Изменить таблицу**.

Для изменения YDB-таблиц также предназначена команда [`ALTER TABLE`](../../yql/reference/syntax/alter_table.md) языка запросов [YQL](../../getting_started/yql.md).

## Удалить таблицу {#drop-table}

1. В [консоли управления]({{ link-console-main }}) перейдите на страницу каталога и выберите сервис **{{ ydb-name }}**.
1. Выберите базу данных, в которой нужно удалить таблицу.
1. Найдите таблицу в списке и выберите ![image](../../../_assets/horizontal-ellipsis.svg) → **Удалить**.
1. Подтвердите удаление.

Для удаления YDB-таблиц также предназначена команда [`DROP TABLE`](../../yql/reference/syntax/alter_table.md) языка запросов [YQL](../../getting_started/yql.md).

## Создать и удалить директории {#directories}

{% list tabs %}

- Консоль управления

   1. В [консоли управления]({{ link-console-main }}) перейдите на страницу каталога и выберите сервис **{{ ydb-name }}**.
   1. Выберите базу данных, в которой нужно создать директорию.
   1. Выберите **Создать** → **Директория** в правой части страницы.
   1. Введите имя директории и нажмите кнопку **Создать директорию**.

- SDK

   [YDB SDK](../../reference/ydb-sdk/index.md) предоставляет методы создания, удаления, листинга и просмотра информации о директории. В таблице ниже приведены имена методов для разных языков программирования.

   | Метод    | {% if oss %}C++ | {% endif %}Java | Python | Go |
   | ---- | ---- | {% if oss %}---- | {% endif %}---- | ---- |
   | Создание директории | {% if oss %}```TClient::MakeDirectory``` | {% endif %}```SchemeClient.makeDirectory``` | ```scheme_client.make_directory``` | ```Client.MakeDirectory``` |
   | Удаление директории | {% if oss %}```TClient::RemoveDirectory``` | {% endif %}```SchemeClient.removeDirectory``` | ```scheme_client.remove_directory``` | ```Client.RemoveDirectory``` |
   | Просмотр информации о директории  |{% if oss %} ```TClient::DescribePath``` | {% endif %}```SchemeClient.describePath``` | ```SchemeClient.describeDirectory``` |  ```Client.DescribePath``` |
   | Просмотр информации о директории  | {% if oss %}```TClient::DescribePath``` | {% endif %}```SchemeClient.describePath``` | ```SchemeClient.describeDirectory``` |  ```Client.DescribePath``` |
   | Просмотр информации о директории  |{% if oss %} ```TClient::DescribePath``` | {% endif %}```SchemeClient.describePath``` | ```SchemeClient.describeDirectory``` |  ```Client.DescribePath``` |
   | Листинг директории  | {% if oss %}```TClient::ListDirectory``` | {% endif %}```scheme_client.describe_path``` | ```SchemeClient.list_directory``` | ```Client.ListDirectory``` |

{% endlist %}
