# Метод UpdateTimeToLive

Включает или отключает TTL для указанной таблицы.

В случае успеха возвращает текущее значение `TimeToLiveSpecification`. Операция может длиться до часа. Дополнительные вызовы метода для одной и той же таблицы будут возвращать ошибку `ValidationException`, пока операция не завершится.

Механизм проверки TTL сравнивает текущее время в формате [Unix time](https://ru.wikipedia.org/wiki/Unix-время) со временем, которое хранится в TTL-атрибуте элемента. Если оно меньше текущего времени, элемент помечается как устаревший и впоследствии удаляется.

Элементы с истекшим TTL обычно удаляются в течение двух дней, время удаления зависит от характера рабочей нагрузки. Устаревшие, но еще не удаленные элементы отображаются при чтении, запросе и сканировании. При удалении элементов из таблицы они немедленно удаляются из локального и глобального вторичного индекса так же, как и при стандартной операции удаления.

Устаревшие элементы удаляются так, чтобы обеспечить достаточную пропускную способность для других операций с данными.

## Запрос

Запрос содержит данные в формате JSON.

```json
{
  "TableName": "string",
  "TimeToLiveSpecification": {
    "AttributeName": "string",
    "Enabled": boolean
  }
}
```

### Параметры

Параметр | Описание
----- | -----
`TableName` | Имя таблицы, для которой включается или отключается TTL.<br/>Может содержать путь в иерархии каталогов вида path/to/table.<br/><br/>**Тип**: Строка<br/>**Длина**: 3 - 255 символов.<br/>**Шаблон**: [a-zA-Z0-9_.-]+<br/>**Обязательно**: Да
`TimeToLiveSpecification` |  Параметры, используемые для включения или отключения TTL для указанной таблицы.<br/><br/>**Тип**: Объект типа `TimeToLiveSpecification`.<br/>**Обязательно**: Да

## Ответ

В случае успеха вернется HTTP с кодом 200.
Запрос возвращает данные в формате JSON.

```json
{
  "TimeToLiveSpecification": {
    "AttributeName": "string",
    "Enabled": boolean
  }
}
```

### Параметры

Параметр | Описание
----- | -----
`TimeToLiveSpecification` | Результат операции.<br/><br/>**Тип**: Объект типа `TimeToLiveSpecification`.

## Ошибки

Параметр | Описание
----- | -----
`InternalServerError` | Произошла внутренняя ошибка на стороне сервера.<br/><br/>**Код состояния HTTP**: 500
`LimitExceededException` | Превышен лимит операций над таблицами.<br/>Одновременно допускается до 50 операций над таблицами, включая `CreateTable`, `UpdateTable`, `DeleteTable`, `UpdateTimeToLive`, `RestoreTableFromBackup`, и `RestoreTableToPointInTime`.<br/><br/>**Код состояния HTTP**: 400
`ResourceInUseException` | Ресурс используется другой операцией.<br/><br/>**Код состояния HTTP**: 400<br/>
`ResourceNotFoundException` | Указанная таблица не существует или находится в состоянии не `ACTIVE`.<br/><br/>**Код состояния HTTP**: 400

Также могут возникать [Общие ошибки](../common-errors.md), одинаковые для всех методов.
