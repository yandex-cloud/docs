Kikimr предоставляет [YQL](https://yql.yandex-team.ru/docs/ydb/) в качестве высокоуровнего языка транзакций. Полная документация по YQL доступна [здесь](https://yql.yandex-team.ru/docs/ydb/), в данном документе описываются особенности реализации YQL для Kikimr транзакций.

### Модель транзакций {#transaction-model}
Kikimr транзакции могут состоять из нескольких YQL запросов, текущая транзакция заканчивается операцией `COMMIT`. На каждый из запросов Kikimr отвечает результатами чтения для выражений из этого запроса.

Текущая реализация YQL транзакций использует механизм оптимистичных локов для обеспечения уровня изоляции транзакций, идентичного MiniKQL транзакциям (serializable).

Все модификации данных таблиц откладываются до момента коммита транзакции, так же как и проверка консистентности всех произведенных чтений. В случае если консистентность транзакции нарушена, происходит откат (`ROLLBACK`) транзакции, с соответствующим сообщением об ошибке. Откат транзакции может произойти до момента коммита, в случае если нарушение консистентности обнаружено заранее. Консистентность данных, полученных до момента коммита транзакции, не гарантируется.

Транзакции не видят собственных изменений, все чтения происходят как на момент начала транзакции. Порядок применения модификаций данных соотвествует их порядку в YQL запросе.


### Transaction Control Language {#transaction-control-language}

| Название | Описание | Краткие примеры |
| --- | --- | --- |
| COMMIT |  Проверка консистентности и применение всех модификаций данных транзакцией. | COMMIT;|
| ROLLBACK | Явный откат транзакции | ROLLBACK; |

### Udf {#udf}
В транзакциях Kikimr поддерживается ограниченный список предустановленных UDF:

* [DateTime](/yql/udf/list/datetime.md)
* [Digest](/yql/udf/list/digest.md)
* Histogram
* HyperLogLog
* [Ip](/yql/udf/list/ip.md)
* Json
* [Math](/yql/udf/list/math.md)
* [Pcre](/yql/udf/list/pcre.md)
* [Pire](/yql/udf/list/pire.md)
* [Re2](/yql/udf/list/re2.md)
* Stat
* [String](/yql/udf/list/string.md)
* [Unicode](/yql/udf/list/unicode.md)
* [Url](/yql/udf/list/url.md)


### Не поддерживаемые возможности YQL {#not-supported-yql-features}

* ParseFile, FileContent/FilePath
* Python и Javascript UDFs
* `YQL::Unwrap`