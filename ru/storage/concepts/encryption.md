# Шифрование

При использовании сервиса [{{ objstorage-full-name }}](../../storage/) критичные данные должны быть зашифрованы.

Шифрование бакета {{ objstorage-name }} с помощью ключей [{{ kms-full-name }}](../../kms/) (server-side encryption) — рекомендуемый подход. Такое шифрование защищает от случайной или намеренной публикации содержимого бакета в интернете.

{% note alert %}

Данные в {{ objstorage-short-name }} шифруются по схеме [envelope encryption](../../kms/concepts/envelope.md). Удаление ключа равносильно потере зашифрованных им данных.

{% endnote %}

Шифрование выполняется на стороне сервера (server-side encryption) с помощью ключей, хранящихся в {{ kms-full-name }}. Созданный {{ kms-short-name }}-ключ указывается в настройках бакета. Этот ключ будет использоваться для шифрования всех новых объектов или при [загрузке объекта через API](../../storage/s3/api-ref/object/upload.md).

Объекты шифруются перед сохранением в бакет и расшифровываются при скачивании из него. Шифрование по умолчанию применяется ко всем новым объектам, при этом загруженные ранее — остаются без изменений.

{% if audience != "internal" %}

Чтобы расшифровывать объекты, у пользователя, кроме роли `storage.editor`, должна быть роль на [чтение ключа шифрования](../../kms/security/index.md#service) — `kms.keys.encrypterDecrypter`.

{% endif %}

{% if audience != "internal" %}

Кроме шифрования с помощью {{ kms-full-name }}-ключей, вы можете использовать следующие подходы:

{% include [encryption-client-side](../../_includes/storage/encryption-client-side.md) %}

{% else %}

Кроме шифрования с помощью {{ kms-short-name }}-ключей, вы можете шифровать данные на уровне приложения перед отправкой их в {{ objstorage-name }} (client-side encryption) с помощью сторонних библиотек. При использовании сторонних библиотек и собственных способов управления ключами следует убедиться, что схема работы, используемые алгоритмы и длины ключей соответствуют требованиям регуляторов.

{% endif %}

#### См. также {#see-also}

* [{#T}](../operations/buckets/encrypt.md) 
* [{#T}](../../kms/operations/key.md) 
