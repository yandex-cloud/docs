# Редактирование ACL бакета

Помимо {% if audience != "internal" %}[{{ iam-short-name }}](../../../iam/){% else %}{{ iam-short-name }}{% endif %}, {{ objstorage-name }} поддерживает управление доступом с помощью [ACL](../../concepts/acl.md).

{% list tabs %}

- Консоль управления
  
    1. В [консоли управления]({{ link-console-main }}) выберите каталог.
    1. Выберите сервис **{{ objstorage-name }}**.
    1. Чтобы отредактировать ACL, нажмите значок ![image](../../../_assets/horizontal-ellipsis.svg) справа от имени бакета и выберите **ACL бакета**.
    
        Также можно нажать на имя бакета и на открывшейся странице нажать кнопку **ACL бакета**.

    1. В появившемся окне **Редактирование ACL** выдайте или отзовите необходимые разрешения.
  
- {{ TF }}

  Если у вас ещё нет {{ TF }}, {% if audience != "internal" %}[установите его и настройте провайдер {{ yandex-cloud }}](../../../tutorials/infrastructure-management/terraform-quickstart.md#install-terraform){% else %}установите его и настройте провайдер {{ yandex-cloud }}{% endif %}.

  Перед началом работы, получите {% if audience != "internal" %}[статические ключи доступа](../../../iam/operations/sa/create-access-key.md){% else %}статические ключи доступа{% endif %} — секретный ключ и идентификатор ключа, используемые для аутентификации в {{ objstorage-short-name }}.

  1. Опишите в конфигурационном файле параметры ресурсов, которые необходимо создать:

     ```
     resource "yandex_storage_bucket" "test" {
       access_key = "<идентификатор статического ключа>"
       secret_key = "<секретный ключ>"
       bucket = "<имя бакета>"
       grant {
         id          = "<идентификатор пользователя>"
         type        = "CanonicalUser"
         permissions = ["FULL_CONTROL"]
       }
     
       grant {
         type        = "Group"
         permissions = ["READ", "WRITE"]
         uri         = "http://acs.amazonaws.com/groups/global/AllUsers"
       }
     }
     ```

     Где:

     * `access_key` — идентификатор статического ключа доступа.
     * `secret_key` — значение секретного ключа доступа.
     * `bucket` — имя бакета. Обязательный параметр.
     * `grant` — настройки политики доступа [ACL](../../concepts/acl.md). Необязательный параметр. Для управления следует использовать учетную запись службы с правами администратора.
       * `id` —  идентификатор пользователя.
       * `type` — тип системной группы.
       * `permissions` — типы разрешений согласно [ACL](../../concepts/acl.md#permissions-types).
       * `uri` — идентификатор системной группы.

     Более подробную информацию о ресурсах, которые вы можете создать с помощью {{ TF }}, см. в [документации провайдера]({{ tf-provider-link }}/).

  1. Проверьте корректность конфигурационных файлов.

     1. В командной строке перейдите в папку, где вы создали конфигурационный файл.
     1. Выполните проверку с помощью команды:
        ```
        terraform plan
        ```

     Если конфигурация описана верно, в терминале отобразится список создаваемых ресурсов и их параметров. Если в конфигурации есть ошибки, {{ TF }} на них укажет. 

  1. Разверните облачные ресурсы.

     1. Если в конфигурации нет ошибок, выполните команду:
     ```
     terraform apply
     ```
   
     1. Подтвердите создание ресурсов.

     После этого в указанном каталоге будут созданы все требуемые ресурсы. Проверить появление ресурсов и их настройки можно в [консоли управления]({{ link-console-main }}).

{% endlist %}
