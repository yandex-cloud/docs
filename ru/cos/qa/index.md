# Вопросы и ответы про {{ cos-name }}

#### Как сделать автоматическое обновление по неизменному тегу? {#auto-update}

Обновление [Docker-контейнера](/blog/posts/2022/03/docker-containers) не будет работать с [тегами](../../container-registry/concepts/docker-image.md#version), которые переходят от версии к версии. Мы рекомендуем использовать новый тег для каждого [Docker-образа](../../cos/concepts/docker-image.md).

## Перед началом работы {#before-you-begin}

Недостатки использования переходящих от версии к версии тегов:
* При возникновении проблемы, сложно найти ее источник, если у нескольких одинаковых [виртуальных машин](../../compute/concepts/vm.md) один тег, но разный код.
* Кластер из нескольких ВМ может быть неоднородным, например, если одна ВМ перезагрузилась и обновила Docker-образ.
* Сложно различать версии Docker-образов на ВМ.

#### У меня не создается Docker-контейнер. Почему так? {#create-container}

{% note warning %}

В [Docker Compose спецификации](../../cos/concepts/coi-specifications.md#compose-spec) не поддерживается инструкция `build`: Docker-образ должен быть собран заранее. Кроме того, в Docker Compose спецификации не должно быть ссылок на другие файлы: они не доставляются на ВМ.

{% endnote %}

* Проверьте, что имя Docker-образа указано верно.
* Проверьте, что у [сервисного аккаунта](../../iam/concepts/users/service-accounts.md), привязанного к ВМ, есть права `container-registry.images.puller` на нужный Docker-образ.
* Проверьте, что ВМ имеет доступ в интернет.
* Вы также можете посмотреть логи, выполнив на ВМ команду `sudo journalctl -u yc-container-daemon`.

#### Как можно закрыть порт для публичного доступа и оставить для внутрисетевого? {#port}

* Если использовать {{ coi }} в стандартном варианте — один Docker-контейнер, настраиваемый параметрами, то все порты, которые открыты в контейнере, будут открыты и на хосте.
* Если нужны другие настройки [сети](../../vpc/concepts/network.md#network) для Docker-контейнеров, можно сделать это, используя {{ coi }} с Docker Compose спецификацией. 
* Если необходимо, чтобы порт Docker-контейнера был открыт на хосте, но при этом закрыт в интернет, можно использовать [группы безопасности](../../vpc/concepts/security-groups.md).

  {% include [security-groups-note-vm](../../_includes/vpc/security-groups-note-vm.md) %}x