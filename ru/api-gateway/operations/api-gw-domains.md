# Подключение домена

Вы можете подключить собственный домен для обращения к API-шлюзу. К одному API-шлюзу можно подключить несколько доменов. В таком случае домен будет идентифицироваться по заголовку `Host`.

{% note warning %}

Домен должен быть не ниже третьего уровня (например, www.example.com). Это связано с особенностями обработки CNAME-записей на DNS-хостингах. Подробнее в [RFC 1912, пункт 2.4.](https://www.ietf.org/rfc/rfc1912.txt)

{% endnote %}

Чтобы подключить домен к API-шлюзу:

{% list tabs %}

- Консоль управления

	1. Разместите у своего DNS-провайдера или на собственном DNS-сервере CNAME-запись:
	    ```
	    <домен> IN CNAME <служебный домен API-шлюза>
	    ```
		{% cut "Как узнать служебный домен API-шлюза" %}

		1. Перейдите в [консоль управления]({{ link-console-main }}).
		2. Выберите каталог, в котором находится API-шлюз, и в списке сервисов — **API Gateway**
		3. Выберите API-шлюз.
		4. В открывшемся окне перейдите в раздел **Обзор**. Служебный домен будет в блоке **Общая информация**.

		{% endcut %}

	2. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором находится API-шлюз.

	3. В списке сервисов выберите **Certificate Manager** и в нем:

		1. [Создайте](../../certificate-manager/operations/managed/cert-create.md) сертификат от Let's Encrypt<sup>®</sup>.
		2. [Подтвердите](../../certificate-manager/operations/managed/cert-validate.md) права на домен.
		3. Когда сертификат перейдет в статус `Issued`, [создайте](../../certificate-manager/operations/domain/domain-create.md) домен. В поле **Сертификат** выберите сертификат, который создали на Шаге 3.1.
	
		{% note info %}

		Срок действия сертификата от Let's Encrypt<sup>®</sup> — 90 дней. Его нужно своевременно [обновлять](../../certificate-manager/concepts/managed-certificate.md#renew). В некоторых случаях процедура проверки прав на домен проходит [автоматически](../../certificate-manager/concepts/challenges.md#auto).

		{% endnote %}

	4. Вернитесь на страницу каталога.

	5. В списке сервисов выберите **API Gateway** и в нем:

		1. Выберите API-шлюз.
		2. В открывшемся окне перейдите в раздел **Домены**.
		3. Нажмите **Подключить** и выберите домен.

{% endlist %}
