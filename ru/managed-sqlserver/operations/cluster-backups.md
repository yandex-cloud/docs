# Управление резервными копиями

Вы можете создавать [резервные копии](../concepts/backup.md) и восстанавливать кластеры из имеющихся резервных копий.


## Получить список резервных копий {#list-backups}

{% list tabs %}


- API

  Чтобы получить список резервных копий кластера, воспользуйтесь методом API `listBackups` и передайте идентификатор кластера в параметре `clusterId` запроса.

  Чтобы получить список резервных копий всех кластеров **{{ mms-name }}** в каталоге, воспользуйтесь методом API `list` и передайте идентификатор каталога в параметре `folderId` запроса.

  Чтобы узнать идентификатор кластера, [получите список кластеров в каталоге](cluster-list.md#list-clusters).

{% endlist %}


## Получить информацию о резервной копии {#get-backup}

{% list tabs %}


- API

  Чтобы получить информацию о резервной копии, воспользуйтесь методом API `get` и передайте идентификатор резервной копии в параметре `backupId` запроса. Чтобы узнать идентификатор, [получите список резервных копий](#list-backups).

{% endlist %}


## Создать резервную копию {#create-backup}

{% list tabs %}


- API

  Воспользуйтесь методом API `backup` и передайте идентификатор кластера в параметре `clusterId` запроса.

  Чтобы узнать идентификатор кластера, [получите список кластеров в каталоге](cluster-list.md#list-clusters).

{% endlist %}


## Восстановить кластер из резервной копии {#restore}

Восстанавливая кластер из резервной копии, вы создаете новый кластер с данными из резервной копии. Если в каталоге не хватает [ресурсов](../concepts/limits.md) для создания такого кластера, восстановиться из резервной копии не получится.

Для нового кластера необходимо задать все [обязательные при его создании параметры](cluster-create.md#create-cluster).

{% list tabs %}


- API

  Воспользуйтесь методом API `restore` и передайте в  запросе:
  - Идентификатор требуемой резервной копии в параметре `backupId`. Чтобы узнать идентификатор, [получите список резервных копий в кластере](#list-backups).
  - Момент времени, на который должен быть восстановлен кластер в параметре `time`.
  - Имя нового кластера, который будет содержать восстановленные из резервной копии данные. Имя кластера должно быть уникальным в рамках каталога.

{% endlist %}


## Изменить время начала резервного копирования {#set-backup-window}

{% list tabs %}


- API

  Чтобы изменить время начала резервного копирования для кластера, воспользуйтесь методом `update` и передайте в запросе:
  - Идентификатор кластера в параметре `clusterId`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Новое время начала резервного копирования в параметре `configSpec.backupWindowStart`.
  - Список полей конфигурации кластера подлежащих изменению (в данном случае — `configSpec.backupWindowStart`) в параметре `updateMask`.

  {% note warning %}

  Этот метод API сбросит все настройки кластера, которые не были явно переданы в запросе, на значения по умолчанию. Чтобы избежать этого, перечислите настройки, которые вы хотите изменить, в параметре `updateMask` (одной строкой через запятую).

  {% endnote %}

{% endlist %}
