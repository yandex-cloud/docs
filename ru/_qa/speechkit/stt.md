# Распознавание речи (STT)


#### Некорректные ударения и произношение {#stt-stress-pronunciation}

Создайте обращение и приложите примеры, чтобы разработчики могли внести корректировки к следующим релизам модели синтеза.


#### Плохое качество распознавания при 8кГц {#at-8khz}

Если проблема систематическая (десятки процентов от общей доли запросов), создайте обращение и приложите примеры для исследования. Чем больше примеров вы пришлете, тем вероятнее разработчики обнаружат проблему.


#### Форма обратной связи по качеству распознавания {#feedback}



При возникновении проблем обратитесь в [службу поддержки]({{ link-console-support }}) с файлами и описанием.


#### Два канала распознались в один / Как распознать каждый канал отдельно {#two-channels}

Распознавание многоканальных аудиофайлов доступно только при [асинхронном распознавании](../../{{ speechkit-slug }}/stt/transcribation.md).

Проверьте формат вашей записи:

* Для LPCM используйте параметр [config.specification.audioChannelCount](../../{{ speechkit-slug }}/stt/api/transcribation-api.md#sendfile-params), равный 2.
* Для MP3 и OggOpus указывать параметр не нужно, поскольку информация о количестве каналов уже содержится в файле. Файл автоматически распределится на нужное количество записей.

Распознанный текст в ответе разделяется параметром [channelTag](../../{{ speechkit-slug }}/stt/api/transcribation-api.md#get-result-response).

#### Можно ли распознавать 2 и более голосов с разделением на дикторов? {#separate-speaker}

Распознавание многоканальных аудиофайлов доступно только при [асинхронном распознавании](../../{{ speechkit-slug }}/stt/transcribation.md).

Во время распознавания текст не разделяется по голосу, но вы можете разместить голоса в разных каналах и разделить распознанный текст в ответе параметром [channelTag](../../{{ speechkit-slug }}/stt/api/transcribation-api.md#get-result-response).

Количество каналов можно указать в запросе с помощью параметра [config.specification.audioChannelCount](../../{{ speechkit-slug }}/stt/api/transcribation-api.md#sendfile-params).

#### Неполное распознавание аудио {#incomplete}

Если вы распознаете потоковое аудио, попробуйте использовать разные версии API: [API v1](../../{{ speechkit-slug }}/stt/api/streaming-api.md) или [API v3](../../{{ speechkit-slug }}/stt-v3/api-ref/grpc/). 

Для распознавания аудиофайлов попробуйте разные [модели](../../{{ speechkit-slug }}/stt/models.md).


#### Файл короче чем лимит, но при распознавании возникает ошибка {#multi-channel-limits}

Если файл многоканальный, то учитывайте суммарное время записи всех каналов. Список ограничений см. в разделе [Квоты и лимиты в {{ speechkit-short-name }}](../../{{ speechkit-slug }}/concepts/limits.md#speechkit-limits).

#### Ошибка Internal Server Error {#internal-server-err}

Убедитесь, что [формат](../../{{ speechkit-slug }}/stt/api/request-api.md#body_params), указываемый в запросе, и реальный формат файла соответствуют друг другу. Если ошибку исправить не получается, пришлите нам примеры аудиофайлов, которые не удается распознать.

#### Когда высылается ответ при распознавании? {#when-response}

При синхронном и асинхронном распознавании ответ присылается один раз — после обработки запроса.

При потоковом режиме распознавания вы можете настроить поведение сервера. По умолчанию сервер возвращает ответ только после распознавания всей переданный фразы. С помощью параметра [partialResults](../../{{ speechkit-slug }}/stt/api/streaming-api.md#specification-msg) можно настроить распознавание так, чтобы сервер возвращал также и промежуточные результаты распознавания.

Получение промежуточных результатов позволит быстрее реагировать на распознаваемую речь, не дожидаясь окончания фразы.

#### Где найти пример для распознавания аудиофайлов? {#audiofile}

Примеры использования {{ speechkit-name }} собраны в разделе [Практические руководства](../../{{ speechkit-slug }}/tutorials/index.md). Если вы хотите распознать предзаписанные аудиофайлы, используйте [асинхронное распознавание](../../speechkit/stt/transcribation.md).

#### Где найти пример для распознавания речи с микрофона? {#microphone}

[Пример потокового распознавания речи, продиктованной на микрофон](../../{{ speechkit-slug }}/stt/api/microphone-streaming.md).

#### Можно ли использовать POST для потокового распознавания? {#post}

Потоковое распознавание использует механизм удаленного вызова процедур [gRPC](../../glossary/) и не поддерживается в [REST API](../../glossary/rest-api.md), поэтому использовать метод POST не получится.

#### Обрывается / завершается сессия потокового распознавания {#broken-session}

При использовании [API v2](../../{{ speechkit-slug }}/stt/streaming.md#session-restrictions) для потокового распознавания сервис ожидает аудиоинформацию. Если в течение 5 секунд данные не приходят, сессия завершается. Этот параметр нельзя изменить в API v2.

Потоковое распознавание работает в режиме реального времени. Вы можете отправлять на распознавание «тишину», чтобы сервис не закрыл соединение.

Мы рекомендуем использовать [API v3](../../) для потокового распознавания. Для отправки "тишины" в API v3 есть [специальный тип сообщений](../../speechkit/stt-v3/api-ref/grpc/Recognizer/recognizeStreaming.md#speechkit.stt.v3.SilenceChunk), поэтому ее не придется имитировать в аудиозаписи самостоятельно.

#### Как определяется конец фразы и длительность сессии распознавания? {#utterance-end}

Конец фразы определяется по «тишине» после фразы автоматически. Подробнее об определении конца фразы см. в разделе [{#T}](../../speechkit/stt/eou.md).

[Максимальная длительность сессии](../../{{ speechkit-slug }}/stt/streaming.md#session-restrictions) потокового распознавания составляет {{ stt-streaming-audioLength }}.

#### Что делать, если {{ speechkit-name }} не дослушивает или, наоборот, слишком долго ждет окончания разговора? {#eou-tune}

Перебивание и задержки при [потоковом распознавании](../../{{ speechkit-slug }}/stt/streaming.md) могут быть связаны с определением конца фразы. О том, как настроить EOU, см. рекомендации в разделе [{#T}](../../{{ speechkit-slug }}/stt/eou.md).

#### Ошибка OutOfRange desc = Exceeded maximum allowed stream duration {#duration-exceeded}

Эта ошибка означает, что превышена максимально допустимая длительность сессии распознавания. В этом случае вам нужно заново открыть сессию.

Для потокового распознавания [максимальная длительность сессии](../../{{ speechkit-slug }}/concepts/limits.md#speechkit-limits) составляет {{ stt-streaming-audioLength }}. Это техническое ограничение, обусловленное особенностями архитектуры {{ yandex-cloud }}, изменить его нельзя.

#### Из чего складывается стоимость использования? {#stt-cost}

Примеры расчета стоимости использования, правила тарификации и актуальные цены смотрите в разделе [{#T}](../../{{ speechkit-slug }}/pricing.md).
