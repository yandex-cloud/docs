# Типы хранилища

{% if audience != "internal" %}

{{ mkf-name }} позволяет использовать сетевые и локальные диски для организации хранилища кластеров баз данных. Сетевые диски реализованы на базе сетевых блоков — виртуальных дисков в инфраструктуре {{ yandex-cloud }}. Локальные диски физически размещаются в [серверах-брокерах](brokers.md).

{% include [storage-type-nrd](../../_includes/mdb//mkf/storage-type.md) %}

## Особенности хранилища на локальных SSD-дисках {#local-storage-features}

Хранилище на локальных SSD-дисках в кластере из одного хоста не обеспечивает отказоустойчивости: при отказе диска данные теряются безвозвратно. Чтобы обеспечить отказоустойчивость, создавайте кластеры из трех и более хостов.

## Особенности хранилища на нереплицируемых SSD-дисках {#network-nrd-storage-features}

{% include [nrd-storage-details](../../_includes/mdb/nrd-storage-details.md) %}

{% endif %}

## Минимальный размер хранилища {#minimal-storage-size}

Для работы каждого [топика](./topics.md#topics) необходимо место в хранилище хостов-брокеров. Размер этого места зависит от фактора репликации и количества [разделов](./topics.md#partitions). Если свободного места в хранилище меньше, создать новый топик невозможно.

{% note tip %}

Объем хранилища всегда можно [увеличить](../operations/cluster-update.md#change-disk-size) в рамках действующих квот.

{% endnote %}

Минимальный размер хранилища для всех топиков рассчитывается по формуле:

`2 × максимальный размер сегмента логов × количество разделов в кластере × фактор репликации`.

Если разделы топиков распределены равномерно, для получения нужного размера хранилища разделите рассчитанное по формуле значение на число хостов-брокеров.

## Максимальный размер сегмента логов {#maximum-log-segment-size}

Для каждой реплики раздела топика необходимо как минимум два сегмента логов. Максимальный размер такого сегмента может быть определен:

- [на уровне топика](../operations/cluster-topics.md#update-topic) — настройкой [Segment bytes](settings-list.md#settings-topic-segment-bytes);
- глобально [на уровне кластера](../operations/cluster-update.md#change-kafka-settings) — настройкой [Log segment bytes](settings-list.md#settings-log-segment-bytes).

По умолчанию размер сегмента равен 1 ГБ.
