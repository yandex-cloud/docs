# Типы хранилища

{% if audience != "internal" %}

{{ mkf-name }} позволяет использовать для кластеров сетевое и локальное хранилища. Сетевое хранилище реализовано на базе сетевых блоков — виртуальных дисков в инфраструктуре {{ yandex-cloud }}. Локальное хранилище организуется на дисках, которые физически размещаются в [серверах-брокерах](brokers.md).

{% include [storage-type-nrd](../../_includes/mdb/storage-type-nrd.md) %}

## Особенности локального хранилища {#local-storage-features}

Локальное хранилище в кластере из одного хоста не обеспечивает отказоустойчивости: при отказе локального диска данные теряются безвозвратно. Чтобы обеспечить отказоустойчивость, создавайте кластеры из трех и более хостов.

## Особенности нереплицируемого сетевого хранилища {#network-nrd-storage-features}

{% include [nrd-storage-details](../../_includes/mdb/nrd-storage-details.md) %}

{% endif %}

## Минимальный размер хранилища {#minimum-disk-size}

В кластере существует ограничение на минимальный размер хранилища — оно складывается из размеров всех сегментов логов пользовательских топиков. Для каждой реплики раздела топика требуется минимум два сегмента логов. Максимальный размер такого сегмента может быть определен:

- [на уровне топика](../operations/cluster-topics.md#update-topic) — настройка [Segment bytes](settings-list.md#settings-topic-segment-bytes);
- глобально [на уровне кластера](../operations/cluster-update.md#change-kafka-settings) — настройка [Log segment bytes](settings-list.md#settings-log-segment-bytes).

По умолчанию он равен 1 ГБ.

Таким образом, минимальный размер хранилища для всех топиков составляет: `2 × максимальный размер сегмента логов × количество разделов в кластере × фактор репликации`. Если разделы кластера распределены равномерно, получившуюся сумму можно поделить на количество брокеров, чтобы определить требуемый размер хранилища для одного брокера.