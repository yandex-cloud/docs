---
title: Взаимосвязь ресурсов сервиса {{ mkf-full-name }}
description: '{{ KF }} — это распределенная система для обмена сообщениями между приложениями по принципу «публикация-подписка». Сервис {{ mkf-full-name }} помогает разворачивать и поддерживать кластеры серверов {{ KF }} версий {{ versions.console.str }} в инфраструктуре {{ yandex-cloud }}. Каждый кластер {{ mkf-name }} состоит из одного или нескольких хостов-брокеров, на которых размещены топики и их разделы.'
---

# Взаимосвязь ресурсов в {{ mkf-name }}

{{ KF }} — это распределенная система для обмена сообщениями между приложениями по принципу «публикация-подписка».

Сервис {{ mkf-full-name }} помогает разворачивать и поддерживать [кластеры](../../glossary/cluster.md) серверов {{ KF }} версий {{ versions.console.str }} в инфраструктуре {{ yandex-cloud }}.


Каждый кластер {{ mkf-name }} состоит из одного или нескольких [хостов-брокеров](brokers.md), на которых размещены [топики](topics.md) и их разделы. Хосты кластера могут находиться в разных зонах доступности. Подробнее о географии {{ yandex-cloud }} см. в разделе [Обзор платформы](../../overview/concepts/geo-scope.md).

Если все хосты-брокеры созданы в одной зоне доступности, то их количество нельзя изменить.


К хостам кластера [подключаются](../operations/connect/clients.md) клиенты — приложения-[производители](producers-consumers.md) и [потребители](producers-consumers.md) данных. Производители отправляют сообщения в определенные топики кластера, а потребители читают сообщения из них. При таком подходе вам не понадобится заново настраивать потребителей, если производитель изменится.

{% include [responsibilities-link](../../_includes/mdb/responsibilities-link.md) %}

## Конфигурация хостов в зависимости от версии {{ KF }} {#version}

В различных версиях {{ KF }} используются разные инструменты для хранения метаданных, состояния и конфигурации кластера:

{% include notitle [kafka-versions.md](../../_includes/mdb/mkf/kafka-versions.md) %}

{% note info %}

{% include notitle [default-config](../../_includes/mdb/mkf/create-cluster.md#default-config) %}

{% endnote %}

### Конфигурация хостов в кластерах с {{ ZK }} {#zookeeper}

{{ ZK }} автоматически настраивается и размещается в кластере в зависимости от количества хостов-брокеров:

* Если кластер {{ KF }} состоит из одного хоста-брокера, то {{ ZK }} размещается на этом же хосте.
* Если кластер {{ KF }} состоит из более чем одного хоста, то {{ ZK }} размещается отдельно от брокеров на трех дополнительных хостах. Эти хосты добавляются в кластер автоматически.

Хосты {{ ZK }} нельзя удалить. Количество хостов {{ ZK }} фиксировано.

Подробнее о создании кластера {{ mkf-name }} с {{ ZK }} см. в [инструкции](../operations/cluster-create.md#create-cluster).

### Конфигурация хостов в кластерах с {{ kraft-name }} {#kraft}

[Протокол {{ kraft-name }}](kraft.md) (сокращенно {{ kraft-short-name }}) используется для хранения метаданных вместо {{ ZK }}.

{% include [kraft-cluster-topology](../../_includes/mdb/mkf/kraft-cluster-topology.md) %}

Более подробная информация приведена [в документации {{ KF }}](https://kafka.apache.org/42/operations/kraft/).
