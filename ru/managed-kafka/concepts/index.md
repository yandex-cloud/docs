---
title: "Взаимосвязь ресурсов сервиса {{ mkf-full-name }}"
description: "{{ KF }} — это распределенная система для обмена сообщениями между приложениями по принципу «публикация-подписка». Сервис {{ mkf-full-name }} помогает разворачивать и поддерживать кластеры серверов {{ KF }} версий 2.8, 3.0, 3.1 и 3.2 в инфраструктуре {{ yandex-cloud }}. Каждый кластер {{ mkf-name }} состоит из одного или нескольких хостов-брокеров, на которых размещены топики и их разделы."
---

# Взаимосвязь ресурсов в {{ mkf-name }}

Сервис {{ mkf-full-name }} помогает разворачивать и поддерживать кластеры серверов {{ KF }} версий {{ versions.console.str }} в инфраструктуре {{ yandex-cloud }}.

{{ KF }} — это распределенная система для обмена сообщениями между приложениями по принципу «публикация-подписка». 

Каждый кластер {{ mkf-name }} состоит из одного или нескольких [хостов-брокеров](brokers.md), на которых размещены [топики](topics.md) и их разделы. Хосты кластера могут находиться в разных зонах доступности. Подробнее о географии {{ yandex-cloud }} см. в разделе [Обзор платформы](../../overview/concepts/geo-scope.md).

Если все хосты-брокеры созданы в одной зоне доступности, то их количество нельзя изменить.


К хостам кластера [подключаются](../operations/connect.md) клиенты — приложения-[производители](producers-consumers.md) и [потребители](producers-consumers.md) данных. Производители отправляют сообщения в определенные топики кластера, а потребители читают сообщения из них. При таком подходе, если производитель изменится, вам не понадобится заново настраивать потребителей.

В зависимости от количества хостов-брокеров в кластере автоматически настраивается и размещается {{ ZK }}:

* Если кластер {{ KF }} состоит из одного хоста-брокера, то {{ ZK }} размещается на этом же хосте.
* Если кластер {{ KF }} состоит из более чем одного хоста, то {{ ZK }} размещается отдельно от брокеров на трех дополнительных хостах. Эти хосты добавляются в кластер автоматически. 

Хосты {{ ZK }} нельзя удалить. Количество хостов {{ ZK }} фиксировано. {{ mkf-name }} использует {{ ZK }} для хранения состояния и конфигурации кластера.

Изменить параметры хостов {{ ZK }} можно с помощью [CLI](../operations/cluster-update.md).

{% note info %}

По умолчанию для хостов {{ ZK }} задаются следующие характеристики:

* [класс хоста](instance-types.md) `b2.medium`;
* объем диска 10 ГБ;
* [тип диска](storage.md) — быстрые сетевые.

{% endnote %}

Виртуальные машины, соответствующие хостам кластера, могут размещаться:
* На *стандартных хостах* {{ yandex-cloud }}.

  Это физические серверы для размещения виртуальных машин кластера. Такие хосты выбираются случайным образом из пула доступных хостов, удовлетворяющих выбранной конфигурации кластера. 


* На *выделенных хостах* {{ yandex-cloud }}.

  Это физические серверы для размещения исключительно ваших виртуальных машин. Эти виртуальные машины обеспечивают как работу кластера, так и работу других ваших сервисов, которые поддерживают выделенные хосты. Такие хосты выбираются из *групп выделенных хостов*, указанных при создании кластера.

  Кластер из нескольких хостов-брокеров требует для своей работы не менее трех групп выделенных хостов. Это необходимо для размещения хостов {{ ZK }}.

  При таком варианте размещения обеспечивается физическая изоляция виртуальных машин. Кластер {{ mkf-name }}, использующий выделенные хосты, обладает всеми возможностями обычных кластеров.

  Подробнее см. в разделе [{#T}](../../compute/concepts/dedicated-host.md).


Более подробная информация приведена [в документации {{ KF }}](https://kafka.apache.org/intro).

## Отказоустойчивость кластера {#fault-tolerance}

Чтобы обеспечить надежность хранения и бесперебойную доступность данных в кластере:

* Кластер должен состоять минимум из трех хостов-брокеров.
* В каждой из трех зон доступности должен присутствовать хотя бы один хост-брокер.
* Топики кластера должны иметь следующие параметры:

    * **Фактор репликации** — `3`.
    * **Минимальное число синхронных реплик** — `2`.

Подробнее в [соглашении об уровне обслуживания (SLA)]({{ link-sla-kafka }}).
