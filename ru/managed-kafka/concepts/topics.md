# Топики и разделы

## Топики {#topics}

Топик — это способ группировки потоков сообщений по категориям. [Производители](producers-consumers.md) [публикуют](../operations/connect.md) сообщения определенной категории в топик, а [потребители](producers-consumers.md) [подписываются](../operations/connect.md) на этот топик и читают из него сообщения. Для каждого топика {{ KF }} ведет лог сообщений, который может быть разбит на несколько разделов.

Например, если производителем данных выступает интернет-магазин, вы можете создать отдельные топики для логирования действий пользователя, для хранения данных о его корзине, для записей о транзакциях и т. д.

{{ mkf-name }} управляет хранением сообщений в топике и обеспечивает:

- Репликацию разделов — при условии, что кластер состоит хотя бы из двух [брокеров](brokers.md) и для топиков задан фактор репликации больше единицы.
- Сжатие сообщений.
- Очистку лога [в соответствии с политикой](../operations/cluster-topics.md#create-topic) при устаревании сообщений в разделах или достижении заданного размера лога.

### Служебные топики {#service-topics}

В процессе своей работы {{ mkf-name }} может создавать и использовать служебные топики.
Записывать пользовательские данные в такие топики нельзя.

Служебный топик `_schemas` используется для обеспечения работы [{{ mkf-msr }}](./managed-schema-registry.md).

## Разделы {#partitions}

Раздел — это последовательность сообщений топика, которые упорядочены в порядке их поступления. Порядковый номер сообщения называют смещением. Потребители читают сообщения от начала к концу раздела, то есть первыми будут прочитаны те сообщения, которые поступили раньше. Чтобы начать читать с определенного сообщенния, потребители должны передать брокеру его смещение.

Использование разделов позволяет:

- Распределять нагрузку по хранению сообщений и обработке запросов между несколькими [брокерами {{ KF }}](brokers.md).
- Обеспечивать отказоустойчивость: раздел может реплицироваться на указанное число брокеров.

Подробнее о топиках и разделах см. [в документации {{ KF }}](https://kafka.apache.org/documentation/#intro_topics).

## Управление топиками и разделами {#management}

{% note warning %}

Способ управления топиками выбирается один раз при создании кластера и потом его нельзя изменить.

{% endnote %}

Кластер {{ mkf-name }} позволяет управлять топиками и разделами двумя способами:

* С помощью стандартных интерфейсов {{ yandex-cloud }} (CLI, API, консоль управления). Способ подходит, если вы хотите создавать, удалять и настраивать топики и разделы, используя возможности сервиса {{ mkf-name }}.

* С помощью [Admin API {{ KF }}](https://kafka.apache.org/documentation/#adminapi). Способ подходит, если у вас уже есть собственное решение для управления топиками и разделами или вы по какой-то причине не планируете использовать интерфейсы {{ yandex-cloud }}. При использовании Admin API действуют ограничения:

    * Создавать и удалять топики, а также управлять ими с помощью стандартных интерфейсов {{ yandex-cloud }} невозможно — вместо этого используется учетная запись администратора. Такая учетная запись обладает ролью `ACCESS_ROLE_ADMIN`, действующей на все топики кластера.

        О том, как создать такую учетную запись, см. в разделе [{#T}](../operations/cluster-accounts.md).

    * Настройка прав доступа для учетных записей [производителей и потребителей](./producers-consumers.md) производится с помощью стандартных интерфейсов {{ yandex-cloud }}, а не Admin API {{ KF }}.
