# Топики и разделы

## Топики {#topics}

Топик — это способ группировки потоков сообщений по категориям. [Производители](producers-consumers.md) [публикуют](../operations/connect.md) сообщения определенной категории в топик, а [потребители](producers-consumers.md) [подписываются](../operations/connect.md) на этот топик и читают из него сообщения. Для каждого топика {{ KF }} ведет лог сообщений, который может быть разбит на несколько разделов.

Например, если производителем данных выступает интернет-магазин, вы можете создать отдельные топики для логирования действий пользователя, для хранения данных о его корзине, для записей о транзакциях и т. д.

{{ mkf-name }} управляет хранением сообщений в топике и обеспечивает:

- Репликацию разделов — при условии, что кластер состоит хотя бы из двух [брокеров](brokers.md) и для топиков задан фактор репликации больше единицы.
- Сжатие сообщений.
- Очистку лога [в соответствии с политикой](../operations/cluster-topics.md#create-topic) при устаревании сообщений в разделах или достижении заданного размера лога.

### Служебные топики {#service-topics}

В процессе своей работы {{ mkf-name }} может создавать и использовать служебные топики.
Записывать пользовательские данные в такие топики нельзя.

Служебный топик `_schemas` используется для обеспечения работы [{{ mkf-msr }}](./managed-schema-registry.md).

## Разделы {#partitions}

Раздел — это последовательность сообщений топика, которые упорядочены в порядке их поступления. Порядковый номер сообщения называют смещением. Потребители читают сообщения от начала к концу раздела, то есть первыми будут прочитаны те сообщения, которые поступили раньше. Чтобы начать читать с определенного сообщения, потребители должны передать брокеру его смещение.

Использование разделов позволяет:

- Распределять нагрузку по хранению сообщений и обработке запросов между несколькими [брокерами {{ KF }}](brokers.md).
- Обеспечивать отказоустойчивость: раздел может реплицироваться на указанное число брокеров.

Подробнее о топиках и разделах см. [в документации {{ KF }}](https://kafka.apache.org/documentation/#intro_topics).

## Управление топиками и разделами {#management}

Кластер {{ mkf-name }} позволяет управлять топиками и разделами двумя способами:

* С помощью стандартных интерфейсов {{ yandex-cloud }} (CLI, {% if lang == "ru" and audience != "internal" %}[API](../../glossary/rest-api.md){% else %}API{% endif %}, консоль управления). Способ подходит, если вы хотите создавать, удалять и настраивать топики и разделы, используя возможности сервиса {{ mkf-name }}.

* С помощью [Admin API {{ KF }}](https://kafka.apache.org/documentation/#adminapi). Способ подходит, если у вас уже есть собственное решение для управления топиками и разделами. При использовании Admin API действуют ограничения:

    * Для управления топиками используется пользователь-администратор с ролью `ACCESS_ROLE_ADMIN`, которая действует для всех топиков кластера. Если такого пользователя в кластере нет, [создайте](../operations/cluster-accounts.md) его.

    * Права доступа пользователей для [производителей и потребителей](./producers-consumers.md) настраиваются с помощью стандартных интерфейсов {{ yandex-cloud }}, а не Admin API {{ KF }}.

    * Управление топиками через {{ KF }} Admin API можно включить при [создании](../operations/cluster-create.md) или [изменении](../operations/cluster-update.md) настроек кластера и невозможно выключить.

Оба способа можно использовать как по отдельности, так и совместно.
