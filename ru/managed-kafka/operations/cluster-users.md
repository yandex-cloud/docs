# Управление пользователями {{ KF }}

Пользователь в {{ mkf-name }} — это сущность, помогающая разграничить права доступа: она определяет, к каким [топикам](../concepts/topics.md) имеют доступ определенные [производители и потребители](../concepts/producers-consumers.md). Благодаря этому достигается высокая защищенность кластера {{ KF }}: неаутентифицированные или неавторизованные производители и потребители не смогут получить доступ к не предназначенным для них топикам.

Производитель или потребитель, подключившись к кластеру с правами определенного пользователя, получает доступ только к тем топикам, которые разрешены для этого пользователя. Можно подключить несколько производителей или потребителей к кластеру, используя одного пользователя: первые получат права на запись в определенные топики, а вторые — на чтение.

После создания кластера {{ KF }} вы можете:
- [Создать пользователя](#create-user).
- [Изменить настройки пользователя](#update-user).
- [Выдать права пользователю](#grant-permission).
- [Отозвать права у пользователя](#revoke-permission).
- [Удалить пользователя](#delete-user).
- [Получить список пользователей в кластере](#list-users).

## Создать пользователя {#create-user}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [create](../api-ref/User/create.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Настройки пользователя в параметре `user_spec`:
    - Имя пользователя в параметре `name`.
    - Пароль пользователя в параметре `password`.
    - Права доступа к топикам (один или несколько параметров `permissions`, по одному на каждый топик):
      - Имя топика в параметре `topic_name`. Чтобы узнать имя, [получите список топиков в кластере](cluster-topics.md#list-topics).
      - Права доступа к топику в параметре `role`: `ACCESS_ROLE_PRODUCER` для производителя, либо `ACCESS_ROLE_CONSUMER` для потребителя.

{% endlist %}

## Изменить настройки пользователя {#update-user}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [update](../api-ref/User/update.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя пользователя в параметре `user_name`. Чтобы узнать имя, [получите список пользователей в кластере](#list-users).
  - Новый пароль пользователя в параметре `password` (если требуется изменить пароль).
  - Новый набор прав на доступ к топикам (один или несколько параметров `permissions`, по одному на каждый топик).
  
  Чтобы изменить только часть настроек (например, только некоторые права или только пароль), также задайте значение параметра `update_mask`.
  
{% endlist %}

## Выдать права пользователю {#grant-permission}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [grantPermission](../api-ref/User/grantPermission.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя пользователя в параметре `user_name`. Чтобы узнать имя, [получите список пользователей в кластере](#list-users).
  - Новое право на доступ к топику в параметре `permission`.
  
{% endlist %}

## Отозвать права у пользователя {#revoke-permission}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [revokePermission](../api-ref/User/revokePermission.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя пользователя в параметре `user_name`. Чтобы узнать имя, [получите список пользователей в кластере](#list-users).
  - Право на доступ к топику, которое требуется отозвать, в параметре `permission`.
  
{% endlist %}

## Удалить пользователя {#delete-user}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [delete](../api-ref/User/delete.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя пользователя, которого требуется удалить, в параметре `user_name`. Чтобы узнать имя, [получите список пользователей в кластере](#list-users).
  
{% endlist %}

## Получить список пользователей в кластере {#list-users}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [list](../api-ref/User/list.md): передайте значение идентификатора требуемого кластера в параметре `cluster_id` запроса.

  Чтобы узнать идентификатор кластера, [получите список кластеров в каталоге](#list-clusters).

{% endlist %}