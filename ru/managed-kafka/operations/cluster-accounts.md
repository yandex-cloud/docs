# Управление учетыми записями {{ KF }}

Учетные записи в {{ KF }} разграничивают права доступа [производителей и потребителей](../concepts/producers-consumers.md) данных. Производитель или потребитель получает доступ только к тем [топикам](../concepts/topics.md), которые разрешены для его учетной записи.

Вы можете использовать одну и ту же учетную запись для нескольких производителей или потребителей: первые получат права на запись в определенные топики, а вторые — на чтение.

После создания кластера {{ KF }} вы можете:
- [Создать учетную запись](#create-account).
- [Изменить настройки учетной записи](#update-account).
- [Выдать права учетной записи](#grant-permission).
- [Отозвать права у учетной записи](#revoke-permission).
- [Удалить учетную запись](#delete-account).
- [Получить список учетных записей в кластере](#list-accounts).

## Создать учетную запись {#create-account}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [create](../api-ref/User/create.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Настройки учетной записи в параметре `user_spec`:
    - Имя учетной записи в параметре `name`.
    - Пароль учетной записи в параметре `password`.
    - Права доступа к топикам (один или несколько параметров `permissions`, по одному на каждый топик):
      - Имя топика в параметре `topic_name`. Чтобы узнать имя, [получите список топиков в кластере](cluster-topics.md#list-topics).
      - Права доступа к топику в параметре `role`: `ACCESS_ROLE_PRODUCER` для производителя, либо `ACCESS_ROLE_CONSUMER` для потребителя.

{% endlist %}

## Изменить настройки учетной записи {#update-account}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [update](../api-ref/User/update.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя учетной записи в параметре `user_name`. Чтобы узнать имя, [получите список учетных записей в кластере](#list-accounts).
  - Новый пароль учетной записи в параметре `password` (если требуется изменить пароль).
  - Новый набор прав на доступ к топикам (один или несколько параметров `permissions`, по одному на каждый топик).
  
  {% note important %}
  
  Этот метод API удалит все права, которые не были явно указаны в параметрах `permissions`.
  Чтобы избежать этого, перечислите права, которые вы хотите изменить, в параметре `update_mask` (одной строкой через запятую).

  {% endnote %}
  
{% endlist %}

## Выдать права учетной записи {#grant-permission}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [grantPermission](../api-ref/User/grantPermission.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя учетной записи в параметре `user_name`. Чтобы узнать имя, [получите список учетных записей в кластере](#list-accounts).
  - Новое право на доступ к топику в параметре `permission`.
  
{% endlist %}

## Отозвать права у учетной записи {#revoke-permission}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [revokePermission](../api-ref/User/revokePermission.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя учетной записи в параметре `user_name`. Чтобы узнать имя, [получите список учетных записей в кластере](#list-accounts).
  - Право на доступ к топику, которое требуется отозвать, в параметре `permission`.
  
{% endlist %}

## Удалить учетную запись {#delete-account}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [delete](../api-ref/User/delete.md) и передайте в запросе:
  - Идентификатор кластера в параметре `cluster_id`. Чтобы узнать идентификатор, [получите список кластеров в каталоге](cluster-list.md#list-clusters).
  - Имя учетной записи, которую требуется удалить, в параметре `user_name`. Чтобы узнать имя, [получите список учетных записей в кластере](#list-accounts).
  
{% endlist %}

## Получить список учетных записей в кластере {#list-accounts}

{% list tabs %}

- API
  
  Воспользуйтесь методом API [list](../api-ref/User/list.md): передайте значение идентификатора требуемого кластера в параметре `cluster_id` запроса.

  Чтобы узнать идентификатор кластера, [получите список кластеров в каталоге](#list-clusters).

{% endlist %}