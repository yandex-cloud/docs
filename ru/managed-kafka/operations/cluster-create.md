# Создание кластера

Кластер {{ mkf-name }} — это один или несколько хостов-брокеров, на которых размещены топики и соответствующие топикам разделы. Производители и потребители могут работать с этими топиками, подключившись к хостам кластера. Репликация работает по умолчанию в любом кластере из более чем одного хоста при настройке фактора репликации более "1".

{% note info %}

Если хранилище баз данных заполнится на 95%, кластер перейдет в режим только чтения. Рассчитывайте и увеличивайте необходимый размер хранилища заранее.

{% endnote %}

Хосты {{ KF }}-кластера будут равномерно расположены в выбранных зонах доступности. Количество зон и хостов следует выбирать исходя из требуемой модели отказоустойчивости и нагрузки на кластер. Так, например, для устойчивости к отказу N хостов следует размещать минимум 2*N+1 хостов.

{% include [mkf-zookeeper-hosts](../../_includes/mdb/mkf-zk-hosts.md) %}

{% list tabs %}

- Консоль управления
  
  1. В консоли управления выберите каталог, в котором нужно создать кластер {{ mkf-name }}.
  1. Выберите сервис {{ KF }}.
  1. Нажмите кнопку Создать кластер.
  1. Введите имя кластера в поле Имя кластера. Имя кластера должно быть уникальным в вашем Облаке.
  1. Выберите окружение, в котором нужно создать кластер (после создания кластера окружение изменить невозможно):
      - <q>PRODUCTION</q> — для стабильных версий ваших приложений.
      - <q>PRESTABLE</q> — для тестирования, в том числе самого сервиса {{ mkf-name }}. Prestable-окружение обновляется чаще, из-за чего в нем раньше исправляются уже известные проблемы, но могут происходить обратно несовместимые изменения.
  1. Выберите версию Kafka.
  1. Выберите класс хостов — он определяет технические характеристики виртуальных машин, на которых будут развернуты хосты брокеров. Все доступные варианты перечислены в разделе [{#T}](../concepts/instance-types.md).
  1. В блоке **Размер хранилища**:

        {% if audience != "internal" %} - Выберите тип хранилища — более гибкое сетевое (**network-hdd** или **network-ssd**) или более быстрое локальное хранилище (**local-ssd**). Размер локального хранилища можно менять только с шагом 100 ГБ. {% endif %}

        - Выберите объем, который будет использоваться для данных.
  1. В блоке **Сетевые настройки**:
      - Выберете зоны доступности кластера
      - Выберите сеть. В выбранной сети должно быть по одной подсети на зону доступности.
  1. В блоке **Хосты** выберете количество хостов-брокеров на зону.
  1. Нажмите кнопку **Создать кластер**.

- API
  
  Чтобы создать кластер, воспользуйтесь методом API [create](../api-ref/Cluster/create.md) и передайте в запросе:
  - Идентификатор каталога, в котором должен быть размещен кластер, в параметре `folder_id`.
  - Имя кластера в параметре `name`.
  
{% endlist %}
