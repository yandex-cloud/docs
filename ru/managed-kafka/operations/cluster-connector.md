# Управление коннекторами

[Коннектор](../concepts/connectors.md) управляет процессом переноса топиков {{ KF }} в другой кластер или другую систему хранения данных.

Вы можете:

* [получить список коннекторов](#list-connectors)
* [создать коннектор](#create-connector),
* [приостановить коннектор](#pause-connector),
* [возобновить работу коннектора](#resume-connector),
* [удалить коннектор](#delete-connector).

## Получить список коннекторов {#list-connectors}

{% list tabs %}

- Консоль управления

  1. В [консоли управления]({{ link-console-main }}) перейдите в нужный каталог.
  1. В списке сервисов выберите **{{ mkf-name }}**.
  1. Выберите нужный кластер и перейдите на вкладку **Коннекторы**.

{% endlist %}

## Создать коннектор {#create-connector}

{% list tabs %}

- Консоль управления

  1. В [консоли управления]({{ link-console-main }}) перейдите в нужный каталог.
  1. В списке сервисов выберите **{{ mkf-name }}**.
  1. Выберите нужный кластер и перейдите на вкладку **Коннекторы**.
  1. Нажмите кнопку **Создать коннектор**.
  1. В блоке **Базовые параметры** укажите:

     * Имя коннектора.
     * Лимит задач – количество одновременно работающих процессов. Рекомендуется указывать не менее `2` для равномерного распределения нагрузки репликации.
  
  1. В блоке **Дополнительные свойства** укажите свойства коннектора в формате:

     ```text
     <ключ>:<значение>
     ```

     При этом ключ может быть как простой строкой, так и содержать префикс, указывающий на принадлежность к источнику или приемнику (псевдоним кластера в [конфигурации коннектора](#settings-mm2)):

     ```text
     <псевдоним кластера>.<тело ключа>:<значение>
     ```

  1. Задайте конфигурацию коннектора [MirrorMaker](#settings-mm2).
        
     Подробнее о поддерживаемых типах коннекторов см. в разделе [{#T}](../concepts/connectors.md).

  1. Нажмите кнопку **Создать**.

{% endlist %}

## Приостановить коннектор {#pause-connector}

В процессе приостановки коннектора:

* разрывается подключение к приемнику;
* удаляются данные из служебных топиков коннектора.

Чтобы приостановить коннектор:

{% list tabs %}

- Консоль управления

  1. В [консоли управления]({{ link-console-main }}) перейдите в нужный каталог.
  1. В списке сервисов выберите **{{ mkf-name }}**.
  1. Выберите нужный кластер и перейдите на вкладку **Коннекторы**.
  1. Нажмите на значок ![ellipsis](../../_assets/horizontal-ellipsis.svg) рядом с именем нужного коннектора и выберите пункт **Приостановить**.

{% endlist %}

## Возобновить работу коннектора {#resume-connector}

{% list tabs %}

- Консоль управления

  1. В [консоли управления]({{ link-console-main }}) перейдите в нужный каталог.
  1. В списке сервисов выберите **{{ mkf-name }}**.
  1. Выберите нужный кластер и перейдите на вкладку **Коннекторы**.
  1. Нажмите на значок ![ellipsis](../../_assets/horizontal-ellipsis.svg) рядом с именем нужного коннектора и выберите пункт **Возобновить**.

{% endlist %}

## Удалить коннектор {#delete-connector}

{% list tabs %}

- Консоль управления

  1. В [консоли управления]({{ link-console-main }}) перейдите в нужный каталог.
  1. В списке сервисов выберите **{{ mkf-name }}**.
  1. Выберите нужный кластер и перейдите на вкладку **Коннекторы**.
  1. Нажмите на значок ![ellipsis](../../_assets/horizontal-ellipsis.svg) рядом с именем нужного коннектора и выберите пункт **Удалить**.
  1. Нажмите кнопку **Удалить**.

{% endlist %}

## Параметры коннекторов {#connector-settings}

### MirrorMaker {#settings-mm2}

* **Топики** — шаблон для отбора реплицируемых топиков, имена топиков перечисляются через запятую или символ `|`. Можно использовать префиксы с символом `*`.
* **Фактор репликации** — количество копий топика, хранящихся в кластере.
* В блоке **Кластер-источник** укажите параметры для подключения к кластеру-источнику:
  * **Псевдоним** — префикс для обозначения кластера-источника в настройках коннектора.
  * **Использовать этот кластер** — выберите опцию для использования текущего кластера в качестве источника.
  * **Бутстрап-серверы** — список FQDN хостов-брокеров кластера-источника с номерами портов для подключения, разделенный запятыми.

     FQDN брокеров {{ mkf-name }} можно запросить со [списком хостов в кластере](cluster-hosts.md#list-hosts).

  * **SASL имя пользователя** — имя пользователя для подключения коннектора к кластеру-источнику.
  * **SASL пароль** — пароль пользователя для подключения коннектора к кластеру-источнику.
  * **SASL механизм** — выберите механизм шифрования имени и пароля.
  * **Протокол безопасности** — выберите протокол подключения коннектора:
    * `PLAINTEXT`, `SASL_PLAINTEXT` – для подключений без SSL;
    * `SSL`, `SASL_SSL` – для подключений с SSL.

* В блоке **Кластер-приемник** укажите параметры для подключения к кластеру-приемнику:
  * **Псевдоним** — префикс для обозначения кластера-приемника в настройках коннектора.
  * **Использовать этот кластер** — выберите опцию для использования текущего кластера в качестве приемника.
  * **Бутстрап-серверы** — список FQDN хостов-брокеров кластера-приемника с номерами портов для подключения, разделенный запятыми.

     FQDN брокеров {{ mkf-name }} можно запросить со [списком хостов в кластере](cluster-hosts.md#list-hosts).

  * **SASL имя пользователя** — имя пользователя для подключения коннектора к кластеру-приемнику.
  * **SASL пароль** — пароль пользователя для подключения коннектора к кластеру-приемнику.
  * **SASL механизм** — выберите механизм шифрования имени и пароля.
  * **Протокол безопасности** — выберите протокол подключения коннектора:
    * `PLAINTEXT`, `SASL_PLAINTEXT` – для подключений без SSL;
    * `SSL`, `SASL_SSL` – для подключений с SSL.
