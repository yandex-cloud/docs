# Термины и определения {{ yq-name }}

## Соединение {#connection}

_Соединение_ — это набор параметров, необходимых для подключения {{ yq-full-name }} к источникам и приемникам данных. Например, при использовании в качестве источника данных файла из {{ objstorage-full-name }}, соединение содержит информацию об имени бакета и параметрах авторизации в нем.

В {{ yq-full-name }} поддерживаются следующие типы соединений:

* {{ objstorage-short-name }} — соединение с [бакетом](../../storage/concepts/bucket.md) {{ objstorage-full-name }}, может быть как источником, так и приемником данных.
* {{ mpg-name }} — соединение с базой данных [{{ mpg-name }}, может быть только источником данных.
* {{ mch-name }} — соединение с базой данных [{{ mch-name }}, может быть только источником данных.
* {{ yds-short-name }} — соединение с [базой данных](../../ydb/concepts/resources.md#database) {{ ydb-full-name }}, в которой расположен [поток](../../data-streams/concepts/glossary.md#stream-concepts) {{ yds-full-name }}; может быть как источником, так и приемником данных.
* {{ monitoring-short-name }} — соединение с {{ monitoring-full-name }}, может быть только приемником данных.

## Привязка {#binding}

Один и тот же YQL-запрос можно выполнять на данных, которые доступны через разные типы [соединений](#connection) (например, на данных в бакете и в потоке). В этом случае удобно для каждого соединения создать _привязку_ — ресурс, который содержит информацию о соединении, [формате](../sources-and-sinks/formats.md) и [схеме данных](#schema).

Привязки данных можно создать только для файловых источников данных - к {{ objstorage-short-name }}.

## Запрос {#query}

_Запрос_ — это выражение на языке [YQL](https://ydb.tech/ru/docs/yql/reference/syntax/), диалекте SQL, позволяющее выполнять операции с данным. Запрос состоит из набора операторов YQL, а также информации о [соединении](#connection) или [привязке](#binding). При использовании соединения необходимо указать [схему данных](#schema).

С помощью запросов {{ yq-full-name }} можно выполнять [аналитическую](batch-processing.md) и [потоковую](./stream-processing.md) обработку данных.

## Информация о запусках запроса {#jobs}

Один и тот же [запрос](#query) можно запускать многократно. Для каждого запуска запроса сохраняется следующая информация:

* статус выполнения запроса;
* дата и время начала выполнения запроса;
* продолжительность выполнения запроса;
* имя пользователя, который выполнил запрос;
* метрики исполнения запроса.

Для последнего запуска запроса в течение 24 часов также сохраняется результат.

## Схема данных {#schema}

_Схема данных_ — это перечень полей и типов данных источника, которые не обладают явной схемой, например, бакеты {{ objstorage-short-name }} или потоки {{ yds-short-name }}. В схеме необходимо описать все поля, которые будут использованы в запросе. Если запрос обращается к данным через [соединение](#connection), схема указывается в теле запроса. В случае использования [привязки](#binding) схема данных задается в ее свойствах.

При работе с {{ mch-name }} или {{ mpg-name }} схема автоматически извлекается из самих систем управления базами данных, поэтому для этих источников явно указать её нельзя.

## Контрольная точка {#checkpoint}

Системы потокового анализа обрабатывают бесконечные (не имеющие начала и конца) потоки данных. При перезапуске запроса, чтобы не обрабатывать все данные из потока данных каждый раз с начала, {{ yq-full-name }} запоминает смещения (offsets) обработанных данных. При остановке и последующем восстановлении обработки {{ yq-full-name }} перематывает поток данных на сохраненное смещение и продолжает обработку с этого места.

Контрольные точки содержат информацию про потоковый запрос, в том числе про смещения внутри потоков данных.

Если добавить в текст запроса обращение к новым потоковым источникам данных, то в контрольных точках не будет информации про смещения внутри потоков данных. Это может привести к тому, что часть данных будет считываться из существующих потоков данных с последней точки, а часть данных с момента появления новых сообщений в новых потоках данных.

{% note info %}

Настройки способа выполнения запроса: обработка данных с контрольной точки или обработка данных заново - задаются в момент [запуска запроса](../operations/query.md#run).

{% endnote %}
