# Версионирование в {{ maf-name }}

## Доступные версии {{ AF }} {#available-versions}

Сервис {{ maf-name }} поддерживает несколько версий {{ AF }}, каждая из которых доступна на одной из нескольких версий Python. Поддерживаются следующие комбинации версий:

Версия {{ AF }} | Версия Python
--- | ---
2.8 | 3.8
2.8 | 3.10
2.10 | 3.10
2.10 | 3.12

## Обновление версий {#update}

Обновление версий в {{ maf-name }} производится по следующим правилам:

* Можно изменять версию Python на любую поддержанную для текущей версии {{ AF }}.
* Можно изменять версию {{ AF }} на следующую поддержанную.

Обратите внимание, что сервисом не разрешаются следующие обновления:

* Обновление версий {{ AF }} через одну. Так как каждое обновление версии {{ AF }} требует миграции базы метаданных, мы рекомендуем последовательное обновление.
* Одновременное обновление версий Python и {{ AF }}. Так как пользовательские зависимости могут не работать на более новых версиях Python, мы рекомендуем обновлять компоненты кластера по отдельности.

Таким образом, рекомендованная стратегия обновления кластера {{ maf-name }} на примере версий от `Airflow=2.8, Python=3.8` до `Airflow=2.10, Python.3=12` выглядит так:

1. Обновить версию Python до 3.10, проверить работоспособность кластера с учетом используемых зависимостей.
1. Обновить версию {{ AF }} до 2.10, проверить работоспособность кластера после примененной миграции БД.
1. Обновить версию Python до 3.12, снова проверить работоспособность используемых зависимостей.
