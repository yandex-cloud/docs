---
title: "Создание кластера {{ AF }}"
description: "Каждый кластер {{ maf-name }} состоит из набора компонентов {{ AF }}, каждый из которых может быть представлен в нескольких экземплярах. Экземпляры могут находиться в разных зонах доступности."
keywords:
  - создание кластера {{ AF }}
  - кластер {{ AF }}
  - {{ AF }}
  - Airflow
---

# Создание кластера {{ AF }}

Каждый кластер {{ maf-name }} состоит из набора компонентов {{ AF }}, каждый из которых может быть представлен в нескольких экземплярах. Экземпляры могут находиться в разных зонах доступности.

## Перед созданием кластера {#before-creating}

1. В каталоге, в котором планируется создать кластер, [создайте сервисный аккаунт](../../iam/operations/sa/create.md) с ролью `storage.viewer`.
1. [Создайте статический ключ доступа](../../iam/operations/sa/create-access-key.md) для сервисного аккаунта.
1. [Создайте бакет {{ objstorage-full-name }}](../../storage/operations/buckets/create.md), в котором будут храниться [DAG-файлы](../concepts/index.md#about-the-service).

## Создайте кластер {#create-cluster}

{% list tabs %}

- Консоль управления

  
  @[youtube](https://www.youtube.com/watch?v=vWCmvbrhDsI)


  1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором нужно создать кластер.
  1. Выберите сервис **{{ ui-key.yacloud.iam.folder.dashboard.label_managed-airflow }}**.
  1. Нажмите кнопку **{{ ui-key.yacloud.airflow.button_create-cluster }}**.
  1. В блоке **{{ ui-key.yacloud.mdb.forms.section_base }}** введите:

     * Имя кластера. Имя должно быть уникальным в рамках каталога.
     * (Опционально) Описание кластера.
     * Пароль пользователя-администратора. Пароль должен иметь длину не менее 8 символов и содержать как минимум:

        * одну заглавную букву;
        * одну строчную букву;
        * одну цифру;
        * один специальный символ.

     {% note info %}     

     Сохраните пароль локально или запомните его. Сервис не показывает пароли после создания.

     {% endnote %}
     
  1. В блоке **{{ ui-key.yacloud.mdb.forms.section_network-settings }}** выберите:

      * [Зоны доступности](../../overview/concepts/geo-scope) для размещения кластера.
      * Облачную сеть.
      * Подсеть в каждой из выбранных зон доступности.

  1. Задайте количество экземпляров и ресурсы для [компонентов](../concepts/index.md#components) {{ maf-name }}:

      * веб-сервера;
      * планировщика;
      * воркеров;

        {% note info %}
        
        Если минимальное количество воркеров равно максимальному количеству, то будет создано фиксированное число воркеров. Если минимальное значение меньше, чем максимальное, то при отсутствии задач в очереди количество воркеров будет равно минимальному значению, а при наличии задач в очереди, количество воркеров будет увеличиваться, не превышая заданного максимального значения. 
         
        {% endnote %}

      * (опционально) службы Triggerer.

  1. (Опционально) В блоке **{{ ui-key.yacloud.airflow.section_dependencies }}** укажите названия pip- и deb-пакетов, чтобы установить в кластер дополнительные библиотеки и приложения для запуска DAG-файлов.

      Чтобы указать более одного пакета, нажмите кнопку **{{ ui-key.yacloud.common.add }}**.

      При необходимости задайте ограничения на версии устанавливаемых пакетов, например:

      ```text
      scikit-learn>1.0.0
      kafkacat=1.2.0-2
      ```

      Формат названия пакета и выбор версии определены командой установки: `pip install` — для pip-пакетов, `apt install` — для deb-пакетов.

  1. В блоке **{{ ui-key.yacloud.airflow.section_storage }}** задайте:

      * Имя ранее созданного бакета, в котором будут храниться DAG-файлы.
      * Параметры статического ключа доступа для сервисного аккаунта.

  1. (Опционально) В блоке **{{ ui-key.yacloud.airflow.section_airflow-configuration }}** задайте [дополнительные свойства {{ AF }}](https://airflow.apache.org/docs/apache-airflow/2.2.4/configurations-ref.html) в формате `ключ:значение`, например `api.maximum_page_limit` **:** `150`.

  1. (Опционально) В блоке **{{ ui-key.yacloud.mdb.forms.section_additional }}** включите защиту от удаления кластера.

  1. Нажмите кнопку **{{ ui-key.yacloud.common.create }}**.

{% endlist %}