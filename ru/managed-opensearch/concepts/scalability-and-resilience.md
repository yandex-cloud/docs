# Шардирование и репликация в {{ mos-name }}

В кластере {{ OS }}:

- С помощью шардирования можно обеспечить возможность масштабирования при росте объема данных в индексах.
- С помощью репликации можно повысить отказоустойчивость кластера и сохранность данных в индексах (только для многохостовых конфигураций кластера).

## Шардирование индексов {#sharding}

{{ mos-full-name }} использует стандартный механизм шардирования индексов {{ OS }}. Для каждого индекса вы можете создать один или несколько первичных шардов (primary shards), между которыми распределяются запросы на запись в индекс. Количество первичных шардов можно задать только при создании индекса, потом их число нельзя будет изменить.

{{ OS }} равномерно распределяет первичные шарды по хостам кластера. Это снижает нагрузку на каждый отдельный хост и позволяет легко отмасштабировать кластер, если нагрузка вдруг возрастет.

## Репликация индексов {#replication}

{{ mos-name }} использует стандартный механизм репликации индексов {{ OS }}. Чтобы включить его, при создании индекса укажите фактор репликации — число реплик для каждого первичного шарда индекса. В результате будет создано нужное количество шардов-реплик (replica shard) для каждого первичного шарда.

При настроенной репликации:

- Запись в индекс идет только через первичные шарды.
- Чтение из индекса может выполняться одновременно и с первичных шардов, и с шардов-реплик.

{{ OS }} автоматически управляет шардами-репликами, перемещая их между хостами кластера при изменении размера кластера.

Количество шардов-реплик можно регулировать: в отличие от первичных шардов, их количество не фиксируется при создании индекса.
