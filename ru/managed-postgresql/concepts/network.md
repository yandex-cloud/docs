# Сеть и кластеры БД

{% if audience != "internal" %}

При создании кластера вы можете:

* задать сеть для самого кластера;

* задать подсети для каждого из хостов кластера;

* запросить публичный IP-адрес для доступа к кластеру извне {{ yandex-cloud }}.

Вы можете создать кластер, не задавая подсети для хостов, если выбранная для каждого хоста зона доступности содержит ровно одну подсеть сети кластера.

{% else %}

Все кластеры создаются внутри нашей сети, куда уже [есть доступ](../../mdb/access.md#network-access) из большинства сетей и от большинства сотрудников. Если у вас нет доступа, запросите доступ в [Панчере](https://puncher.yandex-team.ru/) к макросу `_PGAASINTERNALNETS_`. Для подключения к {{ PG }} в заявке нужно указать порт 6432.

{% endif %}

## Имя хоста и FQDN {#hostname}

Имя для каждого хоста в кластере {{ mpg-short-name }} генерирует при его создании. Это имя будет являться доменным именем хоста (FQDN). Имя хоста и, соответственно, FQDN невозможно изменить.

{% if audience != "internal" %}

FQDN можно использовать для доступа к хосту в рамках одной облачной сети. Подробнее читайте в [документации сервиса {{ vpc-full-name }}](../../vpc/).


## Публичный доступ к хосту {#public-access-to-a-host}

Любой хост в кластере может быть доступен извне {{ yandex-cloud }}, если вы запросили публичный доступ при создании хоста. Чтобы подключиться к такому хосту, используйте его FQDN.

Запросить публичный адрес после создания хоста невозможно, но вы можете заменить какой-либо из имеющихся хостов на новый хост с публичным адресом.

При удалении хоста с публичным FQDN соответствующий этому имени IP-адрес отзывается.

{% endif %}

## Группы безопасности {#security-groups}

Для групп безопасности действует принцип «весь трафик, который не разрешен, запрещен». Поэтому правила групп безопасности облачной сети кластера могут препятствовать подключению к кластеру, если ему назначена одна или несколько групп.

Например, пусть для подключения к кластеру используется ВМ в {{ yandex-cloud }}. Тогда, если в правилах на входящий трафик группы безопасности кластера указана только подсеть 10.133.0.0/24, а ВМ находится в подсети 10.128.0.0/16, то ВМ не сможет подключиться к кластеру. Также не сможет подключиться ВМ из подсети 10.133.0.0/24, которая обращается к порту, не указанному в правилах группы безопасности.

{% note tip %}

При подключении к кластеру из той же облачной сети, в которой он находится, не забудьте [настроить](../operations/connect.md#configuring-security-groups) группы безопасности не только для кластера, но и для хоста, с которого выполняется подключение.

{% endnote %}

{% include [sg-rules-concept](../../_includes/mdb/sg-rules-concept.md) %}
