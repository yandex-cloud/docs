# Управление пользователями БД

Вы можете добавлять и удалять пользователей, а также управлять их индивидуальными настройками.

## Получить список пользователей {#list-users}

{% list tabs %}

- Консоль управления
  
  1. Перейдите на страницу каталога и выберите сервис **{{ mpg-name }}**.
  1. Нажмите на имя нужного кластера, затем выберите вкладку **Пользователи**.
  
- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы получить список пользователей кластера, выполните команду:
  
  ```
  $ {{ yc-mdb-pg }} user list
       --name=<имя кластера>
  ```
  
  Имя кластера можно запросить со [списком кластеров в каталоге](cluster-list.md).
  
{% endlist %}

## Добавить пользователя {#adduser}

Сразу после создания пользователь получает только привилегию `CONNECT`, и не может выполнять никакие операции с базой данных. Чтобы дать пользователю доступ к базе, [назначьте](grant.md) ему нужные привилегии или роли.

{% note info %}

Пользователь, который назначается владельцем базы данных при создании БД, получает привилегию `OWNER`, которая дает права на любые изменения базы.

{% endnote %}

При добавлении пользователя {{ mpg-short-name }} по умолчанию резервирует для него 50 подключений к {{ PG }}-кластеру (параметр `connlimit`). Минимальное количество подключений на пользователя — 10.

{% include [note-pg-user-connections.md](../../_includes/mdb/note-pg-user-connections.md) %}


{% list tabs %}

- Консоль управления
  
  1. Перейдите на страницу каталога и выберите сервис **{{ mpg-name }}**.
  1. Нажмите на имя нужного кластера и выберите вкладку **Пользователи**.
  1. Нажмите кнопку **Добавить**.
  1. Введите имя пользователя БД и пароль (от 8 до 128 символов).
  
- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы создать пользователя в кластере, выполните команду:
  
  ```
  $ {{ yc-mdb-pg }} user create <имя пользователя>
       --name=<имя кластера>
       --password=<пароль для пользователя>
       --permissions=<список баз, к которым пользователь должен иметь доступ>
       --conn-limit=<максимальное количество соединений для пользователя>
  ```
  
  Имя кластера можно запросить со [списком кластеров в каталоге](cluster-list.md).
  
{% endlist %}

## Изменить пользователя {#updateuser}

Для пользователя можно изменить:

- имя и пароль;
- список баз, к которым у него есть доступ;
- ограничение на количество подключений к базам, и другие настройки, специфичные для {{ PG }}.

О том, как настроить привилегии и роли для пользователя, читайте в разделе [{#T}](grant.md).

{% list tabs %}

- Консоль управления
  
  В консоли управления пока можно изменить только пароль пользователя БД:
  
  1. Перейдите на страницу каталога и выберите сервис **{{ mpg-name }}**.
  1. Нажмите на имя нужного кластера и выберите вкладку **Пользователи**.
  1. Нажмите значок ![image](../../_assets/vertical-ellipsis.svg) и выберите пункт **Изменить пароль**.
  
- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы изменить пароль пользователя или список доступных ему баз данных, выполните команду:
  
  ```
  $ {{ yc-mdb-pg }} user update <имя пользователя>
       --name=<имя кластера>
       --password=<пароль для пользователя>
       --permissions=<список баз, к которым пользователь должен иметь доступ>
       --conn-limit=<максимальное количество соединений для пользователя>
  ```
  
  Имя кластера можно запросить со [списком кластеров в каталоге](cluster-list.md).
  
{% endlist %}

## Удалить пользователя {#removeuser}

{% list tabs %}

- Консоль управления
  
  1. Перейдите на страницу каталога и выберите сервис **{{ mpg-name }}**.
  1. Нажмите на имя нужного кластера и выберите вкладку **Пользователи**.
  1. Нажмите значок ![image](../../_assets/vertical-ellipsis.svg) и выберите пункт **Удалить**.
  
- CLI
  
  {% include [cli-install](../../_includes/cli-install.md) %}
  
  {% include [default-catalogue](../../_includes/default-catalogue.md) %}
  
  Чтобы удалить пользователя, выполните команду:
  
  ```
  $ {{ yc-mdb-pg }} user delete <имя пользователя>
       --name=<имя кластера>
  ```
  
  Имя кластера можно запросить со [списком кластеров в каталоге](cluster-list.md).
  
{% endlist %}
