---
title: MCP-сервер
description: MCP-сервер — это связующее звено между моделями искусственного интеллекта и внешними ресурсами, такими как базы данных, различные инструменты и скрипты.
keywords:
  - MCP
  - MCP-сервер
  - Model Context Protocol
---

# MCP-сервер

_MCP_ (Model Context Protocol) — фреймворк с открытым исходным кодом для стандартизации взаимодействия и обмена данными между моделями искусственного интеллекта и внешними системами, источниками данных и инструментами. Таким образом, MCP-сервер соединяет модели ИИ с внешним миром и дает инструменты влияния на него.

В среде разработчиков MCP сравнивают с разъемом USB Type-C, который так же является универсальным средством взаимодействия между разным оборудованием. Такое решение должно было рано или поздно появиться, поскольку модели, несмотря на их обширные знания, оторваны от внешнего мира, а разработчики решали эту проблему разными, несовместимыми друг с другом способами.

Протокол со средствами разработки для Python, TypeScript, Java и C# был выпущен компанией Anthropic в ноябре 2024 года. Уже в марте 2025 года его приняли за стандарт основные разработчики ИИ, такие как OpenAI и Google DeepMind.

Сейчас в [репозитории Anthropic](https://github.com/modelcontextprotocol) доступны реализации эталонных MCP-серверов для популярных корпоративных систем, включая Google Диск, Slack, GitHub, PostgreSQL и других. Открытый исходный код позволяет значительно расширить возможности MCP и создавать собственные серверы для интеграции со своими системами.

## Как это работает {#how-work}

Для упрощения интеграции MCP-серверы используют классическую клиент-серверную вычислительную архитектуру, состоящую из трех основных элементов:

1. **Хост** — система, где размещена модель искусственного интеллекта.
1. **Клиент** — компонент хоста, который отправляет запросы серверу по протоколу МCP.
1. **Сервер** — внешний источник, который обрабатывает запросы клиента и возвращает модели необходимые ресурсы, инструменты и инструкции.

Взаимодействие между элементами архитектуры происходит в форме диалога и управляется назначением следующих ролей:

* `user` — пользователь, который отправляет запросы.
* `assistant` — модель искусственного интеллекта.
* `system` — системная роль, передающая модели инструкции. Например, `Ты — ассистент Яндекса. Отвечай в соответствии с регламентом компании`.
* `tools` — доступные модели инструменты. Например, подключение к базам данных, геологическим картам, удаленный запуск скриптов и программ.

Роль MCP-сервера — организовать все это вместе в виде непрерывной двусторонней связи. В задачи протокола также входит управление процессом аутентификации, хранение в памяти контекста запросов, обработка ошибок, валидация данных и другие рутинные процессы.

## Примеры использования {#usage}

Разберем подробнее, какие задачи вы можете решить с помощью MCP-сервера и привязанному к нему ИИ:

* **Интеграция с базами данных**
  
  MCP-серверы поддерживают подключение к различным [СУБД](https://ru.wikipedia.org/wiki/Система_управления_базами_данных), что позволяет ИИ получать, обрабатывать и вносить данные. Например:

  * Обрабатывать и анализировать большие наборы данных, такие как логи и архивы.
  * Кэшировать результаты запросов, чтобы модель могла получить их без повторного обращения к базе данных.

* **Общение с клиентом**

  Одна из самых популярных задач для ИИ-моделей — [чат-боты](chat-bot.md) и поддержка клиентов. С помощью MCP-сервера можно упростить процесс интеграции модели с вашими источниками данных. Модель сможет общаться с клиентом, имея постоянно обновляющуюся информацию о ваших продуктах.

* **Context7**

  [Context7 MCP-сервер](https://github.com/upstash/context7) позволяет ИИ-ассистенту иметь доступ к последней версии документации используемых вами технологий. С таким доступом модель реже ошибается и становится полезным помощником в написании кода. 

* **Использование возможностей популярных нейросетей**

  Интеграция с популярными [большими языковыми моделями](llm.md) позволяет им автоматически обнаруживать доступные инструменты. Так, модели могут генерировать описания продуктов и изображения, запрашивая информацию из ваших баз данных, проверять код на GitHub, анализировать сообщения из чатов и многое другое.

* **Парсинг веб-ресурсов**

  Вы можете извлекать данные с заданных сайтов, указав необходимые фильтры и настройки безопасности. С MCP и интегрированными инструментами модель сможет, например, работать с динамическим контентом, обходить анти-бот системы и предоставлять данные в удобном виде.

* **Автоматизация рутинных задач**

  MCP позволяет автоматизировать задачи, на которые у обычных сотрудников ушли бы многие часы. Например, отправлять электронную почту и уведомления, обновлять данные в таблицах, ставить и вычеркивать задачи в планировщике, мониторить процессы и предупреждать разработчика о внештатных ситуациях.

* **Разработка игр**

  С помощью MCP-сервера можно доверить модели технические процессы, вроде маршрутизации и синхронизации данных, а также более творческие задачи: генерировать какие-то игровые объекты или даже взаимодействовать с игроками.

## MCP-сервер или бессерверные API {#mcp-vs-api}

До появления MCP большинство разработчиков интегрировало модели ИИ со своими системами с помощью бессерверных API, предоставляемых облачными провайдерами. Сравним различные аспекты этих архитектур:

| Аспект | МCP-сервер | Бессерверные API |
|--------|------------|------------------|
Принцип работы | Каналы непрерывной двусторонней связи между сервером и клиентом | Функции выполняются в ответ на триггеры
Поддержка актуальности контекста | Отслеживает изменения контекста в режиме реального времени | Независимые вызовы, в каждый из которых нужно передавать контекст
Масштабируемость | Зависит от архитектуры сервера. Могут потребоваться выделенные подключения | Автоматическое масштабирование и параллельные вызовы
Задержка | Низкая задержка, нет необходимости в холодных запусках | Требуются холодные запуски, что увеличивает время обработки запросов
Безопасность | Детальный контроль доступа к данным | Зависит от облачного провайдера
Стоимость реализации | Высокие эксплуатационные расходы из-за непрерывного подключения | Низкие расходы. Оплата за каждый вызов
Требования к опыту разработчика | Требуется понимание протокола MCP и реализации клиент-серверных взаимодействий | Не требует управления серверной инфраструктурой
Варианты использования | Чат-боты и онлайн-помощники, требующие учета контекста, автоматизация рабочих процессов, взаимодействие с внешними источниками данных и инструментами | Микросервисы, предварительная обработка триггеров, асинхронные запросы, кратковременные дискретные задачи

По отдельности и MCP-сервер, и бессерверные API могут эффективно решать только определенный круг задач. Однако на практике они могут быть успешно интегрированы в единую систему, создавая модульную архитектуру и компенсируя недостатки друг друга.

Например, бессерверные функции могут выступать в качестве посредников, которые получают данные из сторонних API или баз данных, обрабатывают их, а затем передают на MCP-сервер. Такой подход позволяет разгрузить сервер, сохранять актуальность контекста, а также сэкономить бюджет, поскольку часть задач предполагает оплату только фактического использования ресурсов.

## Проблемы MCP-серверов {#problems}

Протокол решает многие проблемы взаимодействия с искусственным интеллектом, однако перед разработчиками все еще стоит ряд важнейших задач:

* **Аутентификация**

  Аутентификация на MCP-сервере осуществляется по протоколу OAuth 2.1, что создает ряд [трудностей](https://blog.christianposta.com/the-updated-mcp-oauth-spec-is-a-mess/) для разработчиков. Серверу нужно одновременно принимать ресурсы и управлять авторизацией пользователей, а это идет в разрез с лучшими корпоративными практиками, требует много квалифицированного труда и препятствует масштабированию.

* **Возможность запуска вредоносного кода**

  Сервер поддерживает транспортировку с помощью [stdio](https://ru.wikipedia.org/wiki/Stdio.h), поэтому позволяет локальным пользователям запустить вредоносный код. Чем меньше технически подкован пользователь, тем выше вероятность, что его компьютер смогут эксплуатировать злоумышленники.

* **Контроль рисков**

  MCP-сервера предлагают пользователю множество инструментов, но не обеспечивают надежный контроль над их использованием. Подтверждение операций лишь частично решает эту проблему. Пользователь может настроить автоматическое подтверждение или случайно подтвердить операцию, и модель, например, удалит важные для него файлы.

* **Контроль затрат**

  Трафик больших языковых моделей стоит дорого, однако протокол не учитывает эти затраты и не ограничивает размер пакетов. Для решения этой проблемы разработчикам требуется задать максимальное количество [токенов](../foundation-models/concepts/yandexgpt/tokens.md).

* **Инъекции промтов**

  MCP-сервер предоставляет пользователям различные инструменты, которые являются частью системного промта, то есть дает больше полномочий. Через сервер злоумышленники могут отправить модели более вредоносные промты, чем без него. Например, могут пытаться раскрыть конфиденциальные данные.

Также важно учитывать [ограничения](llm.md#disadvantages) больших языковых моделей, которые с помощью MCP-сервера не решить.

## Тенденции и будущее MCP {#future}

Из новой концепции MCP за полгода превратился в основополагающий элемент инфраструктуры для внедрения искусственного интеллекта. Попробуем представить, что можно ждать от технологии в будущем и почему уже сейчас надо обратить на нее внимание:

* **Распространение**

  По мере укрепления MCP-сервера как универсальной архитектуры, количество инструментов для работы с ним будет постоянно расти. Однако это ведет и к некоторым сложностям — другие технологии API неизбежно будут отставать и станут узким местом в рабочих процессах.

* **Автоматическая синхронизация**

  Появляются новые фреймворки, которые предоставляют MCP-серверу возможности самостоятельно находить новые инструменты и интегрировать их в рабочие процессы. Так, ИИ-модели становятся более полезными, а у разработчиков освобождается время на другие задачи.

* **Многоагентная координация**

  MCP способствует упрощению координации в сложных многоагентных системах. Это позволяет совместно работать над различными проектами и исследованиями, управлять корпоративными знаниями и обмениваться контекстом работы с ИИ.

* **Расширение отраслей применения**

  Помимо традиционного IT-сектора, MCP все чаще задействуется в финансовой отрасли, здравоохранении и производстве продукции. MCP-сервер может связать модель ИИ с любым инструментарием, что открывает перед разработчиками из любых сфер огромное пространство возможностей.

* **Расширение реестра инструментов**

  Уже сейчас создано внушительное количество инструментов и сервисов, совместимых с MCP, и это число непрерывно растет. Пока мы писали эту статью, наверняка было выпущено еще несколько новых.
