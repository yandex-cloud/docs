# Интегрировать {{ tracker-name }} с другими системами

Разработчики используют в своих процессах различные системы для сборки, тестирования, развертывания приложений и так далее. Работать с несколькими системами будет удобно, если в задаче {{ tracker-name }} можно будет найти ссылки на связанные ресурсы или задачи в других системах. Чтобы передавать в {{ tracker-name }} информацию из сторонних систем, используйте API {{ tracker-name }}. Подробнее о возможностях API {{ tracker-name }} читайте в [Справочнике API](about-api.md).

Чтобы передавать информацию из {{ tracker-name }} в другую систему, можно отправлять HTTP-запросы с помощью [триггеров](user/trigger.md).

Рассмотрим примеры, как можно связать {{ tracker-name }} с другими системами.

### Отслеживать статус ревью кода

Предположим, что команда использует репозиторий Bitbucket. Когда разработчик делает пул-реквест в репозиторий, его коллеги проводят ревью кода и принимают либо отклоняют пул-реквест. Если пул-реквест принят, разработчик переводит свою задачу в статус <q>Можно тестировать</q>, а если отклонен — в статус <q>Нужны доработки</q>.

Статус задачи по результатам ревью можно менять автоматически через API {{ tracker-name }}. Однако для этого потребуется создать промежуточный сервис, который получает информацию о событии из Bitbucket, обрабатывает ее и отправляет запросы в API {{ tracker-name }}. Примерный алгоритм работы такой схемы:

1. Разработчик делает пул-реквест и указывает в комментарии [ключ задачи](user/create-ticket.md#key). Это поможет определить, статус какой задачи требуется изменить.

1. В Bitbucket должен быть настроен веб-хук: когда ревьюер принимает или отклоняет пул-реквест, Bitbucket отправляет HTTP-запрос в промежуточный сервис.

1. Промежуточный сервис получает запрос, определяет тип события (был ли пул-реквест принят или отклонен) и извлекает из комментария к пул-реквесту ключ задачи.

1. Промежуточный сервис отправляет в API {{ tracker-name }} запрос на изменение статуса задачи. В URL запроса должен быть указан ключ задачи и ключ статуса. Ключ статуса можно посмотреть в настройках {{ tracker-name }} на вкладке [**Статусы задач**]({{ link-tracker-statuses }}).

    Формат запроса описан в [Справочнике API](concepts/issues/new-transition.md).

### Привязать к задаче тестовый стенд

Чтобы тестировать новые функции продукта, обычно используют тестовые стенды. Если идет параллельная разработка нескольких функций, удобно создавать отдельный стенд для каждой задачи. Чтобы такой стенд было легко найти, ссылку на него нужно добавлять в задачу. Это можно делать автоматически с помощью API {{ tracker-name }}.

Предположим, что команда автоматизировала создание тестового стенда с помощью скрипта: скрипт загружает код приложения из отдельной ветки задачи, упаковывает его в образ [Docker](https://cloud.yandex.ru/blog/posts/2022/03/docker-containers), затем развертывает из образа контейнер на сервере и запускает его.

С помощью того же скрипта можно добавить в задачу ссылку на развернутый стенд. Для этого:


1. В {{ tracker-name }} [создайте новое поле задачи](user/create-param.md#section_pxn_fp4_xgb) <q>Ссылка на стенд</q>.


1. При разработке новой функции продукта создавайте в репозитории отдельную ветку, в имени которой должен быть указан [ключ задачи](user/create-ticket.md#key). Ключ задачи потребуется для отправки запроса в API {{ tracker-name }}.

1. После того как скрипт развернул тестовый стенд, он отправляет в API {{ tracker-name }} запрос, который добавляет адрес стенда в поле задачи <q>Ссылка на стенд</q>. В URL запроса должен быть указан ключ задачи, а в теле запроса — ключ и новое значение поля. Ключ поля можно посмотреть в настройках {{ tracker-name }} на вкладке [**Поля**]({{ link-admin-fields }}).

    Формат запроса описан в [Справочнике API](concepts/issues/patch-issue.md).

### Отправлять оповещения в мессенджер

Для быстрого оповещения сотрудников о важных событиях удобно использовать мессенджеры. Если у мессенджера есть API, в {{ tracker-name }} можно настроить триггер, который отправляет в API мессенджера HTTP-запросы при наступлении определенных событий. Например, если в очереди создается ошибка с критическим приоритетом.

Примеры настройки триггеров для отправки уведомлений в Slack и Telegram приведены в разделе [{#T}](messenger.md).
