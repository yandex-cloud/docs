# Создать очередь

Запрос позволяет создать очередь.

## Формат запроса {#section_rbh_d1s_y2b}

Чтобы создать очередь, используйте HTTP-запрос с методом `POST`. Параметры запроса передаются в его теле в формате JSON:

```json
POST /{{ ver }}/queues/
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
Content-Type: application/json 

{
    "key": "DESIGN",
    "name": "Дизайн",
    "lead": "artemredkin",
    "defaultType": "task",
    "defaultPriority": "normal",
    "issueTypesConfig":[
                {"issueType":"task", 
                  "workflow":"oicn", 
                  "resolutions":["wontFix",...]},
  ...
  ]
}
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}
	
- **Content-Type**
    
    Формат тела запроса. Должен иметь значение `application/json`.

#### Тело запроса {#req-body-params}

Тело запроса содержит информацию, необходимую для создания новой очереди:

Параметр | Описание | Тип данных
----- | ----- | -----
key | Ключ очереди. Обязательное поле. | Строка
name | Название очереди. Обязательное поле. | Строка
lead | Логин или идентификатор владельца очереди. Обязательное поле. | Строка
defaultType | Идентификатор или ключ типа задач по умолчанию. Обязательное поле. | Строка
defaultPriority | Идентификатор или ключ приоритета задач по умолчанию. Обязательное поле. | Строка
[issueTypesConfig](#issue-types-config) | Массив с настройками типов задач очереди. | Массив объектов

**Поля объектов массива** `issueTypesConfig` {#issue-types-config}

Параметр | Описание | Тип данных
----- | ----- | -----
issueType | Ключ типа задачи. | Строка
workflow | Идентификатор воркфлоу. | Строка
resolutions | Массив с идентификаторами или ключами возможных резолюций. | Массив

## Формат ответа {#section_x32_lry_y2b}

{% list tabs %}

- Запрос выполнен успешно

  В случае успешного выполнения запроса API возвращает ответ с кодом 201. Тело запроса содержит информацию о созданной очереди в формате JSON.

    ```json
    {
           "self": "{{ host }}/v2/queues/DESIGN",
           "id": 111,
           "key": "DESIGN",
           "version": 1400150916068,
           "name": "Дизайн",
           "lead": {
              "self": "{{ host }}/v2/users/1120000000004859",
              "id": "artemredkin",
              "display": "Artem Redkin"
        },
           "assignAuto": false,
           "allowExternals" : false,
           "defaultType": {
              "self": "{{ host }}/v2/issuetypes/2",
              "id": "2",
              "key": "task",
              "display": "Task"
       },
           "defaultPriority": {
              "self": "{{ host }}/v2/priorities/2",
              "id": "2",
              "key": "normal",
              "display": "Normal"
      }
    }
    ```
   
  #### Параметры ответа {#answer-params}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на очередь. | Строка
  id | Идентификатор очереди. | Строка
  key | Ключ очереди. | Строка
  version | Версия очереди. Каждое изменение очереди увеличивает номер версии. | Число
  name | Название очереди. | Строка
  [lead](#lead) | Блок с информацией о владельце очереди. | Объект
  assignAuto | Автоматически назначить исполнителя для новых задач очереди:<br/><br/>`true`— назначить.<br/><br/>`false`— не назначать. | Логический
  allowExternals | Разрешить отправку писем наружу. Допустимые значения:<br/><br/>`true`— разрешить<br/><br/>`false`— не разрешать | Логический
  [defaultType](#default-type) | Блок с информацией о типе задачи по умолчанию. | Строка
  [defaultPriority](#default-priority) | Блок с информацией о приоритете задачи по умолчанию | Объект
  
  **Поля объекта** `lead` {#lead}
  
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на пользователя. | Строка
  id | Идентификатор пользователя. | Строка
  display | Отображаемое имя пользователя. | Строка
  
  **Поля объекта** `defaultType` {#default-type}
  
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на тип задачи. | Строка
  id | Идентификатор типа задачи. | Строка
  key | Ключ типа задачи. | Строка
  display | Отображаемое название типа задачи. | Строка
  
  **Поля объекта** `defaultPriority` {#default-priority}
  
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на тип приоритета. | Строка
  id | Идентификатор приоритета. | Строка
  key | Ключ приоритета. | Строка
  display | Отображаемое название приоритета. | Строка

- Запрос выполнен с ошибкой

  Если запрос не был успешно обработан, ответное сообщение содержит информацию о возникших ошибках:

  HTTP-код ошибки | Описание ошибки
  ----- | -----
  400 Bad Request | Один из параметров запроса имеет недопустимое значение или формат данных.
  403 Forbidden | У пользователя или приложения нет прав на доступ к ресурсу, запрос отклонен.
  404 Not Found | Запрашиваемый ресурс не найден.
  409 Conflict | Запрос не может быть выполнен по причине конфликта имен.
  422 Unprocessable Entity | Ошибка валидации JSON, запрос отклонен.
  500 Internal Server Error | Внутренняя ошибка сервиса. Попробуйте повторно отправить запрос через некоторое время.
  503 Service Unavailable | Сервис API временно недоступен.

{% endlist %}

