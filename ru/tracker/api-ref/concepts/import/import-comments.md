# Импортировать комментарии

{% note warning %}

Запрос может быть выполнен только если у пользователя есть право на изменение задачи, в которую импортируется комментарий.

{% endnote %}

С помощью запроса вы можете импортировать в {{ tracker-name }} комментарии к задаче.

## Формат запроса {#section_i14_lyb_p1b}

Чтобы импортировать комментарий, используйте HTTP-запрос с методом `POST`. Параметры комментария передаются в теле запроса в формате JSON:

```json
POST /{{ ver }}/issues/<issue_id>/comments/_import
Host: {{ host }}
Authorization: OAuth <токен>
{{ org-id }}

{
  "text": "Test",
  "createdAt": "2017-08-29T12:34:41.740+0000",
  "createdBy": 1110000000011111
}
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}

{% cut "Ресурс" %}

Параметр | Описание | Тип данных
--- | --- | ---
\<issues-id\> | Ключ задачи, к которой будет прикреплен файл. | Строка

{% endcut %}

{% cut "Параметры тела запроса" %}

**Обязательные параметры**

Параметр | Описание | Тип данных
-------- | -------- | ----------
text | Текст комментария, не более 512000 символов. | Строка
createdAt | Дата и время создания комментария в формате `YYYY-MM-DDThh:mm:ss.sss±hhmm`. Вы можете указать любое значение в интервале времени от создания до последнего обновления задачи. | Строка
createdBy | Логин или идентификатор автора комментария. | <ul><li>Строка для логина</li><li>Число для идентификатора</li></ul>

**Дополнительные параметры**

Параметр | Описание | Тип данных
-------- | -------- | ----------
updatedAt | Дата и время последнего изменения комментария в формате `YYYY-MM-DDThh:mm:ss.sss±hhmm`. Вы можете указать любое значение в интервале времени от создания до последнего обновления задачи.<br/><br/>Параметр указывается только вместе с параметром `updatedBy`. | Строка
updatedBy | Логин или идентификатор пользователя, который редактировал комментарий последним.<br/><br/>Параметр указывается только вместе с параметром `updatedAt`. | <ul><li>Строка для логина</li><li>Число для идентификатора</li></ul>

{% endcut %}

## Формат ответа {#section_isd_myb_p1b}

{% list tabs %}

- Запрос выполнен успешно

    {% include [answer-200](../../../_includes/tracker/api/answer-200.md) %} 

    Тело ответа содержит параметры прикрепленного файла в формате JSON:

    ```json
    {
            "self": "{{ host }}/v2/issues/JUNE-2/comments/9849018",
            "id": 9849018,
            "longId" : "5fa15a24ac894475dd14ff07",
            "text": "Комментарий",
            "createdBy": {
                "self": "{{ host }}/v2/users/1120000000049224",
                "id": "<id сотрудника>",
                "display": "<отображаемое имя сотрудника>"
            },
            "updatedBy": {
                "self": "{{ host }}/v2/users/1120000000049224",
                "id": "<id сотрудника>",
                "display": "<отображаемое имя сотрудника>"
            },
            "createdAt": "2017-06-11T05:11:12.347+0000",
            "updatedAt": "2017-06-11T05:11:12.347+0000",
            "version": 1,
            "type" : "standard",
            "transport" : "internal"   
    }
    ```

    {% cut "Параметры ответа" %}

    Параметр | Описание | Тип данных
    -------- | -------- | ----------
    self | Ссылка на объект комментария | Строка
    id | Идентификатор комментария | Число
    longId | Идентификатор комментария в виде строки | Строка
    text | Текст комментария. | Строка
    [createdBy](#createdBy) | Объект с информацией о создателе комментария. | Объект
    [updatedBy](#updatedBy) | Объект с информацией о сотруднике, внесшем последнее изменение в комментарий. | Объект
    createdAt | Дата и время создания комментария в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ``` | Строка
    updatedAt | Дата и время обновления комментария.<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ``` | Строка
    version | Версия комментария. Каждое изменение комментария увеличивает номер версии. | Число
    type | Тип комментария:<ul><li>**standart** — отправлен через интерфейс {{ tracker-name }};</li><li>**incoming** — создан из входящего письма;</li><li>**outcoming** — создан из исходящего письма.</li></ul> | Строка
    transport | Способ добавления комментария:<ul><li>**internal** — через интерфейс {{ tracker-name }};</li><li>**email** — через письмо.</li></ul> | Строка

    **Поля объекта** `createdBy` {#createdBy}

    Параметр | Описание | Тип данных
    -------- | -------- | ----------
    self | Ссылка на пользователя. | Строка
    id | Идентификатор пользователя. | Строка
    display | Отображаемое имя пользователя. | Строка

    **Поля объекта** `updatedBy` {#updatedBy}

    Параметр | Описание | Тип данных
    -------- | -------- | ----------
    self | Ссылка на пользователя. | Строка
    id | Идентификатор пользователя. | Строка
    display | Отображаемое имя пользователя. | Строка

    {% endcut %}

- Запрос выполнен с ошибкой

    Если запрос не был успешно обработан, ответное сообщение содержит информацию о возникших ошибках:

    {% include [error](../../../_includes/tracker/api/answer-error-400.md) %}

    {% include [error](../../../_includes/tracker/api/answer-error-403.md) %}

    {% include [error](../../../_includes/tracker/api/answer-error-404.md) %}

    {% include [error](../../../_includes/tracker/api/answer-error-422.md) %}

    {% include [error](../../../_includes/tracker/api/answer-error-500.md) %}

    {% include [error](../../../_includes/tracker/api/answer-error-503.md) %}