# Редактировать чеклист

Запрос позволяет редактировать пункты [чеклиста](../../user/checklist.md) в задаче. 

## Формат запроса {#query}

Чтобы изменить пункты чеклиста, используйте HTTP-запрос с методом `PATCH`:

``` json
PATCH /{{ ver }}/issues/<issue-id>/checklistItems
Host: {{ host }}
Authorization: OAuth <токен>
{{ org-id }}

[
 {
  "id": "602c13a89fb583544a9528ae",
  "text": "Текст в пункте",
  "checked": true,
  "assignee": "1134669209",
  "deadline": {
        "date": "2021-05-25T00:00:00.000+0000",
        "deadlineType": "date"
      }
 },
 ...
]
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}

#### Ресурс

- **\<issue-id\>**
  Идентификатор или ключ задачи.


#### Тело запроса

  Тело запроса содержит параметры пунктов чеклиста. В теле должны быть перечислены все пункты. 

  **Обязательные параметры**

   Параметр | Описание | Тип данных
   ----- | ----- | -----
   id | [Идентификатор пункта чеклиста](get-checklist.md#answer). | Строка
   text | Текст пункта чеклиста. | Строка
  

  **Дополнительные параметры**
  
   Параметр | Описание | Тип данных
   ----- | ----- | -----
   checked | Признак выполнения пункта чеклиста:<ul><li>`true` — пункт отмечен как выполненный;</li><li>`false` — пункт не отмечен как выполненный.</li></ul> | Логический
   assignee | Идентификатор или логин пользователя, который является исполнителем пункта чеклиста. | Строка
   [deadline](#deadline-checklist) | Дедлайн пункта чеклиста. | Объект

   **Поля объекта** `deadline` {#deadline-checklist}
    
   Параметр | Описание | Тип данных
   ----- | ----- | -----
   date | Дата дедлайна в формате `YYYY-MM-DDThh:mm:ss.sss±hhmm`. | Дата.
   deadlineType | Тип данных параметра `deadline`. | Строка
 

## Формат ответа {#answer}

{% list tabs %}

- Запрос выполнен успешно

  В случае успешного выполнения запроса API возвращает ответ с кодом `200 OK`. Тело ответа содержит JSON-объект с параметрами пунктов чеклиста и параметрами задачи, в которой  чеклист был изменен.

  ```json
  {
      "self": "{{ host }}/v2/issues/ORG-3",
      "id": "5f981c00b982f0755dbdc13d",
      "key": "ORG-3",
      "version": 184,
      "lastCommentUpdatedAt": "2021-02-06T17:14:22.965+0000",
      "pendingReplyFrom": [
          {
              "self": "{{ host }}/v2/users/1134669289",
              "id": "id сотрудника",
              "display": "Имя Фамилия"
          }
      ],
      "summary": "Название задачи",
      "statusStartTime": "2020-11-03T11:19:24.733+0000",
      "updatedBy": {
          "self": "{{ host }}/v2/users/19904929",
          "id": "id сотрудника",
          "display": "Имя Фамилия"
      },
      "checklistDone": "2",
      "description": "Описание задачи",
      "type": {
          "self": "{{ host }}/v2/issuetypes/2",
          "id": "2",
          "key": "task",
          "display": "Задача"
      },
      "priority": {
          "self": "{{ host }}/v2/priorities/3",
          "id": "3",
          "key": "normal",
          "display": "Средний"
      },
      "previousStatusLastAssignee": {
          "self": "{{ host }}/v2/users/1134669289",
          "id": "id сотрудника",
          "display": "Имя Фамилия"
      },
      "createdAt": "2020-10-27T13:09:20.085+0000",
      "followers": [
          {
              "self": "{{ host }}/v2/users/19904929",
              "id": "id сотрудника",
              "display": "Имя Фамилия"
          }
      ],
      "createdBy": {
          "self": "{{ host }}/v2/users/1134669289",
          "id": "id сотрудника",
          "display": "Имя Фамилия"
      },
      "checklistItems": [
        {
              "id": "5fde5f0a1aee261dd3b62edb",
              "text": "пункт чеклиста",
              "textHtml": "текст пункта в формате HTML",
              "checked": false,
              "assignee": {
                 "id": 1134669209,
                 "display": "Имя Фамилия",
                 "passportUid": 1134669209,
                 "login": "user_login",
                 "firstName": "Имя",
                 "lastName": "Фамилия",
                 "email": "user_login@example.com",
                 "trackerUid": 1134669209
                 },
              "deadline": {
                 "date": "2021-05-09T00:00:00.000+0000",
                 "deadlineType": "date",
                 "isExceeded": false
                 },
              "checklistItemType": "standard"  
        }, 
        ...
       ], 
      },
     "checklistTotal": 4,
     "votes": 0,
     "deadline": "2020-10-28",
     "queue": {
          "self": "{{ host }}/v2/queues/ORG",
          "id": "1",
          "key": "ORG",
          "display": "Стартрек"
      },
     "updatedAt": "2021-02-16T08:28:41.095+0000",
     "status": {
          "self": "{{ host }}/v2/statuses/2",
          "id": "2",
          "key": "needInfo",
          "display": "Требуется информация"
      },
      "previousStatus": {
          "self": "{{ host }}/v2/statuses/3",
          "id": "3",
          "key": "inProgress",
          "display": "В работе"
      },
      "favorite": false
  }
  ```

  #### Параметры ответа {#answer-params}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о задаче. | Строка
  id | Идентификатор задачи. | Строка
  key | Ключ задачи. | Строка
  version | Версия задачи. Каждое изменение параметров увеличивает номер версии. | Число
  lastCommentUpdatedAt | Время обновления последнего комментария. | Строка
  [pendingReplyFrom](#pending-replay-from) | Объект с информацией о сотруднике, от которого ожидается ответ. | Объект
  summary | Название задачи. | Строка
  statusStartTime | Время создание задачи. | Строка
  [updatedBy](#updated-by) | Объект с информацией о последнем сотруднике, изменявшим задачу. | Объект
  checklistDone |Количество пунктов в чеклисте, которые отмечены как выполненные. | Число
  description | Описание задачи. | Строка
  [type](#type) | Объект с информацией о типе задачи. | Объект
  [priority](#priority) | Объект с информацией о приоритете. | Объект
  [previousStatusLastAssignee](#previous-status-last-assignee) | Объект с информацией об исполнителе задачи в предыдущем статусе. | Объект
  createdAt | Дата и время создания задачи. | Строка
  [followers](#followers) | Массив объектов с информацией о наблюдателях задачи. | Объект
  [createdBy](#created-by) | Объект с информацией о создателе задачи. | Объект
  [checklistItems](#checklist-items) | Массив объектов с информацией о пунктах чеклиста. | Объект
  checklistTotal | Количество пунктов в чеклисте. | Число
  votes | Количество голосов за задачу. | Число
  deadline | Крайний срок выполнения задачи. | Строка
  [queue](#queue) | Объект с информацией об очереди задачи. | Объект
  updatedAt | Дата и время последнего обновления задачи. | Строка
  [status](#status) | Объект с информацией о статусе задачи. | Объект
  [previousStatus](#previous-status) | Объект с информацией о предыдущем статусе задачи. | Объект
  favorite | Признак избранной задачи:<ul><li>`true` — пользователь добавил задачу в избранное;</li><li>`false` — задача не добавлена в избранное.</li></ul> | Число
   
  **Поля объекта** `updatedBy` {#updated-by}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка

  **Поля объекта** `pendingReplyFrom` {#pending-replay-from}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка

  **Поля объекта** `type` {#type}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на тип задачи. | Строка
  id | Идентификатор типа задачи. | Строка
  key | Ключ типа задачи. | Строка
  display | Отображаемое название типа задачи. | Строка

  **Поля объекта** `priority` {#priority}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на тип приоритета. | Строка
  id | Идентификатор приоритета. | Строка
  key | Ключ приоритета. | Строка
  display | Отображаемое название приоритета. | Строка

  **Поля объекта** `previousStatusLastAssignee` {#previous-status-last-assignee}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка

  **Поля объекта** `followers` {#followers}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка

  **Поля объекта** `createdBy` {#created-by}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка

  **Поля объекта** `checklistItems` {#checklist-items}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  id | Идентификатор пункта чеклиста. | Строка
  text | Текст пункта чеклиста. | Строка
  textHtml | Текст пункта чеклиста в формате HTML. | Строка
  checked | Признак выполнения пункта чеклиста:<ul><li>`true` — пункт отмечен как выполненный;</li><li>`false` — пункт не отмечен как выполненный.</li></ul> | Логический
  [assignee](#assignee-checklist) | Исполнитель пункта чеклиста. | Объект
  [deadline](#deadline-checklist) | Крайний срок исполнения пункта чеклиста. | Объект
  checklistItemType | Тип пункта чеклиста. | Строка

  **Поля объекта** `assignee` {#assignee-checklist}
   
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка
  passportUid | Уникальный идентификатор аккаунта пользователя на Яндексе. | Число
  login | Логин пользователя. | Строка
  firstName | Имя пользователя. | Строка
  lastName | Фамилия пользователя. | Строка
  email | Адрес пользователя. | Строка
  trackerUid | Уникальный идентификатор аккаунта пользователя в {{ tracker-name }}. | Число

  **Поля объекта** `deadline` {#deadline-checklist}
   
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  date | Предельный срок в формате `YYYY-MM-DDThh:mm:ss.sss±hhmm`. | Дата.
  deadlineType | Тип данных параметра `deadline`. | Строка
  isExceeded | Признак наступления дедлайна: <ul><li>`true` — предельный срок наступил;</li><li>`false` — предельный срок не наступил.</li></ul> | Логический.  
 

  **Поля объекта** `queue` {#queue}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на очередь. | Строка
  id | Идентификатор очереди. | Число
  key | Ключ очереди. | Строка
  display | Отображаемое название очереди. | Строка

  **Поля объекта** `status` {#status}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на статус. | Строка
  id | Идентификатор статуса. | Строка
  key | Ключ статуса. | Строка
  display | Отображаемое название статуса. | Строка

  **Поля объекта** `previousStatus` {#previous-status}
    
  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Ссылка на статус. | Строка
  id | Идентификатор статуса. | Строка
  key | Ключ статуса. | Строка
  display | Отображаемое название статуса. | Строка

- Запрос выполнен с ошибкой

    Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

    400
    :   Один или несколько параметров запроса имеют недопустимое значение.

    401
    :   Пользователь не авторизован. Проверьте, были ли выполнены действия, описанные в разделе [{#T}](../access.md).

    403
    :   У вас не хватает прав на выполнение этого действия. Наличие прав можно перепроверить в интерфейсе {{ tracker-name }} — для выполнения действия при помощи API и через интерфейс требуются одинаковые права.  

    404
    :   Запрошенный объект не был найден. Возможно, вы указали неверное значение идентификатора или ключа объекта.
   
{% endlist %}