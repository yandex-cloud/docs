# Редактировать комментарий

Запрос позволяет редактировать комментарий.

## Формат запроса {#section_rkq_bhl_dfb}

Чтобы изменить комментарий, который был [добавлен к задаче](add-comment.md) ранее, используйте HTTP-запрос с методом `PATCH`. Параметр запроса передается в его теле в формате JSON:

```json
PATCH /{{ ver }}/issues/<issue-id>/comments/<comment-id>
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}

{
   "text": "<новый текст комментария>",
   "attachmentIds": [<идентификаторы вложений (через запятую)>]
}
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}

#### Ресурс {#resource}

- **\<issue-id\>**
 Идентификатор или ключ задачи.

- **\<comment-id\>**
 [Уникальный идентификатор комментария](get-comments.md#section_xc3_53j_p1b) в числовом формате (id) или формате строки (longId).


#### Тело запроса {#req-body-params}

Параметр | Значение | Тип данных
----- | ----- | -----
text | Скорректированный комментарий к задаче. Обязательный для заполнения. | Строка
attachmentIds | Список [идентификаторов вложений](temp-attachment.md). | Массив строк

## Формат ответа {#section_rcd_ysf_2fb}

В случае успешного выполнения запроса API возвращает ответ с кодом 200. Тело ответа содержит информацию о добавленном комментарии в формате JSON.

```json
[ 
{
  "self" : "{{ host }}/v2/issues/TREK-1/comments/684",
  "id" : "684",  
  "longId" : "5fc4bc634e121b12f44a0488",  
  "text" : "<текст комментария>",
  "createBody" : {
   "self" : "{{ host }}/v2/users/1120000000016876",
   "id" : "<id пользователя>",
   "display" : "<отображаемое имя пользователя>"
  },
  "updateBody" : {
   "self" : "{{ host }}/v2/users/1120000000016876",
   "id" : "<id пользователя>",
   "display" : "<отображаемое имя пользователя>"
  },
  "createdAt" : "2020-11-30T09:33:23.638+0000",  
  "updatedAt" : "2020-11-30T09:39:07.631+0000",  
  "summonees" : [
   { 
    "self" : "{{ host }}/v2/users/1120000000016576",
    "id" : "<id пользователя>",
    "display" : "<отображаемое имя пользователя>"
   } 
  ],
 "maillistSummonees" : [
   { 
    "self" : "{{ host }}/v2/maillists/usertest@test.ru",
    "id" : "<адрес рассылки>",
    "display" : "<отображаемое имя рассылки>"
   } 
  ], 
  "version" : 2,  
  "type" : "standard",  
  "transport" : "internal"
}
]
```

#### Параметры ответа {#answer-params}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на комментарий. | Строка
id | Идентификатор комментария. | Строка
longId | Идентификатор комментария в формате строки. | Строка
text | Комментарий к задаче. | Строка
[createdBy](#object-fields-createdBy) | Блок с информацией о пользователе, который добавил комментарий. | Объект
[updatedBy](#object-fields-updatedBy) | Блок с информацией о пользователе, который последним изменил комментарий. | Объект
createdAt | Дата и время создания комментария. | Строка
updatedAt | Дата и время обновления комментария. | Строка
[summonees](#object-fields-summonees) | Блок с информацией о пользователях, которые призваны в комментарии. | Объект
[maillistsummonees](#object-fields-maillistsummonees) | Блок с информацией о рассылках, которые призваны в комментарии. | Объект
version | Версия комментария. Каждое изменение комментария увеличивает номер версии. | Число
type | Тип комментария:<ul><li>**standart** — отправлен через интерфейс {{ tracker-name }};</li><li>**incoming** — создан из входящего письма;</li><li>**outcoming** — создан из исходящего письма.</li></ul> | Строка
transport | Способ добавления комментария:<ul><li>**internal** — через интерфейс {{ tracker-name }};</li><li>**email** — через письмо.</li></ul> | Строка
    

#### Поля объектов {#object-fields}

**Поля объекта** `createdBy` {#object-fields-createdBy}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка

**Поля объекта** `updatedBy` {#object-fields-updatedBy}

Параметр | Описание | Тип данных
----- | ----- | -----  
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка
   
**Поля объекта** `summonees` {#object-fields-summonees}

Параметр | Описание | Тип данных
----- | ----- | ----- 
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка

**Поля объекта** `maillistsummonees` {#object-fields-maillistsummonees}

Параметр | Описание | Тип данных
----- | ----- | ----- 
self | Ссылка на рассылку. | Строка
id | Адрес рассылки. | Строка
display | Отображаемое имя рассылки. | Строка

## Возможные коды ответа {#section_otf_jrj_p1b}

200
:   Запрос выполнен успешно.

400
:   Сервер не смог обработать запрос из-за неверного синтаксиса.

404
:   Запрошенный объект не был найден. Возможно, вы указали неверное значение идентификатора или ключа объекта.

