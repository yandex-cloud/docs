# Добавить комментарий

Запрос позволяет добавить комментарий в задачу.

## Формат запроса {#section_rkq_bhl_dfb}

Чтобы добавить комментарий в задачу, используйте HTTP-запрос с методом `POST`. Параметр запроса передается в его теле в формате JSON:

```json
POST /{{ ver }}/issues/<issue-id>/comments?isAddToFollowers=<true|false>
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
X-Org-Id: <идентификатор организации>

{
   "text": "<текст комментария>",
   "attachmentIds": [<идентификаторы вложений (через запятую)>],
   "summonees": ["<логин пользователя>", {"id": "<идентификатор пользователя>"}],
   "maillistSummonees": ["<адреса призванных рассылок (через запятую)>"]
}
```

#### Ресурс {#resource}

- **\<issue-id\>**
 Идентификатор или ключ задачи.

#### Заголовки {#titles}

- **Host**
  Адрес узла, предоставляющего API:
     ```
    {{ host }}
     ```
- **Authorization**
  OAuth-токен в формате `OAuth <значение токена>`, например:
     ```
    OAuth 0c4181a7c2cf4521964a72ff57a34a07
     ```
- **X-Org-ID**
  Идентификатор организации.

#### Параметры запроса {#req-params}

- **isAddToFollowers**
 Добавить автора комментария в наблюдатели (по умолчанию **true**).

#### Тело запроса {#req-body-params}

Параметр | Значение | Тип данных
----- | ----- | -----
text | Комментарий к задаче. Обязательный для заполнения. | Строка.
attachmentIds | Список [идентификаторов вложений](temp-attachment.md). | Массив строк.
summonees | Идентификаторы или логины призванных пользователей. | Массив объектов или строк.
maillistSummonees | Список рассылок, призванных в комментарии. | Массив строк.

## Формат ответа {#section_rcd_ysf_2fb}

{% list tabs %}

- Запрос выполнен успешно

    В случае успешного выполнения запроса API возвращает ответ с кодом 201. Тело ответа содержит информацию о добавленном комментарии в формате JSON.

    ```json
    [ 
    {
      "self" : "https://api.tracker.yandex.net/v2/issues/TREK-1/comments/626",
      "id" : 626,  
      "longId" : "5fa15a24ac894475dd14ff07",  
      "text" : "<текст комментария>",
      "createBody" : {
       "self" : "https://api.tracker.yandex.net/v2/users/1120000000016876",
       "id" : "<id пользователя>",
       "display" : "<отображаемое имя пользователя>"
      },
      "updateBody" : {
       "self" : "https://api.tracker.yandex.net/v2/users/1120000000016876",
       "id" : "<id пользователя>",
       "display" : "<отображаемое имя пользователя>"
      },
      "createdAt" : "2020-11-03T13:24:52.575+0000",  
      "updatedAt" : "2020-11-03T13:24:52.575+0000",  
      "summonees" : [
       { 
        "self" : "https://api.tracker.yandex.net/v2/users/1120000000016576",
        "id" : "<id пользователя>",
        "display" : "<отображаемое имя пользователя>"
       } 
      ],
     "maillistSummonees" : [
       { 
        "self" : "https://api.tracker.yandex.net/v2/maillists/usertest@test.ru",
        "id" : "<адрес рассылки>",
        "display" : "<отображаемое имя рассылки>"
       } 
      ], 
      "version" : 1,  
      "type" : "standard",  
      "transport" : "internal"
    }
    ]
    ```

    #### Параметры ответа {#answer-params}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    self | Ссылка на комментарий. | Строка.
    id | Идентификатор комментария. | Число.
    longId | Идентификатор комментария в формате строки. | Строка.
    text | Комментарий к задаче. | Строка.
    [createdBy](#object-fields-createdBy) | Блок с информацией о пользователе, который добавил комментарий. | Объект.
    [updatedBy](#object-fields-updatedBy) | Блок с информацией о пользователе, который последним изменил комментарий. | Объект.
    createdAt | Дата и время создания комментария. | Строка.
    updatedAt | Дата и время обновления комментария. | Строка.
    [summonees](#object-fields-summonees) | Блок с информацией о пользователях, которые призваны в комментарии. | Объект.
    [maillistsummonees](#object-fields-maillistsummonees) | Блок с информацией о рассылках, которые призваны в комментарии. | Объект.
    version | Версия комментария. Каждое изменение комментария увеличивает номер версии. | Число.
    type | Тип комментария:<ul><li>**standart** — отправлен через интерфейс {{ tracker-name }};</li><li>**incoming** — создан из входящего письма;</li><li>**outcoming** — создан из исходящего письма.</li></ul> | Строка.
    transport | Способ добавления комментария:<ul><li>**internal** — через интерфейс {{ tracker-name }};</li><li>**email** — через письмо.</li></ul> | Строка.     

    #### Поля объектов {#object-fields}

    **Поля объекта** `createdBy` {#object-fields-createdBy}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    self | Ссылка на пользователя. | Строка.
    id | Идентификатор пользователя. | Строка.
    display | Отображаемое имя пользователя. | Строка.

    **Поля объекта** `updatedBy` {#object-fields-updatedBy}

    Параметр | Описание | Тип данных
    ----- | ----- | -----  
    self | Ссылка на пользователя. | Строка.
    id | Идентификатор пользователя. | Строка.
    display | Отображаемое имя пользователя. | Строка.

    **Поля объекта** `summonees` {#object-fields-summonees}

    Параметр | Описание | Тип данных
    ----- | ----- | -----  
    self | Ссылка на пользователя. | Строка.
    id | Идентификатор пользователя. | Строка.
    display | Отображаемое имя пользователя. | Строка.

    **Поля объекта** `maillistsummonees` {#object-fields-maillistsummonees}

    Параметр | Описание | Тип данных
    ----- | ----- | ----- 
    self | Ссылка на рассылку. | Строка.
    id | Адрес рассылки. | Строка.
    display | Отображаемое имя рассылки. | Строка.

- Запрос выполнен с ошибкой

    Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки 404. Запрошенный объект не был найден. Возможно, вы указали неверное значение идентификатора или ключа объекта.

{% endlist %}

