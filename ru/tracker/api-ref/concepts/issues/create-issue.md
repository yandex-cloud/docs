# Создать задачу

Запрос позволяет создать задачу.

## Формат запроса {#section_rnm_x4j_p1b}

Чтобы создать задачу используйте HTTP-запрос с методом `POST`. Параметры запроса передаются в его теле в формате JSON:

```json
POST /{{ ver }}/issues/
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}

{
    "summary": "название задачи",
    "queue": {
        "id": "111",
        "key": "test"
        },
    "parent": {
        "id": "593cd0acef7e8a332414f28e",
        "key": "JUNE-2"
        }, 
    "description": "текстовое описание", 
    "sprint": [
            {
                "id": "5317"
            }
        ],
    "type": {
        "id": "2",
        "key": "task"
        },
    "priority": {
        "id": "2",
        "key": "normal"
        },
    "followers": ["login", {"id": "19904929"}],
    "assignee": ["login", {"id": "19904929"}],
    "unique": "123qwe",
    "attachmentIds": [<идентификаторы вложений (через запятую)>] 
}
```
{% include [headings](../../../_includes/tracker/api/headings.md) %}

#### Тело запроса {#req-body-params}

Тело запроса содержит информацию, необходимую для создания новой задачи:

Параметр | Описание | Тип данных
----- | ----- | -----
summary | Название задачи. Обязательное поле. | Строка
[queue](#queue) | Очередь, в которой нужно создать задачу. Обязательное поле. | Может задаваться как объект, как строка (если передается [ключ очереди](../../manager/create-queue.md#key)), как число (если передается идентификатор очереди).
[parent](#parent) | Родительская задача. | Объект или строка.
description | Описание задачи. | Строка
sprint | Блок с информацией о спринтах. | Массив объектов или строк.
[type](#type) | Тип задачи. | Может задаваться как объект, как строка (если передается ключ типа задачи), как число (если передается идентификатор типа задачи).
[priority](#priority) | Приоритет задачи. | Может задаваться как объект, как строка (если передается ключ приоритета), как число (если передается идентификатор приоритета).
[followers](#followers) | Идентификаторы или логины наблюдателей задачи. | Массив объектов или строк.
[assignee](#assignee) | Идентификатор или логин исполнителя задачи. | Массив объектов или строк.
unique | Поле с уникальным значением, позволяющее предотвратить создание дубликатов задач. При повторной попытке создать задачу с тем же значением данного параметра дубликат создан не будет, а ответ будет содержать ошибку с кодом 409. | Строка
attachmentIds | Список [идентификаторов вложений](temp-attachment.md). | Массив строк

**Поля объекта** `queue` {#queue}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор очереди. | Строка
key | Ключ очереди. | Строка

**Поля объекта** `parent` {#parent}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор родительской задачи. | Строка
key | Ключ родительской задачи. | Строка

**Поля объекта** `type` {#type}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор типа задачи. | Строка
key | Ключ типа задачи. | Строка

**Поля объекта** `priority` {#priority}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор приоритета. | Строка
key | Ключ приоритета. | Строка

**Поля объекта** `followers` {#followers}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор сотрудника. | Строка

**Поля объекта** `assignee` {#assignee}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор сотрудника. | Строка

> Создать задачу:
> 
> - Используется HTTP-метод POST.
> - Создается задача с названием <q>Test Issue</q> в очереди с [ключом](../../manager/create-queue.md#key) <q>TREK</q>.
> - Новая задача является подзадачей <q>JUNE-2</q>.
> - Тип создаваемой задачи – <q>Ошибка</q>.
> - Исполнитель задачи – <user_login>
> 
> ```
> POST /v2/issues/ HTTP/1.1
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> Cache-Control: no-cache
> 
> {
>     "queue": "TREK",
>     "summary": "Test Issue",
>     "parent":"JUNE-2",
>     "type": "bug",
>     "assignee": "<user_login>",
>     "attachmentIds": [55, 56]
> }
> ```

## Формат ответа {#section_xc3_53j_p1b}

В случае успешного выполнения запроса API возвращает ответ с кодом 201. Тело запроса содержит информацию о созданной задаче в формате JSON.

```json
{
    "self": "{{ host }}/v2/issues/TREK-9944",
    "id": "593cd211ef7e8a332414f2a7",
    "key": "TREK-9944",
    "version": 7,
    "lastCommentUpdatedAt": "2017-07-18T13:33:44.291+0000",
    "summary": "Test Issue",
    "parent": {
        "self": "{{ host }}/v2/issues/JUNE-2",
        "id": "593cd0acef7e8a332414f28e",
        "key": "JUNE-2",
        "display": "Task"
        },
    "aliases": [
            "JUNE-3"
        ],
    "description": "<#<html><head></head><body><div>test</div><div>&nbsp;</div><div>&nbsp;</div> </body></html>#>",    
    "sprint": [
            {
        "self": "{{ host }}/v2/sprints/5317",
        "id": "5317",
        "display": "спринт1"
            }
        ],
    "type": {
        "self": "{{ host }}/v2/issuetypes/2",
        "id": "2",
        "key": "task",
        "display": "Задача"
        },
    "priority": {
        "self": "{{ host }}/v2/priorities/2",
        "id": "2",
        "key": "normal",
        "display": "Средний"
        },
    "createdAt": "2017-06-11T05:16:01.339+0000",
    "followers": [
        {
        "self": "{{ host }}/v2/users/1120000000016876",
        "id": "<id сотрудника>",
        "display": "<отображаемое имя сотрудника>"
        }
        ],
    "createdBy": {
        "self": "{{ host }}/v2/users/1120000000049224",
        "id": "<id сотрудника>",
        "display": "<отображаемое имя сотрудника>"
        },
    "votes": 0,
    "assignee": {
        "self": "{{ host }}/v2/users/1120000000049224",
        "id": "<id сотрудника>",
        "display": "<отображаемое имя сотрудника>"
        },
    "queue": {
        "self": "{{ host }}/v2/queues/TREK",
        "id": "111",
        "key": "TREK",
        "display": "Стартрек"
        },
    "status": {
        "self": "{{ host }}/v2/statuses/1",
        "id": "1",
        "key": "open",
        "display": "Открыт"
        },
    "favorite": false
}
```

#### Параметры ответа {#answer-params}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Адрес ресурса API, который содержит информацию о задаче. | Строка
id | Идентификатор задачи. | Строка
key | Ключ задачи. | Строка
version | Версия задачи. Каждое изменение параметров задачи увеличивает номер версии. | Число
lastCommentUpdatedAt | Дата и время последнего добавленного комментария. | Строка
summary | Название задачи. | Строка
[parent](#parent) | Объект с информацией о родительской задаче. | Объект
aliases | Массив с информацией об альтернативных ключах задачи. | Массив строк
[updatedBy](#updated-by) | Объект с информацией о последнем сотруднике, изменявшим задачу. | Объект
description | Описание задачи. | Строка
[sprint](#sprint) | Массив объектов с информацией о спринте. | Массив объектов
[type](#type) | Объект с информацией о типе задачи. | Объект
[priority](#priority) | Объект с информацией о приоритете. | Объект
createdAt | Дата и время создания задачи. | Строка
[followers](#followers) | Массив объектов с информацией о наблюдателях задачи. | Массив объектов
[createdBy](#created-by) | Объект с информацией о создателе задачи. | Объект
votes | Количество голосов за задачу. | Число
[assignee](#assignee) | Объект с информацией об исполнителе задачи. | Объект
[queue](#queue) | Объект с информацией об очереди задачи. | Объект
updatedAt | Дата и время последнего обновления задачи. | Строка
[status](#status) | Объект с информацией о статусе задачи. | Объект
[previousStatus](#previous-status) | Объект с информацией о предыдущем статусе задачи. | Объект
favorite | Признак избранной задачи:<ul><li>`true` — пользователь добавил задачу в избранное;</li><li>`false` — задача не добавлена в избранное.</li></ul> | Логический

**Поля объекта** `parent` {#parent}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на задачу. | Строка
id | Идентификатор задачи. | Строка
key | Ключ задачи. | Строка
display | Отображаемое название задачи. | Строка

**Поля объекта** `updatedBy` {#updated-by}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка

**Поля объектов массива** `sprint` {#sprint}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на спринт. | Строка
id | Идентификатор спринта. | Строка
display | Отображаемое название спринта. | Строка

**Поля объекта** `type` {#type}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на тип задачи. | Строка
id | Идентификатор типа задачи. | Строка
key | Ключ типа задачи. | Строка
display | Отображаемое название типа задачи. | Строка

**Поля объект** `priority` {#priority}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на тип приоритета. | Строка
id | Идентификатор приоритета. | Строка
key | Ключ приоритета. | Строка
display | Отображаемое название приоритета. | Строка

**Поля объектов массива** `followers` {#followers}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка

**Поля объекта** `createdBy` {#created-by}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка

**Поля объекта** `assignee` {#assignee}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на пользователя. | Строка
id | Идентификатор пользователя. | Строка
display | Отображаемое имя пользователя. | Строка

**Поля объекта** `queue` {#queue}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на очередь. | Строка
id | Идентификатор очереди. | Строка
key | Ключ очереди. | Строка
display | Отображаемое название очереди. | Строка

**Поля объекта** `status` {#status}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на статус. | Строка
id | Идентификатор статуса. | Строка
key | Ключ статуса. | Строка
display | Отображаемое название статуса. | Строка

**Поля объекта** `previousStatus` {#previous-status}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Ссылка на статус. | Строка
id | Идентификатор статуса. | Строка
key | Ключ статуса. | Строка
display | Отображаемое название статуса. | Строка

## Возможные коды ответа {#section_otf_jrj_p1b}

201
:   В результате выполнения запроса создан новый объект.

404
:   Запрошенный объект не был найден. Возможно, вы указали неверное значение идентификатора или ключа объекта.

409
:   Возник конфликт при создании задачи: задача с таким значением параметра `unique` уже существует.

