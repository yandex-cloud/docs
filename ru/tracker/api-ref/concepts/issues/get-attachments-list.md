# Получить список прикрепленных файлов

Запрос позволяет получить список файлов, прикрепленных к задаче и к комментариям под ней.

## Формат запроса {#query}

Перед выполнением запроса [получите доступ к API](../access.md).

Чтобы получить список прикрепленных файлов, используйте HTTP-запрос с методом `GET`.

```
GET /{{ ver }}/issues/<issue-id>/attachments
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}

{% cut "Ресурс" %}

Параметр | Описание | Тип данных
----- | ----- | -----
\<issue-id\> | Идентификатор или ключ задачи | Строка

{% endcut %}

> Пример: Запросить список прикрепленных файлов задачи с ключом `JUNE-2`.
>
> - Используется HTTP-метод `GET`.
>
> ```
> GET /v2/issues/JUNE-2/attachments HTTP/1.1
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> ```

## Формат ответа {#answer}

{% list tabs %}

- Запрос выполнен успешно

    {% include [answer-200](../../../_includes/tracker/api/answer-200.md) %}

    Тело ответа содержит JSON-массив со списком прикрепленных файлов.

    ```json
    [
    {
      "self" : "<адрес ресурса API, соответствующего прикрепленному файлу>",
      "id" : "<идентификатор файла>",
      "name" : "<имя файла>",
      "content" : "<адрес для скачивания файла>",
      "thumbnail" : "<адрес для скачивания превью>",
      "createdBy" : {
        "self" : "<ресурс, соответствующий создателю файла>",
        "id" : "<логин создателя>",
        "display" : "<имя создателя>"
      },
      "createdAt" : "<дата и время добавления файла>",
      "mimetype" : "<тип данных файла>",
      "size" : <размер файла>,
      "metadata" : {
        "size" : "<геометрический размер (для изображений)>"
      }
    },
    ...
    ]
    ```

    {% cut "Параметры ответа" %}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    self | Адрес ресурса API, который соответствует прикрепленному файлу. | Строка
    id | Уникальный идентификатор файла. | Строка
    name | Имя файла. | Строка
    content | Адрес ресурса для скачивания файла. | Строка
    thumbnail | Адрес ресурса для скачивания миниатюры предпросмотра. Доступно только для графических файлов. | Строка
    [createdBy](#createdBy) | Объект с информацией о пользователе, прикрепившем файл. | Объект
    createdAt | Дата и время загрузки файла в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ``` | Строка
    mimetype | Тип файла, например:<ul><li>`text/plain` — текстовый файл;</li><li>`image/png` — изображение в формате png.</li></ul> | Строка
    size | Размер файла в байтах. | Целое число
    [metadata](#metadata) | Объект с метаданными файла. | Объект

    **Поля объекта** `createdBy` {#createdBy}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    self | Адрес ресурса, соответствующего пользователю, загрузившему файл | Строка
    id | Логин пользователя | Строка
    display | Имя пользователя (как в интерфейсе) | Строка

    **Поля объекта** `metadata` {#metadata}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    size | Размер изображения в пикселях | Строка

    {% endcut %}

- Запрос выполнен с ошибкой

    Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

    {% include [answer-error-404](../../../_includes/tracker/api/answer-error-404.md) %}

{% endlist %}
