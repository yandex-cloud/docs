# Прикрепить файл

Запрос позволяет прикрепить файл к задаче.

## Формат запроса {#section_rnm_x4j_p1b}

Чтобы прикрепить файл, используйте HTTP-запрос с методом `POST`:

```
POST /{{ ver }}/issues/<issue-id>/attachments/?filename=<новое имя файла>
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
X-Org-Id: <идентификатор организации>
Content-Type: multipart/form-data

<file_data>

```

#### Ресурс {#resource}

- **\<issue-id\>**

    Идентификатор или ключ задачи.

#### Параметры запроса {#req-params}

- **filename (необязательный)**

    Новое имя файла, с которым он будет храниться на сервере. Необязательный параметр.

#### Заголовки запроса {#req-headers}

- **Host**

    Адрес узла, предоставляющего API:

    ```
    {{ host }}
    ```

- **Authorization**

    OAuth-токен в формате `OAuth <значение токена>`, например:

    ```
    OAuth 0c4181a7c2cf4521964a72ff57a34a07
    ```

- **X-Org-ID**

    Идентификатор организации.

- **Content-Type**

    Формат тела запроса. Должен иметь значение `multipart/form-data`.

#### Тело запроса {#req-body}

- **\<file_data\>**

    Файл в бинарном формате. Размер файла не должен превышать 1024 Мбит.

## Формат ответа {#section_xc3_53j_p1b}

В случае успешного выполнения запроса API возвращает ответ с кодом 201. Тело ответа содержит параметры прикрепленного файла в формате JSON:

```json
{
  "self" : "<адрес ресурса API, соответствующего прикрепленному файлу>",
  "id" : "<идентификатор файла>",
  "name" : "<имя файла>",
  "content" : "<адрес для скачивания файла>",
  "thumbnail" : "<адрес для скачивания превью>",
  "createdBy" : {
    "self" : "<ресурс, соответствующий создателю файла>",
    "id" : "<логин создателя>",
    "display" : "<имя создателя>"
  },
  "createdAt" : "<дата и время добавления файла>",
  "mimetype" : "<тип данных файла>",
  "size" : <размер файла>
  "metadata" : {
    "size" : "<геометрический размер (для изображений)>"
  }
}
```

#### Параметры ответа {#answer-params}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Адрес ресурса API, который соответствует прикрепленному файлу. | Строка.
id | Уникальный идентификатор файла. | Строка.
name | Имя файла. | Строка.
content | Адрес ресурса для скачивания файла. | Строка.
thumbnail | Адрес ресурса для скачивания миниатюры предпросмотра. Доступно только для графических файлов. | Строка.
[createdBy](#createdBy) | Объект с информацией о пользователе, прикрепившем файл. | JSON-объект.
createdAt | Дата и время загрузки файла в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ``` | Строка.
mimetype | Тип файла, например:<ul><li>`text/plain` — текстовый файл;</li><li>`image/png` — изображение в формате png.</li></ul> | Строка.
size | Размер файла в байтах. | Целое число.
[metadata](#metadata) | Объект с метаданными файла. | JSON-объект.

**Поля объекта** `createdBy` {#createdBy}

Параметр | Описание | Тип данных
----- | ----- | -----
self | Адрес ресурса, соответствующего пользователю, загрузившему файл. | Строка.
id | Логин пользователя. | Строка.
display | Имя пользователя (как в интерфейсе). | Строка.

**Поля объекта** `metadata` {#metadata}

Параметр | Описание | Тип данных
----- | ----- | -----
size | Размер изображения в пикселях. | Строка.

## Возможные коды ответа {#section_otf_jrj_p1b}

201
:   В результате выполнения запроса с методом `POST` успешно создан новый объект.

404
:   Запрошенный объект не был найден. Возможно, вы указали неверное значение идентификатора или ключа объекта.

