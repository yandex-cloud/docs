# Локальные поля задач

Если требуется добавить в задачи новый параметр, которого нет среди существующих в {{ tracker-name }} полей, вы можете добавить локальные поля в вашу очередь.

{% note info %}

Список существующих глобальных полей можно посмотреть на странице [Настройки {{ tracker-name }}]{% if audience == "external" %}({{ link-admin-fields }}){% else %}({{ link-admin-fields-ya }}){% endif %}.

{% endnote %}

Локальное поле можно использовать только в задачах той очереди, к которой оно привязано. Преимущество локальных полей в том, что владелец очереди может управлять такими полями без риска повлиять на процессы работы в других очередях. Пользователи, которые работают в других очередях, не будут видеть это поле в своих задачах.

## Добавить локальное поле

{% note alert %}

По умолчанию настраивать очередь может [только ее владелец](manager/queue-access.md).

{% endnote %}

1. Откройте [страницу очереди](user/queue.md).

1. Слева от имени очереди выберите ![](../_assets/tracker/icon-settings.png) → **Администрирование**.

1. Перейдите на вкладку **Поля очереди**.

1. Нажмите кнопку **Создать поле**.

1. Выберите тип поля и нажмите кнопку **Продолжить**.

1. Задайте параметры нового поля:
    - **Категория**. Все поля в {{ tracker-name }} сгруппированы по категориям. Выберите категорию, которая лучше всего подходит для нового поля.

    - **Название**. Старайтесь давать полям короткие и емкие названия.

    - **Название на английском языке**. Это название видно в английском интерфейсе {{ tracker-name }}.

    - **Тип чисел** (только для полей типа <q>число</q>).

    - **Значения списка** (только для полей типа <q>выпадающий список</q>) — укажите возможные значения и их порядок.

    - **Количество значений в списке** (только для полей типа <q>выпадающий список</q>).
    
    - **Количество сотрудников** (только для полей типа <q>выбор сотрудников</q>).

1. Нажмите кнопку **Создать**.

{% if audience == "internal" %}

## Редактировать локальное поле

Редактирование параметров локального поля через веб-интерфейс {{ tracker-name }} не поддерживается. Чтобы изменить параметры локального поля, отправьте заявку через [форму](https://forms.yandex-team.ru/surveys/66769/). В комментарии к заявке напишите, к какой очереди привязано поле.

Обращения обрабатываются в течение 2-3 рабочих дней. Если задача срочная, поднимите ее приоритет до <q>критичного</q> и напишите в комментариях, почему это срочно.

{% endif %}

## Ограничения локальных полей {#restrictions}

#### Особенности использования локальных полей

- Для поиска задач по локальному полю с помощью языка запросов нужно [указать очередь перед ключом или названием поля](user/query-filter.md#local_fields).

- При [переносе](user/move-ticket.md) и [клонировании](user/clone.md) задачи с локальными полями в другую очередь значения локальных полей будут удалены.

#### Где нельзя использовать локальные поля

Локальные поля временно не поддерживаются в некоторых сценариях работы с задачами. Поддержка этих сценариев будет добавлена позже.

- На доске задач локальные поля не отображаются на [карточках](manager/edit-agile-board.md#sec_layout), также локальные поля нельзя использовать в [фильтрах на доске задач](user/agile.md#section_cxl_x31_2gb).

- Локальные поля нельзя использовать в [макросах](manager/create-macroses.md), [правилах SLA](sla-head.md), [функциях перехода между статусами](manager/workflow-action-edit.md).

- Значения локальных полей нельзя изменять помощью [групповых операций](manager/bulk-change.md).

{% if audience == "internal" %}

- Локальные поля не выгружаются в YT.

{% endif %}

## Как обращаться к локальным полям через API

Чтобы получить или изменить значение локального поля в задаче через [API {{ tracker-name }}](user/API.md), в теле запроса укажите его идентификатор вида `603fb94c38bbe658d04da2e6--<ключ поля>`.

Чтобы узнать идентификатор локального поля, выполните запрос, который позволяет получить список локальных полей в определенной очереди:

{% if audience == "internal" %}

```
curl -X GET 'https://st-api.yandex-team.ru/v2/queues/<ключ очереди>/localFields/' \
-H 'Authorization: OAuth <OAuth-токен>'
```

{% else %}

```
curl -X GET 'https://api.tracker.yandex.net/v2/queues/<ключ очереди>/localFields' \
-H 'Authorization: OAuth <OAuth-токен>' \
-H 'X-Org-Id: <идентификатор организации>'
```

{% endif %}