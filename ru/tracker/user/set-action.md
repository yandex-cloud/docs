# Настроить действие триггера

В блоке **Действия триггера** с помощью кнопки **Добавить действие** настройте одно или несколько действий:

- [Изменить статус задачи](set-action.md#section_change_status)
- [Изменить значения в полях](set-action.md#section_mod_fields)
- [Добавить комментарий](set-action.md#dlentry_xvj_wls_kgb)
- [Вычислить значение](set-action.md#section_calc_field)
- [Переместить задачу](set-action.md#sec_move)
- [Создать задачу](set-action.md#sec_create_issue)
- [HTTP-запрос](set-action.md#dlentry_nbq_nms_kgb)

## Изменить статус задачи {#section_change_status}

Задайте новый статус задачи. Доступные статусы определяются настройками [воркфлоу](../manager/workflow-status-edit.md).

## Изменить значения в полях {#section_mod_fields}

Задайте новые значения для одного или нескольких полей:

1. Нажмите кнопку **Выбрать поля** и укажите поле. 

1. Выберите действие:

    Действие | Описание
    ----- | -----
    Установить значение | Присвоить полю заданное значение.
    Очистить поле | Удалить значение поля.
    Добавить к списку | Добавить еще одно значение поля (для полей, которые могут содержать несколько элементов).
    Убрать из списка | Убрать одно из значений поля (для полей, которые могут содержать несколько элементов).

1. Укажите новое значение поля.

## Добавить комментарий {#dlentry_xvj_wls_kgb}

Напишите текст комментария, который будет добавлен к задаче.

Вы можете подставить в комментарий значения полей задачи. Для этого нажмите кнопку **Добавить переменную** и выберите одно или несколько значений. В поле **Комментарий** появится конструкция вида `{{issue.ключ_поля}}`.

## Вычислить значение {#section_calc_field}

Вы можете настроить поле, значение которого вычисляется автоматически на основе значений других полей задачи. Например, вы можете автоматически рассчитывать значение какой-либо метрики.

Чтобы автоматически вычислять значение поля:

1. Добавьте действие триггера **Вычислить значение**.

1. Задайте формулу для вычисления значения: 
    - С помощью кнопки **Добавить переменную** добавьте в формулу поля с числовыми значениями. В формулу будет подставлена конструкция вида `{{issue.ключ_поля}}`. 
Если нужного поля нет в {{ tracker-name }}, вы можете его [создать](create-param.md).
    - Используйте символы математических операций сложения `+`, вычитания `-`, умножения `*`, деления `/`.
    - Чтобы задать приоритет операций, используйте скобки.

1. Нажмите кнопку **Выберите поле** и задайте поле, в которое будет записано вычисленное значение. 

    {% note info %}

    Значение поля округляется до целого числа.

    {% endnote %}

1. В блоке [**Условия срабатывания**](set-condition.md#section_set_condition) задайте условие, при выполнении которого будет вычисляться значение поля. Рекомендуем выбрать событие **Изменились поля формулы**. Также вы можете задать любое условие, которое подходит для вашего процесса работы с задачами.

## Переместить задачу {#sec_move}

Укажите очередь, в которую будет перенесена задача.

## Создать задачу {#sec_create_issue}

Можно настроить триггер, который автоматически создает задачу при выполнении заданных условий. Например, с помощью триггера можно создавать задачу на тестирование, когда программист заканчивает разработку новой возможности и переводит задачу в статус <q>Решен</q>.

Чтобы настроить создание задачи:

1. Добавьте действие триггера **Создать задачу**.

1. Нажмите кнопку **Заполнить поля**.

1. В окне **Создание задачи**: 

    1. Укажите очередь, в которой будет автоматически создана задача.

    1. Задайте параметры задачи и нажмите кнопку **Сохранить**.

1. Чтобы автором созданной задачи был Робот сервиса Tracker, включите опцию **Создавать задачи от имени робота**. Убедитесь, что у робота есть права на создание задач в выбранной очереди. 
   
   Если эта опция выключена, автором задачи будет пользователь, действие которого запустило триггер.

1. Чтобы связать автоматически созданную задачу с задачей, в которой сработал триггер, включите опцию **Связать с задачей, которая запустила триггер**.

## HTTP-запрос {#dlentry_nbq_nms_kgb}

Чтобы при срабатывании триггера отправлять HTTP-запрос:

1. Выберите метод HTTP-запроса.

1. Укажите [полный адрес ресурса](https://tools.ietf.org/html/rfc3986), по которому будет отправлен запрос. Например: `http://example.org/newfolder/newfile`.

1. Выберите способ авторизации:
    - **NoAuth**

        Без авторизации.

    - [**Basic**](https://tools.ietf.org/html/rfc2617)

        Требует ввести логин и пароль.

    - [**OAuth 2.0**](https://tools.ietf.org/html/rfc6749)

        Требует ввести токен, заголовок авторизации и тип токена.

   Данные авторизации (логин, пароль, токен, заголовок авторизации, тип токена) передаются в соответствующих полях и не требуют повторного указания в заголовках.

1. Введите тело запроса.

   В тело запроса можно подставлять значения полей задачи или пользовательские переменные (см. ниже). Для этого справа от поля ввода нажмите кнопку **{ }** и выберите имя поля или переменной. В тело запроса будет подставлена конструкция вида `{{имя_переменной}}`.

   {% note info %}

   Также вы можете подставить переменные в адрес ресурса и значение заголовка.

   {% endnote %}

1. Введите заголовки и их значения.

1. При необходимости добавьте новые переменные для использования в теле запроса или заголовках. Например, вы можете добавить ключ аутентификации или другую секретную информацию. 

   {% note info %}

   После того как вы сохраните триггер, значение переменной будет скрыто, его нельзя будет посмотреть.

   {% endnote %}

Примеры настройки HTTP-запросов для отправки уведомлений из {{ tracker-name }} в Slack и Telegram приведены в разделе [{#T}](../messenger.md).



