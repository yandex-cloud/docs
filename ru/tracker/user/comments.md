# Добавить комментарии к задаче

С помощью комментариев вы можете оставлять заметки о ходе работы, уточнять условия задачи и призывать коллег к обсуждению.

{% note tip %}

Если обсуждать задачу только в комментариях, у вас всегда будет доступ к полной истории обсуждений.

{% endnote %}

## Оставить комментарий {#leave-comment}

{% list tabs %}

- Веб-интерфейс

    Чтобы прокомментировать задачу, введите текст в поле в нижней части страницы и нажмите кнопку **Отправить**. В комментариях вы можете использовать [разметку текста](markup.md), а также прикреплять к ним изображения и файлы.

    В комментарии к задаче можно указать ключ любой другой задачи — тогда {{ tracker-name }} автоматически их свяжет.

    {% if audience=="internal" %}
    
    {% note info %}

    Если в тексте вам необходимо вставить ссылку на другую задачу, но при этом избежать связывания, перед ключом задачи укажите `st:` (например, `st:TEST-1234`). В таком случае в тексте появится [магическая ссылка](wiki.md#magic-link-descr), но связь между задачами создана не будет.
    Полностью отключить автоматическое связывание задач из разных очередей можно в [настройках очереди](../manager/edit-queue-general.md).

    {% endnote %}

    {% endif %}

    Если вы не отправили комментарий и закрыли либо перезагрузили страницу, текст вашего комментария сохранится в черновиках. Чтобы восстановить текст из черновика, на панели инструментов над полем комментария нажмите значок ![](../../_assets/tracker/drafts.png) и выберите черновик.

- Мобильное приложение

    Чтобы прокомментировать задачу, введите текст в поле **Написать комментарий** в нижней части экрана и нажмите кнопку ![](../../_assets/tracker/send.png). В комментариях вы можете использовать [разметку текста](markup.md), а также [прикреплять к ним изображения и файлы](#sec_file). Чтобы развернуть поле с комментарием на весь экран, нажмите на значок ![](../../_assets/tracker/open-text.png).

    В комментарии к задаче можно указать ключ любой другой задачи — тогда {{ tracker-name }} автоматически их [свяжет](ticket-links.md#add-link).

{% endlist %}

## Ответить на комментарий {#answer-comment}

{% list tabs %}

- Веб-интерфейс

    1. Наведите на указатель на комментарий и нажмите кнопку **Ответить**. Комментарий, на который вы отвечаете, будет добавлен в ответ в виде цитаты. 

    1. Внесите изменения и нажмите кнопку **Отправить**.

- Мобильное приложение

    1. Нажмите ![](../../_assets/tracker/dots.png) напротив комментария и выберите **Ответить**. Комментарий, на который вы отвечаете, будет добавлен в ответ в виде цитаты. 

    1. Внесите изменения и нажмите кнопку ![](../../_assets/tracker/send.png).

{% endlist %}

## Отредактировать комментарий {#edit-comment}

{% list tabs %}

- Веб-интерфейс

    1. Наведите указатель на комментарий и нажмите кнопку **Редактировать**.

    1. Внесите изменения и нажмите кнопку **Сохранить**.

    Все изменения комментариев сохраняются в [Истории изменений](history.md).

- Мобильное приложение

    1. Нажмите ![](../../_assets/tracker/dots.png) напротив комментария и выберите **Редактировать**.
    
    1. Внесите изменения и нажмите кнопку ![](../../_assets/tracker/send.png).

    Все изменения комментариев сохраняются в [Истории изменений](history.md).

{% endlist %}

## Призвать в комментарии {#call-comment}

{% list tabs %}

- Веб-интерфейс

    Чтобы пригласить других пользователей к обсуждению задачи:

    1. Над полем для ввода комментария нажмите кнопку ![](../../_assets/tracker/summon.png).

    1. Введите логин или имя пользователя, которого вы хотите призвать в комментарии. Вы можете призвать несколько пользователей одновременно.

    1. Введите текст комментария.

    1. Нажмите кнопку **Отправить**.

- Мобильное приложение

    Чтобы пригласить других пользователей к обсуждению задачи:

    1. Выберите поле **Написать комментарий** в нижней части экрана и нажмите ![](../../_assets/tracker/at.png).

    1. Введите логин или имя пользователя, которого вы хотите призвать в комментарии, и нажмите кнопку **Сохранить**. Вы можете призвать несколько пользователей одновременно. 

    1. Введите текст комментария и нажмите кнопку ![](../../_assets/tracker/send.png).

{% endlist %}
   
Пользователи, которых вы призвали в комментарии, получат уведомление по почте, и их имена будут добавлены в поле задачи **Нужен ответ пользователя**.

{% note info %}

Если в поле **Нужен ответ пользователя** добавить пользователя, но не призвать его при отправке комментария к задаче, пользователь не получит уведомление по почте.

{% endnote %}

## Прикрепить файл {#sec_file}

{% list tabs %}

- Веб-интерфейс

    Перетащите файлы в область ввода комментария или воспользуйтесь кнопкой **Выберите файлы**.

    Чтобы разместить прикрепленные к задаче изображения в тексте комментария, нажмите кнопку ![](../../_assets/tracker/add-image.png).

- Мобильное приложение

    Чтобы прикрепить файл к комментарию:

    1. Выберите поле **Написать комментарий** в нижней части экрана и нажмите ![](../../_assets/tracker/pin.png). 
    
       * Чтобы добавить фото или видео с камеры телефона, нажмите на иконку **Камера**. Когда все будет готово, нажмите **ОК**. Чтобы переснять фото или видео, нажмите **Повтор**.

       * Чтобы добавить приложения из памяти телефона, нажмите на иконку **Файлы** и выберите файлы.

       {% note info %}

       Если вы добавляете файлы в приложении впервые, подтвердите разрешение для доступа к камере и файлам на вашем телефоне.

       {% endnote %}

    1. Введите текст комментария и нажмите кнопку ![](../../_assets/tracker/send.png).

    Прикрепленные файлы отображаются под комментарием.

{% endlist %}

## Отправить комментарий на почтовый адрес пользователя {#send-comment}

{% note alert %}

Отправлять комментарии **внешним** пользователям можно, только если это разрешено [настройками очереди](../manager/edit-queue-general.md).

{% endnote %}

Вы можете отправлять письма внешним и внутренним пользователям прямо со страницы задачи. Текст письма прикрепится к задаче в виде комментария.

Чтобы отправить письмо со страницы задачи:

1. Нажмите кнопку **Письмо** на панели под названием задачи.

1. Выберите, с какого адреса будет отправлено письмо:

    {% list tabs %}

    - С адреса очереди

        Эта опция доступна, если для очереди [задан почтовый адрес](../manager/queue-mail.md#section_gwv_hqb_hgb).

        В поле <q>От кого</q> получатель увидит только адрес очереди. Ответ на такое письмо станет комментарием к задаче.

        Для общения с внешними пользователями вы можете указать **Псевдоним**. Создайте один или несколько псевдонимов в настройках [почтового адреса очереди](../manager/queue-mail.md#section_ffq_gqb_hgb).

    - Со своего адреса

        В поле <q>От кого</q> получатель увидит ваше имя и почтовый адрес.

    {% endlist %}

1. Укажите адресата и введите текст письма.

1. Нажмите кнопку **Отправить**.

Ответ пользователя автоматически отразится в комментарии к задаче.

## Поделиться комментарием {#share-comment}

{% list tabs %}

- Веб-интерфейс

    Чтобы скопировать ссылку на комментарий, наведите на него указатель и нажмите кнопку ![](../../_assets/tracker/share-comment.png). Вы также можете нажать на дату в правом верхнем углу комментария: ссылка на него появится в адресной строке браузера.

- Мобильное приложение
    
    Чтобы скопировать ссылку на комментарий, напротив него нажмите кнопку ![](../../_assets/tracker/dots.png) и выберите **Скопировать ссылку**.

{% endlist %}

## Удалить комментарий {#delete-comment}

{% list tabs %}

- Веб-интерфейс

    Чтобы удалить комментарий, наведите на него указатель и нажмите кнопку ![](../../_assets/tracker/delete-comment.png).

- Мобильное приложение

    Чтобы удалить комментарий, нажмите ![](../../_assets/tracker/dots.png) напротив комментария и выберите **Удалить**.

{% endlist %}

{% if audience == "internal" %} ## Создать комментарий письмом {#create-comment-from-mail}

Чтобы создать комментарий по почте, ответьте на любое уведомление об изменении задачи:

1. Откройте письмо с уведомлением об изменении задачи.

1. Напишите текст комментария в теле письма.

1. Нажмите кнопку **Отправить**.

Комментарий создастся автоматически после отправки письма.{% endif %}

## Использовать шаблоны {#template-comment}

#### Создать шаблон {#create-template}

Если вам часто приходится оставлять похожие комментарии, создайте для них шаблон. Вы можете создать шаблон на [специальной странице](ticket-template.md) или из текста комментария:

1. Введите комментарий, который вы хотите сделать шаблоном.

1. Нажмите кнопку ![](../../_assets/tracker/comment-template.png).

1. Выберите **Создать шаблон из комментария** из выпадающего списка.

1. Введите имя шаблона.

1. Если вы хотите, чтобы шаблон был доступен только в этой очереди, выберите опцию **Привязать шаблон к очереди**.

1. Нажмите кнопку **Создать**.

#### Использовать шаблон {#use-template}

Чтобы создать комментарий из шаблона:

1. Убедитесь, что поле для комментариев не содержит текста.

1. Нажмите кнопку ![](../../_assets/tracker/comment-template.png).

1. Выберите шаблон из выпадающего списка и нажмите кнопку **Выбрать**.

1. При необходимости отредактируйте комментарий. Чтобы опубликовать его, нажмите кнопку **Отправить**.

## Создать задачу на основе комментария {#create-task}

Если при обсуждении возникла необходимость в новой задаче, вы можете создать ее прямо из комментария:

1. Нажмите на комментарий, на основе которого будет создана задача.

1. Нажмите кнопку **Создать задачу** и выберите тип связи.

1. Заполните поля так же, как при обычном [создании задачи](create-ticket.md#create-task).

1. Нажмите кнопку **Создать**.

## Настроить порядок комментариев {#order-comments}

По умолчанию комментарии следуют в хронологическом порядке. Чтобы помещать последние комментарии в начале списка:

1. {% include [open-personal-settings](../../_includes/tracker/open-personal-settings.md) %}

1. В блоке **Порядок сообщений в задаче** выберите опцию **Сначала новые**.

1. Нажмите кнопку **Сохранить**.

Записи об изменениях задачи, которые расположены на вкладке **История**, будут также следовать в порядке от последнего к первому.
