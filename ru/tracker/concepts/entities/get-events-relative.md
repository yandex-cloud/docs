---
sourcePath: ru/tracker/api-ref/concepts/entities/get-events-relative.md
---
# Получить историю событий сущности

Запрос позволяет получить историю событий [сущности](./about-entities.md) с постраничным отображением.

## Формат запроса {#query}

Перед выполнением запроса [получите доступ к API](../access.md).

Для получения истории событий с постраничным отображением используйте HTTP-запрос с методом `GET`.

```json
GET /{{ ver }}/entities/<тип_сущности>/<идентификатор_сущности>/events/_relative
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}

{% include [resource](../../../_includes/tracker/api/resource-entity.md) %}

{% cut "Параметры запроса" %}

Если параметры не указаны, выводится полный список событий.

**Дополнительные параметры**

#|
|| **Параметр** | **Описание** | **Тип данных** ||
|| perPage | Определяет максимальное количество событий в ответе. Значение по умолчанию — 50. | Число ||
|| from | Идентификатор события, после которого начинает формироваться список. Само событие в список не включается. Не используется вместе с параметром `selected`. | Строка ||
|| selected | Идентификатор события, вокруг которого формируется список. Не указывается вместе с параметром `from`. Список формируется в следующем порядке (для `perPage=5`): 
1. Событие с указанным идентификатором.
2. Событие, предшествующее первому событию.
3. Событие, следующее за первым событием.
4. Событие, предшествующее второму событию.
5. Событие, следующее за третьим событием. | Строка ||
|| newEventsOnTop | Меняет порядок событий в списке на противоположный. Значение по умолчанию — `false`. | Логический ||
|| direction | Определяет порядок событий в списке:
* `forward` (по умолчанию);
* `backward` — инвертирует значение параметра `newEventsOnTop`. | Строка ||
|#

{% endcut %}

> Пример: Получить список событий
>
> - Используется HTTP-метод GET.
> - В ответе выводится информация о трех событиях.
> - Список начинается с события, следующего после `<идентификатор_события_1>`.
>
> ```
> GET /v2/entities/project/<идентификатор_проекта>/events/_relative?perPage=3&from=<идентификатор_события_1>
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> ```

## Формат ответа {#answer}

{% list tabs %}

- Запрос выполнен успешно

  {% include [answer-200](../../../_includes/tracker/api/answer-200.md) %}

  Тело ответа содержит информацию о событиях сущности в формате JSON.

  ```json
  {
      "events": [
          {
              "id": "65a26b254dbe6212********", 
              "author": {
                  "self": "{{ host }}/v2/users/19********",
                  "id": "19********",
                  "display": "Имя Фамилия",
                  "cloudUid": "ajeppa7dgp71********",
                  "passportUid": "16********"
              },
              "date": "2024-01-13T10:51:17.821+0000", 
              "transport": "v2", 
              "display": "Задача обновлена", 
              "changes": [
                  {
                      "diff": "<added>Имя_Фамилия</added>", 
                      "field": {
                          "id": "teamUsers", 
                          "display": "Участники"
                      }
                  }
              ]
          }, 
          {
              "id": "65a26b264dbe6215********", 
              "author": {
                  "self": "{{ host }}/v2/users/19********",
                  "id": "19********",
                  "display": "Имя Фамилия",
                  "cloudUid": "ajeppa7dgp71********",
                  "passportUid": "16********"
              },
              "date": "2024-01-13T10:51:17.954+0000", 
              "transport": "v2", 
              "display": "Комментарий добавлен", 
              "changes": [
                  {
                      "diff": "<added>Добавлен первый комментарий</added>", 
                      "field": {
                          "id": "comment.text", 
                          "display": "Текст комментария", 
                          "addedSummonees": [
                              {
                                  "self": "{{ host }}/v2/users/19********",
                                  "id": "19********",
                                  "display": "Имя Фамилия",
                                  "cloudUid": "ajeppa7dgp71********",
                                  "passportUid": "16********"
                              }
                          ], 
                          "email": None
                      },
                      "commentUrl": ""
                  }
              ]
          }, 
          {
              "id": "65a26b384dbe6216********",  
              "author": {
                  "self": "{{ host }}/v2/users/19********",
                  "id": "19********",
                  "display": "Имя Фамилия",
                  "cloudUid": "ajeppa7dgp71********",
                  "passportUid": "16********"
              },
              "date": "2024-01-13T10:51:36.807+0000", 
              "transport": "v2", 
              "display": "Файл добавлен", 
              "changes": [
                  {
                      "diff": "<added>Добавляем файл в комментарии.</added>",
                      "field": {
                          "id": "comment.text", 
                          "display": "Текст комментария", 
                          "email": None
                      },
                      "commentUrl": ""
                  }, 
                  {
                      "diff": "<added>image.jpg</added>", 
                      "field": {
                          "id": "issue.attachments", 
                          "display": "Вложения"
                      }
                  }
              ]
          }
      ], 
      "hasNext": True, 
      "hasPrev": True
  }
  ```

  {% cut "Параметры ответа" %}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  [events](#events) | Массив объектов с информацией о событиях. | Массив объектов
  hasNext | Указывает на наличие последующих записей в списке. | Логический
  hasPrev | Указывает на наличие предыдущих записей в списке. | Логический

  **Поля объектов массива** `events` {#events}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  id | Идентификатор события. | Строка
  [author](#author) | Объект с информацией об авторе события. | Объект
  date | Дата и время создания события в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ```. | Строка
  transport | Служебный параметр. | Строка
  display | Отображаемое название события. | Строка
  changes | Массив объектов с информацией об изменениях. Состав и содержимое полей объектов зависят от изменяемого параметра.| Массив объектов

  **Поля объекта** `author` {#author}

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  self | Адрес ресурса API, который содержит информацию о пользователе. | Строка
  id | Идентификатор пользователя. | Число
  display | Отображаемое имя пользователя. | Строка
  cloudUid | Уникальный идентификатор пользователя в {{ org-full-name }}. | Строка
  passportUid | Уникальный идентификатор аккаунта пользователя в организации {{ ya-360 }} и Яндекс ID. | Строка

  {% endcut %}  
  
- Запрос выполнен с ошибкой

  Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

  {% include [error-400](../../../_includes/tracker/api/answer-error-400.md) %}
  
  {% include [error-404](../../../_includes/tracker/api/answer-error-404.md) %}
  
  {% include [error-422](../../../_includes/tracker/api/answer-error-422.md) %}

{% endlist %}
