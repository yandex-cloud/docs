---
sourcePath: ru/tracker/api-ref/concepts/issues/patch-issue.md
---
# Редактировать задачу

Запрос позволяет внести изменения в задачу.

{% note warning %}

Статус задачи может быть изменен только с помощью запроса [<q>Выполнить переход в статус</q>](new-transition.md).

{% endnote %}

## Формат запроса {#section_rnm_x4j_p1b}

Перед выполнением запроса [получите доступ к API](../access.md).

Чтобы отредактировать задачу, используйте HTTP-запрос с методом `PATCH`. Параметры запроса передаются в его теле в формате JSON.

```json
PATCH /{{ ver }}/issues/<issue-id>
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
{
   Тело запроса в формате JSON
}
```

{% include [headings](../../../_includes/tracker/api/headings.md) %}

{% include [resource-issue-id](../../../_includes/tracker/api/resource-issue-id.md) %}  

{% cut "Параметры запроса" %}

**Дополнительные параметры**

  Параметр | Описание | Тип данных
  ----- | ----- | -----
  version | Версия задачи. Изменения вносятся только в текущую версию задачи. | Число

{% endcut %}

{% cut "Параметры тела запроса" %}

**Дополнительные параметры**

Параметр | Описание | Тип данных
----- | ----- | -----
summary | Название задачи. | Строка
[parent](#req-parent) | Родительская задача. | Объект или строка
description | Описание задачи. | Строка
[sprint](#req-sprint) | Блок с информацией о спринтах. | Массив объектов или строк
[type](#req-type) | Тип задачи. | Объект, строка (если передается ключ типа задачи) или число (если передается идентификатор типа задачи).
[priority](#req-priority) | Приоритет задачи. | Объект, строка (если передается ключ приоритета) или число (если передается идентификатор приоритета).
[followers](#req-followers) | Идентификаторы или логины наблюдателей задачи. | Массив объектов или строк

**Поля объекта** `parent` {#req-parent}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор родительской задачи. | Строка
key | Ключ родительской задачи. | Строка

**Поля объекта** `sprint` {#req-sprint}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор спринта. Информацию о спринте можно получить при помощи [запроса](../../get-sprints.md). | Число

**Поля объекта** `type` {#req-type}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор типа задачи. | Строка
key | Ключ типа задачи. | Строка

**Поля объекта** `priority` {#req-priority}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор приоритета. | Строка
key | Ключ приоритета. | Строка

**Поля объекта** `followers` {#req-followers}

Параметр | Описание | Тип данных
----- | ----- | -----
id | Идентификатор сотрудника. | Строка

{% endcut %}

{% cut "Формат тела запроса" %}

В теле запроса передается JSON-объект с идентификаторами изменяемых полей задачи и их значениями.

- Чтобы добавить или удалить значение из массива, используйте команды `add` и `remove`:

  - ```json
        {
            "followers": { "add": ["<id сотрудника1>", "<id сотрудника2>"] }
        }
    ```

{% note info %}

Команда `add` добавляет новые значения в массив. Чтобы перезаписать массив (удалить старые значения и добавить новые), используйте команду `set`.

{% endnote %}

- Чтобы обнулить значение поля, укажите значение `null`. Чтобы обнулить массив, используйте пустой массив `[]`. Отдельные значения в массиве можно изменить с помощью команд `target` и `replacement`:

  - `{"followers": null}`
  - ```json
      {
        "followers": {
          "replace": [
              {"target": "<идентификатор1>", "replacement": "<идентификатор2>"},
              {"target": "<идентификатор3>", "replacement": "<идентификатор4>"}]
        }
      }
      ```

- Например, чтобы изменить тип задачи на <q>Ошибка</q>, используйте один из способов:

  - `{"type": 1}`
  - `{"type": "bug"}`
  - ```json
      {
          "type": { "id": "1" }
      }
      ```
  - ```json
      {
          "type": { "name": "Ошибка" }
      }
      ```
  - ```json
      {
          "type": {"set": "bug"}
      }
      ```

{% endcut %}

> Пример 1: Изменить название, описание, тип и приоритет задачи.
> 
> - Используется HTTP-метод PATCH.
> - Редактируется задача TEST-1.
> - Новый тип задачи: <q>Ошибка</q>.
> - Новый приоритет задачи: <q>Низкий</q>.
>
> ```
> PATCH /v2/issues/TEST-1
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> 
> {
>     "summary": "Новое название задачи",
>     "description": "Новое описание задачи",
>     "type": {
>         "id": "1",
>         "key": "bug"
>         },
>     "priority": {
>         "id": "2",
>         "key": "minor"
>         }
> }
> ```

> Пример 2: Изменить родительскую задачу, добавить в спринты, добавить наблюдателей.
> 
> - Используется HTTP-метод PATCH.
> - Редактируется задача TEST-1.
> - Новая родительская задача: TEST-2.
> - Задача добавляется в спринты с идентификаторами 3 и 2. Спринты должны быть на разных досках. 
> - Добавлены наблюдатели с логинами `userlogin-1` и `userlogin-2`.
> 
> ```
> PATCH /v2/issues/TEST-1
> Host: {{ host }}
> Authorization: OAuth <OAuth-токен>
> {{ org-id }}
> 
> {
>     "parent": {
>         "key": "TEST-2"},
>     "sprint": [{"id": "3"}, {"id": "2"}],
>     "followers": {
>         "add": ["userlogin-1", "userlogin-2"]
>         }
> }
> ```

## Формат ответа {#section_xc3_53j_p1b}

{% list tabs %}

- Запрос выполнен успешно

    {% include [answer-200](../../../_includes/tracker/api/answer-200.md) %}
  
    Тело ответа содержит информацию об отредактированной задаче в формате JSON.

  {% include [answer-issue](../../../_includes/tracker/api/answer-issue.md) %}

- Запрос выполнен с ошибкой

  Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

  {% include [answer-error-401](../../../_includes/tracker/api/answer-error-401.md) %}

  {% include [answer-error-403](../../../_includes/tracker/api/answer-error-403.md) %}

  {% include [answer-error-404](../../../_includes/tracker/api/answer-error-404.md) %}

  {% include [answer-error-409](../../../_includes/tracker/api/answer-error-409.md) %}

{% endlist %}

