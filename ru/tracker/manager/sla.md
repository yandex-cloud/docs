# Настроить правила

{% note warning %}

По умолчанию настраивать очередь может [только ее владелец](queue-access.md).

{% endnote %}

## Создать правило {#create-rule}

Правило будет применено ко всем новым задачам в очереди. Таймер SLA не появится в задачах, созданных раньше, чем правило.

Чтобы создать новое правило SLA:

1. {% include [go to settings](../../_includes/tracker/transition-page.md) %} 

1. В правом верхнем углу нажмите ![](../../_assets/tracker/svg/queue-settings.svg) **Настройки очереди**. 

1. Перейдите на вкладку **SLA**.

1. Нажмите кнопку **Создать правило**.

1. Нажмите на значок ![](../../_assets/tracker/icon-edit.png) и введите название правила.

1. Выберите [график работы](schedule.md). График работы устанавливает время, когда правило активно. В нерабочие часы отсчет времени идти не будет.

1. С помощью фильтров можно выбрать задачи, к которым будет применено правило. По умолчанию включен фильтр <q>Все задачи очереди</q>.
   
   * Чтобы добавить фильтр, нажмите кнопку **Создать новый фильтр** и задайте критерии, по которым будут отбираться задачи.

   * Чтобы изменить существующий фильтр, нажмите на значок ![](../../_assets/tracker/icon-edit.png).
   
   * Чтобы удалить фильтр, нажмите на значок ![](../../_assets/tracker/icon-delete.png).

   Для одного правила можно задать несколько фильтров.

1. Для каждой группы задайте сроки выполнения задач в формате `00h 00m`:
   
    * **Время до предупреждения** (необязательный параметр) — по истечении этого срока {{ tracker-name }} отправит предупреждение, что время обработки задачи на исходе.

    * **Время на выполнение** — предельное время на обработку задачи. По истечении этого времени {{ tracker-name }} отправит уведомление о срыве срока.

1. Задайте условия, при которых таймер будет запускаться, приостанавливаться или останавливаться:

    * **Старт** — таймер запустится, если выполнено любое из перечисленных условий. Если таймер стоял на паузе, отсчет времени будет возобновлен.

    * **Пауза** — таймер приостановится, если выполнено любое из перечисленных условий. Таймер запустится, когда будет выполнено условие из списка **Старт**.

        {% note alert %}

        Если в качестве условия для паузы выбрано "Пока задача находится в статусе", таймер запустится, как только задача будет переведена в любой другой статус.

        {% endnote %}

    * **Стоп** — таймер остановится, если выполнено любое из перечисленных условий.

    Возможные условия:
    Условие | Режим таймера | Описание
    ----- | ----- | -----
    Удалён исполнитель | **Старт**, **Стоп** | Условие считается выполненным, когда в задаче удаляют исполнителя.  
    Назначен исполнитель | **Старт**, **Стоп** | Условие считается выполненным, когда задаче назначают нового исполнителя.
    Получен ответ заказчика | **Старт**, **Стоп** | Условие считается выполненным, когда задачу прокомментировал пользователь, не входящий в [команду очереди](queue-team.md).
    Создана задача | **Старт** | Таймер запустится сразу после создания задачи.
    Задача переведена в статус | **Старт**, **Стоп** | Условие считается выполненным, когда задачу переводят в один из указанных в нем статусов.
    Удалена резолюция | **Старт** | Условие считается выполненным, когда из задачи удаляют проставленную ранее резолюцию.
    Пока задача находится в статусе | **Пауза** | Таймер будет приостановлен, пока задача находится в одном из указанных статусов. После изменения статуса таймер автоматически запустится.
    Выбрана резолюция | **Стоп** | Условие считается выполненным, когда в задаче проставляют одну из указанных в нем резолюций.
    Получен ответ от команды очереди | **Стоп** | Условие считается выполненным, когда задачу прокомментировал пользователь, входящий в [команду очереди](queue-team.md).
    У задачи есть исполнитель | **Пауза** | Таймер будет приостановлен, пока в задаче указан исполнитель. После удаления исполнителя таймер автоматически запустится.
    У задачи нет исполнителя | **Пауза** | Таймер будет приостановлен, пока в задаче не указан исполнитель. После назначения исполнителя таймер автоматически запустится.

1. Вы можете настроить обновление таймера при выполнении условий старта. Для этого в блоке **Повторный запуск** включите опцию **При повторении условий старта запускать таймер заново**. В этом случае после паузы он не продолжит отсчет, а запуститься заново.

1. В блоке **Оповещения** укажите как и кого оповещать о нарушении сроков.

1. Нажмите кнопку **Сохранить**.

### Пример {#example}

Создадим правило для контроля времени реакции на новые задачи. Таймер правила запустится, как только задаче будет назначен исполнитель, и остановится, когда исполнитель возьмет задачу в работу. Если за 15 минут исполнитель не отреагирует на задачу, вы получите оповещение по почте.

Чтобы создать правило:

1. В блоке **Сроки выполнения задач** установите предельное время реакции на задачу:
   * Поле **Время до предупреждения** оставьте пустым.

   * В поле **Время на выполнение** введите время реакции, например, `15m`.

1. Настройте таймер:
   * **Старт** — Назначен исполнитель.

   * **Стоп** — Задача переведена в статус <q>В работе</q>.

   * Блок **Пауза** оставьте пустым.

1. Настройте оповещение о срыве срока:
   * **Способ** — Письмо.

   * **Получатели** — ваш логин в Tracker.

## Просмотреть правила {#section_nbs_r2g_vdb}

Чтобы просмотреть список правил SLA, действующих в очереди:

1. {% include [go to settings](../../_includes/tracker/transition-page.md) %}

1. В правом верхнем углу нажмите ![](../../_assets/tracker/svg/queue-settings.svg) **Настройки очереди**. 

1. Перейдите на вкладку **SLA**.

Чтобы просмотреть параметры правила, нажмите на его название:

* **График работы**

    График работы — это время, когда правило активно. В нерабочие часы отсчет времени идти не будет.

* **Сроки выполнения задач**

    Правило может применяться не только ко всем задачам очереди, но и к отдельным группам задач. Для каждой группы можно установить свои сроки выполнения:

    * **Время до предупреждения** (необязательный параметр) — по истечении этого срока {{ tracker-name }} отправит предупреждение, что время обработки задачи на исходе.

    * **Время на выполнение** — предельное время на обработку задачи. По истечении этого времени {{ tracker-name }} отправит уведомление о срыве срока.

* **Настройки таймера**

    События, при которых таймер будет запускаться, приостанавливаться или останавливаться:

    * **Старт** — таймер запустится, если выполнено любое из перечисленных условий. Если таймер стоял на паузе, отсчет времени будет возобновлен.

    * **Пауза** — таймер приостановится, если выполнено любое из перечисленных условий. Таймер запустится, когда будет выполнено условие из списка **Старт**.

        {% note info %}

        Если в качестве условия для паузы выбрано <q>Пока задача находится в статусе</q>, таймер запустится, как только задача будет переведена в любой другой статус.

        {% endnote %}

    * **Стоп** — таймер остановится, если выполнено любое из перечисленных условий.

* **Оповещения**

    Как и кому {{ tracker-name }} сообщает о нарушении сроков.

## Изменить правило {#edit-rule}

Чтобы изменить правило SLA:

1. {% include [go to settings](../../_includes/tracker/transition-page.md) %}

1. В правом верхнем углу нажмите ![](../../_assets/tracker/svg/queue-settings.svg) **Настройки очереди**. 

1. Перейдите на вкладку **SLA**.

1. Выберите правило.

1. Нажмите кнопку **Редактировать**.

1. Внесите изменения и нажмите кнопку **Сохранить**.
