# Настроить доступ к очереди

{% note warning %}

По умолчанию настраивать очередь может только ее владелец.

{% endnote %}

## Настроить доступ к очереди {#set-access}

{% if audience == "external" %}По умолчанию доступ пользователей к задачам очереди не ограничен.{% else %}По умолчанию доступ к задачам очереди имеют все сотрудники Яндекса за исключением [Команды поддержки бизнеса и Внешних консультантов](#outsource_access).{% endif %}

В случае, если вы ограничите доступ к очереди, доступ к задачам по умолчанию будут иметь пользователи, указанные в полях **Автор**, **Исполнитель**, **Наблюдатели**, **Доступ**.

{% if audience == "external" %}

{% note warning %}

Для создания и редактирования задач, кроме доступа к очереди, пользователю требуется [полный доступ](../access.md) к {{ tracker-name }}. Подробнее читайте в разделе [{#T}](../role-model.md).

{% endnote %}

{% endif %}

Вы можете изменить настройки доступа для отдельных пользователей, групп или ролей:

1. Откройте [страницу очереди](../user/queue.md).

1. Слева от имени очереди выберите ![](../../_assets/tracker/icon-settings.png) → **Администрирование**.

1. Перейдите на вкладку **Доступ** → **Все задачи**.

1. Добавьте пользователей и группы, для которых нужно настроить доступ:
    - **Люди и роботы** — индивидуальные настройки для отдельных пользователей. Чтобы добавить пользователя в эту категорию, введите его логин или имя в строку поиска в верхней части таблицы.
    - **Группы** — {% if audience == "external" %}настройки для всех сотрудников.{% else %}настройки для отделов и команд. Чтобы добавить новый отдел, введите его название в строку поиска в верхней части таблицы.{% endif %}
        
{% if audience == "internal" %}

        {% note tip %}

        Чтобы добавить всех сотрудников Яндекса, укажите группу `Яндекс`.

        {% endnote %}

{% endif %}

    - **Роли** — настройки для пользователей, обладающих определенными ролями по отношению к задачам очереди:
        - **Доступ** — пользователи, перечисленные в поле **Доступ** задачи;
        - **Наблюдатель** — пользователи, подписавшиеся на задачу;
        - **Автор** — автор задачи;
        - **Исполнитель** — исполнитель задачи;
        - **Владелец очереди**;
        - **Участник команды очереди** — пользователи, добавленные в [команду очереди](queue-team.md). По умолчанию этой роли нет в списке, ее можно добавить с помощью строки поиска вверху таблицы.

1. Задайте права на действия с очередью:
    - **Создание задач** — пользователи могут создавать новые задачи в этой очереди. 
    - **Просмотр задач** — пользователи могут комментировать задачу и менять ее статус, но не имеют возможности менять значения полей в задаче.

        {% note info %}

        Для [изменения статуса одновременно у нескольких задач](bulk-change.md#section_kkf_tjr_fgb) прав на просмотр недостаточно. Необходимо иметь права на редактирование задач.

        {% endnote %}

    - **Редактирование задач** — пользователи могут комментировать задачу, менять ее статус и редактировать поля задачи (например, изменять дедлайн, добавлять наблюдателей и так далее). 
    - **Настройки очереди** — пользователи могут изменять [параметры очереди](edit-queue-general.md). 

1. Нажмите кнопку **Сохранить**.


Если пользователь одновременно обладает несколькими ролями, то ему доступны права на все действия, которые разрешены настройками этих ролей.

> **Пример**
>
> ![](../../_assets/tracker/access-roles.png)
>
> Если пользователь является одновременно автором и исполнителем задачи, у него будут права на **Создание задач**, **Чтение задач** и **Редактирование задач**.

## Добавить сообщение для пользователей, у которых нет доступа {#deny-message}

По умолчанию при попытке открыть задачу очереди, к которой нет доступа, пользователи видят сообщение <q>Обратитесь к владельцу очереди</q> и имя владельца.

Вы можете изменить это сообщение. Например, указать другого пользователя с правами администратора очереди, к которому можно обратиться для получения доступа. Или написать, по какой причине доступ к очереди закрыт.

Чтобы изменить сообщение для пользователей, у которых нет доступа к очереди:

1. Откройте [страницу очереди](../user/queue.md).

1. Слева от имени очереди выберите ![](../../_assets/tracker/icon-settings.png) → **Администрирование**.

1. Перейдите на вкладку **Доступ** → **Все задачи**.

1. В блоке **Сообщение для пользователей без доступа** нажмите кнопку **Редактировать**.

1. Напишите сообщение и нажмите кнопку **Сохранить**. 
  
   {% if audience == "internal" %}
   Чтобы добавить в сообщение ссылку на профиль сотрудника, укажите его логин с символом `@`, например `login@`.
   {% endif %}

## Настроить доступ к задачам с компонентом {#section_tbh_cs5_qbb}

Вы можете настраивать доступ к различным [компонентам](components.md) очереди. Это позволит задавать разные настройки для задач очереди без компонентов и для задач с компонентами. 

{% note warning %}

Правила доступа к компоненту имеют приоритет над правилами доступа к очереди.

{% endnote %}

Чтобы настроить доступ к задачам компонента:

1. Откройте [страницу очереди](../user/queue.md).

1. [Добавьте в очередь компоненты](components.md#section_zrt_szk_xz), с помощью которых вы будете разграничивать доступ к задачам.

1. Слева от имени очереди выберите ![](../../_assets/tracker/icon-settings.png) → **Администрирование**.

1. Перейдите на вкладку **Доступ** → **Задачи с компонентом**.

1. Добавьте пользователей и группы, для которых нужно настроить доступ:
    - **Люди и роботы** — индивидуальные настройки для отдельных пользователей. Чтобы добавить пользователя в эту категорию, введите его логин или имя в строку поиска в верхней части таблицы.

    - **Группы** — {% if audience == "external" %}настройки для всех сотрудников.{% else %}настройки для отделов и команд. Чтобы добавить новый отдел, введите его название в строку поиска в верхней части таблицы.{% endif %}

		{% if audience == "internal" %}
        {% note tip %}

        Чтобы добавить всех сотрудников Яндекса, укажите группу `Яндекс`.

        {% endnote %}
		{% endif %}

    - **Роли** — настройки для пользователей, обладающих определенными ролями по отношению к задачам очереди:
        - **Доступ** — пользователи, перечисленные в поле **Доступ** задачи;
        - **Наблюдатель** — пользователи, подписавшиеся на задачу;
        - **Автор** — автор задачи;
        - **Исполнитель** — исполнитель задачи;
        - **Владелец очереди**;
        - **Участник команды очереди** — пользователи, добавленные в [команду очереди](queue-team.md). По умолчанию этой роли нет в списке, ее можно добавить с помощью строки поиска вверху таблицы.

1. Нажмите кнопку **Сохранить**.

	{% note tip %}

	Если нужно отключить специальные права доступа для компонента, нажмите кнопку **Очистить**.

	{% endnote %}

1. Чтобы настроить для отдельной задачи доступ, который отличается от настроек доступа всей очереди, добавьте в задачу компонент.

Если задача относится к нескольким компонентам, доступ к задаче имеют все пользователи, которым разрешен доступ хотя бы к одному компоненту.

> **Пример**
>
> ![](../../_assets/tracker/access-components.png)
>
> Если задача относится к компонентам **Hardware** и **Software**, доступ к ней будут иметь как пользователи из группы <q>Разработка продуктов</q>, так и пользователи из группы <q>Разработка приложений</q>.

{% if audience == "internal" %}

## Настроить доступ для внештатных сотрудников {#outsource_access}

По умолчанию [Команда поддержки бизнеса](https://staff.yandex-team.ru/departments/outstaff) и [Внешние консультанты](https://staff.yandex-team.ru/departments/ext) не имеют доступа к задачам очереди. Их невозможно призвать в комментарии или добавить в поля **Автор**, **Исполнитель**, **Наблюдатели**, **Доступ**.

#### Настроить доступ

Чтобы дать доступ к очереди отдельным внештатным сотрудникам или группам:

1. В настройках доступа к очереди включите опцию **Разрешить доступ внешним сотрудникам**.

1. Добавьте сотрудников или группы в [список **Права доступа**](#set-access).

Если вы включите опцию **Разрешить доступ внешним сотрудникам**, но не добавите конкретных пользователей в список **Права доступа**, любых внештатных сотрудников можно будет призывать в комментарии и добавлять в поля **Автор**, **Исполнитель**, **Наблюдатели**, **Доступ**.

#### Разрешить призывать сотрудников Яндекса 

Внештатные сотрудники с доступом к очереди или задаче могут призывать в комментарии сотрудников из штата Яндекса, только если имеют доступ к анкетам сотрудников на Стаффе.

Чтобы разрешить внештатным сотрудникам призывать сотрудников вашего подразделения, [запросите для внештатных сотрудников роль на Стаффе](https://idm.yandex-team.ru/system/staff/roles#rf=1,rf-role=dOY3rEJ0%23staff/department_roles/EXT_WITH_STAFF_PROFILE_ACCESS(fields:()),f-status=all,f-role=staff,sort-by=-updated,rf-expanded=dOY3rEJ0). Подробнее о доступе к Стаффу читайте [на Вики](https://wiki.yandex-team.ru/staff/vodstvo/zapros-dostupa-na-staff-dlja-vneshnix-sotrudnikov/).

#### Как узнать, у кого есть доступ

Предупреждение **Доступ: не только Яндекс** означает, что доступ к очереди или задаче имеют не только сотрудники Яндекса, но и внештатные сотрудники.

Как узнать, у кого есть доступ:

- Если у очереди доступ **Яндекс**, а у отдельной задачи **Доступ: не только Яндекс**, значит внештатные сотрудники есть в наблюдателях, авторах или исполнителях задачи.

- Если вы не владелец очереди, но считаете, что она не должна быть видна внештатным сотрудникам, напишите на рассылку `tools@`.

- Если вы владелец очереди, вы можете увидеть внештатных сотрудников в [настройках доступа очереди](#set-access).

{% endif %}


