# Интеграция с {{ compute-name }}

Вы можете назначать доменные имена виртуальным машинам сразу при их [создании](../../compute/operations/index.md) в сервисе {{ compute-name }}:

* Всем ВМ присваивается [внутренний FQDN](../../compute/concepts/network.md#hostname), с использованием имени ВМ или параметра `hostname`.
* В настройках сетевого интерфейса для ВМ можно создать дополнительные DNS-записи, которые будут размещены в ваших собственных внутренних зонах. Если вы явно не укажете зону для дополнительной записи, она будет выбрана автоматически. Подробнее см. ниже.

Для публичного IP-адреса ВМ интеграция с {{ compute-name }} сейчас не поддерживается. Вы можете добавить [A-запись](resource-record.md#a) в [публичную зону](dns-zone.md#public-zones) вручную после создания ВМ. Подробнее о том, [как создать запись](../operations/resource-record-create.md).

## Автоматический выбор зоны {#zone-selection}

Если зона для дополнительной DNS-записи ВМ не указана явно, она будет выбрана автоматически. Для этого необходимо указать FQDN, который должен заканчиваться точкой. В консоли управления точка добавляется автоматически.

DNS-запись будет добавлена в одну из [внутренних зон](dns-zone.md#private-zones), которые доступны из виртуальной сети ВМ и являются суффиксами FQDN. Из подходящих по суффиксу выбирается наиболее конкретная внутренняя зона. Если подходящих зон с одним и тем же доменным именем несколько, будет выбрана одна из них.

> Например, в сетевых настройках задали FQDN `hello.world.private.` и из виртуальной сети доступны четыре внутренние DNS-зоны:
>
> * сервисная `.`;
> * пользовательские: `staging.`, `private.` и `world.private.`
>
> Зона `staging.` исключается из рассмотрения, потому что доменное имя `staging.` не является суффиксом FQDN `hello.world.private.`;
>
> Среди подходящих по суффиксу зон `.`, `private.` и `world.private.` выбирается `world.private.`, как наиболее конкретная зона.

## Работа {{ dns-name}} с группами ВМ

При назначении FQDN ВМ из групп, имя, указанное в [шаблоне ВМ](../../compute/concepts/instance-groups/instance-template.md), будет использоваться для всех ВМ из группы — будет создан набор записей с одинаковыми именами, но разными IP-адресами в значениях. 

Вы можете использовать [переменные](../../compute/concepts/instance-groups/variables-in-the-template.md) из шаблонов ВМ при создании записей. Например, если указать имя записи `web_server_{instance.index}`, можно создать записи с уникальными именами ВМ из группы, а с помощью имени `web_server_{instance.zone_id}` — записи, объединяющие все ВМ в одной зоне доступности.

#### См. также {#see-also}

* [Создать виртуальную машину](../../compute/operations/index.md)
