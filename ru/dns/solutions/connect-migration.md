# Миграция DNS-зон из Яндекс.Коннект в {{ dns-full-name }}

Если ваш домен делегирован Яндекс.Коннект, а ваши сервисы находятся в {{ yandex-cloud }}, то вы можете передать управление доменом на DNS-серверы {{ yandex-cloud }} и перенести DNS-зоны в сервис {{ dns-full-name }} для большего удобства. {{ dns-full-name }} тесно интегрирован с другими сервисами {{ yandex-cloud }} ([например, с {{ compute-full-name }}](../concepts/compute-integration.md)).

Чтобы мигрировать DNS-зоны из Яндекс.Коннект в {{ dns-full-name }}:
1. [Делегируйте домен](#domain-delegate).
1. [Перенесите записи](#yaconnect-records-move).

## Делегирование домена {#domain-delegate}

Перед переводом DNS-зон под управление сервиса {{ dns-full-name }} необходимо делегировать ваш домен на серверы {{ yandex-cloud }}. Для этого укажите адреса серверов имен {{ yandex-cloud }} в `NS`-записях вашего регистратора:

* `ns1.yandexcloud.net.`
* `ns2.yandexcloud.net.`

## Перенос записей {#yaconnect-records-move}

Перенести DNS-записи домена из Яндекс.Коннект в {{ dns-full-name }} можно только вручную.

Перед переносом [создайте публичную зону DNS](../operations/zone-create-public.md) для DNS-записей вашего домена.

{% list tabs %}

- A, AAAA, CNAME, NS

  1. [Создайте новую запись](../operations/resource-record-create.md) соответствующего типа.
  1. Укажите в поле **Значение** значение переносимой записи Яндекс.Коннект без изменений формата.
  1. Укажите в поле **TTL**  значение параметра TTL из Яндекс.Коннект.

  Например, ресурсная запись Яндекс.Коннект:
    - **Тип записи** — `CNAME`, 
    - **Значение записи** — `domain.mail.yandex.net.`, 
    - **TTL** — `600`

  соответствует ресурсной записи {{ dns-name }}:
    - **Тип** — `CNAME`,
    - **Значение** — `domain.mail.yandex.net.`,
    - **TTL** — `600`.

- MX

  1. [Создайте новую MX-запись](../operations/resource-record-create.md).
  1. Укажите в поле **Значение** параметры переносимой MX-записи Яндекс.Коннект в формате `<Приоритет> <Значение записи>`.
  1. Укажите в поле **TTL**  значение параметра TTL из Яндекс.Коннект.

  Например, ресурсная запись Яндекс.Коннект:
    - **Тип записи** — `MX`,
    - **Значение записи** — `mx.yandex.net.`,
    - **Приоритет** — `10`,
    - **TTL** — `21600`

  соответствует ресурсной записи {{ dns-name }}:
    - **Тип** — `MX`,
    - **Значение** — `10 mx.yandex.net.`,
    - **TTL** — `21600`.

- TXT
  
  1. [Создайте новую TXT-запись](../operations/resource-record-create.md).
  1. Укажите в поле **Значение** параметры переносимой TXT-записи Яндекс.Коннект в формате `"<значение записи>"`.

      {% note warning %}

      Сервис {{ dns-name }} использует формат [MASTER FILES](https://www.ietf.org/rfc/rfc1035.html#section-5) при разборе TXT-записей. Согласно спецификации этого формата с символа `;` начинается комментарий, т. е. все содержимое после него игнорируется. Чтобы использовать символ `;` и пробелы в значении записи, заключите ее в двойные кавычки `""`.

      {% endnote %}

  1. Укажите в поле **TTL**  значение параметра TTL из Яндекс.Коннект.

  Например, ресурсная запись Яндекс.Коннект:
    - **Тип записи** — `TXT`,
    - **Значение записи** — `v=DMARC1; p=none; sp=quarantine; pct=100; rua=mailto: dmarcreports@example.com;`,
    - **TTL** — `26000`

  соответствует ресурсной записи {{ dns-name }}:
    - **Тип** — `TXT`,
    - **Значение** — `"v=DMARC1; p=none; sp=quarantine; pct=100; rua=mailto: dmarcreports@example.com;"`,
    - **TTL** — `26000`.

- SRV

  1. Скопируйте из значения SRV-записи Яндекс.Коннект все символы после `SRV`. Например, из значения `86400 IN SRV 0 5 5060 _sip._tcp.example.com.` скопируйте только строку `0 5 5060 _sip._tcp.example.com.`.
  1. [Создайте новую SRV-запись](../operations/resource-record-create.md).
  1. Вставьте в поле **Значение** скопированную строку.
  1. Укажите в поле **TTL**  значение параметра TTL из Яндекс.Коннект.

  Например, ресурсная запись Яндекс.Коннект:
    - **Тип записи** — `SRV`,
    - **Значение записи** — `86400 IN SRV 0 5 5060 _sip._tcp.example.com.`,
    - **Приоритет** — `0`,
    - **TTL** — `86400`

  соответствует ресурсной записи в {{ dns-name }}:
    - **Тип** — `SRV`,
    - **Значение** — `0 5 5060 _sip._tcp.example.com.`,
    - **TTL** — `86400`.

{% endlist %}

Подробнее о типах ресурсных записей, поддерживаемых сервисом, см. в разделе [{#T}](../concepts/resource-record.md).
