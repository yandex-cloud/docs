1. Если у вас еще нет пары SSH-ключей, [создайте их](../../compute/operations/vm-connect/ssh.md#creating-ssh-keys).
1. Создайте агент:

    {% list tabs %}

    - Консоль управления

      1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором будет создан агент.
      1. В списке сервисов выберите **{{ load-testing-name }}**.
      1. На вкладке **Агенты** нажмите кнопку **Создать агент**.
      1. Укажите имя агента, например `agent-008`.
      1. Укажите ту же зону доступности, в которой находится цель тестирования.
      1. В блоке **Агент**:
          * Выберите подходящий тип агента. Подробнее см. в разделе [Производительность агентов](../../load-testing/concepts/agent.md#benchmark).
          * Укажите подсеть, в которой находится цель тестирования. В подсети должен быть создан и настроен [NAT-шлюз](../../vpc/operations/create-nat-gateway.md).
          * Если вам доступны группы безопасности, выберите заранее настроенную группу безопасности агента.
      1. В блоке **Доступ** укажите данные для доступа к агенту:
          * Выберите сервисный аккаунт `sa-loadtest`.
          * В поле **Логин** введите имя пользователя.
              
              {% note alert %}
              
              Не используйте логин `root` или другие имена, зарезервированные операционной системой. Для выполнения операций, требующих прав суперпользователя, используйте команду `sudo`.
              
              {% endnote %}
              
          * В поле **SSH-ключ** вставьте содержимое файла [открытого ключа](../../compute/operations/vm-connect/ssh.md#creating-ssh-keys).
      1. Нажмите **Создать**.
      1. Дождитесь завершения процесса создания виртуальной машины. Статус агента должен смениться на `Ready for test`.

          {% note info %}
              
          Процесс создания агента может остановиться на статусе `Initializing connection`, если не выполнены условия:
          * у агента есть [доступ](../../load-testing/operations/security-groups-agent.md) к `loadtesting.{{ api-host }}:443` и публичный IP-адрес;
          * в целевой подсети [настроен](../../vpc/operations/create-nat-gateway.md) NAT-шлюз;
          * у сервисного аккаунта, который назначен агенту, есть необходимые [роли](../../load-testing/operations/create-agent.md#infrastructure-prepare).   
                                  
          {% endnote %}

    {% endlist %}

1. Привяжите публичный IP-адрес к агенту для доступа по протоколу SSH:

    {% list tabs %}

    - Консоль управления

      1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором размещен агент.
      1. Выберите сервис **{{ compute-name }}**.
      1. Выберите виртуальную машину с именем `agent-008`.
      1. В блоке **Сетевой интерфейс** в правом верхнем углу нажмите ![image](../../_assets/horizontal-ellipsis.svg) и выберите **Добавить публичный IP-адрес**.
      1. В открывшемся окне:
          * В поле **Публичный адрес** выберите получение адреса **Автоматически**.
          * Нажмите **Добавить**.

    {% endlist %}