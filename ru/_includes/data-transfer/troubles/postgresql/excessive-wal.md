### Чрезмерное увеличение журнала WAL {#excessive-wal}

В базе данных источника {{ PG }} размер журнала Write-Ahead Log (WAL) достигает значения десятков гигабайт из-за долгих запросов (выполняющихся более 5 минут). Такие запросы блокируют журнал WAL и не дают ему продвинуться вперед и очиститься.

Увеличение размера журнала WAL можно заметить по:

* увеличению места, занимаемого базой данных источника;
* возрастанию графика **Read buffer size** в [мониторинге](../../../../data-transfer/operations/monitoring.md) {{ data-transfer-name }}.

**Решение:**

1. Найдите сессии запросов, выполняющиеся дольше 5 минут:

    ```sql
    SELECT now()-xact_start, query, pid FROM pg_stat_activity
    WHERE (now()-xact_start)>'5minute'::interval AND STATE != 'idle'
    ORDER BY 1 DESC;
    ```

1. Завершите найденные сессии. Старайтесь не допускать появления таких запросов.
