{% list tabs %}

- Консоль управления

    Чтобы создать триггер:
        
    1. Откройте раздел **{{ sf-name }}** в каталоге, где требуется создать триггер для {{ cloud-logs-name }}.
    1. Перейдите во вкладку **Триггеры**.
    1. Нажмите кнопку **Создать триггер**.
    1. В блоке **Базовые параметры**:
        * Введите имя и описание триггера.
        * В поле **Тип** выберите **Cloud Logs**.
    1. В блоке **Настройки Cloud Logs**:
        * В поле **Источники логов** выберите источники логов. Лог-группы будут определены автоматически.
        * В поле **Время ожидания** выберите максимальное время накопления группы сообщений.
        * В поле **Размер группы сообщений** выберите максимальный размер группы сообщений.
    1. В блоке **Настройки повторных запросов**:
        * В поле **Интервал** укажите 5 секунд.
        * В поле **Количество попыток** укажите 5.
    1. В блоке **Настройки функции**:
        * Выберите функцию, которую будет вызывать триггер.

          {% note alert %}

          Выбор функции, которая служит источником логов для триггера, может привести к экспоненциальному росту вызовов.
          
          {% endnote %}

        * Укажите [тег версии функции](../../functions/concepts/function.md#tag).
        * Укажите сервисный аккаунт, от имени которого будет вызываться функция.    
    1. Нажмите кнопку **Создать триггер**.
    
    Триггер будет создан и отобразится в таблице в разделе **Триггеры**.

- CLI

    {% include [cli-install](../../_includes/cli-install.md) %}
    
    {% include [default-catalogue](../../_includes/default-catalogue.md) %}

    Создайте триггер: 

    - `--name` — имя триггера.
    - `--log-groups` — список уникальных идентификаторов [лог-групп](../../functions/concepts/log-group.md).
    - `--batch-size` — максимальный размер группы сообщений.
    - `--batch-cutoff` — максимальное время накопления группы сообщений.
    - `--invoke-function-id` — уникальный идентификатор функции.
    - `--invoke-function-service-account-id` — сервисный аккаунт с правами на вызов функции.

    Чтобы создать триггер для {{ cloud-logs-name }}, выполните команду: 

    ```    
    $ yc serverless trigger create cloud-logs \
        --name <имя триггера> \
        --log-groups <список идентификаторов лог-группы через запятую> \
        --batch-size <максимальный размер группы сообщений> \
        --batch-cutoff <максимальное время накопления группы сообщений> \
        --invoke-function-id <идентификатор функции> \
        --invoke-function-service-account-id <идентификатор сервисного аккаунта>
    ```
    Результат:
    ```
    id: dd0c6gsr************
    folder_id: aoeuooa5************
    created_at: "2020-08-13T10:46:55.947Z"
    name: log-trigger
    rule:
      cloud_logs:
        log_group_id:
        - eolhui6r************
        - eol7tktt************
        batch_settings:
          size: "5"
          cutoff: 10s
        invoke_function:
          function_id: b091v4rl************
          function_tag: $latest
          service_account_id: bfbm2ib6************
          retry_settings:
            retry_attempts: "1"
            interval: 10s
    status: ACTIVE
    ```
    
{% endlist %}