1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором нужно создать группу виртуальных машин.
1. Выберите сервис **{{compute-name}}**.
1. На странице **Виртуальные машины** перейдите на вкладку **Группы виртуальных машин**.
1. Нажмите кнопку **Создать группу**.
1. В блоке **Базовые параметры**:
   * Введите **Имя** и **Описание** группы ВМ. Требования к имени:

     {% include [name-format](../name-format.md) %}

     {% include [name-fqdn](../compute/name-fqdn.md) %}

   * Выберите [Сервисный аккаунт](../../iam/concepts/users/service-accounts.md) из списка или создайте новый. Чтобы иметь возможность создавать, обновлять и удалять ВМ в группе, назначьте сервисному аккаунту роль `editor`. По умолчанию все операции в {{ ig-name }} выполняются от имени сервисного аккаунта.
1. В блоке **Распределение** выберите нужные **Зоны доступности**. ВМ группы могут находиться в [разных зонах и регионах доступности](../../overview/concepts/geo-scope.md).
1. В блоке **Шаблон виртуальной машины** нажмите кнопку **Задать**, чтобы задать конфигурацию базовой ВМ:
   * В блоке **Базовые параметры** введите **Описание** шаблона.
   * В блоке **Образы из Cloud Marketplace** выберите публичный [образ](../../compute/operations/images-with-pre-installed-software/get-list.md).
   * В блоке **Диски**:
     * Выберите [Тип диска](../../compute/concepts/disk.md#disks_types).
     * Укажите **Размер** диска.
     * Чтобы добавить дополнительные диски, нажмите **Добавить диск**.
   * В блоке **Вычислительные ресурсы**:
     * Выберите [Платформу](../../compute/concepts/vm-platforms.md).
     * Укажите необходимое количество **vCPU**, [Гарантированную долю vCPU](../../compute/concepts/performance-levels.md) и объем **RAM**.
     * {% include [include](specify-preemptible-vm.md) %}
   * В блоке **Сетевые настройки**:
     * Выберите [облачную сеть](../../vpc/concepts/network.md#network) из списка или укажите ее идентификатор. Если сети нет, нажмите кнопку **Создать новую сеть** и создайте ее:
       * В открывшемся окне укажите имя новой сети и выберите, к какой **Подсети в зоне** необходимо подключить ВМ. У каждой сети должна быть как минимум одна [подсеть](../../vpc/concepts/network.md#subnet) (если подсети нет, [создайте ее](../../vpc/operations/subnet-create.md)).
       * В поле **Публичный адрес** выберите способ назначения адреса:
         * **Автоматически** — чтобы назначить случайный IP-адрес из пула адресов {{ yandex-cloud }}.
         * **Без адреса** — чтобы не назначать публичный IP-адрес.
   * В блоке **Доступ** укажите данные для доступа на ВМ:
     * Укажите **Сервисный аккаунт**, который следует привязать к ВМ.
     * В поле **Логин** введите имя пользователя.
     * В поле **SSH-ключ** вставьте содержимое файла [открытого ключа](../../compute/operations/vm-connect/ssh.md#creating-ssh-keys).
     * При необходимости **Разрешите доступ к серийной консоли**.
   * Нажмите кнопку **Сохранить**.
1. В блоке **В процессе создания и обновления разрешено**:
   * В поле **Добавлять выше целевого значения** укажите, на какое количество ВМ можно превышать размер группы.
   * В поле **Уменьшать относительно целевого значения** укажите, на какое количество ВМ можно уменьшать размер группы.
   * В поле **Одновременно создавать** укажите, сколько ВМ можно одновременно создавать.
   * В поле **Одновременно останавливать** укажите, сколько ВМ можно одновременно останавливать.
   * В поле **Останавливать машины по стратегии** укажите одну из [стратегий](../../compute/concepts/instance-groups/policies/deploy-policy.md#strategy):
     * **Принудительная** — {{ ig-name }} самостоятельно выбирает, какие ВМ остановить при обновлении или уменьшении группы.
     * **Деликатная** — {{ ig-name }} ожидает, когда ВМ остановятся самостоятельно или будут остановлены пользователем.
1. В блоке **Масштабирование**:
   * Выберите **Автоматический** [тип масштабирования](../../compute/concepts/instance-groups/scale.md).
   * Укажите:
     * **Минимальное количество ВМ в зоне**.
     * **Максимальный размер группы**.
     * **Промежуток измерения нагрузки**, за который следует усреднять замеры нагрузки для каждой ВМ в группе.
     * **Время на разогрев ВМ**, в минутах — время прогрева ВМ в группе.
     * **Период стабилизации** — период, в течение которого требуемое количество ВМ в группе не может быть снижено.
     * **Начальный размер группы**.
1. В блоке **Метрики** укажите:
   * Тип **Метрики**:
     * [CPU](../../compute/concepts/instance-groups/scale.md#cpu-utilization) — укажите средний уровень нагрузки CPU, который должен поддерживать {{ ig-name }}.
     * [Пользовательская](../../compute/concepts/instance-groups/scale.md#custom-metrics) — укажите имя пользовательской метрики и целевое значение, которое должен поддерживать {{ ig-name }}.
1. При необходимости активируйте **Проверку состояний** для получения сведений о состоянии ВМ и их автоматического восстановления в случае сбоя.
   * В поле **Тип** выберите протокол проверок состояния: **HTTP** или **TCP**.
   * В поле **Порт** укажите номер порта от 1 до 32767, на который {{ ig-name }} будет отправлять запросы проверки.
   * В поле **Путь** (для типа HTTP) укажите URL‐путь запроса, на который {{ ig-name }} будет отправлять запросы проверки для HTTP.
   * В поле **Время ожидания, с** укажите время ожидания ответа от 1 до 60 секунд.
   * В поле **Интервал, c** укажите интервал между повторными проверками от 1 до 60 секунд. Интервал должен быть больше времени ожидания минимум на 1 секунду.
   * В поле **Порог работоспособности** укажите количество успешных проверок, после которого ВМ будет считаться работающей нормально.
   * В поле **Порог неработоспособности** укажите количество неудачных проверок, после которого ВМ будет считаться неработающей.
1. Нажмите кнопку **Создать**.
