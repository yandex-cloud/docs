1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором нужно создать группу виртуальных машин.
1. Выберите сервис **{{compute-name}}**.
1. На панели слева выберите ![image](../../_assets/compute/vm-group-pic.svg) **Группы виртуальных машин**.
1. Нажмите кнопку **Создать группу**.
1. В блоке **Базовые параметры**:
   * Введите **Имя** и **Описание** группы ВМ. Требования к имени:

     {% include [name-format](../name-format.md) %}

     {% include [name-fqdn](../compute/name-fqdn.md) %}

   * Выберите [сервисный аккаунт](../../iam/concepts/users/service-accounts.md) из списка или создайте новый. Чтобы иметь возможность создавать, обновлять и удалять ВМ в группе, назначьте сервисному аккаунту роль `editor`. По умолчанию все операции в {{ ig-name }} выполняются от имени сервисного аккаунта.
   * Включите опцию **Защита от удаления** при необходимости. Пока опция включена, невозможно удалить группу.
1. В блоке **Распределение** выберите нужные **Зоны доступности**. ВМ группы могут находиться в [разных зонах и регионах доступности](../../overview/concepts/geo-scope.md).
1. В блоке **Шаблон виртуальной машины** нажмите кнопку **Задать**, чтобы задать конфигурацию базовой ВМ:
   * В блоке **Базовые параметры** введите **Описание** шаблона.
   * В блоке **Выбор образа/загрузочного диска** выберите, какую систему развернуть на загрузочном диске ВМ.

   * В блоке **Диски**:
     * Выберите [тип диска](../../compute/concepts/disk.md#disks_types).
     * Укажите **Размер** диска.
     * Чтобы добавить дополнительные диски, нажмите **Добавить диск**.
   * В блоке **Вычислительные ресурсы**:
     * Выберите [платформу](../../compute/concepts/vm-platforms.md).
     * Укажите необходимое количество **vCPU**, [гарантированную долю vCPU](../../compute/concepts/performance-levels.md) и объем **RAM**.
     * {% include [include](specify-preemptible-vm.md) %}
   * В блоке **Сетевые настройки**:

     {% include [network-settings-group](../../_includes/compute/network-settings-group.md) %}

   * В блоке **Доступ** укажите данные для доступа на ВМ:
     * Укажите **Сервисный аккаунт**, который следует привязать к ВМ.
     * Если выбран образ на основе Linux, заполните поля **Логин** и **SSH-ключ**. В качестве ключа укажите содержимое файла [открытого ключа](../../compute/operations/vm-connect/ssh.md#creating-ssh-keys).
     * Если выбран образ на основе Windows, укажите **Пароль** пользователя `Administrator`.
     * При необходимости **Разрешите доступ к серийной консоли**.
   * Нажмите кнопку **Сохранить**.
1. В блоке **В процессе создания и обновления разрешено**:
   * В поле **Добавлять выше целевого значения** укажите, на какое количество ВМ можно превышать размер группы.
   * В поле **Уменьшать относительно целевого значения** укажите, на какое количество ВМ можно уменьшать размер группы.
   * В поле **Одновременно создавать** укажите, сколько ВМ можно одновременно создавать.
   * В поле **Время запуска** укажите срок, после которого ВМ начнет получать нагрузку.
   * В поле **Одновременно останавливать** укажите, сколько ВМ можно одновременно останавливать.
   * В поле **Останавливать машины по стратегии** укажите одну из [стратегий](../../compute/concepts/instance-groups/policies/deploy-policy.md#strategy):
     * **Принудительная** — {{ ig-name }} самостоятельно выбирает, какие ВМ остановить при обновлении или уменьшении группы.
     * **Деликатная** — {{ ig-name }} ожидает, когда ВМ остановятся самостоятельно или будут остановлены пользователем.
1. В блоке **Масштабирование**:
   * Выберите **Автоматический** [тип масштабирования](../../compute/concepts/instance-groups/scale.md).
   * Укажите:
     * **Тип автомасштабирования** — при **Зональном** автомасштабировании количество ВМ регулируется отдельно в каждой зоне доступности, указанной в настройках группы. При **Региональном** — во всей группе ВМ.
     * **Минимальное количество ВМ в зоне**.
     * **Максимальный размер группы**.
     * **Промежуток измерения нагрузки**, за который следует усреднять замеры нагрузки для каждой ВМ в группе.
     * **Время на разогрев ВМ** — время прогрева ВМ в группе.
     * **Период стабилизации** — период, в течение которого требуемое количество ВМ в группе не может быть снижено.
     * **Начальный размер группы**.
1. В блоке **Метрики** укажите:
   * Тип **Метрики**:
     * [CPU](../../compute/concepts/instance-groups/scale.md#cpu-utilization) — укажите средний уровень загрузки CPU, который должен поддерживать {{ ig-name }}.
     * [Пользовательская](../../compute/concepts/instance-groups/scale.md#custom-metrics) — укажите имя пользовательской метрики и целевое значение, которое должен поддерживать {{ ig-name }}.
1. При необходимости активируйте **Проверку состояний** для получения сведений о состоянии ВМ и их автоматического восстановления в случае сбоя.
   * В поле **Тип** выберите протокол проверок состояния: **HTTP** или **TCP**.
   * В поле **Путь** (для типа HTTP) укажите URL‐путь запроса, на который {{ ig-name }} будет отправлять запросы проверки для HTTP.
   * В поле **Порт** укажите номер порта от 1 до 32767, на который {{ ig-name }} будет отправлять запросы проверки.
   * В поле **Время ожидания, с** укажите время ожидания ответа от 1 до 60 секунд.
   * В поле **Интервал, с** укажите интервал между повторными проверками от 1 до 60 секунд. Интервал должен быть больше времени ожидания минимум на 1 секунду.
   * В поле **Порог работоспособности** укажите количество успешных проверок, после которого ВМ будет считаться работающей нормально.
   * В поле **Порог неработоспособности** укажите количество неудачных проверок, после которого ВМ будет считаться неработающей.
1. В блоке **Пользовательские переменные** при необходимости укажите пары **Ключ**-**Значение**.
1. Нажмите кнопку **Создать**.
