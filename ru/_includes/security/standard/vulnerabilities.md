# 6. Управление уязвимостями

#### Введение {#intro}

{{ yandex-cloud }} отвечает за управление уязвимостями и обновлениями безопасности в управляемых сервисах. Клиент отвечает за управление уязвимостями и обновлениями безопасности для всех остальных компонентов системы.

Пример разделения ответственности за управление уязвимостями и обновлениями безопасности см. в разделе **Requirement 5** [матрицы разделения ответственности PCI DSS](https://{{ s3-storage-host }}/yc-compliance/certificates/PCI_DSS_responsibility_matrix-new.pdf).

#### 6.1 Для образов контейнеров используется сканер уязвимостей {#vulnerability-scanning}

Рекомендуется использовать [сканер уязвимостей](../../../container-registry/concepts/vulnerability-scanner.md) в образах, встроенный в {{ container-registry-short-name }}.

{% list tabs %}

- Проверка в консоли управления

  1. В консоли управления выберите облако или каталог, в которых необходимо проверить образы.
  1. В списке сервисов выберите {{ container-registry-short-name }}.
  1. Перейдите в каждый образ и проверьте столбец **Cтатус сканирования**.

{% endlist %}
 
#### 6.2 Выполняется сканирование уязвимостей на уровне облачных IP-адресов {#ip-level}

Рекомендуем клиентам самостоятельно выполнять сканирование хостов на наличие уязвимостей. Облачные ресурсы поддерживают возможность установки собственных виртуальных образов сканеров уязвимостей либо программных агентов на хостах. Для сканирования существует множество как платных, так и бесплатных решений.

Сетевые сканеры выполняют сканирование хостов, доступных по сети. Как правило, в сетевых сканерах возможна настройка аутентификации. 
 
Примеры бесплатных сетевых сканеров:
- [Nmap](https://nmap.org/)
- [OpenVAS](https://www.openvas.org/)
- [OWASP ZAP](https://www.zaproxy.org/)

Пример бесплатного сканера, который работает в виде агента на хостах: [Wazuh](https://documentation.wazuh.com/current/user-manual/capabilities/vulnerability-detection/how_it_works.html). Wazuh может также использоваться в качестве системы обнаружения вторжений (host-based intrusion detection system — IDS).

Вы также можете воспользоваться [решением](/marketplace/products/scanfactory/scanfactory) из {{ marketplace-name }}.

{% list tabs %}

- Ручная проверка

  Выполните проверку вручную.

{% endlist %}

#### 6.3 Внешние сканирования безопасности выполняются по правилам облака {#external-security-scans}

Клиенты, размещающие в {{ yandex-cloud }} собственное программное обеспечение, могут проводить для размещенного ПО внешние сканирования безопасности, в том числе тесты на проникновение. Вы можете проводить сканирование самостоятельно либо с привлечением подрядчиков. Подробнее в разделе [Правила проведения внешних сканирований безопасности](../../../security/compliance/pentest.md).

{% list tabs %}

- Ручная проверка

  Выполните проверку вручную.

{% endlist %}

#### 6.4 Выстроен процесс обновлений безопасности {#security-updates}

Клиент должен самостоятельно выполнять обновления безопасности в своей зоне ответственности. Возможно применение различных автоматизированных инструментов для централизованных автоматических обновлений ОС и ПО.

{{ yandex-cloud }} публикует бюллетени безопасности, чтобы оповещать клиентов о новых найденных уязвимостях и обновлениях безопасности.
 
#### 6.5 Используется Web Application Firewall {#firewall}

Для снижения рисков, связанных с веб-атаками, рекомендуем использовать Web Application Firewall (WAF). Клиент может установить и обслуживать WAF самостоятельно либо воспользоваться услугой Managed WAF.

##### Самостоятельная установка WAF {#self-installation}

Образы [WAF](/marketplace?tab=software&search=waf) доступны в [{{ marketplace-full-name }}](/marketplace). Типы лицензий и другая необходимая информация доступны в описаниях продуктов.

[Решение: Отказоустойчивая эксплуатация PT Application Firewall на базе {{ yandex-cloud }}](https://github.com/yandex-cloud-examples/yc-webinar-pt-application-firewall-ha-operations)

Возможна также установка Wallarm WAF в [{{ managed-k8s-name }}](../../../managed-kubernetes/). См. [инструкцию](https://docs.wallarm.com/admin-en/installation-kubernetes-en/) в документации Wallarm. Тип лицензии — BYOL (лицензия, приобретенная у стороннего поставщика).

##### Managed WAF {#managed-waf}

Клиент получает облачный WAF как услугу у {{ yandex-cloud }}. Предоставляется доступ в личный кабинет, возможность просмотра статистики и управления. Для подключения услуги и получения детальной информации обратитесь к своему менеджеру, [отдел продаж](/#contact-form) или в [службу поддержки]({{link-console-support}}?section=contact). Услуга оказывается в партнерстве с Qrator.

[Решение: Установка уязвимого веб-приложения (DVWA) в {{ yandex-cloud }} с помощью {{ TF }} для тестирования Managed WAF](https://github.com/yandex-cloud/yc-solution-library-for-security/tree/master/vuln-mgmt/vulnerable-web-app-waf-test)

{% list tabs %}

- Проверка в консоли управления

  1. В консоли управления выберите облако или каталог, в которых необходимо проверить образы.
  1. В списке сервисов выберите {{ compute-short-name }}.
  1. Убедитесь, что среди ВМ есть хотя бы одна с образом WAF.

- Ручная проверка

  Обратитесь к вашему менеджеру со стороны облака либо к службе безопасности вашей компании, чтобы узнать, используется ли Managed WAF для вашей организации.

{% endlist %}
