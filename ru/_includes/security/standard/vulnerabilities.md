# 6. Управление уязвимостями


#### Введение {#intro}

{{ yandex-cloud }} отвечает за управление уязвимостями и обновлениями безопасности в управляемых сервисах. Клиент отвечает за управление уязвимостями и обновлениями безопасности для всех остальных компонентов системы.

Пример разделения ответственности за управление уязвимостями и обновлениями безопасности см. в разделе **Requirement 5** [матрицы разделения ответственности PCI DSS](https://{{ s3-storage-host }}/yc-compliance/certificates/PCI_DSS_responsibility_matrix-new.pdf).

#### 6.1 Для образов контейнеров используется сканер уязвимостей {#vulnerability-scanning}

Рекомендуется использовать [сканер уязвимостей](../../../container-registry/concepts/vulnerability-scanner.md) в образах, встроенный в {{ container-registry-short-name }}.

{% list tabs group=instructions %}

- Проверка в консоли управления {#console}

  1. В консоли управления выберите облако или каталог, в которых необходимо проверить образы.
  1. В списке сервисов выберите {{ container-registry-short-name }}.
  1. Перейдите в каждый образ и проверьте столбец **Статус сканирования**.

{% endlist %}
 
#### 6.2 Выполняется сканирование уязвимостей на уровне облачных IP-адресов {#ip-level}

Рекомендуем клиентам самостоятельно выполнять сканирование хостов на наличие уязвимостей. Облачные ресурсы поддерживают возможность установки собственных виртуальных образов сканеров уязвимостей либо программных агентов на хостах. Для сканирования существует множество как платных, так и бесплатных решений.

Сетевые сканеры выполняют сканирование хостов, доступных по сети. Как правило, в сетевых сканерах возможна настройка аутентификации. 

Примеры бесплатных сетевых сканеров:
- [Nmap](https://nmap.org/)
- [OpenVAS](https://www.openvas.org/)
- [OWASP ZAP](https://www.zaproxy.org/)

Пример бесплатного сканера, который работает в виде агента на хостах: [Wazuh](https://documentation.wazuh.com/current/user-manual/capabilities/vulnerability-detection/how_it_works.html). Wazuh может также использоваться в качестве системы обнаружения вторжений (host-based intrusion detection system — IDS).

Вы также можете воспользоваться [решением](/marketplace/products/scanfactory/scanfactory) из {{ marketplace-name }}.

{% list tabs group=instructions %}

- Ручная проверка {#manual}

  Выполните проверку вручную.

{% endlist %}

#### 6.3 Внешние сканирования безопасности выполняются по правилам облака {#external-security-scans}

Клиенты, размещающие в {{ yandex-cloud }} собственное программное обеспечение, могут проводить для размещенного ПО внешние сканирования безопасности, в том числе тесты на проникновение. Вы можете проводить сканирование самостоятельно либо с привлечением подрядчиков. Подробнее в разделе [Правила проведения внешних сканирований безопасности](../../../security/compliance/pentest.md).

{% list tabs group=instructions %}

- Ручная проверка {#manual}

  Выполните проверку вручную.

{% endlist %}

#### 6.4 Выстроен процесс обновлений безопасности {#security-updates}

Клиент должен самостоятельно выполнять обновления безопасности в своей зоне ответственности. Возможно применение различных автоматизированных инструментов для централизованных автоматических обновлений ОС и ПО.

{{ yandex-cloud }} публикует бюллетени безопасности, чтобы оповещать клиентов о новых найденных уязвимостях и обновлениях безопасности.
 
#### 6.5 Используется Web Application Firewall {#firewall}

Для снижения рисков, связанных с веб-атаками, рекомендуем использовать Web Application Firewall (WAF). Клиент может установить и обслуживать WAF самостоятельно либо воспользоваться {{ sws-full-name }} WAF.

##### Самостоятельная установка WAF {#self-installation}

Образы [WAF](/marketplace?tab=software&search=waf) доступны в [{{ marketplace-full-name }}](/marketplace). Типы лицензий и другая необходимая информация доступны в описаниях продуктов.

[Решение: Отказоустойчивая эксплуатация PT Application Firewall на базе {{ yandex-cloud }}](https://github.com/yandex-cloud-examples/yc-webinar-pt-application-firewall-ha-operations)

Возможна также установка Wallarm WAF в [{{ managed-k8s-name }}](../../../managed-kubernetes/). См. [инструкцию](https://docs.wallarm.com/admin-en/installation-kubernetes-en/) в документации Wallarm. Тип лицензии — BYOL (лицензия, приобретенная у стороннего поставщика).

##### {{ sws-full-name }} WAF {#managed-waf}

Клиенту доступен [{{ sws-full-name }} WAF](../../../smartwebsecurity/concepts/waf.md). Web Application Firewall анализирует входящие HTTP-запросы к веб-приложению по предварительно настроенным правилам. На основе результатов анализа к HTTP-запросам применяются определенные [действия](../../../smartwebsecurity/concepts/rules.md#rule-action).

Вы можете управлять межсетевым экраном веб-приложений с помощью _профиля WAF_, который подключается к [профилю безопасности](../../../smartwebsecurity/concepts/profiles.md) в виде отдельного [правила](../../../smartwebsecurity/concepts/rules.md).

Подробнее о подключении к профилю безопасности см. на странице [{#T}](../../../smartwebsecurity/quickstart/quickstart-waf.md).

{% list tabs group=instructions %}

- Проверка в консоли управления {#console}

  1. В консоли управления выберите облако или каталог, в которых необходимо проверить профиль безопасности.
  1. В списке сервисов выберите {{ ui-key.yacloud.iam.folder.dashboard.label_smartwebsecurity }}.
  1. Убедитесь, что создан профиль безопасности с типом правила **Web Application Firewall**.

{% endlist %}
