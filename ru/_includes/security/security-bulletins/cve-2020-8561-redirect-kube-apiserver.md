## 31.08.2022 — CVE-2020-8561 — Перенаправление запросов сервера Kubernetes API {#CVE-2020-8561}

CVE ID: CVE-2020-8561

Ссылка на CVE: <https://nvd.nist.gov/vuln/detail/CVE-2020-8561>

### Исходный отчет {#original-report}

<https://groups.google.com/g/kubernetes-security-announce/c/RV2IhwcrQsY>

### Краткое описание {#brief-description}

В {{ k8s }} пользователь, который контролирует ответы на запросы `MutatingWebhookConfiguration` или `ValidatingWebhookConfiguration`, может перенаправить запросы `kube-apiserver` в частные сети, к которым подключен сервер API. Если уровень логирования — `10`, то в логи попадают ответы из частной сети.

### Затронутые технологии {#technologies-affected}

{{ k8s }}

### Уязвимые продукты и версии {#vulnerable-products-and-versions}

Все версии {{ k8s }}.

### Вендор {#vendor}

{{  k8s }}

### Вектор атаки и уровень опасности согласно CVSS v.3.0 {#attack-vector-and-severity-level}

Уровень опасности: 4.1.

AV:N/AC:L/PR:H/UI:N/S:C/C:L/I:N/A:N

### Рекомендации по обнаружению уязвимости и дополнительные материалы {#recommendations-for-vulnerability-detection}

<https://groups.google.com/g/kubernetes-security-announce/c/RV2IhwcrQsY>

### Безопасная версия уязвимого продукта или патч {#safe-version}

Нет патчей или безопасных версий.

### Компенсационные меры для пользователей {{ yandex-cloud }} {#compensatory-measures}

<https://groups.google.com/g/kubernetes-security-announce/c/RV2IhwcrQsY>

Закройте доступ `kube-apiserver` к ресурсам с чувствительной информацией.

Так же вы можете задать значение меньше `10` для флага `-v` и `false` для флага `--profiling` (значение по умолчанию — `true`). Webhook-запросы смогут перенаправляться в частные сети, но с уровнем логирования меньше `10` тело ответа не попадает в логи. Пользователи не смогут изменить уровень логирования `kube-apiserver`.

### Влияние на сервисы {{ yandex-cloud }} {#impact-on-yandex-cloud-services}

Влияние отсутствует. API-сервер в {{ managed-k8s-full-name }} изолирован от сервисного интерфейса. Сервер работает от имени отдельного пользователя, который изолирован локальным межсетевым экраном.
