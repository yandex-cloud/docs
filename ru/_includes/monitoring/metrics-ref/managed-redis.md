## Сервис {{ mrd-full-name }} {#managed-redis}

Общие метки для всех метрик сервиса {{ mrd-full-name }}: 

Метка | Значение
----|----
service | Идентификатор сервиса: `managed-redis`
resource_type | Тип ресурса: `cluster`
resource_id | Идентификатор кластера
host | FQDN хоста
node | Тип хоста: `master`
subcluster_name | Имя подкластера

### Метрики CPU {#managed-redis-cpu-metrics}
Загрузка процессорных ядер.

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `cpu.fraction`<br/>`DGAUGE`, % | Гарантированная доля vCPU. | 
| `cpu.guarantee`<br/>`DGAUGE`, штуки | Гаратированное число ядер. | 
| `cpu.limit`<br/>`DGAUGE`, штуки | Предельное число используемых ядер. | 
| `cpu.guest`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `guest`. | 
| `cpu.idle`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `idle`. | 
| `cpu.iowait`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `iowait`. | 
| `cpu.irq`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `irq`. | 
| `cpu.nice`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `nice`. | 
| `cpu.softirq`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `softirq`. | 
| `cpu.steal`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `steal`. | 
| `cpu.system`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `system`. | 
| `cpu.user`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `user`. |

### Метрики диска {#managed-redis-disk-metrics}
| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `disk.free_bytes`<br/>`DGAUGE`, байты | Свободное место. | 
| `disk.free_inodes`<br/>`DGAUGE`, штуки | Свободное количество inodes. | 
| `disk.total_bytes`<br/>`DGAUGE`, байты | Доступное место. | 
| `disk.total_inodes`<br/>`DGAUGE`, штуки | Доступное количество inodes. | 
| `disk.used_bytes`<br/>`DGAUGE`, байты | Занятое место. | 
| `disk.used_inodes`<br/>`DGAUGE`, штуки | Занятое количество inodes. |

### Метрики дисковых операций {#managed-redis-diskio-metrics}
| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `io.avg_read_time`<br/>`DGAUGE`, миллисекунды | Среднее время чтения с дисков. | 
| `io.avg_write_time`<br/>`DGAUGE`, миллисекунды | Среднее время записи на диски. | 
| `io.disk*.avg_read_time`<br/>`DGAUGE`, миллисекунды | Среднее время чтения с конкретного диска. | 
| `io.disk*.avg_write_time`<br/>`DGAUGE`, миллисекунды | Среднее время записи на конкретный диск. | 
| `io.disk*.read_bytes`<br/>`DGAUGE`, байт/с | Скорость чтения с конкретного диска. | 
| `io.disk*.read_count`<br/>`DGAUGE`, операций/с | Количество операций чтения с конкретного диска в секунду. | 
| `io.disk*.read_merged_count`<br/>`DGAUGE`, операций/с | Количество слитых операций чтения с конкретного диска в секунду. | 
| `io.disk*.utilization`<br/>`DGAUGE`, % | Утилизация конкретного диска. | 
| `io.disk*.write_bytes`<br/>`DGAUGE`, байт/с | Скорость записи на конкретный диск. | 
| `io.disk*.write_count`<br/>`DGAUGE`, операций/с | Количество операций записи на конкретный диск в секунду. | 
| `io.disk*.write_merged_count`<br/>`DGAUGE`, операций/с | Количество слитых операций записи на конкретный диск в секунду. |
| `io.read_bytes`<br/>`DGAUGE`, байт/с | Скорость чтения с дисков. | 
| `io.read_count`<br/>`DGAUGE`, операций/с | Количество операций чтения в секунду. | 
| `io.read_merged_count`<br/>`DGAUGE`, операций/с | Количество слитых операций чтения в секунду. | 
| `io.utilization`<br/>`DGAUGE`, % | Утилизация дисков. | 
| `io.write_bytes`<br/>`DGAUGE`, байт/с | Скорость записи на диски. | 
| `io.write_count`<br/>`DGAUGE`, операций/с | Количество операций записи в секунду. | 
| `io.write_merged_count`<br/>`DGAUGE`, операций/с | Количество слитых операций записи в секунду. |

### Метрики RAM {#managed-redis-ram-metrics}
| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `mem.guarantee_bytes`<br/>`DGAUGE`, байты | Гаратированный размер оперативной памяти. | 
| `mem.limit_bytes`<br/>`DGAUGE`, байты | Предельный размер оперативной памяти. | 
| `mem.active_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `active`. | 
| `mem.available_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `available`. | 
| `mem.buffers_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `buffers`.  | 
| `mem.cached_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `cached`.  | 
| `mem.free_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `free`.  |
| `mem.shared_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `shared`.  | 
| `mem.total_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `total`.  | 
| `mem.used_bytes`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `used`.  | 

### Метрики сети {#managed-redis-net-metrics}
| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `net.bytes_recv`<br/>`DGAUGE`, байт/с | Скорость получения данных по сети. | 
| `net.bytes_sent`<br/>`DGAUGE`, байт/с | Скорость отправки данных по сети. | 
| `net.dropin`<br/>`DGAUGE`, штуки | Количество пакетов, отброшенных при получении. | 
| `net.dropout`<br/>`DGAUGE`, штуки | Количество пакетов, отброшенных при отправке. | 
| `net.errin`<br/>`DGAUGE`, штуки | Количество ошибок при получении. | 
| `net.errout`<br/>`DGAUGE`, штуки | Количество ошибок при отправке. | 
| `net.packets_recv`<br/>`DGAUGE`, пакетов/с | Интенсивность получения данных по сети. | 
| `net.packets_sent`<br/>`DGAUGE`, пакетов/с | Интенсивность отправки данных по сети. |

### Метрики сервиса {#managed-redis-metrics}
| Имя<br/>Тип, единицы измерения | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ----- |----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `can_read`<br/>`DGAUGE`, 0/1 | Показатель доступности на чтение.<br/>Принимает значение `1`, если кластер доступен на чтение, `0`, если нет.                                                                                                                                                                                                                                                                                                                                                                                                                                | 
| `can_write`<br/>`DGAUGE`, 0/1 | Показатель доступности на запись.<br/>Принимает значение `1`, если кластер доступен на запись, `0`, если нет.                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `redis_aof_last_cow_size`<br/>`DGAUGE`, байты | Количество данных, скопированных при создании AOF-файла при использовании механизма [COW (Copy-on-write)](https://ru.wikipedia.org/wiki/Копирование_при_записи).                                                                                                                                                                                                                                                                | 
| `redis_blocked_clients`<br/>`DGAUGE`, штуки | Число клиентов, ожидающих соединения для каждого хоста кластера.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 
| `redis_client_output_normal_hard`<br/>`DGAUGE`, байты | Жесткий лимит использования памяти.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 
| `redis_client_output_normal_soft`<br/>`DGAUGE`, байты | Мягкий лимит использования памяти.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 
| `redis_client_recent_max_input_buffer`<br/>`DGAUGE`, байты | Максимальное использование памяти для обслуживания клиентских подключений, выполняющих запись данных.                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
| `redis_client_recent_max_output_buffer`<br/>`DGAUGE`, байты | Максимальное использование памяти для обслуживания клиентских подключений, выполняющих чтение данных.                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
| `redis_connected_clients`<br/>`DGAUGE`, | Количество открытых соединений для каждого хоста кластера.<br/>Если кластер шардированный или использует репликацию, часть соединений будет использована для обмена данными между хостами кластера.<br/>Если при подключении к кластеру возникают ошибки, возможно, неактивные приложения держат соединения открытыми слишком долго. В этом случае [измените в настройках](../../../managed-redis/operations/update.md#change-redis-config) значение параметра [Timeout](../../../managed-redis/concepts/settings-list.md#settings-timeout). | 
| `redis_db_hashtable_overhead`<br/>`DGAUGE`, байты | Использование оперативной памяти для хранения хэш-таблиц всех баз данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 
| `redis_dbsize`<br/>`DGAUGE`, штуки | Количество ключей, хранящихся во всех базах данных кластера.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 
| `redis_evicted_keys`<br/>`DGAUGE`, штуки | Количество ключей, удаленных из памяти при вставке новых данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 
| `redis_hit_rate`<br/>`DGAUGE`, % | Доля запросов, данные для которых {{ mrd-full-name }} находит в кеше.                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 
| `redis_instantaneous_ops_per_sec`<br/>`DGAUGE`, операции/с | Количество запросов в секунду.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 
| `redis_is_alive`<br/>`DGAUGE` | Показатель работоспособности хоста.<br/>Принимает значение `1`, если хост БД работает, `0`, если нет.                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
| `redis_is_master`<br/>`DGAUGE` | Показатель типа хоста.<br/>Принимает значение `1`, если хост является мастер-сервером БД, `0`, если нет.                                                                                                                                                                                                                                                                                                                                                                                                                                     | 
| `redis_keys_db`<br/>`DGAUGE`, штуки | Количество ключей, хранящихся во конкретной базе данных кластера.<br/>Дополнительные метки: `db`                                                                                                                                                                                                                                                                                                                                                                                                                                             | 
| `redis_keyspace_hits`<br/>`DGAUGE`, штуки | Число успешных запросов по ключу.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 
| `redis_keyspace_misses`<br/>`DGAUGE`, штуки | Число неуспешных запросов ключа.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 
| `redis_master_last_io_seconds_ago`<br/>`DGAUGE`, секунды | Число секунд с момента последнего взаимодействия с мастер-хостом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 
| `redis_maxmemory`<br/>`DGAUGE`, байты | Максимальный объем памяти, выделяемый для пользовательских данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 
| `redis_mem_aof_buffer`<br/>`DGAUGE`, байты | Использование оперативной памяти для буфера AOF.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 
| `redis_mem_clients_normal`<br/>`DGAUGE`, байты | Использование оперативной памяти для обслуживания внешних подключений.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 
| `redis_mem_clients_slaves`<br/>`DGAUGE`, байты | Использование оперативной памяти для обслуживания подключений репликации.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 
| `redis_mem_fragmentation_ratio`<br/>`GAUGE` | Отношение используемой памяти к запрошенной.<br/>Принимает значение меньше `1`, если памяти не хватает.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `redis_mem_replication_backlog`<br/>`DGAUGE`, байты | Использование оперативной памяти для циклического буфера репликации.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 
| `redis_memory_limit`<br/>`DGAUGE`, байты | Объем памяти, выделенной хосту.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 
| `redis_module_fork_last_cow_size`<br/>`DGAUGE`, байты | Количество данных, скопированных при вызове fork() с использованием механизма COW.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 
| `redis_oom_count`<br/>`DGAUGE`, штуки | Количество ошибок Out of Memory, за час.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 
| `redis_rdb_last_cow_size`<br/>`DGAUGE`, байты | Количество данных, скопированных при создании RDB-файла.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 
| `redis_repl_backlog_histlen`<br/>`DGAUGE`, байты | Текущий объем памяти, занятый данными в буфере репликации.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 
| `redis_repl_backlog_size`<br/>`DGAUGE`, | Максимальный объем памяти, доступный под буфер репликации.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 
| `redis_used_memory`<br/>`DGAUGE`, | Фактическое использованием памяти на хосте. Если значение параметра `redis_used_memory` достигнет значения параметра `redis_used_memory`, при попытке вставить новые записи {{ mrd-full-name }} применит режим управления памятью, установленный настройкой [Maxmemory policy](../../../managed-redis/concepts/settings-list.md#settings-maxmemory-policy).                                                                                                                                                                        | 
| `redis_used_memory_dataset`<br/>`DGAUGE`, байты | Использование оперативной памяти для хранения данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 
| `redis_used_memory_rss`<br/>`DGAUGE`, байты | Использование памяти процессами Redis.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 
| `redis_used_memory_scripts`<br/>`DGAUGE`, байты | Использование оперативной памяти для хранения и работы скриптов.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 
| `redis_used_memory_startup`<br/>`DGAUGE`, байты | Использование оперативной памяти для процессов Redis при запуске (например, после перезагрузки кластера).                                                                                                                                                                                                                                                                                                                                                                                                                                    | 
| `slowlog_max_len`<br/>`DGAUGE`, штуки | Максимальное число логгируемых медленных запросов.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 

Подробнее о сервисе в документации [{{ mrd-full-name }}](../../../managed-redis/).
