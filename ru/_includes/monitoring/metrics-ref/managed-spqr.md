Имя метрики пишется в метку `name`.

Общие метки для всех метрик сервиса {{ mspqr-name }}:

Метка | Значение
----|----
cid | Идентификатор кластера
dc | [Зона доступности](../../../overview/concepts/geo-scope.md)
fqdn | FQDN хоста
host | FQDN хоста
resource_id | Идентификатор кластера
resource_type | Тип ресурса: `cluster`
service | Идентификатор сервиса: `managed-spqr`
shard | Идентификатор шарда
subcluster_name | Имя подкластера


## Метрики CPU {#managed-spqr-cpu-metrics}

Загрузка процессорных ядер.

Идентификатор ядра пишется в метку `cpu`.

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `cpu.usage_guest`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `guest`. |
| `cpu.usage_guest_nice`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `guest_nice`. |
| `cpu.usage_idle`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `idle`. |
| `cpu.usage_iowait`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `iowait`. |
| `cpu.usage_irq`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `irq`. |
| `cpu.usage_nice`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `nice`. |
| `cpu.usage_softirq`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `softirq`. |
| `cpu.usage_steal`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `steal`. |
| `cpu.usage_system`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `system`. |
| `cpu.usage_user`<br/>`DGAUGE`, % | Использование процессорных ядер, тип потребления `user`. |


## Метрики диска {#managed-spqr-disk-metrics}

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `vd*`<br/>`DGAUGE`, байты | Размер виртуального диска. |
| `vd**`<br/>`DGAUGE`, байты | Размер раздела на виртуальном диске. |


## Метрики RAM {#managed-spqr-ram-metrics}

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `mem.active`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `active`. |
| `mem.available`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `available`. |
| `mem.available_percent`<br/>`DGAUGE`, % | Процент доступной оперативной памяти. |
| `mem.buffered`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `buffered`. |
| `mem.cached`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `cached`. |
| `mem.commit_limit`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `commit_limit`. |
| `mem.committed_as`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `committed_as`. |
| `mem.dirty`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `dirty`. |
| `mem.free`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `free`. |
| `mem.high_free`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `high_free`. |
| `mem.high_total`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `high_total`. |
| `mem.huge_page_size`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `huge_page_size`. |
| `mem.huge_pages_free`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `huge_pages_free`. |
| `mem.huge_pages_total`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `huge_pages_total`. |
| `mem.inactive`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `inactive`. |
| `mem.low_free`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `low_free`. |
| `mem.low_total`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `low_total`. |
| `mem.mapped`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `mapped`. |
| `mem.page_tables`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `page_tables`. |
| `mem.shared`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `shared`. |
| `mem.slab`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `slab`. |
| `mem.sreclaimable`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `sreclaimable`. |
| `mem.sunreclaim`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `sunreclaim`. |
| `mem.swap_cached`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `swap_cached`. |
| `mem.swap_free`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `swap_free`. |
| `mem.swap_total`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `swap_total`. |
| `mem.total`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `total`. |
| `mem.used`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `used`. |
| `mem.used_percent`<br/>`DGAUGE`, % | Процент использованной оперативной памяти. |
| `mem.vmalloc_chunk`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `vmalloc_chunk`. |
| `mem.vmalloc_total`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `vmalloc_total`. |
| `mem.vmalloc_used`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `vmalloc_used`. |
| `mem.write_back`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `write_back`. |
| `mem.write_back_tmp`<br/>`DGAUGE`, байты | Использование оперативной памяти, тип потребления `write_back_tmp`. |


## Метрики сети {#managed-spqr-net-metrics}

Идентификатор сетевого интерфейса пишется в метку `interface`.

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `net.bytes_recv`<br/>`DGAUGE`, байт/с | Скорость получения данных по сети. |
| `net.bytes_sent`<br/>`DGAUGE`, байт/с | Скорость отправки данных по сети. |
| `net.drop_in`<br/>`DGAUGE`, штуки | Количество пакетов, отброшенных при получении. |
| `net.drop_out`<br/>`DGAUGE`, штуки | Количество пакетов, отброшенных при отправке. |
| `net.err_in`<br/>`DGAUGE`, штуки | Количество ошибок при получении. |
| `net.err_out`<br/>`DGAUGE`, штуки | Количество ошибок при отправке. |
| `net.icmp_inaddrmaskreps`<br/>`DGAUGE`, штуки | Количество полученных ответных ICMP-сообщений с маской адреса от опрашиваемого узла. |
| `net.icmp_inaddrmasks`<br/>`DGAUGE`, штуки | Количество полученных сообщений с запросом маски ICMP-адреса. |
| `net.icmp_incsumerrors`<br/>`DGAUGE`, штуки | Общее количество IP-пакетов с ошибками контрольной суммы. |
| `net.icmp_indestunreachs`<br/>`DGAUGE`, штуки | Количество полученных сообщений о недоступности назначения ICMP. |
| `net.icmp_inechoreps`<br/>`DGAUGE`, штуки | Количество полученных ICMP-сообщений Echo Reply. |
| `net.icmp_inechos`<br/>`DGAUGE`, штуки | Количество полученных ICMP-сообщений Echo (запросов). |
| `net.icmp_inerrors`<br/>`DGAUGE`, штуки | Количество полученных ICMP-пакетов с ошибками, не включая ошибки контрольной суммы. |
| `net.icmp_inmsgs`<br/>`DGAUGE`, штуки | Общее количество полученных ICMP-сообщений. |
| `net.icmp_inparmprobs`<br/>`DGAUGE`, штуки | Количество полученных сообщений о неполадках с параметрами ICMP. |
| `net.icmp_inredirects`<br/>`DGAUGE`, штуки | Количество полученных сообщений о перенаправлении ICMP. |
| `net.icmp_insrcquenchs`<br/>`DGAUGE`, штуки | Количество полученных ICMP-сообщений Source Quench. |
| `net.icmp_intimeexcds`<br/>`DGAUGE`, штуки | Количество полученных сообщений о превышении времени ICMP. | 
| `net.icmp_intimestampreps`<br/>`DGAUGE`, штуки | Количество полученных ответных сообщений с меткой времени ICMP. |
| `net.icmp_intimestamps`<br/>`DGAUGE`, штуки | Количество полученных сообщений (запросов) с меткой времени ICMP. |
| `net.icmp_outaddrmaskreps`<br/>`DGAUGE`, штуки | Количество отправленных ответных сообщений по маске ICMP-адреса. |
| `net.icmp_outaddrmasks`<br/>`DGAUGE`, штуки | Количество отправленных сообщений с запросом маски ICMP-адреса. |
| `net.icmp_outdestunreachs`<br/>`DGAUGE`, штуки | Количество отправленных сообщений о недоступности назначения ICMP. |
| `net.icmp_outechoreps`<br/>`DGAUGE`, штуки | Количество отправленных ICMP-сообщений Echo Reply. |
| `net.icmp_outechos`<br/>`DGAUGE`, штуки | Количество отправленных ICMP-сообщений Echo (запросов). |
| `net.icmp_outerrors`<br/>`DGAUGE`, штуки | Количество ICMP-сообщений, которые этот объект не отправил из-за проблем, обнаруженных в ICMP, таких как нехватка буферов. |
| `net.icmp_outmsgs`<br/>`DGAUGE`, штуки | Общее количество ICMP-сообщений, которые пытался отправить этот объект. Включает все сообщения, подсчитанные `icmp_outerrors`. | 
| `net.icmp_outparmprobs`<br/>`DGAUGE`, штуки | Количество отправленных сообщений о проблемах с параметрами ICMP. |
| `net.packets_recv`<br/>`DGAUGE`, пакетов/с | Интенсивность получения данных по сети. |
| `net.packets_sent`<br/>`DGAUGE`, пакетов/с | Интенсивность отправки данных по сети. |
| `icmp_outratelimitglobal`<br/>`DGAUGE`, штуки | Количество ICMP-сообщений, ограниченных глобальными лимитами скорости. |
| `icmp_outratelimithost`<br/>`DGAUGE`, штуки | Количество ICMP-сообщений, ограниченных лимитами скорости для конкретного хоста. |
| `icmp_outredirects`<br/>`DGAUGE`, штуки | Количество отправленных сообщений с перенаправлениями маршрута. | 
| `icmp_outsrcquenchs`<br/>`DGAUGE`, штуки | Количество отправленных сообщений Source Quench по протоколу ICMP. |
| `icmp_outtimeexcds`<br/>`DGAUGE`, штуки | Количество отправленных сообщений с превышением времени ICMP превысило количество отправленных сообщений. | 
| `icmp_outtimestampreps`<br/>`DGAUGE`, штуки | Количество отправленных ответных сообщений с меткой времени ICMP. | 
| `icmp_outtimestamps`<br/>`DGAUGE`, штуки | Количество отправленных сообщений с меткой времени ICMP. | 
| `net.icmpmsg_intype5`<br/>`DGAUGE`, штуки | Количество полученных ICMP-сообщений типа 5 (Redirect). |
| `net.icmpmsg_intype8`<br/>`DGAUGE`, штуки | Количество полученных ICMP-сообщений типа 8 (Echo Request). |
| `net.icmpmsg_intype13`<br/>`DGAUGE`, штуки | Количество полученных ICMP-сообщений типа 13 (Timestamp Request). |
| `net.icmpmsg_outtype0`<br/>`DGAUGE`, штуки | Общее количество отправленных ICMP-сообщений типа 0 (Echo Reply). |
| `net.icmpmsg_outtype3`<br/>`DGAUGE`, штуки | Общее количество отправленных ICMP-сообщений типа 3 (Destination Unreachable). |
| `net.ip_defaultttl`<br/>`DGAUGE`, строка | Значение по умолчанию, вставляемое в поле Time-To-Live заголовка IP-пакетов, созданных в этом объекте, когда значение TTL не предоставляется протоколом транспортного уровня. |
| `net.ip_forwarding`<br/>`DGAUGE` | Состояние пересылки IP (в сетевом протоколе SNMP) (`0` — отключено, `1` — включено). |
| `net.ip_forwdatagrams`<br/>`DGAUGE`, штуки | Количество входящих пакетов, для которых этот объект не был их конечным IP-адресатом, в результате чего была предпринята попытка найти маршрут для пересылки их в этот конечный пункт назначения. В объектах, которые не действуют как IP-маршрутизаторы, этот счетчик будет включать только те пакеты, которые были перенаправлены источником через этот объект, и обработка параметра исходного маршрута прошла успешно. |
| `net.ip_fragcreates`<br/>`DGAUGE`, штуки | Количество фрагментов IP-пакетов, которые были сгенерированы в результате фрагментации в этом объекте. |
| `net.ip_fragfails`<br/>`DGAUGE`, штуки | Количество IP-пакетов, которые были отброшены, поскольку они должны были быть фрагментированы в этом объекте, но не могли быть фрагментированы, например, потому что был установлен флаг, запрещающий фрагментацию. |
| `net.ip_fragoks`<br/>`DGAUGE`, штуки | Количество успешных фрагментаций IP-пакетов. |
| `net.ip_inaddrerrors`<br/>`DGAUGE`, штуки | Количество входящих пакетов, отброшенных из-за того, что IP-адрес в поле назначения их IP-заголовка не был допустимым адресом для получения в этом объекте. Это количество включает недопустимые адреса (например, `0.0.0.0`) и адреса неподдерживаемых классов (например, класс E). Для объектов, которые не являются IP-маршрутизаторами и, следовательно, не пересылают пакеты, этот счетчик включает пакеты, отброшенные из-за того, что адрес назначения не был локальным адресом. |
| `net.ip_indelivers`<br/>`DGAUGE`, штуки | Общее количество доставленных IP-пакетов. |
| `net.ip_indiscards`<br/>`DGAUGE`, штуки | Количество входящих IP-пакетов, для которых не возникло проблем, препятствующих их дальнейшей обработке, но которые были отброшены (например, из-за нехватки места в буфере). Этот счетчик не включает в себя пакеты, отброшенные в ожидании повторной сборки. |
| `net.ip_inhdrerrors`<br/>`DGAUGE`, штуки | Количество входящих пакетов с ошибками в заголовке. |
| `net.ip_inreceives`<br/>`DGAUGE`, штуки | Общее количество входящих пакетов, полученных от интерфейсов, включая полученные по ошибке. |
| `net.ip_inunknownprotos`<br/>`DGAUGE`, штуки | Количество полученных пакетов с неизвестными протоколами. |
| `net.ip_outdiscards`<br/>`DGAUGE`, штуки | Количество выходящих IP-пакетов, для которых не возникло проблем, препятствующих их передаче по назначению, но которые были отброшены (например, из-за нехватки места в буфере). Обратите внимание, что этот счетчик включал бы пакеты, подсчитанные в `ip_forwdatagrams`, если бы такие пакеты удовлетворяли этому (дискреционному) критерию отбрасывания. |
| `net.ip_outnoroutes`<br/>`DGAUGE`, штуки | Количество отброшенных IP-пакетов, для которых не удалось найти маршрут для их передачи по назначению. Этот счетчик включает все пакеты, подсчитанные в `ip_forwdatagrams`, которые соответствуют критерию «без маршрута». Сюда входят любые пакеты, которые хост не может перенаправить, поскольку все его маршрутизаторы по умолчанию не работают. |
| `net.ip_outrequests`<br/>`DGAUGE`, штуки | Общее количество IP-пакетов, которые локальные пользовательские протоколы IP (включая ICMP) передали IP в запросах на передачу. Этот счетчик не включает в себя пакеты, подсчитанные в `ip_forwdatagrams`. |
| `net.ip_reasmfails`<br/>`DGAUGE`, штуки | Количество сбоев, обнаруженных алгоритмом повторной сборки IP (по любой причине: тайм-аут, ошибки и т.д.). Это не обязательно количество отброшенных IP-фрагментов, поскольку некоторые алгоритмы (в частности, алгоритм в RFC 815) могут потерять отслеживание количества фрагментов, объединяя их по мере их получения. |
| `net.ip_reasmoks`<br/>`DGAUGE`, штуки | Количество IP-пакетов, успешно собранных повторно. |
| `net.ip_reasmreqds`<br/>`DGAUGE`, штуки | Количество полученных IP-фрагментов, которые необходимо было повторно собрать в этом объекте. |
| `net.ip_reasmtimeout`<br/>`DGAUGE`, секунды | Максимальное количество секунд, в течение которых удерживаются полученные фрагменты, пока они ожидают повторной сборки в этом объекте. |
| `net.speed`<br/>`DGAUGE`, бит/с | Максимальная скорость передачи данных в сети для данного интерфейса. |
| `net.tcp_activeopens`<br/>`DGAUGE`, штуки | Количество раз, когда TCP-соединения совершали прямой переход из состояния `CLOSED` в состояние `SYN-SENT`. |
| `net.tcp_attemptfails`<br/>`DGAUGE`, штуки | Количество раз, когда TCP-соединения совершали прямой переход в состояние `CLOSED` либо из состояния `SYN-SENT`, либо из состояния `SYN-RCVD`, плюс количество раз, когда TCP-соединения совершали прямой переход. |
| `net.tcp_currestab`<br/>`DGAUGE`, штуки | Текущее количество TCP-соединений для состояния `ESTABLISHED` или `CLOSE WAIT`. |
| `net.tcp_estabresets`<br/>`DGAUGE`, штуки | Количество раз, когда TCP-соединения совершали прямой переход в состояние `CLOSED` либо из состояния `ESTABLISHED`, либо из состояния `CLOSE-WAIT`. |
| `net.tcp_incsumerrors`<br/>`DGAUGE`, штуки | Увеличивается, когда полученный TCP-пакет имеет неправильную контрольную сумму. |
| `net.tcp_inerrs`<br/>`DGAUGE`, штуки | Общее количество сегментов, полученных с ошибкой (например, неверные контрольные суммы TCP). |
| `net.tcp_insegs`<br/>`DGAUGE`, штуки | Общее количество полученных сегментов, включая те, которые были получены по ошибке. |
| `net.tcp_maxconn`<br/>`DGAUGE`, штуки | Максимальное количество допустимых TCP-соединений. |
| `net.tcp_outrsts`<br/>`DGAUGE`, штуки | Количество отправленных TCP-сегментов, содержащих флаг `RST`. |
| `net.tcp_outsegs`<br/>`DGAUGE`, штуки | Общее количество отправленных TCP-сегментов. |
| `net.tcp_passiveopens`<br/>`DGAUGE`, штуки | Количество раз, когда TCP-соединения осуществляли прямой переход в состояние `SYN-RCVD` из состояния `LISTEN`. |
| `net.tcp_retranssegs`<br/>`DGAUGE`, штуки | Общее количество повторно переданных сегментов, то есть количество переданных TCP-сегментов, содержащих один или несколько ранее переданных октетов. |
| `net.tcp_rtoalgorithm`<br/>`DGAUGE` | Алгоритм, используемый для определения значения тайм-аута, используемого для повторной передачи неподтвержденных октетов. |
| `net.tcp_rtomax`<br/>`DGAUGE`, миллисекунды | Максимальное значение, разрешенное реализацией TCP для времени ожидания повторной передачи, измеряемое в миллисекундах. |
| `net.tcp_rtomin`<br/>`DGAUGE`, миллисекунды | Минимальное значение, разрешенное реализацией TCP для времени ожидания повторной передачи, измеряемое в миллисекундах. |
| `net.udp_ignoredmulti`<br/>`DGAUGE`, штуки | Для многоадресной рассылки UDP. |
| `net.udp_incsumerrors`<br/>`DGAUGE`, штуки | Увеличивается, когда полученный UDP-пакет содержит недопустимую контрольную сумму кода ядра. |
| `net.udp_indatagrams`<br/>`DGAUGE`, штуки | Общее количество принятых UDP-пакетов. |
| `net.udp_inerrors`<br/>`DGAUGE`, штуки | Количество полученных UDP-пакетов с ошибками, не включая ошибки контрольной суммы. |
| `net.udp_memerrors`<br/>`DGAUGE`, ошибки | Количество ошибок, связанных с нехваткой памяти для протокола UDP. |
| `net.udp_noports`<br/>`DGAUGE`, штуки | Общее количество полученных UDP-пакетов, для которых на порту назначения не было приложения. |
| `net.udp_outdatagrams`<br/>`DGAUGE`, штуки | Общее количество UDP-пакетов, отправленных от этого объекта. |
| `net.udp_rcvbuferrors`<br/>`DGAUGE`, штуки | Количество ошибок буфера приема UDP. |
| `net.udp_sndbuferrors`<br/>`DGAUGE`, штуки | Количество ошибок буфера отправки UDP. |
| `net.udplite_ignoredmulti`<br/>`DGAUGE`, штуки | Для многоадресной рассылки UDP-Lite. |
| `net.udplite_incsumerrors`<br/>`DGAUGE`, штуки | Увеличивается, когда полученный пакет UDP-Lite содержит недопустимую контрольную сумму кода ядра. |
| `net.udplite_indatagrams`<br/>`DGAUGE`, штуки | Общее количество принятых пакетов UDP-Lite. |
| `net.udplite_inerrors`<br/>`DGAUGE`, штуки | Общее количество ошибок при получении пакетов UDP-Lite. |
| `net.udplite_memerrors`<br/>`DGAUGE`, ошибки | Количество ошибок, связанных с нехваткой памяти для протокола UDP-Lite. |
| `net.udplite_noports`<br/>`DGAUGE`, штуки | Количество полученных пакетов UDP-Lite, для которых не найден соответствующий порт приемника. |
| `net.udplite_outdatagrams`<br/>`DGAUGE`, штуки | Общее количество отправленных датаграмм UDP-Lite. |
| `net.udplite_rcvbuferrors`<br/>`DGAUGE`, штуки | Количество ошибок буфера приема UDP-Lite. |
| `net.udplite_sndbuferrors`<br/>`DGAUGE`, штуки | Количество ошибок буфера отправки UDP-Lite. |


## Метрики сервиса {#managed-spqr-metrics}

#### Метрики кластера {#managed-spqr-cluster-metrics}

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `connections_to_host.<fqdn_хоста>`<br/>`DGAUGE`, штуки | Количество активных соединений к хосту с указанным FQDN. |
| `core_dump.count`<br/>`DGAUGE`, штуки | Количество дампов ядра. |
| `dbaas_conf.cpu.fraction`<br/>`DGAUGE`, доли | Доля доступных ресурсов CPU, предоставленных сервисом. |
| `dbaas_conf.cpu.guarantee`<br/>`DGAUGE`, доли | Гарантированная доля ресурсов CPU, выделенная сервисом. |
| `dbaas_conf.cpu.limit`<br/>`DGAUGE`, доли | Максимально разрешенная доля использования ресурсов CPU. |
| `dbaas_conf.hosts.ha`<br/>`DGAUGE`, хосты | Количество хостов, настроенных для высокой доступности. |
| `dbaas_conf.hosts.subcluster.spqr_coordinator.total`<br/>`DGAUGE`, штуки | Количество хостов в подкластере SPQR Coordinator. |
| `dbaas_conf.hosts.subcluster.spqr_infra.total`<br/>`DGAUGE`, штуки | Количество хостов в подкластере SPQR Infra. |
| `dbaas_conf.hosts.subcluster.spqr_router.total`<br/>`DGAUGE`, штуки | Количество хостов в подкластере SPQR Router. |
| `dbaas_conf.hosts.total`<br/>`DGAUGE`, штуки | Общее количество хостов, используемых сервисом. |
| `etcd_health.etcd-is_alive`<br/>`DGAUGE`, штуки | Статус работоспособности etcd: `1` — сервис активен и функционирует, `0` — сервис недоступен или не отвечает. |


#### Нативные метрики SPQR {#native-spqr-metrics}

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `spqr_health.spqr_coordinator-is_alive`<br/>`DGAUGE`, единицы | Статус работоспособности SPQR Coordinator: `1` — хост активен и функционирует, `0` — хост недоступен или не отвечает. |
| `spqr_health.spqr_router-is_alive`<br/>`DGAUGE`, единицы | Статус работоспособности SPQR Router: `1` — хост активен и функционирует, `0` — хост недоступен или не отвечает. |
| `spqr_router_stats.active_connections`<br/>`DGAUGE`, штуки | Количество активных соединений через SPQR Router. |
| `spqr_router_stats.clients_count`<br/>`DGAUGE`, штуки | Количество подключенных клиентов к SPQR Router. |
| `spqr_router_stats.connections_count`<br/>`DGAUGE`, штуки | Общее количество соединений, обработанных SPQR Router. |
| `spqr_router_stats.connection_usage`<br/>`DGAUGE`, доли | Доля используемых соединений роутером SPQR относительно доступного лимита. |
| `spqr_router_stats.router_time_0.5`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, медиана (0.5 процентиль). |
| `spqr_router_stats.router_time_0.75`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, 0.75 процентиль. |
| `spqr_router_stats.router_time_0.9`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, 0.90 процентиль. |
| `spqr_router_stats.router_time_0.95`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, 0.95 процентиль. |
| `spqr_router_stats.router_time_0.99`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, 0.99 процентиль. |
| `spqr_router_stats.router_time_0.999`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, 0.999 процентиль. |
| `spqr_router_stats.router_time_0.9999`<br/>`DGAUGE`, миллисекунды | Время обработки запросов роутером SPQR, 0.9999 процентиль. |
| `spqr_router_stats.shard_time_0.5`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, медиана (0.5 процентиль). |
| `spqr_router_stats.shard_time_0.75`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, 0.75 процентиль. |
| `spqr_router_stats.shard_time_0.9`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, 0.90 процентиль. |
| `spqr_router_stats.shard_time_0.95`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, 0.95 процентиль. |
| `spqr_router_stats.shard_time_0.99`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, 0.99 процентиль. |
| `spqr_router_stats.shard_time_0.999`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, 0.999 процентиль. |
| `spqr_router_stats.shard_time_0.9999`<br/>`DGAUGE`, миллисекунды | Время обработки запросов на шарде, 0.9999 процентиль. |
| `spqr_router_stats.total_cancel_requests`<br/>`DGAUGE`, штуки | Общее количество отмененных запросов через SPQR Router. |
| `spqr_router_stats.total_connections_count`<br/>`DGAUGE`, штуки | Общее количество установленных соединений через SPQR Router. |


#### Системные метрики {#managed-spqr-config-metrics}

| Имя<br/>Тип, единицы измерения | Описание |
| ----- | ----- |
| `system.load.avg_1min`<br/>`DGAUGE`, % | Средняя нагрузка процессора за 1 минуту. |
| `system.load.avg_5min`<br/>`DGAUGE`, % | Средняя нагрузка процессора за 5 минут. |
| `system.load.avg_15min`<br/>`DGAUGE`, % | Средняя нагрузка процессора за 15 минут. |
| `system.n_cpus`<br/>`DGAUGE`, штуки | Предельное число используемых ядер. |
| `system.n_unique_users`<br/>`DGAUGE`, пользователи | Количество уникальных пользователей или аккаунтов, взаимодействующих с системой. |
| `system.n_users`<br/>`DGAUGE`, штуки | Предельное число пользователей. |
| `system.uptime`<br/>`DGAUGE`, % | Коэффициент отказоустойчивости. |