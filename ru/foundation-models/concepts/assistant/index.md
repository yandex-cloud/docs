---
title: '{{ assistant-api }}'
description: '{{ assistant-api }} — это инструмент создания AI-ассистентов. С его помощью можно реализовать сценарий RAG и создать ассистента для поиска по вашей базе знаний.'
keywords:
  - keyword: RAG
  - keyword: AI ассистент
  - keyword: ИИ ассистент
  - keyword: чат-бот
---

# {{ assistant-api }}

{% include [assistants-preview-stage](../../../_includes/foundation-models/assistants-preview-stage.md) %}

{{ assistant-api }} — это инструмент создания AI-ассистентов. С его помощью можно создать персонализированных помощников, реализовывать сценарий генеративного ответа с учетом информации из внешних источников ([RAG](https://en.wikipedia.org/wiki/Retrieval-augmented_generation), Retrieval Augmented Generation), а также сохранять контекст запросов к модели.

![ai-assistant](../../../_assets/foundation-models/ai-assistant.svg)

Вы можете создать своего AI-ассистента с помощью [{{ ml-sdk-full-name }}](../../sdk/index.md) или реализуя запросы к API на языке программирования.

Чтобы использовать {{ assistant-api }} в {{ foundation-models-full-name }}, необходимы [роли](../../security/index.md#service-roles) `ai.assistants.editor` и `ai.languageModels.user` или выше на [каталог](../../../resource-manager/concepts/resources-hierarchy.md#folder).

## Из чего состоят AI-ассистенты {#content}

{{ assistant-api }} предоставляет несколько абстракций для реализации чат-ботов и AI-ассистентов. 

[_Ассистент_](../../assistants/api-ref/grpc/Assistant/index.md) определяет, к какой модели нужно обратиться, а также какие параметры и инструкции использовать. Это позволяет настроить модель один раз и использовать эти настройки в будущем без необходимости каждый раз передавать их.

Для хранения контекста истории общения используются [_треды_](../../threads/api-ref/grpc/index.md). Каждый тред — это отдельный диалог с пользователем. [_Запустив_](../../runs/api-ref/grpc/index.md) ассистента для треда, вы вызовете модель и передадите весь сохраненный в нем контекст. Вы можете [получить](../../operations/assistant/request-chunked-response.md) промежуточные результаты генерации, [прослушивая](../../runs/api-ref/grpc/Run/listen.md) текущий запуск, а итоговый результат генерации будет добавлен к треду.

{% note tip %}

По умолчанию при каждом запуске модель будет обрабатывать содержимое треда заново. Если в треде хранится большой контекст, а вы запускаете ассистента после каждого сообщения от пользователя, стоимость работы ассистента может стать существенной. Чтобы оптимизировать расходы, попробуйте ограничить размер передаваемого контекста с помощью параметра [`customPromptTruncationOptions`](../../runs/api-ref/grpc/Run/create.md) при запуске.

Подробнее о стоимости использования ассистентов см. [Правила тарификации ассистентов](../../pricing.md#rules-assistant).

{% endnote %}

[Простой ассистент](../../operations/assistant/create.md) может быть удобен для автоматизации рутинных операций над разными данными. Например, если вы подобрали эффективный промт и настройки для модели, вы можете создать для себя ассистента и запускать его для разных тредов. Однако с помощью дополнительных _инструментов_ можно расширить возможности ассистентов.

{{ assistant-api }} позволяет подключать к ассистенту инструменты для работы с дополнительными источниками информации для реализации сценария RAG и инструменты для вызова внешних функций (function calling) — дополнительных обработчиков и сторонних API.

{% note info %}

Время хранения ассистентов, тредов, поисковых индексов и пользователей ограничено. Вы можете задать его при создании объекта с помощью параметра `ExpirationConfig`. По умолчанию файлы будут удалены, если в течение 7 дней они не используются.

После создания объекта изменить время и политику его хранения не получится.

{% endnote %}

## Работа с дополнительными источниками информации {#rag}

Инструменты для работы с дополнительными источниками информации в {{ assistant-api }} включают в себя методы для реализации сценариев RAG и специально обученную [модель перефразирования](./rephraser.md) запросов пользователей, способную повысить качество поиска. 

Чтобы модель использовала информацию из ваших источников:
1. [Загрузите файлы](#files) с помощью API или {{ ml-sdk-name }}.
1. Создайте [поисковый индекс](./search-index.md) для файлов. После этого вы можете удалить загруженные файлы, если ссылки на источники вам не нужны.
1. Подключите поисковый индекс к ассистенту. Вы можете включить отображение [ссылок на источники](./files.md#citations), если файлы поискового индекса не удалены.
1. Если необходимо, [включите](../../operations/assistant/rephraser.md) модель перефразирования как дополнительный слой ассистента. 

## Примеры использования {#examples}

* [{#T}](../../operations/assistant/create.md)
* [{#T}](../../operations/assistant/create-with-searchindex.md)
* [{#T}](../../operations/assistant/request-chunked-response.md)
* [{#T}](../../tutorials/pdf-searchindex-ai-assistant.md)
* [{#T}](../../operations/assistant/create-with-labels.md)
* [{#T}](../../operations/assistant/rephraser.md)