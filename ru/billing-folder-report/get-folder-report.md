# Получение детализации расходов по каталогам

Получение детализации по каталогам работает в тестовом режиме.

## Перед началом

Если у вас еще нет разделения на каталоги, вы можете создать каталог по [инструкции](https://cloud.yandex.ru/docs/resource-manager/operations/folder/create). В названии каталога рекомендуем указывать имя проекта или клиента, который использует этот каталог.

## Получить детализацию расходов

Чтобы получать детализацию расходов по каталогам:

1. [Создайте бакет](https://cloud.yandex.ru/docs/storage/operations/buckets/create) в сервисе {{ objstorage-name }}. В этом бакете {{ yandex-cloud }} будет сохранять файлы с детализацией.

    {% note alert %}

    Не делайте бакет публичным, иначе любой сможет скачать вашу детализацию по ссылке на бакет.

    {% endnote %}

2. Откройте бакет в консоли управления и скопируйте ссылку на него из адресной строки. Ссылка на бакет имеет формат:

    ```
    https://console.cloud.yandex.ru/folders/<FOLDER-ID/storage/bucket/<BUCKET-NAME>
    ```
3. Полученную ссылку отправьте на почту вашему менеджеру или [службе поддержки](https://console.cloud.yandex.ru/support/create-ticket) с просьбой включить детализацию биллинга по каталогам. В запросе укажите, на каком языке вы хотите видеть названия продуктов.
4. Когда ваш бакет активируют, там будут сохраняться CSV-файлы с детализацией, которые вы сможете забрать. Менеджер сообщит о том, что бакет активирован.

    Каждый день в бакете будет создаваться новый файл с детализацией. В имени файла указывается дата, за которую собрана детализация. Файл перезаписывается каждый час, дополняясь новыми данными.

{% note tip %}

Файлы с детализацией из бакета автоматически не удаляются, но вы можете настроить автоматическое удаление файлов. Подробнее читайте в разделе [Жизненный цикл объектов](https://cloud.yandex.ru/docs/storage/lifecycles/) (в терминах {{ objstorage-name }} файлы в бакете называются _объектами_).

{% endnote %}

## Формат файла с детализацией расходов

Выгружаемый файл с детализацией — это таблица в формате CSV (столбцы разделены запятой). Каждая строка отражает потребление продукта за день для указанного каталога.

Таблица содержит следующие столбцы:

* `billing_account_id` — идентификатор [платежного аккаунта](https://cloud.yandex.ru/docs/billing/concepts/billing-account).
* `cloud_id` — идентификатор [облака](https://cloud.yandex.ru/docs/resource-manager/concepts/resources-hierarchy#cloud), для которого собрана детализация.
* `service_id` — идентификатор сервиса, которому принадлежит потребленный продукт.
* `service_name` — имя сервиса, которому принадлежит потребленный продукт.
* `sku_id` — идентификатор потребленного продукта.
* `sku_name` — имя продукта.
* `date` — дата, за которую начислена стоимость потребления.
* `pricing_quantity` — количество потребленных единиц продукта. Десятичный разделитель — точка.
* `cost` — общая стоимость потребления. Десятичный разделитель — точка.
* `credit` — скидка. Десятичный разделитель — точка.
* `created_at` — дата и время, в которое начислена указанная стоимость потребления. В формате [Unix Timestamp](https://www.unixtimestamp.com).
* `label.system_labels.folder_id` — идентификатор каталога.
* `folder_name` — имя каталога на момент выгрузки детализации.
* `exported_at` — дата и время добавления строки в файл детализации.

#### См. также

* [Посмотреть детализацию для облака](https://cloud.yandex.ru/docs/billing/operations/check-charges)
* [Документация биллинга в {{ yandex-cloud }}](https://cloud.yandex.ru/docs/billing/)