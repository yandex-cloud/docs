# Взаимосвязь ресурсов сервиса

Сервис {{ mes-full-name }} помогает разворачивать и поддерживать кластеры серверов {{ ES }} в инфраструктуре Яндекс.Облака.

{{ ES }} — это специализированная распределенная система хранения документов, с возможностью поиска и анализа информации, содержащийхся в этих документах.

Когда документ добавляется в {{ ES }}, он попадает в [индекс](indexing.md). Данные из проиндексированного документа становится доступны для [поиска и анализа](searching.md).

Каждый кластер {{ mes-name }} состоит из одного или нескольких хостов {{ ES }} с разными ролями:
- Выделенные хосты с ролью _Data node_.

  Хосты с этой ролью хранят один или несколько индексов, в которых находятся проиндексированные документы и обеспечивают обработку запросов на поиск и анализ данных. Чтобы обеспечить масштабируемость и отказоустойчивость индекса, настройте [шардирование и репликацию](scalability-and-resilience.md) для этого индекса.

  Для упрощения работы с индексами и поисковыми запросами на этих хостах установлена и настроена [Kibana](https://www.elastic.co/kibana/features), доступная через веб-интерфейс. Подробнее см. в разделе [{#T}](../operations/cluster-connect.md).

  В кластере должно быть не менее одного хоста с ролью _Data node_.

- Выделенные хосты с ролью _Master node_.

  Хосты с этой ролью отслеживают состояние кластера и управляют его конфигурацией, обеспечивая работоспособность всех компонентов {{ ES }}.
  
  При использовании выделенных хостов с ролью _Master node_ в кластер будет добавлено три таких хоста — изменить их количество нельзя. 
  
  Допускается не использовать такие хосты, тогда соответствующая роль будет поддерживаться хостами с ролью _Data Node_. Однако, рекомендуется не применять такой подход: присутствие выделенных хостов с ролью _Master node_ позволяет снизить нагрузку на хосты с ролью _Data node_ и повысить общую надежность кластера. 

Кластер из одного хоста отказоустойчивости не обеспечивает. Кластер из нескольких хостов автоматически обеспечивает отказоустойчивость для роли _Master node_; для обеспечения сохранности данных в таком кластере необходимо настроить [шардирование и репликацию](scalability-and-resilience.md) индексов.

Хосты кластера могут находиться в разных зонах доступности. [Подробнее о географии Облака](../../overview/concepts/geo-scope.md).

При создании кластера необходимо указывать:
- _Классы хостов_ — шаблон виртуальной машины, по которому будут развертываться хосты кластера. Список доступных классов хостов и их характеристики см. в разделе [{#T}](instance-types.md).
- _Роли хостов_ — _Data node_ или _Master node_.
- _Окружение_ — среду, в которой будет развертываться кластер:
  - `PRODUCTION` — для стабильных версий ваших приложений.
  - `PRESTABLE` — для тестирования, в том числе самого сервиса {{ mes-name }}. В Prestable-окружении раньше появляются новая функциональность, улучшения и исправления ошибок. При этом не все обновления обеспечивают обратную совместимость.

Созданный в каталоге кластер {{ ES }} доступен по сети для всех виртуальных машин, подключенных к этой же облачной сети. [Подробнее о работе сети](../../vpc/).

{% include [monitoring-access](../../_includes/mdb/monitoring-access.md) %}