# Мониторинг состояния кластера и хостов

Вы можете отслеживать состояние кластера {{ mes-name }} и отдельных его хостов с помощью инструментов мониторинга в консоли управления. Эти инструменты предоставляют диагностическую информацию в виде графиков.

{% include [monitoring-provides](../../_includes/mdb/monitoring-provides.md) %}

Новые данные для графиков поступают каждые {{ graph-update }}.

{% include [note-monitoring-auto-units](../../_includes/mdb/note-monitoring-auto-units.md) %}

## Мониторинг состояния кластера {#monitoring-cluster}

Для просмотра детальной информации о состоянии кластера {{ mes-name }}:

1. Перейдите на страницу каталога и выберите сервис **{{ mes-name }}**.
1. Нажмите на имя нужного кластера и выберите вкладку **Мониторинг**.

На странице отображаются следующие графики:

* **Active shards** — количество активных [первичных шардов](../concepts/scalability-and-resilience.md) и общее количество активных шардов в кластере.
* **Deletion rate** — количество операций удаления в секунду, для каждого хоста.
* **Disk space usage percent** — использование дискового пространства, для каждого хоста (в процентах).
* **Flushes** — количество операций сохранения лога транзакций (flush), для каждого хоста.

* **Health status** — уровень работоспособности и техническое состояние кластера:

    * 0 — <q>красный</q>: неработоспособное или частично работоспособное состояние. Хотя бы один из первичных шардов недоступен. Если кластер отвечает на запросы, результаты поиска в ответах будут неполными.
    * 1 — <q>желтый</q>: работоспособное состояние. Нет доступа хотя бы к одному из шардов-реплик. Результаты поиска в ответах кластера полные, но если появятся еще недоступные шарды, работоспособность кластера нарушится.
    * 2 — <q>зеленый</q>: исправное состояние. Все шарды кластера доступны.

* **Indexing rate** — интенсивность индексирования, для каждого хоста (операций/с).
* **JVM heap** — использование памяти кучи JVM, для каждого хоста (в байтах).
* **JVM heap pressure** — использование пула долгоживущих объектов JVM, для каждого хоста (в процентах).
* **JVM old collections** — количество циклов сборки мусора в пуле долгоживущих объектов JVM, для каждого хоста.
* **JVM young collections** — количество циклов сборки мусора в пуле новых объектов JVM, для каждого хоста.
* **Merges** — количество слияний сегментов индексов, для каждого хоста.
* **Nodes** — количество хостов с [ролью `Data node`](../concepts/hosts-roles.md) и общее количество хостов в кластере.
* **Open file descriptors** — количество открытых файловых дескрипторов, для каждого хоста.
* **Other shards** — количество неактивных шардов в каждом из состояний:

    * Delayed unassigned — назначение хоста отложено;
    * Unassigned — нет назначенного хоста;
    * Relocating — перемещаются на другой хост;
    * Initializing — инициализируются.

* **Process CPU** — загрузка процессорных ядер, которую создает процесс JVM {{ ES }}, для каждого хоста.
* **Query cache** — количество запросов в кеше, для каждого хоста.
* **Read bytes** — скорость чтения с диска, для каждого хоста (байт/с).
* **Read operations** — интенсивность чтения с диска, для каждого хоста (операций/с).
* **Refreshes** — количество операций обновления сегментов индексов (refresh), для каждого хоста.
* **Search queries** — количество запросов поиска в секунду, для каждого хоста.
* **Segments** — количество сегментов индексов, для каждого хоста.
* **Store size** — размер хранилища индексов на диске (в байтах).
* **Write bytes** — скорость записи на диск, для каждого хоста (байт/с).
* **Write operations** — интенсивность записи на диск, для каждого хоста (операций/с).

## Мониторинг состояния хостов {#monitoring-hosts}

Для просмотра детальной информации о состоянии отдельных хостов {{ mes-name }}:

1. Перейдите на страницу каталога и выберите сервис **{{mes-name }}**.
1. Нажмите на имя нужного кластера и выберите вкладку **Хосты** → **Мониторинги**.
1. Выберите нужный хост из выпадающего списка.

На этой странице выводятся графики, показывающие нагрузку на отдельный хост кластера:

* **CPU** — загрузка процессорных ядер. При повышении нагрузки значение **Idle** уменьшается.
* **Disk Bytes** — скорость дисковых операций (байт/с).
* **Disk IOPS** — интенсивность дисковых операций (операций/с).
* **Memory** — использование оперативной памяти (в байтах). При высоких нагрузках значение параметра Free уменьшается, а значения остальных — растут.
* **Network Bytes** — скорость обмена данными по сети (байт/с).
* **Network Packets** — интенсивность обмена данными по сети (пакетов/с).
