# Просмотр логов кластера

{{ mes-name }} позволяет получить логи кластера для просмотра и изучения.

Вы можете получить:

* [Простой фрагмент лога](#get-log).
* [Поток логов](#get-log-stream) от сервера в кластере (поддерживается семантика команды `tail -f`).

## Получить лог кластера {#get-log}

{% list tabs %}

* Консоль управления

  1. Перейдите на страницу каталога и выберите сервис **{{ mes-name }}**.
  1. Нажмите на имя нужного кластера, затем выберите вкладку **Логи**.
  1. Укажите период времени, за который нужно отобразить логи: введите его вручную или выберите в календаре, нажав на поле ввода дат.
  1. Выберите компонент `ELASTICSEARCH` из выпадающего списка рядом с полем ввода дат.

  Будет отображен список записей в логе за выбранный период времени.
  Чтобы посмотреть подробную информацию о событии, связанном с записью, нажмите на интересующую запись в логе.

  Если записей слишком много и отображается только часть из них, нажмите на ссылку **Загрузить еще** в конце списка.

{% if audience != "draft" %}

* CLI

    {% include [cli-install](../../_includes/cli-install.md) %}

    {% include [default-catalogue](../../_includes/default-catalogue.md) %}

    1. Просмотрите описание команды CLI для просмотра логов кластера:

    ```bash
    {{ yc-mdb-es }} cluster list-logs --help
    ```

    1. Запустите команду получения логов кластера (в примере приведены не все параметры):

    ```bash
    {{ yc-mdb-es }} cluster list-logs <идентификатор или имя кластера> \
       --limit <ограничение количества записей> \
       --columns <список колонок для вывода информации> \
       --filter <настройки фильтрации записей> \
       --since <левая граница временного диапазона> \
       --until <правая граница временного диапазона>
    ```

    Имя и идентификатор кластера можно запросить со [списком кластеров в каталоге](cluster-list.md#list-clusters).

{% endif %}

* API

  Воспользуйтесь методом API `listLogs`: передайте значение идентификатора требуемого кластера в параметре `clusterId` запроса.

  Чтобы узнать идентификатор кластера, [получите список кластеров в каталоге](cluster-list.md#list-clusters).

{% endlist %}

## Получить поток логов кластера {#get-log-stream}

Этот способ работы с логами отличается от [получения простого фрагмента лога](#get-log) тем, что сервер может досылать логи по мере их появления. Это поведение эквивалентно семантике команды `tail -f` для работы с логами.

{% list tabs %}

{% if audience != "draft" %}

* CLI

    {% include [cli-install](../../_includes/cli-install.md) %}

    {% include [default-catalogue](../../_includes/default-catalogue.md) %}

    Для просмотра логов кластера по мере их поступления выполните команду:

    ```bash
    {{ yc-mdb-es }} cluster list-logs <идентификатор или имя кластера> --follow
    ```

    Имя и идентификатор кластера можно запросить со [списком кластеров в каталоге](cluster-list.md#list-clusters).

{% endif %}

* API

  Воспользуйтесь методом API `streamLogs`: передайте значение идентификатора требуемого кластера в параметре `clusterId` запроса.

{% endlist %}
