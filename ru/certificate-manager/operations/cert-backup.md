# Резервное копирование

## Сохранение сертификата {#backup}

Чтобы сохранить сертификат:

1. Получите идентификатор сертификата.

   {% list tabs %}

   - Консоль управления

      1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором находится сертификат.
      1. В списке сервисов выберите {{ certificate-manager-name }}.
      1. Скопируйте содержимое поля **Идентификатор** для сохраняемого сертификата.

   - CLI

      {% include [cli-install](../../_includes/cli-install.md) %}

      {% include [default-catalogue](../../_includes/default-catalogue.md) %}

      1. Посмотрите описание команды CLI для получения списка сертификатов:

         ```bash
         yc cm certificate list --help
         ```

      1. Выполните команду:

         ```bash
         yc cm certificate list
         ```

   {% endlist %}

1. Получите содержимое сертификата.

   {% list tabs %}

   - CLI

      {% include [cli-install](../../_includes/cli-install.md) %}

      {% include [default-catalogue](../../_includes/default-catalogue.md) %}

      1. Посмотрите описание команды CLI для получения содержимого сертификатов:

         ```bash
         yc cm certificate content --help
         ```

      1. Выполните команду:

         ```bash
         yc cm certificate content \
         --id <идентификатор сертификата> \
         --chain <путь к файлу для сохранения цепочки> \
         --key <путь к файлу для сохранения ключа>
         ...
         ```

   {% endlist %}

   Поместите полученные файлы в надежное долговременное хранилище.

1. Повторите процедуру для каждого сертификата, резервную копию которого необходимо создать.

## Восстановление сертификата {#restore}

{% note info %}

Нельзя восстановить сертификат с истекшим сроком действия.

{% endnote %}

Чтобы восстановить пользовательский сертификат из файлов с цепочкой сертификатов и ключом:

1. Подготовьте файлы с содержимым сертификата.
1. Импортируйте сертификат.

   {% list tabs %}

   - Консоль управления

      1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором будет восстановлен сертификат.
      1. В списке сервисов выберите **{{ certificate-manager-name }}**.
      1. Нажмите кнопку **Добавить сертификат**.
      1. В открывшемся меню выберите **Пользовательский сертификат**.
      1. В открывшемся окне в поле **Имя** введите имя сертификата.
      1. (опционально) В поле **Описание** введите описание сертификата.
      1. В поле **Цепочка промежуточных сертификатов** нажмите кнопку **Добавить цепочку**.
         1. Выберите способ добавления: **Файл**.
         1. Нажмите кнопку **Выбрать файл** и укажите файл цепочки сертификатов.
         1. Нажмите кнопку **Добавить**.
      1. В поле **Приватный ключ** нажмите кнопку **Добавить приватный ключ**.
         1. Выберите способ добавления: **Файл** или **Текст**.
         1. Нажмите кнопку **Выбрать файл** и укажите файл приватного ключа.
         1. Нажмите кнопку **Добавить**.
      1. Нажмите кнопку **Создать**.

   - CLI

      {% include [cli-install](../../_includes/cli-install.md) %}

      {% include [default-catalogue](../../_includes/default-catalogue.md) %}

      1. Посмотрите описание команды:

         ```bash
         yc cm certificate create --help
         ```

      1. Выполните команду:

         ```bash
         yc cm certificate create \
         --name <имя сертификата> \
         --chain <путь к файлу цепочки сертификатов> \
         --key <путь к файлу закрытого ключа>
         ...
         ```

   {% endlist %}

   Идентификатор восстановленного сертификата будет отличаться от идентификатора, который был у сертификата в момент сохранения.

1. Повторите процедуру для каждого сертификата, содержимое которого надо восстановить.

Сохраненный [сертификат от Let's Encrypt<sup>®</sup>](../concepts/managed-certificate.md) после восстановления станет [пользовательским](../concepts/imported-certificate.md). Для [обновления](../operations/import/cert-update.md) такого сертификата необходимо загружать новую версию самостоятельно.

#### См. также {#see-also}

- [{#T}](import/cert-create.md).
