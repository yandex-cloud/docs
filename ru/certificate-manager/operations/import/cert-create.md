# Создать пользовательский сертификат

Создание пользовательского сертификата рассмотрим на примере самоподписанного сертификата. Требования к пользовательскому сертификату приведены на странице [{#T}](../../concepts/imported-certificate.md).

## Создание файла самоподписанного сертификата {#create-file}

Чтобы создать самоподписанный сертификат с использованием библиотеки `OpenSSL`, выполните команду:

{% list tabs %}

- Bash

  ```bash
  openssl req -x509 -newkey rsa:4096 -nodes \
    -keyout key.pem \
    -out cert.pem \
    -days 365 \
    -subj '/CN=example.com'
  ```

- PowerShell

  ```PowerShell
  openssl req -x509 -newkey rsa:4096 -nodes `
    -keyout key.pem `
    -out cert.pem `
    -days 365 `
    -subj '/CN=example.com'
  ```

{% endlist %}

Где:
* `-x509` — результатом работы команды будет файл сертификата.
* `-newkey` — будет создан новый файл приватного ключа.
* `rsa:4096` — алгоритм и длина ключа.
* `-nodes` — не шифровать файл приватного ключа.
* `-out` — имя файла сертификата.
* `-days` — срок действия сертификата.
* `-subj` — значение Common Name владельца сертификата.

Запущенная с указанными параметрами команда `req` выпустит самоподписанный сертификат, для которого она также сгенерирует приватный ключ.

## Создание пользовательского самоподписанного сертификата {#create-certificate}

Чтобы создать пользовательский сертификат:

{% list tabs %}

- Консоль управления

  1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором будет создан пользовательский сертификат.
  1. В списке сервисов выберите **{{ certificate-manager-name }}**.
  1. Нажмите кнопку **Добавить сертификат**.
  1. В открывшемся меню выберите **Пользовательский сертификат**.
  1. В открывшемся окне в поле **Имя** введите имя пользовательского сертификата.
  1. (опционально) В поле **Описание** введите описание пользовательского сертификата.
  1. В поле **Сертификат** нажмите кнопку **Добавить сертификат**.
     1. Выберите способ добавления **Файл**.
     1. Нажмите кнопку **Выбрать файл**.
        1. В открывшемся окне выберите файл самоподписанного сертификата`cert.pem`.
     1. Нажмите кнопку **Добавить**.
  1. В поле **Приватный ключ** нажмите кнопку **Добавить приватный ключ**.
     1. Выберите способ добавления **Файл**.
     1. Нажмите кнопку **Выбрать файл**.
        1. В открывшемся окне выберите файл приватного ключа `key.pem`.
     1. Нажмите кнопку **Добавить**.
  1. Нажмите кнопку **Создать**.

- CLI

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды:

     ```bash
     yc certificate-manager certificate create --help
     ```

  1. Выполните команду:

     ```bash
     yc certificate-manager certificate create \
       --name mycert \
       --chain mycert.pem \
       --key mykey.pem
     ```

     Где:
     * `--name` — имя сертификата.
     * `--chain` — путь к файлу цепочки сертификатов.
     * `--key` — путь к файлу закрытого ключа сертификата.

     Результат выполнения команды:

     ```bash
     id: fpqmg47avvimp7rvmp30
     folder_id: b1g7gvsi89m34qmcm3ke
     created_at: "2020-09-15T06:54:44.916325Z"
     ...
     issued_at: "2020-09-15T06:54:44.916325Z"
     not_after: "2021-09-15T06:48:26Z"
     not_before: "2020-09-15T06:48:26Z"
     ```

- API

  Чтобы создать сертификат, воспользуйтесь методом REST API [create](../../api-ref/Certificate/create.md) для ресурса [Certificate](../../api-ref/Certificate/) или вызовом gRPC API [CertificateService/Create](../../api-ref/grpc/certificate_service.md#Create).

{% endlist %}

В списке сертификатов появится новый сертификат со статусом `Issued`.