# Сертификат от Let's Encrypt

С помощью {{ certificate-manager-name }} вы можете создавать TLS-сертификаты от Let's Encrypt. Вы запрашиваете выпуск сертификата и проходите процедуру проверки прав на домены, после этого {{ certificate-manager-name }} управляет этим сертификатом, взаимодействуя с Let's Encrypt вместо вас.

Let's Encrypt предоставляет Domain Validation TLS-сертификаты со сроком действия 90 дней. Если вам нужны Organization Validation или Extended Validation сертификаты, воспользуйтесь сторонним центром сертификации для получения сертификата, и после этого загрузите его в {{ certificate-manager-name }}. Подробнее об этом читайте в разделе [Пользовательский сертификат](imported-certificate.md). 

Сертификат, созданный с помощью {{ certificate-manager-name }}, можно использовать только в [указанных](services.md) сервисах {{ yandex-cloud }}.

## Получение сертификата {#request}

1. Укажите список доменов, для которых вам необходимо выпустить сертификат.
1. Выберите тип проверки прав на домен: `HTTP` или `DNS`.

    Статус сертификата после создания запроса — `Validating`. 
1. Для выпуска сертификата пройдите процедуру проверки прав на домены, которые вы указали ранее.

    В зависимости от выбранного типа проверки, самостоятельно разместите файл на веб-сервере либо добавьте ресурсную запись `TXT` или `CNAME` с нужным значением в DNS-сервисе. Подробнее о типах проверки и способах их прохождения читайте в разделе [{#T}](challenges.md).

    {% include [checking-domain-rights-cname](../../_includes/certificate-manager/checking-domain-rights-cname.md) %}

1. После успешного прохождения проверки прав на домены, сертификат будет выпущен, и перейдет в статус `Issued`. Вы можете использовать сертификат в сервисах, интегрированных с {{ certificate-manager-name }}.

{% note warning %}

Если за одну неделю не удастся успешно пройти процедуру проверки прав на домены, то сертификат не будет выпущен, и его статус изменится на `Invalid`.  

{% endnote %}

## Обновление сертификата {#renew}

{% note warning %}

Обновление сертификата требует от вас действий, описанных ниже. Внимательно следите за временем жизни созданных сертификатов, чтобы своевременно обновлять их.

{% endnote %}

1. {{ certificate-manager-name }} запускает процедуру обновления сертификата за 30 дней до окончания срока действия сертификата.
    
    Статус сертификата после запуска процедуры обновления — `Renewing`.
1. Пройдите процедуру проверки прав на домены.

    В зависимости от выбранного типа проверки обновите файл на веб-сервере или обновите `TXT`-запись в DNS-сервисе на новое значение. Подробнее читайте в разделе [Проверка прав на домен](challenges.md).
    
    {% note info %}
    
    Если сертификат используется в [статическом веб-сайте в {{ objstorage-name }}](../../tutorials/web/static/index.md) и не содержит [доменов с маской](https://en.wikipedia.org/wiki/Wildcard_certificate),
    то процедура проверки прав может быть пройдена автоматически. Подробнее в разделе [Автоматическая проверка прав](challenges.md#auto). 
    
    {% endnote %}
    
1. После успешного прохождения проверки прав на домены, сертификат будет обновлен, и перейдет в статус `Issued`. Все ресурсы, использующие сертификат, получат его новую версию. 

Сертификат не будет обновлен, если процедура проверки прав на домены завершилась ошибкой хотя бы для одного домена. При этом статус сертификата изменится на `Renewal_failed` и он будет продолжать действовать до окончания срока действия.
Спустя некоторое время после неудачного обновления будет предпринята новая попытка обновить сертификат. 
 
Чтобы избежать проблем с доступом к ресурсам, которые используют сертификат в статусе `Renewal_failed`:
1. До истечения срока действия сертификата выпустите и [добавьте новый сертификат от Let's Encrypt](../operations/managed/cert-create.md).
1. [Пройдите процедуру проверки прав на домены](../operations/managed/cert-validate.md).
1. Используйте новый сертификат в ваших ресурсах.

#### См. также {#see-also}

- [Проверка прав на домен](challenges.md)
- [Интегрированные с {{ certificate-manager-name }} сервисы](services.md)				