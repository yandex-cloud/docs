openapi: "3.0"
info:
  title: Yandex KMS API
  description: Методы справочника API сгруппированы по ресурсам. Чтобы выполнить операцию
    над ресурсом, отправьте HTTP-запрос к соответствующему URL. Подробнее об архитектуре
    API Яндекс.Облака, см. [Концепции API Яндекс.Облака](/docs/api-design-guide/).
  version: v1
  x-y-docUri: api-ref
  x-y-baseUrl: https://kms.api.cloud.yandex.net
paths:
  /kms/v1/keys/{keyId}:encrypt:
    post:
      tags:
      - SymmetricCrypto
      summary: Шифрует заданный текст с помощью указанного ключа.
      operationId: SymmetricCryptoEncrypt
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа KMS, который следует использовать для шифрования.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: versionId
        in: query
        description: |-
          Идентификатор версии ключа, которую следует использовать для шифрования текста. По
          умолчанию используется основная версия, если версия не указана явно.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      - name: aadContext
        in: query
        description: |-
          Дополнительные аутентификационные данные, если они необходимы. Если данные указаны,
          то их потребуется передать для расшифровки с помощью SymmetricDecryptRequest.

          Максимальная длина строки в символах — 8192.
        schema:
          type: string
          format: byte
      - name: plaintext
        in: query
        description: |-
          Обязательное поле.
          Текст, который следует зашифровать.

          Максимальная длина строки в символах — 32768.
        schema:
          type: string
          format: byte
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SymmetricEncryptResponse'
      x-y-navtitle: encrypt
  /kms/v1/keys/{keyId}:decrypt:
    post:
      tags:
      - SymmetricCrypto
      summary: Расшифровывает указанный шифртекст с помощью указанного ключа.
      operationId: SymmetricCryptoDecrypt
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа KMS, который следует использовать для дешифрования.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: aadContext
        in: query
        description: |-
          Дополнительные аутентификационные данные, должны быть такими же, как они были
          переданы в соответствующем SymmetricEncryptRequest.

          Максимальная длина строки в символах — 8192.
        schema:
          type: string
          format: byte
      - name: ciphertext
        in: query
        description: |-
          Обязательное поле.
          Зашифрованный текст, который следует дешифровать.
        schema:
          type: string
          format: byte
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SymmetricDecryptResponse'
      x-y-navtitle: decrypt
  /kms/v1/keys/{keyId}:reEncrypt:
    post:
      tags:
      - SymmetricCrypto
      summary: Перешифрует ранее зашифрованный текст с помощью указанного ключа.
      operationId: SymmetricCryptoReEncrypt
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор нового ключа, который следует использовать для шифрования.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: versionId
        in: query
        description: |-
          Идентификатор версии нового ключа, которую следует использовать для шифрования. По
          умолчанию используется основная версия, если версия не указана явно.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      - name: aadContext
        in: query
        description: |-
          Дополнительные аутентификационные данные, которые должны быть переданы при
          дешифровании.

          Максимальная длина строки в символах — 8192.
        schema:
          type: string
          format: byte
      - name: sourceKeyId
        in: query
        description: |-
          Обязательное поле.
          Идентификатор ключа, которым в данный момент зашифрован текст. Может быть таким же,
          как и новый ключ.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      - name: sourceAadContext
        in: query
        description: |-
          Дополнительные аутентификационные данные, переданные с первоначальным запросом
          шифрования.

          Максимальная длина строки в символах — 8192.
        schema:
          type: string
          format: byte
      - name: ciphertext
        in: query
        description: |-
          Обязательное поле.
          Зашифрованный текст для повторного шифрования.
        schema:
          type: string
          format: byte
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SymmetricReEncryptResponse'
      x-y-navtitle: reEncrypt
  /kms/v1/keys/{keyId}:generateDataKey:
    post:
      tags:
      - SymmetricCrypto
      summary: |-
        Создает новый симметричный ключ шифрования данных и возвращает этот ключ данных в
        виде текста, зашифрованного с помощью указанного ключа KMS.
      operationId: SymmetricCryptoGenerateDataKey
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа KMS, с помощью которого должен быть зашифрован сгенерированный
          ключ шифрования данных.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: versionId
        in: query
        description: |-
          Идентификатор версии ключа для шифрования ключа шифрования данных. По умолчанию
          используется основная версия, если версия не указана явно.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      - name: aadContext
        in: query
        description: |-
          Дополнительные аутентификационные данные, если они необходимы. Если данные указаны,
          то их потребуется передать для расшифровки с помощью SymmetricDecryptRequest.

          Максимальная длина строки в символах — 8192.
        schema:
          type: string
          format: byte
      - name: dataKeySpec
        in: query
        description: Алгоритм шифрования и длина для ключа шифрования данных.
        schema:
          $ref: '#/components/schemas/SymmetricAlgorithm'
      - name: skipPlaintext
        in: query
        description: |-
          Если `true`, метод не вернет ключ данных в виде открытого текста. Значение по умолчанию
          `false`.
        schema:
          type: boolean
          format: boolean
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GenerateDataKeyResponse'
      x-y-navtitle: generateDataKey
  /kms/v1/keys:
    get:
      tags:
      - SymmetricKey
      summary: Возвращает список симметричных ключей в указанном каталоге.
      operationId: SymmetricKeyList
      parameters:
      - name: folderId
        in: query
        description: |-
          Обязательное поле.
          Идентификатор каталога для получения списка симметричных ключей.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      - name: pageSize
        in: query
        description: |-
          Максимальное количество результатов на странице ответа на запрос. Если количество
          результатов больше чем [pageSize](/docs/kms/api-ref/SymmetricKey/list#query_params) , сервис вернет значение [nextPageToken](/docs/kms/api-ref/SymmetricKey/list#responses),
          которое можно использовать для получения следующей страницы. Значение по умолчанию:
          100.

          Максимальное значение — 1000.
        schema:
          type: string
          format: int64
      - name: pageToken
        in: query
        description: |-
          Токен страницы. Установите значение [pageToken](/docs/kms/api-ref/SymmetricKey/list#query_params) равным значению поля
          [nextPageToken](/docs/kms/api-ref/SymmetricKey/list#responses) предыдущего запроса, чтобы получить следующую страницу
          результатов.

          Максимальная длина строки в символах — 100.
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSymmetricKeysResponse'
      x-y-navtitle: list
    post:
      tags:
      - SymmetricKey
      summary: Создает симметричный ключ в указанном каталоге.
      operationId: SymmetricKeyCreate
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSymmetricKeyRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: create
      x-y-operation-metadata:
        $ref: '#/components/schemas/CreateSymmetricKeyMetadata'
      x-y-operation-response: '[SymmetricKey](/docs/kms/api-ref/SymmetricKey#representation)'
  /kms/v1/keys/{keyId}:
    get:
      tags:
      - SymmetricKey
      summary: Возвращает указанный симметричный ключ.
      description: |-
        Чтобы получить список доступных симметричных ключей, используйте запрос
        [list](/docs/kms/api-ref/SymmetricKey/list).
      operationId: SymmetricKeyGet
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор возвращаемого симметричного ключа. Чтобы получить идентификатор
          симметричного ключа используйте запрос [list](/docs/kms/api-ref/SymmetricKey/list).

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SymmetricKey'
      x-y-navtitle: get
    delete:
      tags:
      - SymmetricKey
      summary: |-
        Удаляет указанный симметричный ключ. Это действие также автоматически планирует
        уничтожение всех версий ключа через 72 часа.
      operationId: SymmetricKeyDelete
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа, который следует удалить.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: delete
      x-y-operation-metadata:
        $ref: '#/components/schemas/DeleteSymmetricKeyMetadata'
      x-y-operation-response: '[SymmetricKey](/docs/kms/api-ref/SymmetricKey#representation)'
    patch:
      tags:
      - SymmetricKey
      summary: Изменяет указанный симметричный ключ.
      operationId: SymmetricKeyUpdate
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор симметричного ключа, который следует изменить. Чтобы получить
          идентификатор симметричного ключа используйте запрос [list](/docs/kms/api-ref/SymmetricKey/list).

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSymmetricKeyRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: update
      x-y-operation-metadata:
        $ref: '#/components/schemas/UpdateSymmetricKeyMetadata'
      x-y-operation-response: '[SymmetricKey](/docs/kms/api-ref/SymmetricKey#representation)'
  /kms/v1/keys/{keyId}/versions:
    get:
      tags:
      - SymmetricKey
      summary: Возвращает список версий, принадлежащих указанному симметричному ключу.
      operationId: SymmetricKeyListVersions
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор симметричного ключа, для которого нужно вернуть список версий.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: pageSize
        in: query
        description: |-
          Максимальное количество результатов на странице ответа на запрос. Если количество
          результатов больше чем [pageSize](/docs/kms/api-ref/SymmetricKey/listVersions#query_params) , сервис вернет значение [nextPageToken](/docs/kms/api-ref/SymmetricKey/listVersions#responses),
          которое можно использовать для получения следующей страницы. Значение по умолчанию:
          100.

          Максимальное значение — 1000.
        schema:
          type: string
          format: int64
      - name: pageToken
        in: query
        description: |-
          Токен страницы. Установите значение [pageToken](/docs/kms/api-ref/SymmetricKey/listVersions#query_params) равным значению поля
          [nextPageToken](/docs/kms/api-ref/SymmetricKey/listVersions#responses) предыдущего запроса, чтобы получить следующую страницу
          результатов.

          Максимальная длина строки в символах — 100.
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSymmetricKeyVersionsResponse'
      x-y-navtitle: listVersions
  /kms/v1/keys/{keyId}:setPrimaryVersion:
    post:
      tags:
      - SymmetricKey
      summary: |-
        Задает основную версию для указанного ключа. Основная версия используется по
        умолчанию для всех операций шифрования / дешифрования, в которых не указан
        идентификатор версии.
      operationId: SymmetricKeySetPrimaryVersion
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа, для которого нужно установить основную версию.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: versionId
        in: query
        description: |-
          Обязательное поле.
          Идентификатор версии, которая должна стать основной для указанного ключа.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: setPrimaryVersion
      x-y-operation-metadata:
        $ref: '#/components/schemas/SetPrimarySymmetricKeyVersionMetadata'
      x-y-operation-response: '[SymmetricKey](/docs/kms/api-ref/SymmetricKey#representation)'
  /kms/v1/keys/{keyId}:scheduleVersionDestruction:
    post:
      tags:
      - SymmetricKey
      summary: Планирует уничтожение указанной версии ключа.
      description: |-
        Запланированное уничтожение может быть отменено с помощью метода
        [cancelVersionDestruction](/docs/kms/api-ref/SymmetricKey/cancelVersionDestruction).
      operationId: SymmetricKeyScheduleVersionDestruction
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа, для которого следует запланировать уничтожение версии.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: versionId
        in: query
        description: |-
          Обязательное поле.
          Идентификатор версии, которую следует уничтожить.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      - name: pendingPeriod
        in: query
        description: |-
          Интервал времени между запросом на уничтожение версии и ее фактическим
          уничтожением. Значение по умолчанию: 7 дней.
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: scheduleVersionDestruction
      x-y-operation-metadata:
        $ref: '#/components/schemas/ScheduleSymmetricKeyVersionDestructionMetadata'
      x-y-operation-response: SymmetricKeyVersion
  /kms/v1/keys/{keyId}:cancelVersionDestruction:
    post:
      tags:
      - SymmetricKey
      summary: |-
        Отменяет ранее запланированное уничтожение версии, если версия еще не была
        уничтожена.
      operationId: SymmetricKeyCancelVersionDestruction
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа, для которого следует отменить уничтожение версии.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: versionId
        in: query
        description: |-
          Обязательное поле.
          Идентификатор версии, запланированное уничтожение которой должно быть отменено.

          Максимальная длина строки в символах — 50.
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: cancelVersionDestruction
      x-y-operation-metadata:
        $ref: '#/components/schemas/CancelSymmetricKeyVersionDestructionMetadata'
      x-y-operation-response: SymmetricKeyVersion
  /kms/v1/keys/{keyId}:rotate:
    post:
      tags:
      - SymmetricKey
      summary: 'Ротирует указанный ключ: создает новую версию ключа и делает ее основной.'
      operationId: SymmetricKeyRotate
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа, который следует ротировать.

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Operation'
      x-y-navtitle: rotate
      x-y-operation-metadata:
        $ref: '#/components/schemas/RotateSymmetricKeyMetadata'
      x-y-operation-response: '[SymmetricKey](/docs/kms/api-ref/SymmetricKey#representation)'
  /kms/v1/keys/{keyId}/operations:
    get:
      tags:
      - SymmetricKey
      summary: Возвращет список операций для указанного симметричного ключа.
      operationId: SymmetricKeyListOperations
      parameters:
      - name: keyId
        in: path
        description: |-
          Обязательное поле.
          Идентификатор ключа, для которого следует вернуть список операций. Чтобы получить
          идентификатор ключа, используйте запрос [list](/docs/kms/api-ref/SymmetricKey/list).

          Максимальная длина строки в символах — 50.
        required: true
        schema:
          type: string
      - name: pageSize
        in: query
        description: |-
          Максимальное число возвращаемых результатов на странице. Если количество
          результатов больше чем [pageSize](/docs/kms/api-ref/SymmetricKey/listOperations#query_params) , сервис вернет значение [nextPageToken](/docs/kms/api-ref/SymmetricKey/listOperations#responses),
          которое можно использовать для получения следующей страницы. Значение по умолчанию:
          100.

          Максимальное значение — 1000.
        schema:
          type: string
          format: int64
      - name: pageToken
        in: query
        description: |-
          Токен страницы. Установите значение [pageToken](/docs/kms/api-ref/SymmetricKey/listOperations#query_params) равным значению поля
          [nextPageToken](/docs/kms/api-ref/SymmetricKey/listOperations#responses) предыдущего запроса, чтобы получить следующую страницу
          результатов.

          Максимальная длина строки в символах — 100.
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSymmetricKeyOperationsResponse'
      x-y-navtitle: listOperations
components:
  schemas:
    CancelSymmetricKeyVersionDestructionMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор ключа, уничтожение версии которого отменяется.
          type: string
        versionId:
          description: Идентификатор версии, запланированное уничтожение которой отменяется.
          type: string
    CreateSymmetricKeyMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор создаваемого ключа.
          type: string
        primaryVersionId:
          description: Идентификатор основной версии создаваемого ключа.
          type: string
    CreateSymmetricKeyRequest:
      type: object
      properties:
        folderId:
          description: |-
            Обязательное поле.
            Идентификатор каталога, в котором создается симметричный ключ KMS.

            Максимальная длина строки в символах — 50.
          type: string
        name:
          description: |-
            Обязательное поле.
            Имя симметричного ключа. Имя должно быть уникальным в каталоге.

            Максимальная длина строки в символах — 100.
          type: string
        description:
          description: |-
            Описание симметричного ключа.

            Максимальная длина строки в символах — 1024.
          type: string
        labels:
          description: |-
            Пользовательские метки для ключа в виде пар `key:value`. Максимум 64 на ключ. Например, @b ""
            project": "mvp"` или @b "" source": "dictionary"`.

            Не более 64 на ресурс.
            Максимальная длина строки в символах для каждого ключа — 63.
            Каждый ключ должен соответствовать регулярному выражению `` [a-z][-_0-9a-z]* ``.
            Максимальная длина строки в символах для каждого значения — 63.
            Каждое значение должно соответствовать регулярному выражению `` [-_0-9a-z]* ``.
          type: object
          additionalProperties:
            type: string
        defaultAlgorithm:
          $ref: '#/components/schemas/SymmetricAlgorithm_in_CreateSymmetricKeyRequest_defaultAlgorithm'
        rotationPeriod:
          description: |-
            Интервал между автоматическими ротациями. Чтобы отключить автоматическую ротацию,
            не включайте это поле в запрос на создание.
          type: string
    DeleteSymmetricKeyMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор удаляемого ключа.
          type: string
    FieldMask:
      description: |-
        Имена всех обновляемых полей, разделенные запятыми.
        Только значения указанных полей будут изменены. Остальные останутся нетронутыми.
        Если поле указано в параметре `` updateMask `` и в запросе не было отправлено значение для этого поля,
        значение поля будет сброшено на значение по умолчанию. Значение по умолчанию для большинства полей — null или 0.

        Если в запросе не передается `` updateMask ``, значения всех полей будут обновлены.
        Для полей, указанных в запросе, будут использованы переданные значения.
        Значения остальных полей будут сброшены на значения по умолчанию.
      type: string
    GenerateDataKeyResponse:
      type: object
      properties:
        keyId:
          description: |-
            Идентификатор ключа KMS, который использовался для шифрования созданного ключа
            шифрования данных.
          type: string
        versionId:
          description: Идентификатор версии ключа, которая использовалась для шифрования.
          type: string
        dataKeyPlaintext:
          description: |-
            Сгенерированный ключ шифрования данных в виде открытого текста. Это поле пусто, если
            параметр [skipPlaintext](/docs/kms/api-ref/SymmetricCrypto/generateDataKey#query_params) был установлен в `true`.
          type: string
          format: byte
        dataKeyCiphertext:
          description: Зашифрованный ключ шифрования данных.
          type: string
          format: byte
    ListSymmetricKeyOperationsResponse:
      type: object
      properties:
        operations:
          description: Список операций для указанного ключа.
          type: array
          items:
            $ref: '#/components/schemas/Operation'
        nextPageToken:
          description: |-
            Токен для получения следующей страницы результатов в ответе. Если количество
            результатов больше чем [pageSize](/docs/kms/api-ref/SymmetricKey/listOperations#query_params), используйте [nextPageToken](/docs/kms/api-ref/SymmetricKey/listOperations#responses) в качестве
            значения параметра [pageToken](/docs/kms/api-ref/SymmetricKey/listOperations#query_params) в следующем запросе списка ресурсов.
            Все последующие запросы будут получать свои значения [nextPageToken](/docs/kms/api-ref/SymmetricKey/listOperations#responses) для перебора страниц
            результатов.
          type: string
    ListSymmetricKeyVersionsResponse:
      type: object
      properties:
        keyVersions:
          description: Список версий для указанного симметричного ключа.
          type: array
          items:
            $ref: '#/components/schemas/SymmetricKeyVersion'
        nextPageToken:
          description: |-
            Токен для получения следующей страницы результатов в ответе. Если количество
            результатов больше чем [pageSize](/docs/kms/api-ref/SymmetricKey/listVersions#query_params), используйте [nextPageToken](/docs/kms/api-ref/SymmetricKey/listVersions#responses) в качестве
            значения параметра [pageToken](/docs/kms/api-ref/SymmetricKey/listVersions#query_params) в следующем запросе списка ресурсов. Все
            последующие запросы будут получать свои значения [nextPageToken](/docs/kms/api-ref/SymmetricKey/listVersions#responses) для перебора страниц
            результатов.
          type: string
    ListSymmetricKeysResponse:
      type: object
      properties:
        keys:
          description: Список симметричных ключей в указанном каталоге.
          type: array
          items:
            $ref: '#/components/schemas/SymmetricKey'
        nextPageToken:
          description: |-
            Токен для получения следующей страницы результатов в ответе. Если количество
            результатов больше чем [pageSize](/docs/kms/api-ref/SymmetricKey/list#query_params), используйте [nextPageToken](/docs/kms/api-ref/SymmetricKey/list#responses) в качестве
            значения параметра [pageToken](/docs/kms/api-ref/SymmetricKey/list#query_params) в следующем запросе списка ресурсов. Все
            последующие запросы будут получать свои значения [nextPageToken](/docs/kms/api-ref/SymmetricKey/list#responses) для перебора страниц
            результатов.
          type: string
    Operation:
      description: |-
        Ресурс Operation. Дополнительные сведения см. в разделе
        [Объект Operation](/docs/api-design-guide/concepts/operation).
      type: object
      allOf:
      - type: object
        properties:
          id:
            description: Идентификатор операции.
            type: string
          description:
            description: |-
              Описание операции. Длина описания должна быть от 0 до 256
              символов.
            type: string
          createdAt:
            description: |-
              Время создания ресурса в формате в
              [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).

              Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
            type: string
            format: date-time
          createdBy:
            description: |-
              Идентификатор пользователя или сервисного
              аккаунта, инициировавшего операцию.
            type: string
          modifiedAt:
            description: |-
              Время, когда ресурс Operation последний раз
              обновлялся. Значение в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).

              Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
            type: string
            format: date-time
          done:
            description: |-
              Если значение равно `false` — операция еще
              выполняется. Если `true` — операция завершена, и задано значение
              одного из полей `error` или `response`.
            type: boolean
            format: boolean
          metadata:
            description: |-
              Метаданные операции. Обычно в поле содержится
              идентификатор ресурса, над которым выполняется операция. Если
              метод возвращает ресурс Operation, в описании метода приведена
              структура соответствующего ему поля `metadata`.
            type: object
      - title: result
        type: object
        maxProperties: 1
        properties:
          error:
            $ref: '#/components/schemas/rpcStatus'
            description: Описание ошибки в случае сбоя или отмены операции.
          response:
            description: |-
              Результат операции в случае успешного завершения. Если
              исходный метод не возвращает никаких данных при успешном
              завершении, например метод Delete, поле содержит объект
              [google.protobuf.Empty](https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#empty). Если исходный метод — это стандартный метод Create
              / Update, поле содержит целевой ресурс операции. Если метод
              возвращает ресурс Operation, в описании метода приведена
              структура соответствующего ему поля `response`.
            type: object
    RotateSymmetricKeyMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор ротируемого ключа.
          type: string
        newPrimaryVersionId:
          description: Идентификатор версии, сгенерированной в результате ротации
            ключа.
          type: string
    ScheduleSymmetricKeyVersionDestructionMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор ключа, версия которого планируется к уничтожению.
          type: string
        versionId:
          description: Идентификатор версии, которую планируется уничтожить.
          type: string
        destroyAt:
          description: |-
            Время, когда версия будет уничтожена.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
    SetPrimarySymmetricKeyVersionMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор ключа, для которого изменяется основная версия.
          type: string
        versionId:
          description: Идентификатор версии, которая становится основной для ключа.
          type: string
    SymmetricAlgorithm:
      description: |-
        Поддерживаемые алгоритмы симметричного шифрования.

         - AES_128: Алгоритм AES со 128-битными ключами.
         - AES_192: Алгоритм AES с 192-битными ключами.
         - AES_256: Алгоритм AES с 256-битными ключами.
      type: string
      enum:
      - AES_128
      - AES_192
      - AES_256
    SymmetricDecryptResponse:
      type: object
      properties:
        keyId:
          description: Идентификатор ключа KMS, который использовался для дешифрования.
          type: string
        versionId:
          description: Идентификатор версии ключа, которая использовалась для дешифрования.
          type: string
        plaintext:
          description: Расшифрованный текст.
          type: string
          format: byte
    SymmetricEncryptResponse:
      type: object
      properties:
        keyId:
          description: |-
            Обязательное поле.
            Идентификатор ключа KMS, который использовался для шифрования.

            Максимальная длина строки в символах — 50.
          type: string
        versionId:
          description: |-
            Идентификатор версии ключа, которая использовалась для шифрования.

            Максимальная длина строки в символах — 50.
          type: string
        ciphertext:
          description: Полученный зашифрованный текст.
          type: string
          format: byte
    SymmetricKey:
      description: Ключ KMS, который может содержать несколько версий криптографического
        материала.
      type: object
      properties:
        id:
          description: Идентификатор ключа.
          type: string
        folderId:
          description: Идентификатор каталога, которому принадлежит ключ.
          type: string
        createdAt:
          description: |-
            Время создания ключа.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
        name:
          description: Имя симметричного ключа.
          type: string
        description:
          description: Описание симметричного ключа.
          type: string
        labels:
          description: Пользовательские метки для ключа в виде пар `key:value`. Максимум
            64 на ключ.
          type: object
          additionalProperties:
            type: string
        status:
          $ref: '#/components/schemas/SymmetricKeyStatus_in_SymmetricKey_status'
        primaryVersion:
          $ref: '#/components/schemas/SymmetricKeyVersion_in_SymmetricKey_primaryVersion'
        defaultAlgorithm:
          $ref: '#/components/schemas/SymmetricAlgorithm_in_SymmetricKey_defaultAlgorithm'
        rotatedAt:
          description: |-
            Время последней ротации ключа (время, когда была создана последняя версия). Пустое,
            если у ключа еще нет версий.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
        rotationPeriod:
          description: Период времени между автоматическими ротациями ключа KMS.
          type: string
    SymmetricKeyStatus:
      description: |2-
         - CREATING: Ключ создается.
         - ACTIVE: Ключ активен и может использоваться для шифрования и дешифрования.
         - INACTIVE: Ключ неактивен и не может быть использован.
      type: string
      enum:
      - CREATING
      - ACTIVE
      - INACTIVE
    SymmetricKeyVersion:
      description: 'Версия ключа KMS: метаданные криптографического материала.'
      type: object
      properties:
        id:
          description: Идентификатор версии ключа.
          type: string
        keyId:
          description: Идентификатор ключа KMS, которому принадлежит версия.
          type: string
        status:
          $ref: '#/components/schemas/SymmetricKeyVersionStatus_in_SymmetricKeyVersion_status'
        algorithm:
          $ref: '#/components/schemas/SymmetricAlgorithm_in_SymmetricKeyVersion_algorithm'
        createdAt:
          description: |-
            Время создания версии ключа.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
        primary:
          description: |-
            Признак основной версии, которая должна использоваться по умолчанию для всех
            криптографических операций, для которых явно не указана версия ключа.
          type: boolean
          format: boolean
        destroyAt:
          description: |-
            Время, когда версия ключа будет уничтожена. Пустой, если статус не `SCHEDULED_FOR_DESTRUCTION`.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
    SymmetricKeyVersionStatus:
      description: |-
        Возможные статусы версии.

         - ACTIVE: Версия активна и может использоваться для шифрования и дешифрования.
         - SCHEDULED_FOR_DESTRUCTION: Версия запланирована к уничтожению, время, когда она будет уничтожена, указано в
        поле destroyAt.
         - DESTROYED: Версия уничтожена и не может быть восстановлена.
      type: string
      enum:
      - ACTIVE
      - SCHEDULED_FOR_DESTRUCTION
      - DESTROYED
    SymmetricReEncryptResponse:
      type: object
      properties:
        keyId:
          description: Идентификатор ключа, которым в данный момент зашифрован текст.
          type: string
        versionId:
          description: Идентификатор версии ключа, которая использовалась для шифрования.
          type: string
        sourceKeyId:
          description: Идентификатор ключа, с помощью которого текст был зашифрован
            ранее.
          type: string
        sourceVersionId:
          description: |-
            Идентификатор версии ключа, которая использовалась для расшифровки повторно
            шифруемого текста.
          type: string
        ciphertext:
          description: Заново зашифрованный текст.
          type: string
          format: byte
    UpdateSymmetricKeyMetadata:
      type: object
      properties:
        keyId:
          description: Идентификатор изменяемого ключа.
          type: string
    UpdateSymmetricKeyRequest:
      type: object
      properties:
        updateMask:
          $ref: '#/components/schemas/FieldMask_in_UpdateSymmetricKeyRequest_updateMask'
        name:
          description: |-
            Новое имя симметричного ключа. Имя должно быть уникальным в каталоге.

            Максимальная длина строки в символах — 100.
          type: string
        description:
          description: |-
            Новое описание симметричного ключа.

            Максимальная длина строки в символах — 1024.
          type: string
        status:
          $ref: '#/components/schemas/SymmetricKeyStatus_in_UpdateSymmetricKeyRequest_status'
        labels:
          description: |-
            Не более 64 на ресурс.
            Максимальная длина строки в символах для каждого ключа — 63.
            Каждый ключ должен соответствовать регулярному выражению `` [a-z][-_0-9a-z]* ``.
            Максимальная длина строки в символах для каждого значения — 63.
            Каждое значение должно соответствовать регулярному выражению `` [-_0-9a-z]* ``.
          type: object
          additionalProperties:
            type: string
        defaultAlgorithm:
          $ref: '#/components/schemas/SymmetricAlgorithm_in_UpdateSymmetricKeyRequest_defaultAlgorithm'
        rotationPeriod:
          type: string
    rpcStatus:
      description: Описание ошибки в случае сбоя или отмены операции.
      type: object
      properties:
        code:
          description: Код ошибки. Значение из списка [google.rpc.Code](https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto).
          type: integer
          format: int32
        message:
          description: Текст ошибки.
          type: string
        details:
          description: Список сообщений с подробными сведениями об ошибке.
          type: array
          items:
            type: object
    SymmetricAlgorithm_in_CreateSymmetricKeyRequest_defaultAlgorithm:
      description: |-
        Алгоритм шифрования, который будет использоваться для генерации новой версии со
        следующей ротацией.

        Поддерживаемые алгоритмы симметричного шифрования.

         - AES_128: Алгоритм AES со 128-битными ключами.
         - AES_192: Алгоритм AES с 192-битными ключами.
         - AES_256: Алгоритм AES с 256-битными ключами.
      type: string
      enum:
      - AES_128
      - AES_192
      - AES_256
    SymmetricKeyStatus_in_SymmetricKey_status:
      description: |-
        Текущий статус ключа.

         - CREATING: Ключ создается.
         - ACTIVE: Ключ активен и может использоваться для шифрования и дешифрования.
         - INACTIVE: Ключ неактивен и не может быть использован.
      type: string
      enum:
      - CREATING
      - ACTIVE
      - INACTIVE
    SymmetricKeyVersion_in_SymmetricKey_primaryVersion:
      description: |-
        Основная версия ключа, используемая по умолчанию для всех операций шифрования /
        дешифрования, если идентификатор версии не указан явно.

        Версия ключа KMS: метаданные криптографического материала.
      type: object
      properties:
        id:
          description: Идентификатор версии ключа.
          type: string
        keyId:
          description: Идентификатор ключа KMS, которому принадлежит версия.
          type: string
        status:
          $ref: '#/components/schemas/SymmetricKeyVersionStatus_in_SymmetricKeyVersion_status'
        algorithm:
          $ref: '#/components/schemas/SymmetricAlgorithm_in_SymmetricKeyVersion_algorithm'
        createdAt:
          description: |-
            Время создания версии ключа.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
        primary:
          description: |-
            Признак основной версии, которая должна использоваться по умолчанию для всех
            криптографических операций, для которых явно не указана версия ключа.
          type: boolean
          format: boolean
        destroyAt:
          description: |-
            Время, когда версия ключа будет уничтожена. Пустой, если статус не `SCHEDULED_FOR_DESTRUCTION`.

            Строка в формате [RFC3339](https://www.ietf.org/rfc/rfc3339.txt).
          type: string
          format: date-time
    SymmetricAlgorithm_in_SymmetricKey_defaultAlgorithm:
      description: |-
        Алгоритм по умолчанию, который будет использоваться для создания новой версии во
        время ротации ключа.

        Поддерживаемые алгоритмы симметричного шифрования.

         - AES_128: Алгоритм AES со 128-битными ключами.
         - AES_192: Алгоритм AES с 192-битными ключами.
         - AES_256: Алгоритм AES с 256-битными ключами.
      type: string
      enum:
      - AES_128
      - AES_192
      - AES_256
    SymmetricKeyVersionStatus_in_SymmetricKeyVersion_status:
      description: |-
        Состояние версии ключа.

        Возможные статусы версии.

         - ACTIVE: Версия активна и может использоваться для шифрования и дешифрования.
         - SCHEDULED_FOR_DESTRUCTION: Версия запланирована к уничтожению, время, когда она будет уничтожена, указано в
        поле destroyAt.
         - DESTROYED: Версия уничтожена и не может быть восстановлена.
      type: string
      enum:
      - ACTIVE
      - SCHEDULED_FOR_DESTRUCTION
      - DESTROYED
    SymmetricAlgorithm_in_SymmetricKeyVersion_algorithm:
      description: |-
        Алгоритм шифрования, используемый при генерации криптографического материала для
        версии ключа.

        Поддерживаемые алгоритмы симметричного шифрования.

         - AES_128: Алгоритм AES со 128-битными ключами.
         - AES_192: Алгоритм AES с 192-битными ключами.
         - AES_256: Алгоритм AES с 256-битными ключами.
      type: string
      enum:
      - AES_128
      - AES_192
      - AES_256
    FieldMask_in_UpdateSymmetricKeyRequest_updateMask:
      description: |-
        Обязательное поле.
        Маска, определяющая, какие атрибуты указанного симметричного ключа будут обновлены.

        Имена всех обновляемых полей, разделенные запятыми.
        Только значения указанных полей будут изменены. Остальные останутся нетронутыми.
        Если поле указано в параметре `` updateMask `` и в запросе не было отправлено значение для этого поля,
        значение поля будет сброшено на значение по умолчанию. Значение по умолчанию для большинства полей — null или 0.

        Если в запросе не передается `` updateMask ``, значения всех полей будут обновлены.
        Для полей, указанных в запросе, будут использованы переданные значения.
        Значения остальных полей будут сброшены на значения по умолчанию.
      type: string
    SymmetricKeyStatus_in_UpdateSymmetricKeyRequest_status:
      description: |-
        Новый статус для симметричного ключа. С помощью метода `UpdateSymmetricKeyRequest` вы можете
        установить только статус ACTIVE или INACTIVE.

         - CREATING: Ключ создается.
         - ACTIVE: Ключ активен и может использоваться для шифрования и дешифрования.
         - INACTIVE: Ключ неактивен и не может быть использован.
      type: string
      enum:
      - CREATING
      - ACTIVE
      - INACTIVE
    SymmetricAlgorithm_in_UpdateSymmetricKeyRequest_defaultAlgorithm:
      description: |-
        Поддерживаемые алгоритмы симметричного шифрования.

         - AES_128: Алгоритм AES со 128-битными ключами.
         - AES_192: Алгоритм AES с 192-битными ключами.
         - AES_256: Алгоритм AES с 256-битными ключами.
      type: string
      enum:
      - AES_128
      - AES_192
      - AES_256
tags:
- name: SymmetricCrypto
  description: Набор методов, выполняющих симметричное шифрование и дешифрование.
- name: SymmetricKey
  description: Набор методов для управления симметричными ключами KMS.
