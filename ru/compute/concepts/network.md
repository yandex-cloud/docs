# Сеть на виртуальной машине

При создании виртуальной машины необходимо задать настройки сетевого интерфейса, подключенного к ней: выбрать [подсеть](../../vpc/concepts/network.md#subnet), к которой будет подключена виртуальная машина, настроить [внутренний](#internal-ip) и [публичный IP-адрес](#public-ip). Это позволит виртуальной машине взаимодействовать с другими сервисами во внутренней сети и в сети Интернет.

После подключения сетевого интерфейса виртуальной машине будет присвоен внутренний IP-адрес в подсети и [FQDN](#hostname). Публичный IP-адрес будет присвоен только если это было указано при создании виртуальной машины.

{% note info %}

Настройка сетевого интерфейса доступна только при создании виртуальной машины. Например, подключить виртуальную машину к другой подсети после создания невозможно.

{% endnote %}

IP-адреса, FQDN и другую информацию можно узнать в консоли управления, в блоке **Сеть** на странице виртуальной машины. Эти данные можно использовать для подключения к виртуальной машине.

На виртуальных машинах, созданных из публичных образов Linux, IP-адрес и имя хоста (FQDN) не прописываются автоматически в файл `/etc/hosts`. Это может повлиять на работу команды `sudo`.

## Внутренний IP-адрес {#internal-ip}

Вы можете указать внутренний IP-адрес, по которому будет доступна виртуальная машина после создания. Если внутренний IP-адрес не был указан, он будет назначен автоматически.

{% note info %}

На данный момент поддерживаются только IPv4-адреса. Для виртуальных машин Yandex Compute Cloud и хостов баз данных доступ из интернета и в интернет открыт только через публичные IP-адреса.

{% endnote %}

Внутренний IP-адрес можно использовать для доступа с одной виртуальной машины на другую. Подключение по внутреннему IP-адресу возможно только с виртуальных машин, которые принадлежат к одной [облачной сети](../../vpc/concepts/network.md#network).

Внутренний IP-адрес нельзя изменить.

## Публичный IP-адрес {#public-ip}

Вы можете получить публичный IP-адрес, чтобы иметь доступ к виртуальной машине из сети Интернет.

Публичный IP-адрес назначается автоматически, выбрать его нельзя. Адрес выделяется из пула адресов {{ yandex-cloud }}.

{% include notitle [public-ip-reset](../../_includes/public-ip-reset.md) %}

Публичный IP-адрес виртуальной машины сопоставляется ее внутреннему IP-адресу с использованием NAT. Поэтому все запросы к виртуальной машине по внешнему IP-адресу передаются на внутренний IP-адрес. Подробнее о NAT читайте в [RFC 3022](https://www.ietf.org/rfc/rfc3022.txt).

## Имя хоста и FQDN {#hostname}

При создании виртуальной машине присваивается имя хоста и FQDN. FQDN можно использовать для доступа с одной виртуальной машины на другую в рамках одной облачной сети.

Вы можете задать имя хоста при создании ВМ. На основании имени хоста и региона будет создано доменное имя хоста (FQDN) в следующем формате:

```
<hostname>.ru-central1.internal
```

Например, если вы указали имя хоста `myinstance`, то FQDN будет таким:

```
myinstance.ru-central1.internal
```

{% include [name-fqdn](../../_includes/compute/name-fqdn.md) %}

Если имя хоста не указать, то в качестве имени хоста будет использован ID виртуальной машины. Регион в этом случае не указывается, так как ID виртуальной машины уникален в рамках всего {{ yandex-cloud }}.

```
<ID>.auto.internal
```

## MAC-адрес {#mac-address}

После подключения сетевого интерфейса к виртуальной машине, ему будет присвоен MAC-адрес устройства.

Вы можете узнать MAC-адрес изнутри виртуальной машины или в информации о ресурсе через API {{ yandex-cloud }}.
