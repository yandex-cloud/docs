# Конфигурационное обновление группы виртуальных машин

На виртуальных машинах на базе публичного образа операционная система и программное обеспечение не обновляются автоматически. Вы можете обновлять их самостоятельно.

Для этого:

1. Опишите необходимый [шаблон](instance-template.md) виртуальной машины.
1. Задайте нужную [политику развертывания](policies.md#deploy-policy).
1. Запустите [операцию обновления](../../operations/instance-groups/update.md) группы.

## Обновление с деградацией группы {#update-with-group-degradation}

Последовательное обновление виртуальных машин в группе.

Например, чтобы обновлять группу, выводя из эксплуатации по одной виртуальной машине, в `deploy-policy` следует задать следующие параметры:

```
...
deploy-policy:
    max_unavailable: 1
    max_expansion: 0
    ...
...
```

Обновление группы будет выполняться следующим образом:

![Rolling update](../../../_assets/instance-groups/rolling-update.gif "Rolling update")

## Обновление с выделением дополнительных ресурсов {#max-expansion}

Обновление через создание виртуальных машин с новой конфигурацией. По мере добавления в группу машин с новой конфигурацией, машины со старой конфигурацией удаляются.

Например, чтобы обновлять группу по 1 виртуальной машине, в `deploy-policy` следует задать следующие параметры:

```
...
deploy-policy:
    max_unavailable = 0
    max_expansion = 1
    ...
...
```

Обновление группы будет выполняться следующим образом:

![Blue-green deployment](../../../_assets/instance-groups/blue-green.gif "Blue-green deployment")
