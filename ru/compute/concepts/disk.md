---
description: Диск — это виртуальный аналог физических накопителей, таких как SSD и HDD. Диски предназначены для хранения данных и подключаются к виртуальным машинам для работы с ними. При отключении диска данные сохраняются.
keywords:
  - диск
  - ssh
  - hdd
  - вм диск
  - диск виртуальной машины

__system: {"dislikeVariants":["Нет ответа на мой вопрос","Рекомендации не помогли","Содержание не соответсвует заголовку","Другое"]}
---


# Диски

_Диск_ — это виртуальный аналог физических накопителей, таких как SSD и HDD.

Диски предназначены для хранения данных и подключаются к виртуальным машинам для работы с ними. При отключении диска данные сохраняются.

Каждый диск находится в одной из зон доступности и [реплицируется](#backup) внутри нее (кроме нереплицируемых дисков), что обеспечивает сохранность данных. В другие зоны диски не реплицируются.

## Диск как ресурс {{ yandex-cloud }} {#disk-as-resource}

Диск создается внутри каталога и наследует права доступа к нему.

Диск занимает место в хранилище, которое дополнительно оплачивается. Подробнее читайте в разделе [{#T}](../pricing.md). Размер диска указывается при создании нового диска. Именно этот объем подлежит оплате.

Если диск создан из снимка или из образа, в информации о диске содержится идентификатор ресурса-источника. Помимо этого от ресурса-источника наследуются идентификаторы лицензий (`product_ids`), которые используются при расчете стоимости использования диска.

## Типы дисков {#disks_types}

ВМ в {{ yandex-cloud }} могут использовать следующие типы дисков:
* Сетевой SSD-диск (`network-ssd`) — быстрый сетевой диск, сетевое блочное хранилище на SSD-накопителе.
* Сетевой HDD-диск (`network-hdd`) — стандартный сетевой диск, сетевое блочное хранилище на HDD-накопителе.
* Нереплицируемый SSD-диск (`network-ssd-nonreplicated`) — сетевой диск с повышенной производительностью, реализованной за счет некоторых [ограничений](#nr-disks).

Стандартные сетевые SSD и HDD-диски обеспечивают достаточную избыточность для надежного хранения данных и позволяют непрерывно выполнять операции чтения и записи даже при одновременном выходе из строя нескольких физических дисков. Нереплицируемые диски не обеспечивают избыточность.

Если физический диск, на котором располагается сетевой SSD или HDD-диск, вышел из строя, ВМ продолжит работу и быстро получит доступ к данным в полном объеме.

Сетевые диски уступают локальным в скорости выполнения операций и пропускной способности, но обеспечивают большую надежность и бесперебойность работы ВМ.

### Ограничения нереплицируемых дисков {#nr-disks}

Нереплицируемые диски превосходят обычные сетевые диски по производительности и могут быть полезны, когда избыточность уже обеспечивается на уровне приложения либо необходимо обеспечить быстрый доступ к временным данным.

Нереплицируемые диски имеют ряд ограничений:
* Размер нереплицируемого диска должен быть кратен 93 ГБ.

  {% include [pricing-gb-size](../../_includes/pricing-gb-size.md) %}

* Нереплицируемые диски не могут быть загрузочными.
* Хранимая информация может быть временно недоступна или утеряна в случае сбоя, поскольку в нереплицируемых дисках отсутствует избыточность.
* Из нереплицируемого диска нельзя создать [снимки](snapshot.md) и [образы](image.md).

{% note info %}

Нереплицируемый диск не рекомендуется делать загрузочным. Если он выйдет из строя, виртуальная машина может стать недоступной.

{% endnote %}

Несколько нереплицируемых дисков могут быть собраны в [группу размещения](disk-placement-group.md) для организации избыточности хранения данных на уровне приложения. При этом отдельные диски физически будут размещены в разных стойках дата-центра, что снизит вероятность одновременного выхода из строя всех дисков группы.

## Максимальный размер дисков {#maximum-disk-size}

{% include [disk-blocksize](../../_includes/compute/disk-blocksize.md) %}

## Подключение и отключение дисков {#attach-detach}

Каждый диск можно подключить только к одной ВМ. Диск и ВМ должны находиться в одной зоне доступности.

К ВМ необходимо подключить загрузочный диск, а также можно подключить дополнительные диски.

{% include [attach-empty-disk](../_includes_service/attach-empty-disk.md) %}

При выборе диска для подключения к ВМ можно указать, должен ли быть удален диск при удалении ВМ. Это можно выбрать как при создании ВМ, при изменении и при подключении нового диска к ней.

Если к ВМ были подключены ранее созданные диски, то при удалении ВМ они будут отключены. Данные на диске при этом сохраняются, в дальнейшем можно подключить диск к другой ВМ.

Если вы хотите, чтобы диск был удален вместе с ВМ, это необходимо указать в одной из операций: при создании ВМ, при изменении или при подключении диска к ней. Такие диски будут удалены при удалении ВМ.

**Смотрите также**

* Узнайте, как [{#T}](../operations/vm-control/vm-attach-disk.md).
* Узнайте, как [{#T}](../operations/vm-control/vm-detach-disk.md).

## Резервное копирование {#backup}

Каждый диск доступен и реплицируется внутри определенной зоны доступности.

Вы можете создавать резервные копии дисков в виде [снимков](snapshot.md). Снимки реплицируются во всех зонах доступности, поэтому их также можно использовать, чтобы переносить диски между зонами доступности.

Иногда восстановление определенного состояния диска становится рутинной операцией: например, вы хотите подключать один и тот же загрузочный диск к каждой новой ВМ. Вы можете загрузить [образ](image.md) этого диска в {{ compute-name }} — создание диска из образа происходит быстрее, чем из снимка. Образ диска тоже автоматически реплицируется в несколько зон доступности.

Рекомендации о резервном копировании и восстановлении ВМ в целом приведены в разделе [{#T}](backups.md).

## Операции чтения и записи {#rw}

Операции чтения и записи имеют ограничения для дисков и блоков размещения. Блок размещения (allocation unit) — единица выделения дискового пространства, в ГБ. Величина блока размещения зависит от [типа диска](../concepts/limits.md#limits-disks).

Операции чтения и записи имеют предельные возможные значения по следующим параметрам:
* Максимальное значение IOPS — максимальное количество операций чтения и записи, выполняемых диском в секунду.
* Максимальная пропускная способность (bandwidth) — суммарное количество байт, которые можно прочитать с диска или записать на диск в секунду.

Фактическое значение IOPS зависит как от характеристик диска, так и от совокупного значения пропускной способности и размера запроса в байтах. IOPS, обеспечиваемый диском, определяется по формуле:

![image](../../_assets/compute/iops.svg)

Где:
* _Макс. IOPS_ — [максимальное значение IOPS](../concepts/limits.md#limits-disks) для диска.
* _Макс. bandwidth_ — [максимальное значение пропускной способности](../concepts/limits.md#limits-disks) для диска.

Операции чтения и записи потребляют один и тот же дисковый ресурс — чем больше производится операций чтения, тем меньше операций записи, и наоборот. Суммарное количество операций и чтения, и записи в секунду определяется по формуле:

![image](../../_assets/compute/max-iops.svg)

Где:
* ![image](../../_assets/compute/alpha.svg) — доля операций записи из общего количества операций чтения и записи, выполняемых в секунду. Возможные значения — &alpha;&isin;[0,1].
* _WriteIOPS_ — значение IOPS на запись, полученное по формуле расчета фактического значения IOPS.
* _ReadIOPS_ — значение IOPS на чтение, полученное по формуле расчета фактического значения IOPS.

Подробнее про максимально допустимые значения IOPS и пропускной способности читайте в разделе [Квоты и лимиты](../concepts/limits.md#limits-disks).

### Производительность дисков {#performance}

Максимальные значения IOPS достигаются на операциях чтения и записи размером 4 КБ. Сетевые SSD-диски предоставляют существенно большие значения IOPS на чтение, а также меньшие значения времени обработки запроса.

Чтобы получить максимальные значения пропускной способности, рекомендуется делать чтения и записи размером 4 МБ.

Производительность диска зависит от его объема — чем выше количество блоков размещения, тем выше значения IOPS и пропускной способности.

Для HDD-дисков небольшого размера предусмотрен механизм увеличения характеристик до уровня дисков размером 1 ТБ на период повышенной нагрузки. Работая на [базовом уровне производительности](../concepts/limits.md#limits-disks) в течение 12 часов, небольшой диск накапливает <q>кредиты на операции</q>, которые будут потрачены автоматически при увеличении нагрузки (например, при старте ВМ). Небольшие HDD-диски могут работать с увеличенными характеристиками около 30 минут в день. <q>Кредиты на операции</q> могут быть потрачены как за один раз, так и небольшими промежутками.