# Подключение к серийной консоли виртуальной машины c помощью CLI

После [включения доступа](./index.md), вы можете подключиться к серийной консоли для взаимодействия с виртуальной машиной.

{% include [sc-warning](../../../_includes/compute/serial-console-warning.md) %}

## Подключиться к серийной консоли {#connect-to-serial-console}

{% note info %}

Работа серийной консоли зависит от настроек используемой операционной системы. Сервис {{ compute-name }} обеспечивает канал между пользователем и COM-портом виртуальной машины и не гарантирует стабильность работы консоли со стороны операционной системы.

{% endnote %}

Чтобы подключиться к серийной консоли, используйте CLI.

{% include [cli-install](../../../_includes/cli-install.md) %}

{% include [default-catalogue](../../../_includes/default-catalogue.md) %}

1. Посмотрите описание команды CLI для подключения к серийной консоли:

    ```
    $ yc compute connect-to-serial-port --help
    ```

1. Получите список виртуальных машин в каталоге по умолчанию:

    {% include [compute-instance-list](../../_includes_service/compute-instance-list.md) %}

1. Выберите идентификатор (`ID`) или имя (`NAME`) нужной машины, например `first-instance`.
1. Подключитесь к серийной консоли Linux:

    ```
    $ yc compute connect-to-serial-port \
         --instance-name first-instance \
         --ssh-key ~/.ssh/id_rsa
    ```

    {% if product == "yandex-cloud" %}
    Или к SAC Windows:

    ```
    $ yc compute connect-to-serial-port \
         --instance-name first-instance \
         --port 2
    ```
    {% endif %}

    Параметр | Значение
    ----- | -----
    `instance-name` | Обязательный параметр. Имя виртуальной машины.
    `user` | Опциональный параметр. Имя пользователя. Если параметр не указан, по умолчанию будет использоваться пользователь `yc-user`. Пользователь `yc-user` создается автоматически при создании виртуальной машины. Подробнее читайте в разделе [{#T}](../vm-create/create-linux-vm.md).
    `port` | Опциональный параметр. Номер порта для подключения к серийной консоли. Значение по умолчанию — 1, для подключения к серийной консоли Linux параметр указывать необязательно. {% if product == "yandex-cloud" %}При подключении к серийной консоли Windows (SAC) передайте значение 2.{% endif %}
    `ssh-key` | Опциональный параметр. Путь к закрытому ключу для SSH-доступа к виртуальной машине на базе Linux, который нужно добавить в [метаданные](../../concepts/vm-metadata.md). Если параметр не указан, будет сгенерирован SSH-ключ `yc_serialssh_key`.

### Решение проблем {#troubleshooting}

* Если после подключения к серийной консоли на экране ничего не отображается:

    * Нажмите на клавиатуре клавишу **Enter**.
    * Перезапустите виртуальную машину (для виртуальных машин, созданных до 22 февраля 2019 года).

* Если система запрашивает данные пользователя для доступа на виртуальную машину, укажите имя пользователя (логин) и пароль:

    * На ВМ с Linux предварительно создайте пароль для пользователя. Выполните команду `sudo passwd <имя пользователя>`. Подробнее см. в разделе [Начало работы с серийной консолью](./index.md#linux-configuration).
    {% if product == "yandex-cloud" %}
    * На ВМ с Windows потребуется ввести логин, домен (имя ВМ) и пароль. Подробнее см. в разделе [Запустить командную оболочку в Windows SAC](./windows-sac.md).
    {% endif %}

## Отключиться от серийной консоли {#turn-off-serial-console}

Чтобы отключиться от серийной консоли:

1. Нажмите на клавиатуре клавишу **Enter**.
1. Введите последовательно символы `~.`.
