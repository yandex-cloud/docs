# Изменить вычислительные ресурсы виртуальной машины

После создания виртуальной машины вы можете изменить ее вычислительные ресурсы. Как изменить имя, описание и метки виртуальной машины читайте в разделе [{#T}](vm-update.md).

## Изменить конфигурацию vCPU и RAM {#update-vcpu-ram}

В этом разделе приведена инструкция для изменения количества и производительности ядер процессора (vCPU), а также количества памяти (RAM).

{% list tabs %}

- Консоль управления

  Чтобы изменить vCPU и RAM виртуальной машины:
  1. Перейдите на страницу каталога, которому принадлежит виртуальная машина.
  1. Выберите сервис **{{ compute-full-name }}**.
  1. Нажмите на имя нужной виртуальной машины.
  1. Нажмите **Остановить** в правом верхнем углу страницы.
  1. Подождите пока виртуальная машина перейдет в статус `STOPPED` и нажмите **Изменить ВМ** в правом верхнем углу страницы.
  1. Измените [конфигурацию](../../concepts/performance-levels.md) виртуальной машины, в блоке **Вычислительные ресурсы**:
      - Выберите [платформу](../../concepts/vm-platforms.md).
      - Укажите необходимое количество vCPU и RAM.
  1. Нажмите кнопку **Сохранить изменения**.
  1. Нажмите кнопку **Запустить** в правом верхнем углу страницы.

- CLI

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды CLI для обновления параметров виртуальных машин:

      ```
      $ yc compute instance update --help
      ```

  1. Получите список виртуальных машин в каталоге по умолчанию:

      {% include [compute-instance-list](../../_includes_service/compute-instance-list.md) %}

  1. Выберите идентификатор (`ID`) или имя (`NAME`) нужной машины, например `first-instance`.
  1. Остановите виртуальную машину:

      ```
      $ yc compute instance stop first-instance
      ```
  1. Получите текущую [конфигурацию](../../concepts/performance-levels.md) виртуальной машины вместе с [метаданными](../../concepts/vm-metadata.md):

      ```
      $ yc compute instance get --full first-instance
      ```

  1. Измените конфигурацию виртуальной машины:

      ```
      $ yc compute instance update first-instance \
          --memory 32 \
          --cores 4 \
          --core-fraction 100
      ```

      Данная команда изменит конфигурацию виртуальной машины:

      * **Гарантированный уровень vCPU** — на 100%.
      * **vCPU** — на 4.
      * **RAM** — на 32 ГБ.

  1. Запустите виртуальную машину:

      ```
      $ yc compute instance start first-instance
      ```
- API

  Чтобы изменить vCPU и RAM виртуальной машины, воспользуйтесь методом [Update](../../api-ref/Instance/update.md) для ресурса `Instance`.

{% endlist %}

## Добавить GPU к существующей виртуальной машине {#add-gpu}

Чтобы добавить [GPU](../../concepts/gpus.md) к существующей виртуальной машине, измените платформу и укажите количество GPU.

{% list tabs %}

- Консоль управления

  Чтобы изменить количество GPU на виртуальной машине:

  1. Перейдите на страницу каталога, которому принадлежит виртуальная машина.
  1. Выберите сервис **{{ compute-full-name }}**.
  1. Нажмите на имя нужной виртуальной машины.
  1. Нажмите **Остановить** в правом верхнем углу страницы.
  1. Подождите пока виртуальная машина перейдет в статус `STOPPED` и нажмите **Изменить ВМ** в правом верхнем углу страницы.
  1. Измените [конфигурацию](../../concepts/performance-levels.md) виртуальной машины, в блоке **Вычислительные ресурсы**:
      - Выберите [платформу](../../concepts/vm-platforms.md) Intel Broadwell with NVIDIA® Tesla® V100.
      - Укажите необходимое количество GPU.
  1. Нажмите кнопку **Сохранить изменения**.
  1. Нажмите кнопку **Запустить** в правом верхнем углу страницы.

- CLI

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды CLI для обновления параметров виртуальных машин:

      ```
      $ yc compute instance update --help
      ```

  1. Получите список виртуальных машин в каталоге по умолчанию:

      {% include [compute-instance-list](../../_includes_service/compute-instance-list.md) %}

  1. Выберите идентификатор (`ID`) или имя (`NAME`) нужной машины, например `first-instance`.

  1. Остановите виртуальную машину:

      ```
      $ yc compute instance stop first-instance
      ```

  1. Получите текущую [конфигурацию](../../concepts/performance-levels.md) виртуальной машины вместе с [метаданными](../../concepts/vm-metadata.md):

      ```
      $ yc compute instance get --full first-instance
      ```

  1. Измените конфигурацию виртуальной машины:

      ```
      $ yc compute instance update first-instance \
          --platform-id=gpu-standard-v1 \
          --cores=8 \
          --memory=96 \
          --gpus=1
      ```

      После выполнения данной команды изменятся следующие характеристики виртуальной машины:

      * **Платформа** — на Intel Broadwell with NVIDIA® Tesla® V100.
      * **vCPU** — на 8.
      * **RAM** — на 96 ГБ.
      * **GPU** — на 1.

  1. Запустите виртуальную машину:

      ```
      $ yc compute instance start first-instance
      ```
- API

  Чтобы изменить платформу и конфигурацию виртуальной машины, воспользуйтесь методом [Update](../../api-ref/Instance/update.md) для ресурса `Instance`.

{% endlist %}

## Изменить количество GPU {#update-gpu}

{% list tabs %}

- Консоль управления

  Чтобы изменить количество [GPU](../../concepts/gpus.md) на существующей виртуальной машине:

  1. Перейдите на страницу каталога, которому принадлежит виртуальная машина.
  1. Выберите сервис **{{ compute-full-name }}**.
  1. Нажмите на имя нужной виртуальной машины.
  1. Нажмите **Остановить** в правом верхнем углу страницы.
  1. Подождите пока виртуальная машина перейдет в статус `STOPPED` и нажмите **Изменить ВМ** в правом верхнем углу страницы.
  1. Измените [конфигурацию](../../concepts/performance-levels.md) виртуальной машины. В блоке **Вычислительные ресурсы** укажите необходимое количество GPU.
  1. Нажмите кнопку **Сохранить изменения**.
  1. Нажмите кнопку **Запустить** в правом верхнем углу страницы.

- CLI

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды CLI для обновления параметров виртуальных машин:

      ```
      $ yc compute instance update --help
      ```

  1. Получите список виртуальных машин в каталоге по умолчанию:

      {% include [compute-instance-list](../../_includes_service/compute-instance-list.md) %}

  1. Выберите идентификатор (`ID`) или имя (`NAME`) нужной машины, например `first-instance`.

  1. Остановите виртуальную машину:

      ```
      $ yc compute instance stop first-instance
      ```

  1. Получите текущую [конфигурацию](../../concepts/performance-levels.md) виртуальной машины вместе с [метаданными](../../concepts/vm-metadata.md):

      ```
      $ yc compute instance get --full first-instancegit
      ```

  1. Измените конфигурацию виртуальной машины:

      ```
      $ yc compute instance update first-instance \
          --gpus=2 \
          --cores=16 \
          --memory=192
      ```

      Данная команда изменит количество GPU на 2.

  1. Запустите виртуальную машину:

      ```
      $ yc compute instance start first-instance
      ```
- API

  Чтобы изменить количество GPU, воспользуйтесь методом [Update](../../api-ref/Instance/update.md) для ресурса `Instance`.

{% endlist %}
