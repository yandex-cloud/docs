# Сбросить пароль пользователя на виртуальной машине Windows

Для сброса пароля пользователя на виртуальной машине Windows средствами {{ yandex-cloud }} требуются:

* [Агент для сброса паролей](../../concepts/guest-agent.md){% if audience == "draft" %}. Агент входит в состав стандартных образов Windows с xx ноября 2021 года. Если ваша ВМ создана раньше или вы пользуетесь собственным образом, для сброса паролей установите агент по [инструкции](../vm-guest-agent/install.md).{% endif %}, который нужно установить по [инструкции](../vm-guest-agent/install.md). В июне 2022 года агент войдет в состав стандартных образов Windows.

{% include [vm-reset-password-windows-reqs](../../../_includes/compute/vm-reset-password-windows-reqs.md) %}

Чтобы сбросить пароль:

{% list tabs %}

- Консоль управления

  {% include [vm-reset-password-windows-console](../../../_includes/compute/vm-reset-password-windows-console.md) %}
  
- PowerShell

  1. Запустите PowerShell от имени администратора.
  1. Установите модуль для сброса пароля (один раз):
  
     1. [Установите CLI и настройте его](../../../cli/quickstart.md) так, чтобы команды выполнялись от имени пользователя или [сервисного аккаунта](../../../iam/concepts/users/service-accounts.md) с нужной ролью (см. выше).
     1. Выполните команду:
  
        ```powershell
        Install-Module -Name YCPasswordReset
        ```
     
        На вопросы установщика, например о поставщике NuGet и о репозитории, отвечайте `Y` («да»).
        
  1. Выполните команду:
  
     ```powershell
     Reset-YCUserPassword -InstanceName <имя ВМ> -Username <имя пользователя ВМ>
     ```
     
     {% note info %}
     
     Если команда выполняется слишком долго, остановите ее с помощью сочетания клавиш **Ctrl** + **C**. После этого проверьте, что агент для сброса паролей установлен, и посмотрите логи его работы. Подробнее см. в разделе [{#T}](../vm-guest-agent/check.md).
     
     {% endnote %}
     
     Если у ВМ не существует пользователя с именем, указанным в параметре `-Username`, он будет создан с правами администратора.
     
  1. Сохраните сгенерированный пароль. После закрытия окна он будет недоступен.

{% endlist %}
