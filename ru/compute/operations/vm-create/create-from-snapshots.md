# Создать виртуальную машину с дисками из снимков

Вы можете создать виртуальную машину с дисками, восстановленными из имеющихся в каталоге снимков. О том, как создать снимок диска, см. раздел [{#T}](../disk-control/create-snapshot.md).

{% list tabs %}

- Консоль управления

  Чтобы создать виртуальную машину:
  1. В [консоли управления](https://console.cloud.yandex.ru) выберите каталог, в котором будет создана виртуальная машина.
  1. В списке сервисов выберите {{ compute-name }}.
  1. Нажмите кнопку **Создать ВМ**.
  1. В блоке **Базовые параметры**:
      - Введите имя и описание ВМ. Требования к имени:

          {% include [name-format](../../../_includes/name-format.md) %}

          {% include [name-fqdn](../../../_includes/compute/name-fqdn.md) %}

      - (опционально) Выберите или создайте [сервисный аккаунт](../../../iam/concepts/index.md#sa). Использование сервисного аккаунта позволяет гибко настраивать права доступа к ресурсам.

      - Выберите [зону доступности](../../../overview/concepts/geo-scope.md), в которой будет находиться виртуальная машина.
  1. Если у вас нет готового загрузочного диска или его снимка, выберите один из публичных образов.
  1. Чтобы добавить диск из снимка, нажмите кнопку **Добавить диск**.
  1. Выставьте переключатель **Наполнение** в положение **Снимок** и выберите нужный снимок в списке. Затем нажмите кнопку **Добавить**.
  1. В блоке **Вычислительные ресурсы**:
      - Выберите [платформу](../../concepts/vm-platforms.md).
      - Укажите [гарантированную долю](../../concepts/performance-levels.md) и необходимое количество vCPU и объем RAM.
      - При необходимости сделайте виртуальную машину [прерываемой](../../concepts/preemptible-vm.md).
  1. В блоке **Сетевые настройки**:
      - Укажите идентификатор подсети или выберите [облачную сеть](../../../vpc/concepts/network.md#network) из списка.
      - В поле **Публичный адрес** выберите способ назначения адреса:
          - **Автоматически** — чтобы назначить случайный IP-адрес из пула адресов {{ yandex-cloud }}.
          - **Список** — чтобы выбрать публичный IP-адрес из списка зарезервированных заранее статических адресов. Подробнее читайте в разделе [{#T}](../../../vpc/operations/set-static-ip.md).
          - **Без адреса** — чтобы не назначать публичный IP-адрес.
      - (опционально) При необходимости выберите опцию [защиты от DDoS-атак](../../../vpc/ddos-protection/).
  1. В блоке **Доступ** укажите данные для доступа на виртуальную машину:
      - В поле **Логин** введите имя пользователя.
      - В поле **SSH-ключ** вставьте содержимое файла [открытого ключа](../../quickstart/quick-create-linux.md#create-ssh).
      — (опционально) При необходимости разрешите доступ к [серийной консоли](../index.md#serial-console).
  1. Нажмите кнопку **Создать ВМ**.

  Виртуальная машина появится в списке. При создании виртуальной машине назначаются [IP-адрес](../../../vpc/concepts/address) и [имя хоста](../../../vpc/concepts/address#imya-hosta-(fqdn)) (FQDN).

- CLI

  {% include [cli-install](../../../_includes/cli-install.md) %}

  {% include [default-catalogue](../../../_includes/default-catalogue.md) %}

  1. Посмотрите описание команды CLI для создания виртуальной машины:

      ```
      $ yc compute instance create --help
      ```

  1. Подготовьте снимки нужных дисков, см. раздел [{#T}](../disk-control/create-snapshot.md).
  1. Получите список снимков в каталоге по умолчанию:

      {% include [compute-snapshot-list](../../_includes_service/compute-snapshot-list.md) %}

  1. Выберите идентификатор (`ID`) или имя (`NAME`) нужных снимков.
  1. Создайте виртуальную машину в каталоге по умолчанию:

      ```
      $ yc compute instance create \
          --name first-instance \
          --zone ru-central1-a \
          --public-ip \
          --create-boot-disk snapshot-name=first-snapshot \
          --create-disk snapshot-name=second-snapshot \
          --ssh-key ~/.ssh/id_rsa.pub
      ```

      Данная команда создаст виртуальную машину именем `first-instance` в зоне `ru-central1-a`, с публичным IP и дисками из снимков. Чтобы создать виртуальную машину без публичного IP, исключите флаг `--public-ip`.

      {% include [name-format](../../../_includes/name-format.md) %}

      {% include [name-fqdn](../../../_includes/compute/name-fqdn.md) %}

- API

  Воспользуйтесь методом [Create](../../api-ref/Instance/create.md) для ресурса `Instance`.

{% endlist %}
