# Создать виртуальную машину из пользовательского образа

## Перед началом работы

[Подготовьте и загрузите](../image-create/upload.md) образ, из которого будет создаваться ВМ.

Убедитесь, что загруженный образ находится в состоянии `READY`.

## Создайте виртуальную машину из подготовленного образа

---

**[!TAB Консоль управления]**

1. Откройте каталог, в котором будет создана виртуальная машина.
1. Нажмите кнопку **Создать ресурс**.
1. Выберите **Виртуальная машина**.
1. В поле **Имя** введите имя виртуальной машины.

    [!INCLUDE [name-format](../../../_includes/name-format.md)]

1. Выберите [зону доступности](../../../overview/concepts/geo-scope.md), в которой будет находиться виртуальная машина.
1. В блоке **Диски** нажмите **Добавить диск**.
   1. В поле **Имя** введите имя диска.
   1. Задайте требуемый размер диска.
   1. В блоке **Назначение диска** выберите **Загрузочный**
   1. Выберите [тип диска](../../concepts/disk.md#concept_z5t_rtr_52b): **HDD** или **NVMe**.
   1. В блоке **Наполнение** выберите **Образ**. Откроется список загруженных вами образов.
   1. Выберите нужный образ.
   1. Нажмите кнопку **Добавить**.
1. В блоке **Вычислительные ресурсы** выберите [тип использования ядра](../../concepts/vm-types.md) (частичное или полное), укажите необходимое количество vCPU и объем RAM.
1. В блоке **Сетевые настройки** выберите, к какой подсети необходимо подключить виртуальную машину при создании и назначьте публичный адрес для доступа на виртуальную машину.
1. Укажите данные для доступа на виртуальную машину:
    - В поле **Логин** введите имя пользователя.
    - В поле **SSH ключ** вставьте содержимое файла открытого ключа.
        Пару ключей для подключения по SSH необходимо создать самостоятельно. Для создания ключей используйте сторонние инструменты, например утилиты `ssh-keygen` в Linux и macOS или [PuTTygen](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html) в Windows.
1. Нажмите кнопку **Создать ВМ**.

**[!TAB CLI]**

1. Посмотрите описание команды CLI для создания виртуальной машины:

    ```
    $ yc compute instance create --help
    ```

1. Получите список образов в каталоге по умолчанию:

    ```
    $ yc compute image list
    +----------------------+-------------------+--------+-------------+--------+
    |          ID          |       NAME        | FAMILY | PRODUCT IDS | STATUS |
    +----------------------+-------------------+--------+-------------+--------+
    |         ...          |         ...       |        |             |  ...   |
    | fd8gkcd3l6ov84aon8s1 |  your-test-image  |        |             | READY  |
    |         ...          |         ...       |        |             |  ...   |
    +----------------------+-------------------+--------+-------------+--------+
    ```

1. Выберите `ID` или `NAME` нужного образа.
1. Создайте виртуальную машину в каталоге по умолчанию:

    ```
    $ yc compute instance create \
      --name test-vm-from-image \
      --create-boot-disk name=disk1,size=5,image-id=fd8gkcd3l6ov84aon8s1 \
      --public-ip \
      --ssh-key ~/.ssh/id_rsa.pub

    ```

    Данная команда создаст виртуальную машину с загрузочным диском на 5 ГБ из заранее загруженного образа с именем `test-vm-from-image`.

    [!INCLUDE [name-format](../../../_includes/name-format.md)]

    На машине будет создан пользователь `yc-user` с публичным ключом из файла `~/.ssh/id_rsa.pub`. Виртуальная машина получит публичный IP-адрес. Чтобы создать виртуальную машину без публичного IP, исключите флаг `--public-ip`.

---
