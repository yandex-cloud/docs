# Создание виртуальных машин с несколькими сетевыми интерфейсами

## Описание задачи {#case-description}
Возникла необходимость создать виртуальную машину с количеством сетевых интерфейсов более одного.

## Решение {#case-resolution}
Чтобы создать ВМ с несколькими сетевыми интерфейсами, воспользуйтесь образами из [категории «Сетевая инфраструктура»](https://cloud.yandex.ru/marketplace?categories=network) в Yandex Cloud Marketplace. Образы из этой категории позволяют создавать ВМ с несколькими интерфейсами, которые могут быть связаны с разными облачными сетями.

{% note alert %}

Количество сетевых интерфейсов можно задать только в процессе создания виртуальной машины.
После того, как виртуальная машина уже создана, добавить новые сетевые интерфейсы или удалить имеющиеся не получится.

Если вам требуется изменить количество сетевых интерфейсов на уже созданной виртуальной машине – воспользуйтесь функциональностью [снимков](../../../compute/operations/vm-create/create-from-snapshots.md) или [образов дисков](../../../compute/operations/vm-create/create-from-user-image.md) для создания копии ВМ и задайте необходимое количество сетевых интерфейсов в процессе создания ВМ.

{% endnote %}

В качестве одного из вариантов вы можете использовать [образ NAT-инстанса](https://cloud.yandex.ru/marketplace/products/yc/nat-instance-ubuntu-18-04-lts), созданного на основе LTS-выпуска Ubuntu Linux. В [соответствующем разделе](../../../tutorials/routing/nat-instance.md) документации описан сценарий, позволяющий настроить маршрутизацию трафика в интернет с использованием ВМ на базе этого образа.

Если же вы знакомы с решениями от Cisco или Mikrotik, вы можете использовать их в качестве виртуальных маршрутизаторов: образы этих продуктов также доступны в Yandex Cloud Marketplace, однако для их использования требуется заранее приобретенная лицензия.
Подробнее об этих продуктах мы рассказываем здесь:
- [Установка виртуального роутера Cisco CSR 1000v](../../../vpc/tutorials/cisco.md)
- [Установка виртуального роутера Mikrotik CHR](../../../vpc/tutorials/mikrotik.md)

Максимальное количество сетевых интерфейсов зависит от платформы и количества vCPU у виртуальной машины. 
Актуальные лимиты количества сетевых интерфейсов для используемых в Yandex Cloud аппаратных платформ:

Broadwell (`standard-v1`):
- от 2 до 16 vCPU — 8 интерфейсов;
- от 20 до 32 vCPU — 16 интерфейсов.

Cascade Lake (`standard-v2`):
- от 2 до 16 vCPU — 8 интерфейсов;
- от 20 до 80 vCPU — 16 интерфейсов.

Для платформы Ice Lake (`standard-v3`):
- от 2 до 32 vCPU — 8 интерфейсов;
- от 36 до 96 vCPU — 16 интерфейсов.

Обратите внимание, что на старте к ВМ может быть подключено не более 14 устройств, включая загрузочный диск и сетевую карту. Виртуальная машина, к которой подключено более 14 устройств, не запустится, поэтому при её создании нужно учесть это ограничение. Остальные устройства требуется подключать к уже запущенной ВМ (при необходимости). 
Подробнее об этом пишем в [соответствующем материале](../../../compute/concepts/limits.md#compute-limits-vm) документации.

{% note alert %}

Если вы перезапустите ВМ, к которой подключено более 14 устройств, то эта ВМ не сможет загрузиться.

{% endnote %}