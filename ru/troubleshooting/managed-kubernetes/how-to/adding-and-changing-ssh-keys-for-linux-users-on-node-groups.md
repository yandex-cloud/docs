# Добавление и изменение SSH-ключей пользователей Linux на хостах группы узлов Managed Services for Kubernetes

## Описание задачи {#case-description}
* В процессе использования кластера Managed Service for Kubernetes возникла необходимость добавить нового пользователя Linux на хосты группы узлов кластера Managed Service for Kubernetes;
* В процессе использования кластера Managed Service for Kubernetes возникла необходимость обновить SSH-ключ существующего пользователя Linux на хостах группы узлов кластера Managed Service for Kubernetes.


## Решение {#case-solution}
Для добавления нового пользователя или обновления SSH-ключа для текущего пользователя следует обновить ключи группы узлов.
Перед запуском этой операции следует подготовить файл с SSH-ключами для пользователей и привести его к следующему виду:
```
username:ssh-ed25519 AAAAB3NzaC***********zo/lP1ww== username
username2:ssh-ed25519 ONEMOREkey***********88OavEHw== username2
```
Затем с помощью YC CLI необходимо выполнить команду:
```
yc managed-kubernetes node-group add-metadata \
  --name <наименование_группы_узлов> \
  --metadata-from-file ssh-keys=<путь_к_файлу_с_публичными_ssh_ключами>
```
В результате выполнения этой команды в группе узлов кластера будут выполнены следующие операции:
* SSH-ключи существующих пользователей будут обновлены на новые;
* ранее несуществующие пользователи будут созданы с указанными SSH-ключами.

При обновлении SSH-ключей группа узлов перейдёт в состояние `Reconciling`, поскольку на виртуальных машинах в этой группе запустится операция обновления метаданных.

{% note alert "Внимание" %}

Запуск операции обновления метаданных для группы узлов кластера Managed Services for Kubernetes может привести к частичной или полной недоступности узлов в затронутой группе на срок до 20 минут.

{% endnote %}