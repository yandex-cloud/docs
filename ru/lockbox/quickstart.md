---
title: "Начало работы с {{ lockbox-full-name }}"
description: "В этой инструкции вы научитесь создавать секреты и получать их содержимое с помощью сервиса хранения секретов {{ lockbox-full-name }}. Секрет состоит из набора версий, в которых хранятся ваши данные. Версия содержит наборы ключей и значений. Ключ — это несекретное название для значения, по которому вы будете его идентифицировать. Значение — это секретные данные."
---

# Начало работы с {{ lockbox-name }}

Создайте ваш первый секрет и получите его содержимое.

Секрет состоит из набора версий, в которых хранятся ваши данные. Версия содержит наборы ключей и значений: 
* Ключ — это несекретное название для значения, по которому вы будете его идентифицировать.
* Значение — это секретные данные.

Версия не изменяется. Для любого изменения количества пар ключей-значений или их содержимого необходимо создать новую версию. 

## Создать секрет {#secret}

{% include [secret-create](../_includes/lockbox/secret-create.md) %}

## Получите содержимое секрета {#get}

### Роли, необходимые для получения секрета {#roles}

Если при создании секрета вы указали свой ключ {{ kms-short-name }}, необходимо назначить на него роль [kms.keys.encrypterDecrypter](../kms/security/index.md#service), это необходимо для шифрования и расшифровки секрета.

### Получите содержимое секрета {#payload}

Для получения содержимого секрета обратитесь к нему с помощью {% if lang == "ru" and audience != "internal" %}[API](../glossary/rest-api.md){% else %}API{% endif %}. При запросе без указания версии, будет возвращаться содержимое текущей (последней) версии. 

Вы можете использовать эту логику в скриптах, сервисах и приложениях, где необходимо использовать содержимое секрета.

{% list tabs %}

- API

    Чтобы получить содержимое секрета:
    1. [Получите IAM-токен]{% if product == "yandex-cloud" %}(../iam/operations/iam-token/create.md){% endif %}{% if product == "cloud-il" %}(../iam/operations/iam-token/create-for-federation.md){% endif %}, необходимый для аутентификации и сохраните его в переменную:
    
        ```
        export IAM_TOKEN=$(yc iam create-token)
        ```
        
        Также вы можете получить IAM-токен сервисного аккаунта изнутри ВМ, к которой он привязан. Для этого выполните запрос в [сервис метаданных](../compute/operations/vm-info/get-info.md#request-examples). Пример с использованием утилиты [jq](https://stedolan.github.io/jq/):
        
        ```                
        export IAM_TOKEN=$(curl -H Metadata-Flavor:Google http://169.254.169.254/computeMetadata/v1/instance/service-accounts/default/token | jq -r .access_token)
        ```
       
    1. Выполните запрос: 
    
        ```
        curl -X GET -H "Authorization: Bearer ${IAM_TOKEN}" \
        https://{{ api-host-lockbox-payload }}/lockbox/v1/secrets/<идентификатор секрета>/payload
        ```
{% endlist %}
