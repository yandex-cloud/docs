# Средства защиты, доступные пользователям облачных сервисов

## Системы аутентификации {#auth-syst}

На данный момент пользователям доступны следующие виды аккаунтов в {{ yandex-cloud }}:
- [Аккаунты на Яндекс.Паспорте](#passport-accounts)
- [Федеративные аккаунты](#fed-accounts)
- [Сервисные аккаунты](#service-accounts)


### Аккаунты на Яндекс.Паспорте {#passport-accounts}

Сервис [Яндекс.Паспорт](https://yandex.ru/support/passport/index.html) обеспечивает аутентификацию и авторизацию пользователей Яндекса, а также хранит личные данные пользователей. Для аутентификации через Яндекс.Паспорт необходимо использовать логин и пароль либо пин-код и приложение Яндекс.Ключ, если настроена двухфакторная аутентификация. Если аутентификация успешна, то Яндекс.Паспорт устанавливает в браузере пользователя cookie на домен yandex.TLD. Аутентификация пользователя и установка cookie проходят в Яндекс.Паспорте, который, в том числе, хранит криптографические ключи для контроля целостности cookie. 

Cookie впоследствии используется сервисом {{ iam-short-name }} для аутентификации пользователя и выдачи ему IAM-токена для доступа к API {{ yandex-cloud }}. Криптографические ключи, использующиеся для контроля целостности IAM-токена, хранятся в сервисе {{ iam-short-name }}.  

Для работы с командной строкой (CLI) Яндекс.Паспорт выдает пользователю OAuth-токен, который хранится на диске пользователя и используется для получения временного IAM-токена. Во всех случаях время жизни IAM-токена — 24 часа, время жизни OAuth-токена — один год с момента выдачи. Криптографические ключи, использующиеся для контроля целостности OAuth-токена, хранятся в Яндекс.Паспорте. 

### Федеративные аккаунты {#fed-accounts}

В случае использования [федерации удостоверений](../../iam/concepts/users/identity-federations) сервис {{ iam-short-name }} принимает от стороннего поставщика удостоверений (Identity Provider) подписанный SAML-токен, который содержит информацию об аутентифицированном пользователе. 

Ключ криптографической подписи SAML-токенов хранится у поставщика удостоверений клиента, поэтому управление этим ключом, его безопасное хранение и использование является ответственностью клиента. Открытая часть ключа, использующаяся для проверки подписи SAML-токенов, устанавливается клиентом при настройке федерации удостоверений и впоследствии хранится в сервисе {{ iam-short-name }}.

После получения и проверки подписи SAML-токена сервис {{ iam-short-name }} устанавливает пользователю cookie на домен cloud.yandex.TLD. Криптографические ключи, использующиеся для контроля целостности cookie, хранятся и управляются в сервисе {{ iam-short-name }}.


### Сервисные аккаунты {#service-accounts}

[Сервисные аккаунты](../../iam/concepts/users/service-accounts) представляют собой особый тип аккаунтов, которые используются для доступа к ресурсам {{ yandex-cloud }} от имени приложения. Сервисные аккаунты могут аутентифицироваться при помощи ключей следующих видов: 
- Авторизованные ключи — RSA-ключи, которые генерируются в сервисе {{ iam-short-name }} и становятся доступными для скачивания пользователю один раз сразу после создания. В сервисе {{ iam-short-name }} хранится только открытая часть ключа, закрытая часть хранится у пользователя. Обеспечение безопасности закрытой части — ответственность пользователя. См. раздел Авторизованные ключи. 
- Статические ключи, которые используются для доступа к сервисам {{ message-queue-short-name }} (YMQ) и {{ objstorage-full-name }}. Копия статических ключей выдается пользователю сразу после их создания сервисом {{ iam-short-name }}. Статические ключи хранятся в сервисе {{ iam-short-name }} и нужны для проверки целостности запросов к YMQ и {{ objstorage-full-name }}. См. раздел Статические ключи доступа, совместимые с AWS API. 
- API-ключи, которые служат для доступа к API {{ yandex-cloud }}. API-ключи используются в некоторых сервисах для упрощенной аутентификации. См. раздел API-ключ. 

## Сетевая безопасность {#network-sec}

Для защиты облачной сети инфраструктуры, размещенной в {{ yandex-cloud }}, рекомендуется управлять входящим и исходящим интернет-трафиком, а также разделять виртуальные сети среды {{ yandex-cloud }} на сегменты исходя из задач. 

Для управления входящим интернет-трафиком рекомендуется использовать виртуальные машины без публичных IP-адресов и балансировщик нагрузки. Это позволит сократить поверхность атаки и ограничить трафик на виртуальные машины необходимыми протоколами. Балансировщик нагрузки может быть интегрирован с сервисом Yandex DDoS Protection, который защитит ваш сервис от DDoS-атак. Для защиты от атак на уровне L7 рекомендуется использовать виртуальные образы или облачные сервисы с защитным экраном Web Application Firewall (WAF).  

Для управления исходящим трафиком рекомендуется использовать виртуальные машины без публичных IP-адресов, предоставляя им доступ в интернет через NAT-инстанс, который выполняет функцию сетевого шлюза или прокси-сервера.  

Для разграничения доступа в {{ yandex-cloud }} можно создать отдельную сеть для каждой из команд разработки или для каждой из сред: разработки, тестирования, промышленной эксплуатации. При таком подходе для связки сетей между собой рекомендуется использовать образы сетевых устройств, доступные в {{ marketplace-name }}, чтобы контролировать сетевые потоки между сетями. 

Связь с локальной инфраструктурой или интернетом рекомендуется обеспечивать с помощью VPN-инстанса, сетевых образов из {{ marketplace-name }} или {{ interconnect-full-name }}.

## Дополнительные инструменты защиты данных {#more-tools}

{{ yandex-cloud }} защищает данные клиентов криптографическими средствами, при этом пользователь может дополнительно защищать свои данные с помощью сервиса {{ kms-short-name }} ({{ kms-name }}). Он предназначен для управления криптографическими ключами пользователя в {{ yandex-cloud }} и предоставляет дополнительные возможности по шифрованию данных. 

Дополнительную информацию можно узнать в [документации сервиса {{ kms-full-name }}](../../kms/).