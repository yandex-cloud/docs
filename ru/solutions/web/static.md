# Статический веб-сайт в {{ objstorage-full-name }}

С помощью этой инструкции вы научитесь загружать статические HTML-файлы вашего веб-сайта в хранилище [{{ objstorage-full-name }}](../../storage) и привязать доменное имя к [бакету](../../storage/concepts/bucket.md), в котором будут храниться файлы.

Чтобы разместить статический веб-сайт в Object Storage:

1. [Подготовьте облако к работе](#before-you-begin).
1. [Создайте бакет с публичным доступом](#create-public-bucket).
1. [Настройте главную веб-страницу сайта и страницу ошибки](#index-and-error).
1. [Настройте использование собственного домена](#connect-your-domain).
1. [Загрузите файлы сайта](#upload-files).
1. [Проверьте работу сайта](#test-site).

Если сайт вам больше не нужен, [удалите его файлы из хранилища](#clear-out).


## Подготовьте облако к работе {#before-you-begin}

Перед использованием {{ objstorage-full-name }} нужно зарегистрироваться в {{ yandex-cloud }} и создать платежный аккаунт:

{% include [prepare-register-billing](../../_includes/solutions/_common/prepare-register-billing.md) %}

Если у вас есть активный платежный аккаунт, вы можете создать или выбрать каталог, в котором будет находиться ваш бакет. Перейдите на [страницу облака](https://console.cloud.yandex.ru/cloud) и выберите или создайте каталог, в котором вы хотите создать бакет. [Подробнее об иерархии ресурсов {{ yandex-cloud }}](../../resource-manager/concepts/resources-hierarchy.md).


### Необходимые платные ресурсы {#paid-resources}

В стоимость поддержки статического сайта входит:

* плата за хранение данных статического сайта (см. [тарифы {{ objstorage-full-name }}](../../storage/pricing.md#prices-storage));
* плата за операции с данными (см. [тарифы {{ objstorage-full-name }}](../../storage/pricing.md#prices-operations));
* стоимость исходящего трафика из {{ yandex-cloud }} в интернет (см. [тарифы {{ objstorage-full-name }}](../../storage/pricing.md#prices-traffic)).


## Создайте публичный бакет {#create-public-bucket}

Чтобы создать бакет для файлов статического сайта:

1. Перейдите в [консоль управления]({{ link-console-main }}) {{ yandex-cloud }} и выберите каталог, в котором будете выполнять операции.
1. На странице каталога нажмите кнопку **Создать ресурс** и выберите **Бакет**.
1. В поле **Имя** введите имя бакета, например, `www.example.com`. Имя бакета будет использоваться в доменном имени сайта: `https://www.example.com.{{ s3-web-host }}`.

   Имя должно удовлетворять требованиям:

   {% include [bucket-name-reqs](../../_includes/bucket-name-reqs.md) %}

   {% note info %}

   Если вы планируете использовать собственный домен для веб-сайта, имя бакета должно в точности совпадать с именем вашего домена, а домен должен быть третьего и более уровня.

   {% endnote %}

1. Укажите максимальный размер бакета в ГБ.
1. Выберите **Публичный** доступ к бакету.
1. Нажмите кнопку **Создать бакет**.


## Настройте главную страницу сайта и страницу ошибки {#index-and-error}

Необходимо загрузить и настроить индексную страницу и страницу ошибки. Для этого:

1. Создайте на компьютере файлы:
   * `index.html` с текстом `Hello world!`.
      Содержимое файла будет показываться при обращении к главной странице веб-сайта.
   * `error.html` с текстом `Error!`.
      Содержимое файла будет показываться при ответах веб-сайта с ошибками `4хх`.
1. На вкладке **Объекты** на странице вашего бакета нажмите кнопку **Загрузить**. В открывшемся окне выберите созданные файлы и нажмите кнопку подтверждения.
1. Нажмите кнопку **Загрузить**.
1. Откройте вкладку **Веб-сайт** на странице вашего бакета.
1. Выберите **Хостинг**.
1. В поле **Главная страница** укажите `index.html`.
1. В поле **Страница ошибки** укажите `error.html`.
1. Нажмите кнопку **Сохранить**.
1. Проверьте, что главная страница веб-сайта открывается. Для этого подключитесь к сайту через браузер по ссылке вида `https://{имя-бакета}.{{ s3-web-host }}`.
1. Проверьте, что страница ошибки открывается. Для этого подключитесь к сайту через браузер по ссылке вида `https://{имя-бакета}.{{ s3-web-host }}/error-check`.


## Настройте использование собственного домена {#connect-your-domain}

Чтобы использовать для веб-сайта собственный домен:

- Проверьте, что имя бакета в точности совпадает с именем домена. Домен должен быть третьего и более уровня, например, `www.example.com`.
- Создайте запись типа CNAME (Canonical Name — каноническое имя) у своего провайдера DNS или на собственном DNS-сервере.

{% note info %}

По умолчанию сайт доступен только по протоколу HTTP, например, `http://www.example.com` или `http://www.example.com.{{ s3-web-host }}`. Чтобы поддержать для сайта протокол HTTPS, [загрузите собственный сертификат безопасности](../../storage/operations/hosting/certificate.md) в {{ objstorage-name }}.

{% endnote %}

В инструкции ниже описана настройка внешнего DNS-сервиса на примере [reg.ru](https://www.reg.ru/) для доменных имен `www.example.com.{{ s3-web-host }}` и `www.example.com`:

1. На вкладке **Веб-сайт** на странице бакета в [консоли управления]({{ link-console-main }}) найдите адрес сайта.
1. Войдите в панель управления внешнего DNS-сервиса. Перейдите в [список ваших доменов](https://www.reg.ru/user/domain_list) и нажмите на имя нужного домена.
1. Перейдите по ссылке **Управление зоной** в блоке **Управление доменом**.
1. Создайте CNAME-запись со значениями полей:
   * **Subdomain** — `www`.
   * **Canonical name** — адрес сайта с точкой на конце, например, `www.example.com.{{ s3-web-host }}.`.
1. Подождите 15-20 минут, пока изменения DNS-записей вводятся в действие. Время ожидания может отличаться для вашего DNS-сервиса.


## Загрузите файлы веб-сайта {#upload-files}

После настройки и проверки доступности сайта загрузите в бакет остальные файлы, необходимые для работы сайта. Используйте для этого [консоль управления]({{ link-console-main }}), [API](../../storage/s3/api-ref/object/upload.md) или один из доступных [инструментов для работы с {{ objstorage-name }}](../../storage/tools/).


## Проверьте работу сайта {#test-site}

Чтобы проверить работу сайта, откройте в браузере адрес 

```
http://www.example.com.website.yandexcloud.net
```


## Как удалить созданные ресурсы {#clear-out}

Чтобы перестать платить за хранение файлов, [удалите](../../storage/operations/objects/delete.md) загруженные файлы.
