# Визуализация данных из статистики подкастов Яндекс.Музыки

В качестве источника данных будет использован подкаст из Яндекс.Музыки, к которому у вас есть доступ. 
Аналитика подкастов позволяет получать статистику и анализировать данные по прослушиваниям и подписчикам подкастов в Яндекс.Музыке. Для работы с аналитикой подкастов у вас должен быть доступ к одному или более подкастам.

Для визуализации и исследования данных [подготовьте облако к работе](#before-you-begin), затем выполните следующие шаги:

1. [Создайте подключение и стандартный дашборд](#create-dashboard).
1. [Измените стандартный дашборд](#changing-dashboard).
1. [Измените чарт](#changing-chart).
1. [Создайте новый чарт и добавьте его на дашборд](#creating-chart).


## Подготовьте облако к работе {#before-you-begin}

Чтобы воспользоваться аналитикой подкастов в {{ datalens-full-name }}, проверьте доступ к экземпляру {{ datalens-full-name }}. Если у вас его нет доступа, то его можно активировать бесплатно.

В зависимости от наличия доступа к {{ datalens-full-name }} выберите из вариантов:

{% list tabs %}

- Новый пользователь

    Если вы никогда не использовали Yandex DataLens (у вас нет доступа):
    
   1.  Откройте [главную страницу сервиса](https://datalens.yandex.ru).
   1.  Нажмите кнопку **Активировать {{ datalens-full-name }}**. Выберите облако для создания экземпляра {{ datalens-full-name }}.
   1.  Откроется главная страница {{ datalens-full-name }}.
   
- Пользуюсь {{ datalens-full-name }}

   Если у вас уже есть собственный экземпляр {{ datalens-full-name }}:
   
   1. Откройте [главную страницу сервиса](https://datalens.yandex.ru).
   1. Откроется главная страница {{ datalens-full-name }}.

{% endlist %}

Перейдите к созданию [подключения и стандартного дашборда](#create-dashboard).

## Создайте подключение и стандартный дашборд {#create-dashboard}

{% note warning %}

 Создание подключения и работа с данными по аналитике подкастов возможна для пользователей, у которых есть права на какой-либо подкаст в Яндекс.Музыке. Если у вас нет доступа к подкасту, то данные не отобразятся на дашборде.
 
 Вы получите доступ, загрузив подкаст на Яндекс.Музыку. К подкасту привязана почта на Яндексе, указанная при загрузке.
   
{% endnote %}

1. Перейдите по ссылке, которую вы получили в письме, заполнив форму для подключения.
1. Введите имя подключения **Мой Подкаст** (название может быть произвольным).
1. Нажмите кнопку **Получить ключ**. Если вы первый раз создаете подключение к подкастам Яндекс.Музыки, предоставьте сервису необходимые разрешения.
1. Проверьте, что настройки заданы корректно, нажав кнопку **Проверить подключение**. Если проверка не прошла, убедитесь, что у вашего текущего аккаунта есть доступ к подкастам.
1. После успешной проверки подключения нажмите кнопку **Создать**.
1. После создания подключения откроется папка с набором стандартных объектов:
    * ![image](../../_assets/datalens/solution-10/04-music-connection.png =20x20) Подключение — набор параметров доступа к данным подкастов.
    * ![image](../../_assets/datalens/solution-10/03-datasets.png =20x20) Датасеты — наборы измерений и показателей, на основе которых строятся чарты.
        * Датасет **D01. Прослушивания подкастов** — датасет с данными про прослушиваниям.
        * Датасет **D02. Подписчики подкастов** — датасет с данными по подписчикам.
    * ![image](../../_assets/datalens/solution-10/01-charts.png =20x20) Чарты  — набор отдельных визуализаций в виде диаграмм и таблиц, используемых на дашборде.
    * ![image](../../_assets/datalens/solution-10/02-dashboard.png =20x20) Дашборд **Аналитика подкастов на Яндекс.Музыке** — страница с набором виджетов (графиков, таблиц, фильтров).
 
    Вы можете вносить правки и дополнять стандартные объекты по своему усмотрению. Например, удалить ненужный график с дашборда или добавить новый, изменить существующий график или добавить селектор на дашборд.
1. Откройте дашборд **Аналитика подкастов на Яндекс.Музыке**.
   1. Дашборд содержит четыре вкладки:
    * Прослушивания — общая статистика прослушиваний, динамика прослушиваний, статистика прослушиваний отдельных эпизодов и распределения прослушиваний по дням недели и времени суток.
    * Аудитория — статистика по аудитории слушателей, включая социально-демографические данные.
    * Подписчики — статистика по аудитории подписчиков, динамика подписок и отписок, социально-демографические данные.
    * Справочник — справка по расчетным показателям и терминам, используемых в данных и на дашбордах.
    
    ![image](../../_assets/datalens/solution-10/05-music-dashboard-example.png)
    
   1. Каждая вкладка содержит:     
    * Тестовые виджеты — заголовки, комментарии и подсказки.
    * Селекторы — фильтры по различным измерениям, которыми можно фильтровать содержимое дашбордов.
    * Чарты — графики, таблицы и другие визуализации.    
 
    ![image](../../_assets/datalens/solution-10/06-dashboard-elements.png)

## Изменение дашборда и чартов, работа с данным {#changing-dashboard-and-data}

### Изменение дашборда {#changing-dashboard}

Вы можете изменять порядок графиков и селекторов, увеличивать или уменьшать их, отказаться от каких-то данных и, наоборот, собрать вместе самое нужное.

1. Откройте дашборд **Аналитика подкастов на Яндекс.Музыке** и перейдите на вкладку **Аудитория**.
1. Нажмите кнопку **Редактировать** в правом верхнем углу.
1. Удалите чарт **Платформы прослушивания**. Для этого нажмите значок ![image](../../_assets/datalens/horizontal-ellipsis-black.svg)  в верхнем правом углу графика и выберите **Удалить**.
            
     ![image](../../_assets/datalens/solution-10/07-delete-chart.png)       
    
1. Разместите чарты **Пол слушателей** и **Возраст слушателей** таким образом, чтобы они заполнили пустое пространство после удаления чарта на предыдущем шаге. 
    1. Перетащите чарт, кликнув на сам чарт. Измените размер чарта, потянув за треугольник в нижнем правом углу чарта.
    
    ![image](../../_assets/datalens/solution-10/08-change-chart-size.png)  
    
1. Нажмите кнопку **Добавить** и выберите **Селектор**.
    
    ![image](../../_assets/datalens/solution-10/09-add-selector.png)
    
    1. Выберите датасет **D02.Подписчики подкастов**.
    1. Выберите поле **Страна**. После этого автоматически заполнится **Заголовок** по имени выбранного поля.        
    1. Активируйте опцию **Показывать напротив заголовка селектора**.
    1. Нажмите галочку **Показывать** напротив заголовка селектора.
    1. Включите опцию **Множественный выбор**.
    1. В списке **Значение по умолчанию** выберите **Россия** (можно выбрать любую другую страну).
    1. Нажмите кнопку **Добавить**.
   
     ![image](../../_assets/datalens/solution-10/10-selector-settings.png) 
   
1. Перенесите селектор наверх, при необходимости скорректируйте размеры чартов.
1. Разместите селекторы на одной линии, изменяя их размер.

     ![image](../../_assets/datalens/solution-10/11-dashboard-selector.png) 
     
1. Нажмите кнопку **Сохранить** в правом верхнем углу дашборда.

### Изменение чарта {#changing-chart}

Вы можете редактировать и настраивать любые графики. Предположим, что мы хотим видеть на графике относительную активность слушателей разных полов в течение суток. 

1. Откройте дашборд **Аналитика подкастов на Яндекс.Музыке** и перейдите на вкладку **Прослушивания**.
1. Прокрутите дашборд вниз до чарта **Время прослушивания по времени суток**.
1. Нажмите значок ![image](../../_assets/datalens/horizontal-ellipsis-black.svg) в верхнем правом углу графика и выберите **Редактировать**.

    ![image](../../_assets/datalens/solution-10/12-edit-dashboard.png) 

1. Область конфигурации чарта (визард) состоит из трех основных частей:
   * Панель выбора со списком доступных измерений и показателей для построения чарта.
   * Панель настройки визуализации с различными секциями, с помощью которых можно настроить чарт.
   * Предпросмотр чарта.
   
   ![image](../../_assets/datalens/solution-10/13-chart-elements.png) 
   
1. Удалите измерение **Дата и время прослушивания** из секции **Цвета**.
1. Добавьте измерение **Пол** в секцию **Цвета**.

   ![image](../../_assets/datalens/solution-10/14-add-field.png) 
    
1. Выберите другой тип визуализации — **Нормированная столбчатая диаграмма**.
    
   ![image](../../_assets/datalens/solution-10/15-bar-chart.png) 

1. Теперь каждый столбец показывает относительное распределение **Слушателей** по **Полу** в разрезе **Времени суток**. Нажмите **Сохранить** в правом верхнем углу чарта.

   ![image](../../_assets/datalens/solution-10/16-chart-result.png)  

Обновите страницу с дашбордом, чтобы применить изменения чарта.

### Создание нового чарта, добавление чарта на дашборд {#creating-chart}

Предположим, что мы хотим построить диаграмму с общим количеством прослушиваний по стримам за весь период.
1. Откройте [главную страницу сервиса](https://datalens.yandex.ru).
1. Нажмите **Создать чарт**.
1. Перейдите в папку **Подкасты**.
1. Выберите датасет **D01. Прослушивания подкастов**.

   ![image](../../_assets/datalens/solution-10/17-dataset-podcasts.png)  

1. Выберите тип визуализации **Диаграмма с областями**.
1. Добавьте измерение **Дата прослушивания** в секцию **Х**.
1. Добавьте показатель **Слушатели** в секцию **Y**.
1. Добавьте измерение **Дата прослушивания** в секцию **Фильтры**.

   ![image](../../_assets/datalens/solution-10/20-select-field.png) 
   
   1. Нажмите иконку ![image](../../_assets/datalens/solution-10/19-data-icon.png =20x20) поля **Дата прослушивания** в секции **Фильтры**.
        1. В списке **Пресет** выберите **Поcледние 365 дней** и нажмите **Применить фильтр**.
1. Нажмите иконку ![image](../../_assets/datalens/solution-10/19-data-icon.png =20x20) поля **Дата прослушивания** в секции **Х**.
   1. В списке **Группировка** выберите **Месяц**, затем нажмите **Применить**.
1. Добавьте измерение **Эпизод** в секцию **Цвета**.   
1. Если у вас слишком большое количество эпизодов, скройте легенду внизу графика. Для этого нажмите значок ![image](../../_assets/datalens/gear.svg) ⟶ **Скрыть**, затем кнопку **Применить**.

    ![image](../../_assets/datalens/solution-10/21-legend.png) 

1. Нажмите кнопку **Сохранить** в правом верхнем углу чарта.
    1. Введите название **Динамика прослушиваний по эпизодам** и нажмите **Применить фильтр**.
   
   {% note info "Примечание" %}
    
    Если фильтр поля **Дата прослушивания** добавлен на дашборд, фильтрация в чарте по этому полю будет игнорироваться.
  
   {% endnote %}

1. Перейдите к верхней панели чарта и нажмите иконку навигации ![image](../../_assets/datalens/folder.svg). 
1. В открывшемся окне выберите дашборд **Аналитика подкастов на Яндекс.Музыке**.
1. В правом верхнем углу дашборда нажмите кнопку **Редактировать**.
1. Нажмите кнопку **Добавить** ⟶ **Чарт**.

    ![image](../../_assets/datalens/solution-10/22-add-chart.png). 

1. В открывшемся окне нажмите кнопку **Выбрать**.
   1. Выберите чарт **Динамика прослушиваний по эпизодам**. После этого автоматически заполнится поле **Заголовок** по названию выбранного чарта.
   1. Нажмите кнопку **Добавить**.
1. Расположите график рядом с таблицей в разделе **Статистика прослушиваний эпизодов** и нажмите **Сохранить**. 
    
   ![image](../../_assets/datalens/solution-10/23-dashboard-with-charts.png). 


## Вопросы и ответы {#qa}
      
{% cut "Почему подключиться можно только с аккаунтом на Яндексе?" %}

   Использование аккаунта на Яндексе в Яндекс.Музыке и {{ datalens-short-name }} обеспечивает высокие меры безопасности данных.

{% endcut %}

{% cut "Несколько моих знакомых точно прослушали подкаст, но в статистике данных меньше. Почему?" %}    
   
  Данные обновляются ежедневно в 13:00. Если после этого времени кто-то послушал подкаст, данные появятся в статистике только на следующий день. Также в статистике не учитываются воспроизведения меньше 1 секунды.

{% endcut %} 

{% cut "Число подписчиков на сервисе больше, чем указано в DataLens. Почему?" %}
  
   На сервисе новые подписчики появляются мгновенно, а в статистике — только на следующий день. Если человек подписался на подкаст сегодня, число подписчиков в статистике увеличится завтра.

{% endcut %}   

{% cut " Почему некоторых выпусков моего подкаста нет в статистике?" %}
 
   В статистике отображаются только те выпуски, в которых уже были прослушивания. Если какой-то выпуск сейчас не виден, он появится на графиках позже, как только произойдет первое прослушивание.
   
{% endcut %}    

{% cut "Можно ли увидеть редакционное промо в статистике?" %}

   Периоды продвижения и промо-тайтлы отдельно не отображаются в статистике, однако резкий скачок прослушиваний может говорить о том, что подкаст получил промо.

{% endcut %}   

{% cut " Я могу изменять стандартный дашборд?" %}   
  
   Да, вы можете изменять дашборд и связанные с ним объекты.
   
{% endcut %}  

{% cut "Я случайно удалил дашборд. Как восстановить?" %}    
   
   Пересоздайте подключение, дашборд развернется еще раз.
   
{% endcut %}  

{% cut "Зачем нужны такие сложные настройки чартов?" %}      
   
   {{ datalens-short-name }} — полноценный инструмент анализа и визуализации данных. Обширный набор настроек открывает возможность построения различных видов визуализаций, отвечающих тем или иным требованиям пользователей.

{% endcut %}     
   
{% cut "Как еще я могу использовать DataLens?" %}

   Вы не ограничены в использовании {{ datalens-short-name }}. Можно подключаться к своим источникам данных, строить чарты и дашборды, делиться ими с коллегами.
   
{% endcut %}     




















   
   


