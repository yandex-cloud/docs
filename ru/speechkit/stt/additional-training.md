# Расширение модели распознавания речи

{{ speechkit-name }} предоставляет два способа, которыми можно повысить качество распознавания речи. 

## Автотюнинг {#autotuning} 

По умолчанию {{ speechkit-name }} не сохраняет переданные пользователем данные. Однако самый эффективный способ улучшать модель распознавания речи — это обучать ее на реальных пользовательских данных. 

Чтобы повысить качество распознавания, вы можете использовать _автотюнинг_ модели. Автотюнинг позволит сохранять переданные в запросах данные и использовать их для дальнейшего обучения. Для этого в запросах API указывайте заголовок `x-data-logging-enabled: true`. Пример запроса с включенным логированием см. в разделе [{#T}](../concepts/support-headers.md).

Автотюнинг позволяет повышать качество распознавания в процессе работы модели без дополнительных действий с вашей стороны. 

## Дообучение модели {#advanced-training}

Основная модель распознавания речи предназначена для работы с общей лексикой, однако ее может быть недостаточно для распознавания специфичной лексики. С помощью дообучения модель можно научить распознавать доменно-специфичные термины из разных областей:

* медицина — диагнозы, биологические термины, названия лекарств;
* бизнес — названия компаний;
* торговля — номенклатура товаров (ювелирные изделия, электротехника и т.п.);
* финансы — банковские термины и названия банковских продуктов.

### Данные для дообучения {#data}

Для дообучения необходимы следующие данные:

* _Глоссарий_ — полный список терминов. В глоссарии могут содержаться как слова, присутствующие на аудиозаписях для тестирования, так и другая лексика. Глоссарий должен быть предоставлен в отдельном файле, каждый термин размещается в файле на отдельной строке.
* _Текстовые шаблоны_ — однородные фразы, на основе которых модель будет синтезировать высказывания. Длина шаблона вместе с переменными не должна превышать 200 символов.

{% include [data-formats](../../_includes/speechkit/training-data-format.md) %}

Из полученных файлов будут подготовлены текстовые данные. В переменную часть шаблонов подставляются термины из глоссариев. Чтобы дообучение было эффективным, необходимо достаточное количество данных:

* Не менее 1 тысячи высказываний.
* Не менее 3-5 фраз, желательно пропорционально частоте использования термина в реальных задачах.

Например, файлы-глоссарии `first-name.tsv`, `middle-name.tsv` и `last-name.tsv` для дообучения модели колл-центра могут содержать имена, отчества и фамилии клиентов. 

| first-name.tsv | middle-name.tsv | last-name.tsv |
|---|---|---|
|  Никита<br>Кирилл<br>Павел<br>... <br> |  Александрович<br>Петрович<br>Казимирович<br>... <br> | Романов<br>Алексеев<br>Кукушкин<br>... <br> | 
  
Если фразы-шаблоны предполагают, что термины из глоссария могут склоняться, для каждой формы нужно создать отдельный файл-глоссарий. Например, файлы с именами в творительном падеже будут содержать записи:

| first-name-ablative.tsv | middle-name-ablative.tsv | last-name-ablative.tsv |
|---|---|---|
|  Никитой<br>Кириллом<br>Павлом<br>... <br> |  Александровичем<br>Петровичем<br>Казимировичем<br>... <br> | Романовым<br>Алексеевым<br>Кукушкиным<br>... <br> |

Тогда файл с шаблонами `templates.tsv` может состоять из записей вида

```
Добрый день, вы {first-name=first-names.tsv} {middle-name=middle-names.tsv} {last-name=last-names.tsv}?
Здравствуйте, я могу поговорить с {first-name=first-names-ablative.tsv} {middle-name=middle-names-ablative.tsv}?
```

### Загрузка данных для дообучения {#import-data}

Чтобы передать данные для дообучения команде {{ speechkit-name }}, обратитесь к своему менеджеру.


### Сроки готовности модели {#commitments}


Как правило, изменения поступают в модель `general:rc` в течение 4 недель по стандартному циклу подготовки релиза.
 
