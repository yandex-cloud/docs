---
subcategory: Virtual Private Cloud (VPC)
page_title: 'Yandex: yandex_vpc_security_group'
description: Manage a Yandex VPC Security Group.
sourcePath: en/terraform/tf-ref/yandex-cloud/resources/vpc_security_group.md
---

# yandex_vpc_security_group (Resource)

Manages a Default Security Group within the Yandex Cloud. For more information, see the official documentation of [security group](https://yandex.cloud/docs/vpc/concepts/security-groups) or [default security group](https://yandex.cloud/docs/vpc/concepts/security-groups#default-security-group).

{% note warning %}

This resource is not intended for managing security group in general case. To manage normal security group use [yandex_vpc_security_group](vpc_security_group.html)

{% endnote %}


When [network](https://yandex.cloud/docs/vpc/concepts/network) is created, a non-removable security group, called a *default security group*, is automatically attached to it. Life time of default security group cannot be controlled, so in fact the resource `yandex_vpc_default_security_group` does not create or delete any security groups, instead it simply takes or releases control of the default security group.

{% note warning %}

When Terraform takes over management of the default security group, it **deletes** all info in it (including security group rules) and replace it with specified configuration. When Terraform drops the management (i.e. when resource is deleted from statefile and management), the state of the security group **remains the same** as it was before the deletion.

{% endnote %}


{% note warning %}

Duplicating a resource (specifying same `network_id` for two different default security groups) will cause errors in the apply stage of your's configuration.

{% endnote %}


## Example Usage

```terraform
//
// Create a new VPC Security Group.
//
resource "yandex_vpc_security_group" "sg1" {
  name        = "My security group"
  description = "description for my security group"
  network_id  = yandex_vpc_network.lab-net.id

  labels = {
    my-label = "my-label-value"
  }

  ingress {
    protocol       = "TCP"
    description    = "rule1 description"
    v4_cidr_blocks = ["10.0.1.0/24", "10.0.2.0/24"]
    port           = 8080
  }

  egress {
    protocol       = "ANY"
    description    = "rule2 description"
    v4_cidr_blocks = ["10.0.1.0/24", "10.0.2.0/24"]
    from_port      = 8090
    to_port        = 8099
  }

  egress {
    protocol       = "UDP"
    description    = "rule3 description"
    v4_cidr_blocks = ["10.0.1.0/24"]
    from_port      = 8090
    to_port        = 8099
  }
}

// Auxiliary resources
resource "yandex_vpc_network" "lab-net" {
  name = "lab-network"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `network_id` (String) ID of the network this security group belongs to.

### Optional

- `description` (String) The resource description.
- `egress` (Set of Object) A list of egress rules. (see [below for nested schema](#nestedatt--egress))
- `folder_id` (String) The folder identifier that resource belongs to. If it is not provided, the default provider `folder-id` is used.
- `ingress` (Set of Object) A list of ingress rules. (see [below for nested schema](#nestedatt--ingress))
- `labels` (Map of String) A set of key/value label pairs which assigned to resource.
- `name` (String) The resource name.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `created_at` (String) The creation timestamp of the resource.
- `id` (String) The ID of this resource.
- `status` (String) Status of this security group.

<a id="nestedatt--egress"></a>
### Nested Schema for `egress`

Optional:

- `description` (String)
- `from_port` (Number)
- `id` (String)
- `labels` (Map of String)
- `port` (Number)
- `predefined_target` (String)
- `protocol` (String)
- `security_group_id` (String)
- `to_port` (Number)
- `v4_cidr_blocks` (List of String)
- `v6_cidr_blocks` (List of String)


<a id="nestedatt--ingress"></a>
### Nested Schema for `ingress`

Optional:

- `description` (String)
- `from_port` (Number)
- `id` (String)
- `labels` (Map of String)
- `port` (Number)
- `predefined_target` (String)
- `protocol` (String)
- `security_group_id` (String)
- `to_port` (Number)
- `v4_cidr_blocks` (List of String)
- `v6_cidr_blocks` (List of String)


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

The resource can be imported by using their `resource ID`. For getting the resource ID you can use Yandex Cloud [Web Console](https://console.yandex.cloud) or [YC CLI](https://yandex.cloud/docs/cli/quickstart).

```shell
# terraform import yandex_vpc_security_group.<resource Name> <resource Id>
terraform import yandex_vpc_security_group.sg1 enphq**********cjsw4
```
