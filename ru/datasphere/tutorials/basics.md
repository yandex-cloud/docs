# Как настроить проект для работы с облаком {{ yandex-cloud }}

{{ ml-platform-full-name }} обладает всем необходимым для [анализа данных](../../glossary/data-analytics.md) и обучения моделей машинного обучения. Однако если вы хотите использовать все возможности платформы {{ yandex-cloud }}, вам понадобится настроить проект {{ ml-platform-name }} для работы с облаком {{ yandex-cloud }} и интеграции с другими сервисами платформы.

В руководстве описаны принципы организации рабочего пространства в {{ ml-platform-name }} для эффективной работы с сервисами {{ yandex-cloud }}. 

1. [{#T}](#create-project).
1. [{#T}](#create-cloud).
1. [{#T}](#set-network).
1. [{#T}](#create-sa).
1. [{#T}](#examples).

Подробные инструкции по созданию и настройке ресурсов представлены в разделе Пошаговые инструкции документации соответствующих сервисов.

## Перед началом работы {#before-you-begin}

{% include [before-you-begin](../../_tutorials/_tutorials_includes/before-you-begin-datasphere.md) %}

## Создайте проект {#create-project}

Сообщества {{ ml-platform-name }} объединяют пользователей в команду, позволяют использовать общие ресурсы и [контролировать бюджет](../operations/community/billing-details.md). [Проекты](../concepts/project.md) внутри сообщества — это индивидуальные рабочие места пользователей, которые запускаются на [виртуальных машинах](../../glossary/vm.md) {{ yandex-cloud }}. В зависимости от [режима работы](../concepts/project.md#mode) в проекте может быть одна или несколько виртуальных машин, однако каждая ВМ будет закреплена за отдельным ноутбуком внутри проекта. 

{% note info %}

{{ ml-platform-name }} не предназначена для парного программирования. [В режиме {{ dd }}](../concepts/project.md#dd) совместная работа нескольких пользователей в одном проекте возможна при условии, что каждый пользователь работает в отдельном ноутбуке.

{% endnote %}

Создайте проект {{ ml-platform-name }}, как описано в [инструкции](../operations/projects/create.md). 

После этого [на странице редактирования проекта](../operations/projects/update.md) можно указать параметры для интеграции с другими сервисами {{ yandex-cloud }}.

## Создайте облако и каталог {#create-cloud}

Большинство сервисов {{ yandex-cloud }} работают внутри [каталогов облака](../../resource-manager/concepts/resources-hierarchy.md#rm-resources). Для доступа к облачным ресурсам используется [{{ console-full-name }}]({{ link-console-cloud }}) — консоль управления {{ yandex-cloud }}. 

Войдите в консоль управления, [создайте свое первое облако](../../resource-manager/operations/cloud/create.md) и [каталог](../../resource-manager/operations/folder/create.md), в котором будут работать сервисы, с которыми вы хотите работать из {{ ml-platform-name }}.

[Подробнее о взаимодействии пользователей и ресурсов в {{ yandex-cloud }}](../../overview/roles-and-resources.md).

{% note tip %}

Вы можете использовать несколько каталогов, чтобы гибко настраивать права доступа и разделить рабочие окружения и задачи. 

{% endnote %}

## Настройте сеть {#set-network}

Чтобы ресурсы сервисов {{ yandex-cloud }} могли обмениваться информацией между собой, необходимо [создать облачную сеть и подсеть](../../vpc/operations/network-create.md). По умолчанию сеть изолирована внутри {{ yandex-cloud }} без доступа в интернет. Чтобы облачные ресурсы имели доступ в интернет без использования [публичных IP-адресов](../../vpc/concepts/address.md#public-addresses), [создайте и настройте NAT-шлюз](../../vpc/operations/create-nat-gateway.md).

{% note info %}

По умолчанию проекты {{ ml-platform-name }} используют сервисную подсеть с доступом в интернет. Если вы укажете в настройках проекта свою подсеть без настроенного NAT-шлюза, обновление установленных пакетов и другие сетевые операции станут недоступны.

{% endnote %}

## Создайте сервисный аккаунт {#create-sa}

В {{ yandex-cloud }} существует специальный тип аккаунта для автоматизации действий — [сервисный аккаунт](../../iam/concepts/users/service-accounts.md). Сервисный аккаунт позволяет программам управлять ресурсами сервисов. Чтобы сервисный аккаунт получил разрешение выполнять операции с ресурсами, ему нужно назначить соответствующие [роли](../../iam/concepts/access-control/roles). О ролях, действующих в сервисе, можно узнать в разделе Управление доступом документации сервиса.

В {{ ml-platform-name }} существует два способа предоставить сервисному аккаунту возможность выполнять операции:
1. Если сервисный аккаунт должен выполнять операции _с ресурсами других сервисов_ от имени {{ ml-platform-name }}, добавьте его в настройки проекта.
1. Если сервисный аккаунт должен выполнять операции _с проектом или сообществом {{ ml-platform-name }}_ (запускать исполнение ячеек, создавать ресурсы и т.п.), добавьте его в список [участников проекта](../operations/projects/add-user.md) или [сообщества](../operations/community/add-user.md) с соответствующей ролью.

## Примеры интеграции сервисов {#examples}

В этом разделе вы найдете примеры настройки проекта для выполнения различных задач в {{ ml-platform-name }} и интеграции с сервисами {{ yandex-cloud }}.

### Вычисления на кластерах Apache Spark™ {#data-proc}

{{ ml-platform-name }} позволяет проводить вычисления на кластерах Apache Spark™, созданных в сервисе {{ dataproc-name }}. 

{% include [preferences](../../_includes/datasphere/settings-for-dataproc.md) %}

Подробнее о работе с кластерами {{ dataproc-name }} в {{ ml-platform-name }}:
* [{#T}](../concepts/data-proc.md).
* [{#T}](data-proc-integration.md).

### Развертывание предобученной модели в качестве сервиса {#docker-node}

Если вы хотите развернуть в {{ ml-platform-name }} модель в качестве отдельного сервиса, используйте [ноды на основе Docker-образа](../concepts/deploy/index.md#docker-node). В настройках проекта [укажите](../../datasphere/operations/projects/update.md) следующие параметры:

* Каталог по умолчанию для хранения логов ноды.
* Сервисный аккаунт с правами:
    * `container-registry.images.puller` — чтобы разрешить {{ ml-platform-name }} скачивать ваш Docker-образ для создания ноды.
    * `vpc.user` — для работы с сетью {{ ml-platform-name }}.
    * (опционально) `datasphere.user` — чтобы отправлять запросы в ноду.
    
Подробнее про развертывание сервисов в {{ ml-platform-name }}:
* [{#T}](../concepts/deploy/index.md).
* [{#T}](node-from-docker.md).