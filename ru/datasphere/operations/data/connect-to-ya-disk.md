# Подключение к Яндекс Диску

Вы можете подключиться к сервису хранения файлов [Яндекс Диск](https://disk.yandex.ru) из интерфейса {{ ml-platform-name }}.

## Перед началом {#before-begin}

1. [Зарегистрируйте](https://yandex.ru/dev/id/doc/dg/oauth/tasks/register-client.html) ваш проект в качестве приложения в Яндекс OAuth:
    1. Перейдите на [страницу создания приложения](https://oauth.yandex.ru/client/new) и авторизуйтесь с помощью [Яндекс ID](https://yandex.ru/support/id/index.html).
    1. В поле **Название приложения** укажите название проекта в {{ ml-platform-name }}.
    1. В блоке **Платформы** выберите **Веб-сервисы**.
    1. В появившемся поле **Callback URI #1** укажите адрес `https://oauth.yandex.ru/verification_code`.
    1. В блоке **Доступы** разверните пункт **Яндекс Диск REST API (cloud_api)** и выберите все предложенные доступы.
    1. Нажмите кнопку **Создать приложение**.
    1. Сохраните идентификатор (ID) и пароль приложения, они понадобятся при подключении к Яндекс Диску.

    {% note info %}

    При первом подключении {{ ml-platform-name }} к Яндекс Диску потребуется перейти на страницу авторизации Яндекс ID и скопировать код подтверждения в поле **Enter the confirmation code** ноутбука.

    {% endnote %}

1. {% include [before-begin](../../../_includes/datasphere/ui-before-begin.md) %}


## Загрузить содержимое из файла на Яндекс Диске в файл проекта {{ ml-platform-name }} {#get-file}

1. Перейдите в новую ячейку и скопируйте туда команду для загрузки содержимого из файла на Яндекс Диске:

    ```python
    from cloud_ml.storage.api import Storage
    disk = Storage.ya_disk(application_id='<идентификатор_приложения>', application_secret='<пароль_приложения>')
    disk.get('<путь_к_файлу_на_Яндекс_Диске>', '<путь_к_файлу_в_проекте_{{ ml-platform-name }}>')
    ```

    Где:

    * `<идентификатор_приложения>` — идентификатор приложения, зарегистрированного в Яндекс OAuth.
    * `<пароль_приложения>` — пароль приложения, зарегистрированного в Яндекс OAuth.
    * `<путь_к_файлу_на_Яндекс_Диске>` — путь к файлу на Яндекс Диске, содержимое которого нужно загрузить в {{ ml-platform-name }}.
    * `<путь_к_файлу_в_проекте_{{ ml-platform-name }}>` — путь к файлу в проекте {{ ml-platform-name }}, в который загружаются данные.

1. Запустите ячейку, выбрав в меню **Run** → **Run Selected Cells** (также можно использовать сочетание клавиш **Shift** + **Enter**).

## Загрузить содержимое из каталога на Яндекс Диске в каталог проекта {{ ml-platform-name }} {#get-dir}

1. Перейдите в новую ячейку и скопируйте туда команду для загрузки содержимого из каталога на Яндекс Диске:

    ```python
    from cloud_ml.storage.api import Storage
    disk = Storage.ya_disk(application_id='<идентификатор_приложения>', application_secret='<пароль_приложения>')
    disk.get_dir('<путь_к_каталогу_на_Яндекс_Диске>', '<путь_к_каталогу_в_проекте_{{ ml-platform-name }}>')
    ```

    Где:

    * `<идентификатор_приложения>` — идентификатор приложения, зарегистрированного в Яндекс OAuth.
    * `<пароль_приложения>` — пароль приложения, зарегистрированного в Яндекс OAuth.
    * `<путь_к_каталогу_на_Яндекс_Диске>` — путь к каталогу на Яндекс Диске, содержимое которого нужно загрузить в {{ ml-platform-name }}.
    * `<путь_к_каталогу_в_проекте_{{ ml-platform-name }}>` — путь к каталогу в проекте {{ ml-platform-name }}, в который загружаются данные.

1. Запустите ячейку.

## Загрузить содержимое из файла проекта {{ ml-platform-name }} в файл на Яндекс Диске {#put-file}

1. Перейдите в новую ячейку и скопируйте туда команду для загрузки содержимого файла проекта {{ ml-platform-name }} на Яндекс Диск:

    ```python
    from cloud_ml.storage.api import Storage
    disk = Storage.ya_disk(application_id='<идентификатор_приложения>', application_secret='<пароль_приложения>')
    disk.put('<путь_к_файлу_в_проекте_{{ ml-platform-name }}>', '<путь_к_файлу_на_Яндекс_Диске>')
    ```

    Где:

    * `<идентификатор_приложения>` — идентификатор приложения, зарегистрированного в Яндекс OAuth.
    * `<пароль_приложения>` — пароль приложения, зарегистрированного в Яндекс OAuth.
    * `<путь_к_файлу_в_проекте_{{ ml-platform-name }}>` — путь к файлу в проекте {{ ml-platform-name }}, содержимое которого нужно загрузить на Яндекс Диск.
    * `<путь_к_файлу_на_Яндекс_Диске>` — путь к файлу на Яндекс Диске, в который загружаются данные.

1. Запустите ячейку.

## Загрузить содержимое из каталога проекта {{ ml-platform-name }} в каталог на Яндекс Диске {#put-dir}

1. Перейдите в новую ячейку и скопируйте туда команду для загрузки содержимого каталога проекта {{ ml-platform-name }} на Яндекс Диск:

    ```python
    from cloud_ml.storage.api import Storage
    disk = Storage.ya_disk(application_id='<идентификатор_приложения>', application_secret='<пароль_приложения>')
    disk.put_dir('<путь_к_каталогу_в_проекте_{{ ml-platform-name }}>', '<путь_к_каталогу_на_Яндекс_Диске>')
    ```

    Где:

    * `<идентификатор_приложения>` — идентификатор приложения, зарегистрированного в Яндекс OAuth.
    * `<пароль_приложения>` — пароль приложения, зарегистрированного в Яндекс OAuth.
    * `<путь_к_каталогу_в_проекте_{{ ml-platform-name }}>` — путь к каталогу в проекте {{ ml-platform-name }}, содержимое которого нужно загрузить на Яндекс Диск.
    * `<путь_к_каталогу_на_Яндекс_Диске>` — путь к каталогу на Яндекс Диске, в который загружаются данные.

1. Запустите ячейку.