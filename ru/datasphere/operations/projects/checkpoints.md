# Версионирование. Работа с контрольными точками

Контрольная точка в {{ ml-platform-name }} — это состояние ноутбука, автоматически сохраняемое после каждого выполнения ячейки с кодом. Контрольная точка включает код ячеек, вывод и значения переменных.

## Перед началом {#before-begin}

Если проект уже открыт, перейдите на вкладку ноутбука.

Если нет, откройте проект:
1. {% include [include](../../../_includes/datasphere/first-step.md) %}
1. Перейдите во вкладку **Проекты**.
1. Выберите проект, который хотите открыть и нажмите значок ![image](../../../_assets/datalens/horizontal-ellipsis.svg).
1. Выберите **Открыть** и дождитесь открытия проекта.

## Создание контрольной точки {#create}

1. Откройте панель ![checkpoints-panel](../../../_assets/datasphere/jupyterlab/checkpoints-panel.svg) **Checkpoints-panel**.

   Если вы уже выполняли код в открытом проекте, то в списке **Checkpoints** будут содержаться созданные ранее контрольные точки.
1. Выполните код в ячейке ноутбука.

   Запустите собственный код или воспользуйтесь [примером](snippets.md#run).
1. Дождитесь выполнения кода.

Созданная контрольная точка появится в начале списка **Checkpoints**. Имя контрольной точки состоит из следующих элементов:
* Ключ операции, после выполнения которой была создана контрольная точка, например `[1]`.

   Такой же ключ отображается в ноутбуке слева от выполненной ячейки.
* Тип операции, после которой была создана контрольная точка, например `CELL_RUN`.
* Имя блокнота, в котором была выполнена ячейка, например `Untitled.ipynb`.
* Дата и время создания контрольной точки в [UTC](https://ru.wikipedia.org/wiki/Всемирное_координированное_время), например `2020-10-09 06:12:08`.

Для одного проекта может быть создано не более десяти контрольных точек, более старые контрольные точки автоматически удаляются.

## Применение контрольной точки {#apply}

Чтобы вернуться к состоянию ноутбука на определенной контрольной точке:
1. Откройте панель ![checkpoints-panel](../../../_assets/datasphere/jupyterlab/checkpoints-panel.svg) **Checkpoints-panel**.
1. Выберите нужную контрольную точку в списке.
1. Нажмите кнопку **Apply**.
1. Дождитесь выполнения операции.

После восстановления состояния будет создана контрольная точка с типом операции `ROLLBACK` в имени.

## Сохранение контрольной точки {#pin}

Чтобы защитить контрольную точку от автоматического удаления, ее нужно сохранить:
1. Откройте панель ![checkpoints-panel](../../../_assets/datasphere/jupyterlab/checkpoints-panel.svg) **Checkpoints-panel**.
1. Выберите нужную контрольную точку в списке **Checkpoints** и нажмите кнопку **Pin**.
1. В открывшемся окне введите имя сохраняемой контрольной точки.
1. Нажмите кнопку **Save**.

Сохраненная контрольная точка переместится в список **Pinned checkpoints**.

Для одного проекта может быть сохранено не более пяти контрольных точек, более старые сохраненные контрольные точки автоматически удаляются.

Чтобы снять защиту контрольной точки, нажмите кнопку **Unpin**. При этом она переместится в список **Checkpoints**.

## Экспорт контрольной точки {#export}

Сохраненную контрольную точку можно экспортировать:

1. Откройте панель ![checkpoints-panel](../../../_assets/datasphere/jupyterlab/checkpoints-panel.svg) **Checkpoints-panel**.
1. В списке **Pinned checkpoints** выберите контрольную точку.
1. Нажмите кнопку **Share**.
1. В открывшемся окне нажмите кнопку **Copy to clipboard**.

Ссылка на контрольную точку ноутбука будет скопирована в буфер обмена.

## Импорт контрольной точки {#import}

Чтобы импортировать ноутбук из контрольной точки:

1. В верхней панели нажмите **File** и выберите **Import notebook from checkpoint**.
1. В открывшемся окне введите `URI` контрольной точки.
1. Нажмите кнопку **import**.
1. Дождитесь выполнения операции.
