# Работа с Git

## Перед началом работы {#before-begin}

{% include [before-begin](../../../_includes/datasphere/ui-before-begin.md) %}

## Клонировать публичный репозиторий GitHub {#clone-public}

Чтобы клонировать существующий публичный репозиторий:

1. В левом навигационном меню в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser** создайте или выберите папку, в которой вы хотите создать клон репозитория, и перейдите в нее.
1. В верхнем меню нажмите **Git** и выберите **Clone**.
1. В открывшемся окне введите URI репозитория и нажмите кнопку **Clone**.

Папка клонированного репозитория появится в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser**.

## Клонировать приватный репозиторий GitHub {#clone-private}

{% include [before-begin-github](../../../_includes/datasphere/before-you-begin-github.md) %}

Клонируйте существующий приватный репозиторий:

1. В левом навигационном меню, в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser**, создайте или выберите папку, в которой вы хотите создать клон репозитория, и перейдите в нее.
1. В верхнем меню нажмите **Git** и выберите **Clone**.
1. В открывшемся окне введите URI репозитория и нажмите кнопку **Clone**.
1. В окне появится сообщение об ошибке: `fatal: could not read Username for 'https://github.com': terminal prompts disabled`. Нажмите **Refine the data**.
1. В новом окне введите имя пользователя и токен доступа к GitHub. Нажмите **Submit**.

Папка клонированного репозитория появится в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser**.

## Создать локальный репозиторий {#init}

Чтобы начать работу с локальным репозиторием:

1. В левом навигационном меню, в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser**, создайте или выберите папку, в которой вы хотите создать клон репозитория, и перейдите в нее.
1. В верхнем меню нажмите **Git** и выберите **Init**.
1. В открывшемся окне нажмите кнопку **Yes**.
1. Создайте в папке репозитория файл ноутбука.
1. Добавьте файл ноутбука под версионный контроль:

    1. Перейдите в блок ![git](../../../_assets/datasphere/jupyterlab/git.svg) **Git**.
    1. На вкладке **Change** в выпадающем списке **Untracked** найдите файл проекта.
    1. Справа от имени файла нажмите ![add](../../../_assets/datasphere/jupyterlab/add.svg).

1. Сделайте начальный коммит:

    1. В поле **Summary** введите имя коммита.
    1. В поле **Description** введите описание коммита.
    1. Нажмите кнопку **Commit**.
    1. В открывшемся окне введите имя и адрес электронной почты автора коммита.
    1. Нажмите кнопку **Ok**.

Локальный репозиторий готов к работе.

## Создать новую ветку {#new-branch}

1. В левом навигационном меню, в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser**, создайте или выберите папку, в которой вы хотите создать клон репозитория, и перейдите в нее.
1. В разделе ![git](../../../_assets/datasphere/jupyterlab/git.svg) **Git** раскройте выпадающий список **Current Branch**.
1. Нажмите кнопку **New Branch**.
1. В открывшемся окне:

    1. В поле **Name** введите имя новой ветки.
    1. В списке выберите ветку, на основе которой будет создана новая. Для быстрого поиска нужной ветки воспользуйтесь фильтром.
    1. Нажмите кнопку **Create branch**.

Созданная ветка отобразится в списке и станет текущей.

## Записать изменения в локальный репозиторий {#commit}

Чтобы отредактировать данные и записать изменения в репозиторий:

1. Измените файл, находящийся под версионным контролем.
1. В верхнем меню нажмите **File** и выберите **Save File**, чтобы сохранить изменения.
1. В левом навигационном меню перейдите в раздел ![git](../../../_assets/datasphere/jupyterlab/git.svg) **Git**.
1. На вкладке **Changes**, в списке **Changes**, отобразится отредактированный файл. Буква **M** справа от имени файла указывает на то, что в файле есть изменения.

1. Справа от имени файла нажмите ![add](../../../_assets/datasphere/jupyterlab/add.svg). Изменения проиндексируются, файл переместится в список **Staged**.

1. Чтобы зафиксировать изменения:

    1. В поле **Summary** введите имя коммита.
    1. В поле **Description** введите описание коммита.
    1. Нажмите кнопку **Commit**.
    1. В открывшемся окне введите имя и адрес электронной почты автора коммита.
    1. Нажмите кнопку **Ok**.

Изменения записаны в репозиторий.

## Отправить изменения в удаленный репозиторий на GithHub {#push}

{% include [before-begin-github](../../../_includes/datasphere/before-you-begin-github.md) %}

Чтобы оправить в удаленный репозиторий сохраненные изменения:

1. В левом навигационном меню перейдите в раздел ![git](../../../_assets/datasphere/jupyterlab/git.svg) **Git**.
1. Нажмите кнопку ![git](../../../_assets/datasphere/jupyterlab/push.svg) **Push committed changes**.
1. В открывшемся окне:

    1. Введите имя пользователя с правом записи в удаленный репозиторий.
    1. Введите персональный токен доступа к GitHub.

1. Нажмите кнопку **Ok**.
1. Дождитесь появления надписи **Git Push completed successfully**.
1. Нажмите кнопку **Dismiss**.

   Изменения отправлены в удаленный репозиторий.

## Получить изменения из удалённого репозитория {#pull}

1. Перейдите в блок ![git](../../../_assets/datasphere/jupyterlab/git.svg) **Git**.
1. Нажмите кнопку ![git](../../../_assets/datasphere/jupyterlab/pull.svg) **Pull latest changes**.
1. Дождитесь появления надписи **Git Pull completed successfully**.
1. Нажмите кнопку **Dismiss**.

   Изменения из удаленного репозитория получены.

## Сохранить результаты в GitHub {#local-to-github}

{% include [before-begin-github](../../../_includes/datasphere/before-you-begin-github.md) %}

Чтобы сохранить код проекта в новый репозиторий на GitHub:

1. [Создайте](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository) новый пустой репозиторий на GitHub. Вы сможете добавить файлы README, license и gitignore позднее.
1. В проекте {{ ml-platform-name }} создайте локальный репозиторий:
 
   1. В левом навигационном меню, в разделе ![folder](../../../_assets/datasphere/jupyterlab/folder.svg) **File Browser**, создайте или выберите папку, в которой вы хотите создать клон репозитория, и перейдите в нее.
   1. В верхнем меню нажмите **Git** и выберите **Init**.
   1. В открывшемся окне нажмите кнопку **Yes**.

1. Сопоставьте локальный репозиторий с удаленным репозиторием GitHub.
   
   ```
   !git remote add origin https://<имя_пользователя_GitHub>:<персональный_токен_доступа>@github.com/<адрес_репозитория>
   ```

   Где:
   * `<имя_пользователя_GitHub>` — логин пользователя GitHub, от имени которого вы будете работать.
   * `<персональный_токен_доступа>` — содержимое токена для доступа на GitHub.
   * `<адрес_репозитория>` — путь к репозиторию вида `<имя_пользователя>/<название_репозитория>.git`
   
1. Повторно инициализируйте локальный репозиторий:

   ```
   !git init
   ```

1.  Добавьте все нужные файлы под версионный контроль:
  
    1. Перейдите в блок ![git](../../../_assets/datasphere/jupyterlab/git.svg) **Git**.
    1. На вкладке **Change**, в выпадающем списке **Untracked**, найдите файл проекта.
    1. Справа от имени файла нажмите ![add](../../../_assets/datasphere/jupyterlab/add.svg).

1. Сделайте начальный коммит:

    1. В поле **Summary** введите имя коммита.
    1. В поле **Description** введите описание коммита.
    1. Нажмите кнопку **Commit**.
    1. В открывшемся окне введите имя и адрес электронной почты автора коммита.
    1. Нажмите кнопку **Ok**.

1. Отправьте изменения в удаленный репозиторий:
   
   ```
   !git push -u origin master 
   ```

   В репозитории на GitHub появятся файлы, которые вы добавили под версионный контроль.