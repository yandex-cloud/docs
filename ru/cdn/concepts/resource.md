# CDN-ресурс

_Ресурс_ — это основная логическая сущность сервиса {{ cdn-full-name }}, позволяющая настраивать и управлять распространением контента с [источников](origins.md) через CDN.

Чтобы начать распространять контент через CDN, нужно создать ресурс по [инструкции](../operations/resources/create-resource.md), указав в нем:

* источник или группу источников, которые содержат контент;
* [доменные имена для раздачи контента](#hostnames);
* основные настройки обмена данными [между клиентами и CDN](clients-to-servers.md) и [между CDN и источниками](servers-to-origins.md).

После создания ресурса в нем также можно настроить:

* [кеширование](caching.md);
* HTTP-заголовки и методы (см. [инструкцию](../operations/resources/configure-http.md));
* обработку [кросс-доменных запросов (CORS)](cors.md);
* [сжатие](compression.md) и [сегментирование](slicing.md) контента. 

{% include [after-changes-tip](../../_includes/cdn/after-changes-tip.md) %}

## Доменные имена для раздачи контента {#hostnames}

_Доменные имена для раздачи контента_ используются в запросах клиентов к CDN-серверам. Например, чтобы файл `styles/common.css` был доступен по адресу `cdn.example.com/styles/common.css`, нужно указать доменное имя `cdn.example.com`.  

В {{ cdn-name }} поддерживаются любые доменные имена, в том числе [IDN](https://ru.wikipedia.org/wiki/IDN) с символами национальных алфавитов не из ASCII, например кириллическими. Такие имена можно указывать в исходном виде (`пример.рф`) или преобразовывать в [Punycode](https://{{ lang }}.wikipedia.org/wiki/Punycode) с добавлением префиксов `xn--` (`xn--e1afmkfd.xn--p1ai`). В информации о ресурсе в [консоли управления]({{ link-console-main }}) IDN будут отображаться в исходном виде, без преобразования в Punycode.

При создании ресурса нужно указать хотя бы одно доменное имя. Первое имя является основным, его нельзя изменить после создания ресурса.

Для корректной работы ресурса у вас должны быть:

* Права на все указанные доменные имена.
* Доступ к настройкам DNS для имен. 

  Для каждого имени в настройках вашего DNS-хостинга нужно создать CNAME-запись, связывающую это имя с доменным именем CDN-балансировщика вида `cl-<случайные символы>.edgecdn.ru`. Оно отображается при создании ресурса и на странице уже созданного ресурса в консоли управления. Например, так может выглядеть запись для доменного имени `cdn.example.com`: 

  ``` 
  cdn.example.com. CNAME cl-4sne12sd.edgecdn.ru
  ```

## Статусы ресурса {#status}

Ресурс {{ cdn-name }} может быть в одном из статусов:

* `Active`, если контент доступен всем;
* `Not active`, если контент недоступен никому.

Для переключения используется опция **Доступ конечных пользователей к контенту** в основных настройках ресурса.

## Статистика использования ресурса {#stats}

{{ cdn-name }} предоставляет метрики использования ресурса за последние 30 дней:

* **Загружено из источников** — объем трафика, загруженного CDN-серверами из источников.
* **Отправлено клиентам** — объем трафика, отправленного с CDN-серверов клиентам.
* **Весь трафик** — сумма метрик **Загружено из источников** и **Отправлено клиентам**.
* **Запросы от клиентов** — количество запросов клиентов к CDN.
* **Ответы из кеша** — количество запросов клиентов, в ответ на которые CDN-серверы отправили [кешированные](caching.md) копии файлов, не запрашивая их у источников (если кеширование на CDN-серверах включено).
* **Ответы с запросами к источникам** — количество запросов клиентов, в ответ на которые CDN-серверы не смогли отправить кешированные копии файлов (например, кеширование отключено, файл еще не кешировался сервером или [время жизни кеша](caching.md#server-side-cache-age) истекло) и обратились за ними к источникам.
* **Снижение нагрузки на источники** — доля трафика, отправленного с CDN-серверов клиентам, за которым не потребовалось обращаться к источникам. Рассчитывается по формуле `(1 − (Загружено из источников / Отправлено клиентам)) × 100%`.
* **Загружено экранирующим сервером** — объем трафика, загруженного экранирующим сервером из источников (если [экранирование](origins-shielding.md) включено).
* **Ответы с кодами 2xx**, **3xx**, **4xx**, **5xx** — количество ответов, отправленных CDN-серверами клиентам, с соответствующими HTTP-кодами состояния.

Посмотреть статистику можно на странице ресурса в [консоли управления]({{ link-console-main }}).

#### См. также {#see-also}

* [Инструкции по работе с ресурсами](../operations/index.md#resources).
* [Инструкция по работе с основными настройками ресурса](../operations/resources/configure-basics.md).