# Создание QL-чарта



Создать QL-чарт можно одним из способов:

{% list tabs %}

- Через главную страницу
    
  1. Перейдите на главную [{{ datalens-short-name }}]({{ link-datalens-main }}). 
  1. В меню слева выберите **Чарты**.   
  1. В левом верхнем углу нажмите **Создать чарт** → **QL-чарт**. 
  1. В открывшемся окне нажмите **Выбрать подключение**. 
  1. Выберите из списка подключение БД, к которому у вас есть доступ. Убедитесь, что в подключении активирована настройка **Уровень доступа SQL-запросов** → **Разрешить подзапросы в датасетах и запросы из чартов**.
  1. На вкладке **Запрос** укажите запрос, используя SQL-диалект БД, к которой вы обращаетесь.
  1. Проверьте, чтобы секция **Available** была пустая. В эту секцию попадают поля, не участвующие в расчетах. В противном случае визуализация будет отображаться некорректно.
  1. В левом нижнем углу нажмите кнопку **Запустить**.
    
- Через подключение
   
  1. Перейдите к уже созданному подключению БД.
  1. Убедитесь, что в подключении активирована настройка **Уровень доступа SQL-запросов** → **Разрешить подзапросы в датасетах и запросы из чартов**.
  1. В правом верхнем углу нажмите **Создать QL-чарт**.
  1. На вкладке **Запрос** укажите запрос, используя SQL-диалект БД, к которой вы обращаетесь.
  1. Проверьте, чтобы секция **Available** была пустая. В эту секцию попадают поля, не участвующие в расчетах. В противном случае визуализация будет отображаться некорректно.   
  1. В левом нижнем углу нажмите кнопку **Запустить**.
    
{% endlist %}

После выполнения запроса появится визуализация на основе ваших данных.

{% include [datalens-sql-ch-example](../../../_includes/datalens/datalens-sql-ch-example.md) %}




## Добавление параметров селектора {#selector-parameters}

Для [QL-чартов](../../concepts/chart/index.md#sql-charts) в области редактирования чарта на вкладке **Параметры** можно управлять параметрами селектора, а на вкладке **Запрос** указывать переменную в самом запросе в формате `not_var{{variable}}`.

Параметры типа `date-interval` и `datetime-interval` можно использовать в коде запроса только с постфиксами `_from` и `_to`. Например, для параметра с именем `interval` нужно указать:

* `interval_from` — для получения начала интервала;
* `interval_to` — для получения конца интервала.

Чтобы добавить параметр:

1. Перейдите на вкладку **Параметры** при создании чарта.
1. Нажмите **Добавить параметр**.
1. Установите тип значения `date-interval` (`datetime-interval`).
1. Задайте имя параметру.
1. Установите начальное и конечное значение интервала.

{% cut "Пример запроса" %}

```sql
SELECT toDate(Date) as datedate, count ('Oreder ID')
FROM samples.SampleLite
WHERE not_var{{interval_from}} < datedate AND datedate < not_var{{interval_to}}
GROUP BY datedate
ORDER BY datedate
```

{% endcut %}