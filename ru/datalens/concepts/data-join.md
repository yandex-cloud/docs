---
title: Объединение данных {{ datalens-full-name }}
description: 'При создании дашборда в {{ datalens-full-name }} часто используется связь, которая определяет влияние селектора на один или несколько чартов, а также на другие селекторы. Связь позволяет фильтровать значения селекторов и чартов. В статье описывается, как  объединить данные из разных датасетов для настройки связи между виджетами.'
---

# Объединение данных {{ datalens-full-name }}

{{ datalens-full-name }} использует [подключение](connection.md), чтобы получить данные из источника (БД, CSV, Metrica и т.д.). На основе предоставленных подключением данных можно создавать датасеты, чарты и селекторы. Если в источнике доступно несколько таблиц, вы можете объединять их для получения необходимого набора данных. Связать данные из разных датасетов можно на уровне чарта или через связь селекторов.

## Способы объединения данных {#data-join}

Вы можете воспользоваться различными вариантами объединения данных:

* [{#T}](#dataset-join)

  * [{#T}](#ui-join)
    * [{#T}](#add-connection) 
  * [{#T}](#sql-join)

* [{#T}](#chart-join)

  * [{#T}](#sql-chart)
  * [{#T}](#datasets-chart)

* [{#T}](#selector-join)

### На уровне датасета {#dataset-join}

Чтобы объединить данные на уровне датасета, вы можете [добавить таблицы](#ui-join) на рабочую область или написать [SQL-запрос](#sql-join).
Также можно объединить данные на основе [нескольких CSV-подключений](#add-connection) в одном датасете.

#### Добавление таблиц {#ui-join}

В интерфейсе создания датасета можно объединять данные, перетаскивая таблицы на рабочую область и настраивая связи между ними через [оператор JOIN](dataset/data-model.md#source).  Пример объединения данных с помощью добавления таблиц смотрите в [сценарии](../../tutorials/datalens/data-from-ch-visualization.md#step2).  


#### Добавление подключения {#add-connection}

В интерфейсе создания датасета можно объединить данные на основе двух и более CSV-подключений. Таблицы из разных источников можно перетаскивать на рабочую область и настраивать связи между ними через [оператор JOIN](dataset/data-model.md#source).

{% note warning %}

Кроме CSV, для всех других типов подключений нельзя объединить данные из разных источников на уровне одного датасета.

{% endnote %}


#### SQL-запрос {#sql-join}

В датасете можно добавить [произвольный SQL-запрос](dataset/settings.md#sql-request-in-datatset) к источнику данных. Текст запроса при обращении к источнику исполняется в виде подзапроса. Результат запроса можно использовать как итоговый набор данных датасета или объединить с другими таблицами источника через интерфейс.

### На уровне чарта {#chart-join}

{{ datalens-short-name }} позволяет объединить данные на уровне чарта. Для объединения данных на уровне чарта вы можете использовать [QL-чарт](#sql-chart) или [мультидатасетные чарты](#datasets-chart).

#### QL-чарт {#sql-chart}

[QL-чарты](chart/index.md#sql-charts) — чарты, созданные на основе подключения, если источник подключения — БД. При выполнении SQL-запроса отдельный объект Датасет не создается, он генерируется сразу и отображается на панели превью. Подробнее см. инструкцию [{#T}](../operations/chart/create-sql-chart.md).

#### Мультидатасетные чарты {#datasets-chart}

[Мультидатасетные чарты](chart/index.md#multi-dataset-charts) — чарты, которые отображают данные из разных датасетов. Запросы для каждого датасета отрабатываются независимо друг от друга. Подробнее см. инструкцию [{#T}](../operations/chart/create-multidataset-chart.md).

### На уровне связей селекторов {#selector-join}

Можно добавить на дашборд селектор, который влияет на результаты запросов в связанных с ним виджетах:
* на дашборде селекторы и чарты, построенные на основе одного датасета, связываются автоматически;
* селекторы и чарты, построенные на основе разных датасетов, можно связать вручную с помощью алиасов.

Перед созданием связи убедитесь, что поле, по которому фильтрует селектор, присутствует в датасете, по которому построен чарт. В противном случае связь работать не будет. Подробнее см. инструкцию [{#T}](../operations/dashboard/create-alias.md).
