# Чарт

_Чарт_ — это визуализация данных из датасета в виде таблицы, диаграммы или картограммы.

Чарты создаются в визарде на основе данных из одного датасета или нескольких датасетов (см. [мультидатасетные чарты](#multi-dataset-charts)).
На базе одного датасета может быть создано неограниченное количество чартов.

Рабочая область в интерфейсе визарда разделена на три основные панели:
1. Панель датасета, где отображаются доступные поля: **Измерения** и **Показатели**. Вы можете добавить в список [вычисляемое поле](calculations/index.md).
1. Панель настройки визуализации, где можно выбрать тип чарта. Для каждого типа доступен свой набор секций (например, ось X, ось Y, фильтры и т. д.), куда можно перетаскивать поля.
1. Панель превью, где отображается визуализация.

Чарт позволяет провести быстрый анализ и проверить гипотезу. Также чарты можно сохранять и добавлять на дашборды в виде виджетов.

{% note warning %}

В {{ datalens-short-name }} существуют ограничения на количество строк данных, которое могут отобразить чарты. {% if audience != "internal" %} Ознакомьтесь с ними в разделе [{#T}](limits.md). {% endif %} 

{% endnote %}

## Тип чарта {#chart-types}

В {{ datalens-full-name }} доступны следующие типы чартов:
 * **Диаграммы**:
   - [Линейная диаграмма](#line-chart)
   - [Диаграмма с областями](#area-chart)
   - [Нормированная диаграмма с областями](#normalized-area-chart)
   - [Столбчатая диаграмма](#bar-chart)
   - [Нормированная столбчатая диаграмма](#normalized-bar-chart)
   - [Линейчатая диаграмма](#horizontal-bar-chart)
   - [Нормированная линейчатая диаграмма](#normalized-horizontal-bar-chart)
   - [Точечная диаграмма](#scatter-chart)
   - [Круговая диаграмма](#pie-chart)
   - [Древовидная диаграмма](#tree-chart)
 * **Таблицы**:
   - [Таблица](#flat-table)
   - [Сводная таблица](#pivot-table)
 * **Географическая карта**:
   - [Карта](#map-chart)
     - [Точечная карта](#point-map-chart)
     - [Фоновая карта](#choropleth-map-chart)
     - [Тепловая карта](#heat-map-chart)
 * **Другое**:  
   - [Индикатор](#indicator)
 
### Линейная диаграмма {#line-chart}

Отображает изменение показателей по измерениям в виде одной или нескольких горизонтальных линий.

Секция<br/> в визарде| Описание
----- | ----
X | Измерение. Может быть указано только одно поле
Y | Показатель.  Может быть указано несколько показателей.<br/>При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`
Y2 | Показатель.  Позволяет добавить вторую ось Y на диаграмму. Может быть указано несколько показателей.<br/>При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси Y
Сортировка | Измерение. Может использовать только одно измерение с оси Х. Влияет на сортировку оси X
Подписи | Показатель. Отображает значения показателя на диаграмме

### Диаграмма с областями {#area-chart}

Отображает изменение показателей по измерениям в виде областей, показывая вклад каждой линии в значение общей суммы.

Секция<br/> в визарде| Описание
----- | ----
X | Измерение. Может быть указано только одно поле
Y | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси Y
Сортировка | Измерение. Может использовать только одно измерение с оси Х. Влияет на сортировку оси X
Подписи | Показатель. Отображает значения показателя на диаграмме

### Нормированная диаграмма с областями {#normalized-area-chart}

Нормированная диаграмма с областями, которая показывает отношение показателей в процентах.

Секция<br/> в визарде| Описание
----- | ----
X | Измерение. Может быть указано только одно поле
Y | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси Y
Сортировка | Измерение. Может использовать только одно измерение с оси Х. Влияет на сортировку оси X
Подписи | Показатель. Отображает значения показателя на диаграмме

### Столбчатая диаграмма {#bar-chart}

Отображает данные в виде плоских вертикальных столбцов.

Секция<br/> в визарде| Описание
----- | ----
X | Измерения. Может быть указано одно или два измерения
Y | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`. `Measure Names` можно перенести на ось Х
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси Y
Сортировка | Измерение или показатель. Влияет на сортировку столбцов
Подписи | Показатель. Отображает значения показателя на диаграмме

### Нормированная столбчатая диаграмма {#normalized-bar-chart}

Нормированная столбчатая диаграмма, которая показывает отношение показателей в процентах.

Секция<br/> в визарде| Описание
----- | ----
X | Измерения. Может быть указано одно или два измерения
Y | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`. `Measure Names` можно перенести на ось Х
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси Y
Сортировка | Измерение или показатель. Влияет на сортировку столбцов
Подписи | Показатель. Отображает значения показателя на диаграмме

### Линейчатая диаграмма {#horizontal-bar-chart}

Отображает данные в виде плоских горизонтальных столбцов.

Секция<br/> в визарде| Описание
----- | ----
Y | Измерения. Может быть указано одно или два измерения
X | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`. `Measure Names` можно перенести на ось Y
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси X
Сортировка | Измерение или показатель. Влияет на сортировку столбцов
Подписи | Показатель. Отображает значения показателя на диаграмме

### Нормированная линейчатая диаграмма {#normalized-horizontal-bar-chart}

Нормированная линейчатая диаграмма, которая показывает отношение показателей.

Секция<br/> в визарде| Описание
----- | ----
Y | Измерения. Может быть указано одно или два измерения
X | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение `Measure Names`. `Measure Names` можно перенести на ось Y
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или поле `Measure Names`. Влияет на цвет линий. `Measure Names` удаляется путем удаления показателей с оси X
Сортировка | Измерение или показатель. Влияет на сортировку столбцов
Подписи | Показатель. Отображает значения показателя на диаграмме

### Точечная диаграмма {#scatter-chart}

Отображает точки данных для сравнения пар значений.

Секция<br/> в визарде| Описание
----- | ----
X | Измерение или показатель. Задает значение по оси X
Y | Измерение или показатель. Задает значение по оси Y
Точки | Измерение. Определяет количество точек на диаграмме
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или показатель. Влияет на цвет точек
Сортировка | Показатель. Влияет на сортировку столбцов

### Круговая диаграмма {#pie-chart}

Отображает размер элементов одного ряда данных относительно суммы элементов в виде круга.

Секция<br/> в визарде| Описание
----- | ----
Цвета | Измерение. Может быть указано только одно поле
Показатели | Показатель. Может быть указано только одно поле
Фильтры | Измерение или показатель. Используется в качестве фильтра
Сортировка | Измерение или показатель из секции **Цвета**. Влияет на сортировку
Подписи | Показатель. Отображает значения показателя на диаграмме

### Древовидная диаграмма {#tree-chart}

Отображается в виде набора прямоугольников. Диаграмма позволяет сравнить пропорции в иерархии.

Диаграмма позволяет сравнить пропорции в иерархии.

Секция<br/> в визарде| Описание
----- | ----
Измерения | Измерения. Определяют дерево иерархии вложенности прямоугольников
Размер | Показатель. Один показатель, который определяет площадь прямоугольника
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Измерение или показатель. Влияет на заливку прямоугольников в диаграмме

### Простая таблица {#flat-table}

Отображает данные в табличном виде, где в первой строке определяются наименования полей, в остальных — их значения.

Секция<br/> в визарде| Описание
----- | ----
Столбцы | Измерения и показатели, которые будут использованы в качестве столбцов. Имя поля используется для заголовка столбца
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Показатель. Влияет на заливку всех ячеек в рамках строки. Может содержать не более одного показателя
Сортировка | Измерения и показатели, которые указаны в секции **Столбцы**.<br/>Вы можете использовать несколько измерений и показателей.<br/>Порядок полей в секции влияет на порядок сортировки полей таблицы

### Сводная таблица {#pivot-table}

Отображает данные в табличном виде, где в строках и столбцах могут быть значения измерений, а в ячейках на их пересечении — показатели.

Секция<br/> в визарде| Описание
----- | ----
Столбцы | Измерения
Строки | Измерения
Показатели | Показатели. При добавлении в секцию более одного показателя в секции **Столбцы** появится измерение `Measure Names`, которое определяет расположение заголовков показателей. `Measure Names` можно переносить в **Строки**
Фильтры | Измерение или показатель. Используется в качестве фильтра
Цвета | Показатель. Влияет на заливку всех ячеек с показателями. Может содержать не более одного показателя
Сортировка | Измерения и показатели, которые указаны в секциях **Столбцы** и **Строки**.<br/>Вы можете использовать несколько измерений и показателей.<br/>Порядок полей в секции влияет на порядок сортировки полей таблицы

### Карта {#map-chart}

Карта поддерживает отображение трех типов визуализации:

* [Точечная карта](#point-map-chart)
* [Фоновая карта](#choropleth-map-chart)
* [Тепловая карта](#heat-map-chart)

На одной карте располагаются не более 5 слоев с любыми типами визуализации. Слои в чарте типа **Карта** называются геослоями.

_Геослои_ — визуализация показателей по точкам или полигонам на карте.

С геослоями можно выполнять следующие операции:

* изменять название;
* устанавливать уровень прозрачности;
* менять порядок внутри типа визуализации, при этом порядок типов визуализации остается неизменным (сверху вниз: точечная карта, фоновая карта, тепловая карта).

Вы можете приобрести предрассчитанные геослои от партнеров в {{ marketplace-name }}.

#### Точечная карта {#point-map-chart}

Отображает географические точки на карте.

Секция<br/> в визарде| Описание
----- | ----
Геоточки | Измерение с типом `Геоточка`
Размер | Показатель. Влияет на размер точки
Фильтры слоя | Измерение или показатель. Используется в качестве фильтра текущего слоя
Общие фильтры | Измерение или показатель. Используется в качестве фильтра всего чарта
Цвета | Измерение или показатель. Влияет на интенсивность закрашивания точек
Тултипы | Измерение или показатель. Подсказка, которая отобразится при наведении на точку
Подписи | Показатель. Отображается в виде подписи на точке. При использовании подписи блокируется управление размером точки

#### Фоновая карта {#choropleth-map-chart}

Отображает закрашенные области на карте.

Секция<br/> в визарде| Описание
----- | ----
Геополигоны | Измерение с типом `Геополигон`
Фильтры слоя | Измерение или показатель. Используется в качестве фильтра текущего слоя
Общие фильтры | Измерение или показатель. Используется в качестве фильтра всего чарта
Цвета | Измерение или показатель. Влияет на цвет точек

#### Тепловая карта {#heat-map-chart}

Отображает географические точки на карте с разной интенсивностью закрашивания.

Секция<br/> в визарде| Описание
----- | ----
Геоточки | Измерение с типом `Геоточка`
Фильтры | Измерение или показатель. Используется в качестве фильтра текущего слоя
Общие фильтры | Измерение или показатель. Используется в качестве фильтра всего чарта
Цвета  | Измерение или показатель. Влияет на интенсивность закрашивания точек

### Индикатор {#indicator}

Отображает данные в виде одного числа.

Секция<br/> в визарде| Описание
----- | ----
Показатель  | Показатель. Один показатель, который определяет значение индикатора
Фильтры | Измерение или показатель. Используется в качестве фильтра

## Мультидатасетные чарты {#multi-dataset-charts}

Мультидатасетные чарты — чарты, которые отображают данные из разных датасетов.

Запросы для каждого датасета отрабатываются независимо друг от друга. Вычисляемые поля над полями из нескольких датасетов неприменимы.
При добавлении второго датасета автоматически устанавливается связь по первому совпадению имени полей и типа данных полей.

При этом вы можете:

* изменять связи;
* добавлять новые связи;
* удалять связи.

{% note info %}

  Датасеты в чарте могут быть не связаны.

{% endnote %}

Особенности работы со связанными датасетами в чарте, кроме случаев использования слоев в геочарте:

* в одном чарте могут быть использованы любые показатели из датасетов вне зависимости от связей;
* в одном чарте можно использовать только связанные измерения;
* фильтры по связанным измерениям применяются ко всем датасетам;
* фильтры по несвязанным измерениям применяются только к своему датасету.

Особенности работы со связанными датасетами в геовизуализациях на разных слоях:

* в одном геослое могут быть использованы любые показатели из датасетов вне зависимости от связей;
* в одном геослое можно использовать только связанные измерения;
* фильтры в секции **Общие фильтры** по связанным измерениям применяются ко всем датасетам во всех слоях;
* фильтры в секции **Общие фильтры** по несвязанным измерениям применяются только к своему датасету во всех слоях;
* фильтры в секции **Фильтры слоя** по связанным измерениям применяются ко всем датасетам в рамках текущего слоя;
* фильтры в секции **Фильтры слоя** по несвязанным измерениям применяются только к своему датасету в рамках текущего слоя;
* ограничения на использование несвязанных измерений в разных слоях не предусмотрены.

## Иерархии {#hierarchies}

_Иерархия_ — это набор измерений, расположенных в порядке, определяющем последовательность разворачивания данных. Вы можете [добавить](../operations/chart/add-hierarchy.md) иерархию в свой чарт, чтобы перемещаться на нижние уровни иерархии с фильтрацией по выбранным или всем значениям измерений.

Над визуализацией отображаются выполненные переходы по уровням иерархии. Перемещаться между уровнями иерархии можно следующими способами:
* Нажать на значок **![image](../../_assets/datalens/arrow-left.svg)** или **![image](../../_assets/datalens/arrow-right.svg)** для перехода на предыдущий или следующий уровень.
* Нажать на значение в строке выполненных переходов для возврата на выбранный уровень.
* Нажать на элемент визуализации (например, на строку или столбец простой таблицы) для перехода на следующий уровень иерархии с фильтрацией.

Ограничения при работе с иерархиями:

{% if audience == "internal" %} * иерархии доступны только в [визарде](https://datalens.yandex.ru/wizard/); {% endif %}
* иерархии доступны для всех типов чартов, кроме **Карта**, **Индикатор**, **Древовидная диаграмма** и **Сводная таблица**;
* в иерархию можно добавить только измерения;
* в визуализацию можно добавить только одну иерархию.

{% if audience == "internal" %}

Примеры использования иерархий:
* [DAU DataLens с дриллом по staff](https://datalens.yandex-team.ru/preview/fqn1w98qqd2y9-hierarchy-line-chart?drillDownLevel=1&drillDownFilters=Яндекс&drillDownFilters=&drillDownFilters=&drillDownFilters=&drillDownFilters=&drillDownFilters=&drillDownFilters=&drillDownFilters=&_page=1)
* [Линейчатая диаграмма](https://datalens.yandex-team.ru/preview/8jguxaqgtmso2)

{% endif %}

{% if audience != "internal" %}

## Публикация чарта {#public-access}

Вы можете предоставить доступ к чарту для любого пользователя в интернете с помощью [{{ datalens-public }}](datalens-public.md). Такой чарт становится публичным, любой пользователь может просмотреть его без авторизации.

{% include [share-note](../../_includes/datalens/datalens-share-note.md) %}

## Управление доступом {#access-management}

Вы можете настроить права доступа к чарту. Подробнее в разделе [{#T}](../security/index.md).

{% endif %}

#### См. также {#see-also}
- [{#T}](../operations/chart/create-line-chart.md)
- [{#T}](../operations/chart/create-pivot-table.md)
- [{#T}](../operations/chart/create-table.md)
- [{#T}](../operations/chart/create-area-chart.md)
- [{#T}](../operations/chart/create-column-chart.md)
- [{#T}](../operations/chart/create-bar-chart.md)
- [{#T}](../operations/chart/create-pie-chart.md)
- [{#T}](../operations/chart/create-map-chart.md)
{% if audience != "internal" %} - [{#T}](../operations/chart/publish.md) {% endif %}



