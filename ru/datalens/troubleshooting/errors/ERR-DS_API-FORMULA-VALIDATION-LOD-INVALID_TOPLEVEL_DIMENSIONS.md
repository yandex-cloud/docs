# Invalid top-level LOD dimension found in expression

`ERR.DS_API.FORMULA.VALIDATION.LOD.INVALID_TOPLEVEL_DIMENSIONS`

Ошибка возникает из-за того, что агрегация верхнего уровня содержит измерения, которые не используются в чарте.

Например, в чарте с группировкой по измерениям `[Region]` и `[Category]` нельзя создать такой показатель:

```
AVG([Sales] INCLUDE [City])
```

Ошибка в этом случае возникает из-за того, что измерение `[City]` (добавленное в группировку с помощью `INCLUDE`) не используется в чарте.

Для исправления ошибки измените выражение так, чтобы в агрегации верхнего уровня содержались только измерения, использующиеся в чарте. Например, так:

```
AVG(AVG([Sales] INCLUDE [City]))
```

Тогда на верхнем уровне агрегация будет вычисляться с группировкой по измерениям чарта `[Region]` и `[Category]`, а вложенная агрегация — по измерениям `[Region]`, `[Category]` и `[City]` (группировка по измерению `[City]` добавлена во вложенную функцию с помощью `INCLUDE`).

Измерение для группировки указывается с помощью ключевых слов внутри [функции агрегации](../../../datalens/function-ref/aggregation-functions.md#syntax), например: 

* `AVG(SUM([orders]) INCLUDE [date])` — в такой записи группировка по измерению `[date]` добавлена в агрегацию верхнего уровня (ключевое слово `INCLUDE` относится к функции `AVG`);
* `AVG(SUM([orders] INCLUDE [date]))` — в такой записи группировка по измерению `[date]` добавлена во вложенную агрегацию (ключевое слово `INCLUDE` относится к функции `SUM`).

Подробнее об использовании LOD-выражений читайте в разделе [{#T}](../../concepts/lod-aggregation.md).
