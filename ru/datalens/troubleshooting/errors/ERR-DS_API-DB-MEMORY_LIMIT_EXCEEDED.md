# Memory limit has been exceeded during query execution

`ERR.DS_API.DB.MEMORY_LIMIT_EXCEEDED`

Недостаточно памяти в источнике данных для выполнения запроса.

Ошибка возникает, когда базе данных не хватает памяти, чтобы выполнить запрос от {{ datalens-short-name }}.

{% if audience == "internal" %}

Чтобы исправить ошибку, попробуйте выполнить действия:

1. Откройте чарт, в котором возникла ошибка.
1. Посмотрите через инспектор на запрос, который формирует {{ datalens-short-name }}.

   {% cut "Как посмотреть" %}

   1. Когда чарт загрузится, нажмите ![image](../../../_assets/datalens/horizontal-ellipsis.svg) в правом верхнем углу.
   1. В выпадающем меню выберите **Инспектор**.
   1. В открывшемся окне нажмите ![image](../../../_assets/datalens/angle-down.svg).

   {% endcut %}

1. Оптимизируйте таблицу или уменьшите объем данных в запросе, например, с помощью фильтров в чарте.

   Если вы используете подключение **CH over YT**, то обратитесь в поддержку **CH over YT**. В других случаях — к администратору базы данных.

   Если собираетесь оптимизировать самостоятельно, попробуйте дополнить базу данных индексами и сортировками.

См. также: [Производительность CHYT](https://yt.yandex-team.ru/docs/description/chyt/reference/performance).

{% endif %}

{% if audience != "internal" %}

Чтобы исправить ошибку, оптимизируйте таблицу-источник или уменьшите объем данных в запросе с помощью фильтров в чарте.

Для оптимизации таблиц обратитесь к администратору вашей базы данных.

Если собираетесь оптимизировать самостоятельно, попробуйте дополнить базу данных индексами и сортировками.

{% note tip %}

Если источник данных — {{ CH }}, найдите запросы от {{ datalens-short-name }} в [system.query_log]({{ ch.docs }}/operations/system-tables/query_log/).

Если  источник данных — MBD {{ PG }}, посмотрите [анализ производительности](../../../managed-postgresql/tutorials/profiling.md).

{% endnote %}

{% endif %}
