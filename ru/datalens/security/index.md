# Управление доступом

Доступ к сервису {{ datalens-full-name }} регулируется через консоль Яндекс.Облака.
Чтобы предоставить доступ, назначьте пользователю роль `{{ roles-datalens-instances-user }}`.

Разграничение прав доступа в сервисе реализовано на уровне объектов и папок.
На каждый объект и папку можно назначать пользователю права доступа, которые определяют допустимые операции.

Вы можете предоставить пользователю доступ к папке или к любому объекту сервиса:
- Подключение
- Датасет
- Чарт
- Дашборд

Также пользователь может запросить права доступа самостоятельно через форму запроса. Подробнее в разделе [{#T}](../operations/permission/request.md).

## Добавление пользователя {#add-new-user}

Чтобы добавить пользователя и предоставить ему доступ к сервису {{ datalens-short-name }}:

1. {% include [grant-role-console-first-steps](../../_includes/iam/grant-role-console-first-steps.md) %}
1. На странице **Пользователи и роли** в правом верхнем углу нажмите **Добавить пользователя**.
1. Введите электронную почту пользователя в Яндексе.
1. Нажмите кнопку **Добавить**. При добавлении нового пользователя в облако ему автоматически назначается роль участника облака — [`resource-manager.clouds.member`](../../iam/concepts/access-control/roles.md#member).
1. {% include [configure-roles-console](../../_includes/iam/configure-roles-console.md) %}
1. Для добавления роли на облако нажмите значок ![image](../../_assets/plus-sign.svg) в блоке **Роли на облако <имя облака>**.

    Для добавления роли на каталог, выберите каталог и нажмите **Назначить роль** в блоке **Роли в каталогах**.
1. Выберите `{{ roles-datalens-instances-user }}` из списка.

Подробнее о назначении ролей в Яндекс.Облаке в разделе [Роли](../../iam/concepts/access-control/roles.md).

## Права доступа {#permissions}

Вы можете назначить следующие права доступа на объекты и папки в сервисе {{ datalens-short-name }}:

### {{ permission-execute }} {#permission-execute}

Пользователь с правом доступа `{{ permission-execute }}` может выполнять запросы к доступным подключениям и датасетам.
С эти правом пользователь не может просматривать подключения и датасеты.

{% note important %}

Вы можете назначить право доступа `{{ permission-execute }}` только на подключение и датасет.

{% endnote %}

### {{ permission-read }} {#permission-read}

Пользователь с правом доступа `{{ permission-read }}` может просматривать дашборды, виджеты, датасеты и папки.

### {{ permission-write }} {#permission-write}

Пользователь с правом доступа `{{ permission-write }}` может изменять дашборды, виджеты, подключения, датасеты и папки.

Право доступа `{{ permission-write }}` включает в себя все разрешения права доступа `{{ permission-read }}`.

### {{ permission-admin }} {#permission-admin}

Пользователь с правом доступа `{{ permission-admin }}` может изменять доступные объекты и папки, изменять права доступа.

Право доступа `{{ permission-admin }}` включает в себя все разрешения права доступа `{{ permission-write }}`.


## Таблица прав доступа {#permission-table}

Объект доступа<br/>Действие | {{ permission-execute }} | {{ permission-read }} | {{ permission-write }} | {{ permission-admin }}
----|----|----|----|----
**Папка** |
Просмотр папки | N/A | ✔ | ✔ | ✔
Редактирование папки | N/A | - | ✔ | ✔
Изменение прав доступа | N/A | - | - | ✔
**Подключение** |
Выполнение запросов<br/>к подключению | ✔ | ✔ | ✔ | ✔
Создание датасета<br/>над подключением | - | ✔ | ✔ | ✔
Просмотр параметров<br/>подключения | - | ✔ | ✔ | ✔
Редактирование подключения | - | - | ✔ | ✔
Изменение прав доступа | - | - | - | ✔
**Датасет** |
Выполнение запросов<br/>к датасету | ✔ | ✔ | ✔ | ✔
Создание чарта<br/>над датасетом | ✔ | ✔ | ✔ | ✔
Просмотр датасета | - | ✔ | ✔ | ✔
Редактирование датасета | - | - | ✔ | ✔
Изменение прав доступа | - | - | - | ✔
**Чарт** |
Просмотр чарта | N/A | ✔ | ✔ | ✔
Редактирование чарта | N/A | - | ✔ | ✔
Изменение прав доступа | N/A | - | - | ✔
**Дашборд** |
Просмотр дашборда | N/A | ✔ | ✔ | ✔
Редактирование дашборда | N/A | - | ✔ | ✔
Изменение прав доступа | N/A | - | - | ✔

## Безопасность на уровне строк данных (RLS) {#row-level-security}

В датасете можно разграничить доступ к данным на уровне строк (_Row-level security_ или _RLS_).
Вы можете разграничить доступ к любому измерению датасета.

RLS позволяет ограничить доступ к данным для пользователей в рамках одного датасета. Например, вы можете разграничить доступ разным клментам.
Каждому пользователю может быть выданы права на неограниченное количество значений измерений.

Разграничение определяется конфигурацией доступа, которая выглядит следующим образом:

```yaml
'[значение 1]': [пользователь 1], [пользователь 2]
'[значение 2]': [пользователь 3]
'[значение 3]': [пользователь 1], [пользователь 2], [пользователь 3]
```

В случае RLS все запросы к датасету проходят через следующий фильтр:
```roomsql
where [измерение] in ([значение 1], [значение 2]... [значение N])
```

{% include [rls-note](../../_includes/datalens/datalens-rls-note.md) %}

#### Что дальше {#what-is-next}

- [{#T}](../operations/permission/grant.md)
- [{#T}](../operations/permission/revoke.md)
- [{#T}](../operations/permission/request.md)
- [{#T}](../operations/dataset/manage-row-level-security.md)