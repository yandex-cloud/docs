---
title: Фоновая карта в {{ datalens-full-name }}
description: Из статьи вы узнаете, как в {{ datalens-full-name }} создать и настроить тип визуализации Фоновая карта.
---

# Фоновая карта ![](../../_assets/datalens/heatmap.svg) в {{ datalens-full-name }}

Фоновая карта отображает целые области и регионы разными цветами или оттенками цвета. Области на карте задаются с помощью геополигонов. 

_Геополигон_ — это элемент, который состоит из области, ограниченной замкнутой линией, и самой этой линии. Значение показателя выражается через насыщенность цвета или через сам оттенок.

​Фоновая карта используется, когда нужно оценить значение показателя в рамках территориальной единицы. Например, с помощью фоновой карты можно показать плотность населения отдельных районов.

![choropleth-map](../../_assets/datalens/visualization-ref/choropleth-map/choropleth-map.png =800x)

Чтобы показать полигоны на карте, добавьте в датасет поле с типом данных [Геополигон](../dataset/data-types.md#geopolygon):

* Создайте текстовое поле, в котором лежат данные вида `[[[55.60807, 37.5698], [55.60847, 37.56992], [55.60851, 37.57095]]]` — координаты точек полигона в квадратных скобках. 
    Вы можете предварительно подготовить данные в БД и определить тип данных [Геополигон](../dataset/data-types.md#geopolygon) в интерфейсе описания датасета.
* Используйте [функцию](../function-ref/GEOPOLYGON.md) `GEOPOLYGON(polygon_string)`, чтобы создать вычисляемое поле с типом данных [Геополигон](../dataset/data-types.md#geopolygon).
* Если у вас в данных есть поле с названием городов, регионов или стран, используйте [справочник геоточек/геополигонов](https://geointellect.com/files/geo_for_datalens.zip) нашего партнера Геоинтеллект.

По [ссылке](https://storage.yandexcloud.net/doc-files/Regions.csv) можно скачать пример CSV-файла с полигонами регионов РФ.

## Секции в визарде {#wizard-sections}

Секция<br/> в визарде| Описание
----- | ----
Полигоны (Геополигоны) | Измерение с типом [Геополигон](../dataset/data-types.md#geopolygon).
Цвета | Измерение или показатель. Влияет на цвет или интенсивность закрашивания областей.
Тултипы | Измерение или показатель. Подсказка, которая отобразится при наведении на область. Для полей с типом `Строка` можно настроить использование базового синтаксиса [{#T}](../dashboard/markdown.md): нажмите на значок перед названием поля и включите опцию **Markdown**.
Фильтры слоя | Измерение или показатель. Используется в качестве фильтра текущего слоя.
Фильтры | Измерение или показатель. Используется в качестве фильтра всего чарта.

## Создание фоновой карты {#create-diagram}


{% include [datalens-workbooks-collections-note](../../_includes/datalens/operations/datalens-workbooks-collections-note-step4.md) %}


1. {% include [create-1](../../_includes/datalens/visualization-ref/create-1.md) %}
1. {% include [create-2](../../_includes/datalens/visualization-ref/create-2.md) %}
1. {% include [create-3](../../_includes/datalens/visualization-ref/create-3.md) %}
1. {% include [create-4](../../_includes/datalens/visualization-ref/create-4.md) %}
1. {% include [create-5](../../_includes/datalens/visualization-ref/create-5.md) %}
1. Выберите тип слоя **Полигоны (Геополигоны)**.
1. Перетащите измерение с типом [Геополигон](../dataset/data-types.md#geopolygon) из датасета в секцию с выбором типа слоя.
1. Закрасьте полигоны на карте. Перенесите показатель или измерение в секцию **Цвета**.
1. Добавьте тултипы из значений измерения и показателя, которые отображаются при наведении на полигон.

{% include [datalens-map-scale-note](../../_includes/datalens/datalens-map-scale-note.md) %}

{% include [you-can-3](../../_includes/datalens/visualization-ref/you-can-3.md) %}

## Рекомендации {#recomendations}

* Не используйте фоновую карту, если хотите провести точное сравнение значений между собой.
* Для повышения точности нужно наносить подписи данных или добавлять к карте всплывающие подсказки с информацией.

{% include [see-also](../../_includes/datalens/visualization-ref/see-also-sub.md) %}