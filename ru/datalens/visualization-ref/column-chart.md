---
title: Столбчатая диаграмма в {{ datalens-full-name }}
description: Из статьи вы узнаете, как в {{ datalens-full-name }} создать и настроить тип визуализации Столбчатая диаграмма.
---

# Столбчатая диаграмма ![](../../_assets/datalens/column.svg) в {{ datalens-full-name }}

Диаграмма отображает значения одного или нескольких показателей по периодам времени или по категориям. Высота столбика определяет значение показателя: чем выше столбец, тем больше его значение.

В отличие от линейного графика, на этой диаграмме можно сравнивать отдельные периоды, делая акцент на индивидуальных значениях, а не на общем тренде показателя.

{% list tabs %}

- Представление

  ![bar-chart](../../_assets/datalens/visualization-ref/bar-chart/bar-chart.png =800x)

- Исходная таблица

  Год |	Продажа|	
  -----|---------| 
  2022|	6М |	
  2021|	28М |	
  2020|	18М |	
  2019|	9М | 
  2018|	1М |

{% endlist %}


## Типы столбчатых диаграмм {#types}

* [с группировкой](#groupped)
* [с накоплением](#stacked)

### С группировкой {#groupped}

Диаграмма с группировкой позволяет сравнивать два или несколько показателей, например количество доставленных товаров курьером или самовывоз. Высота столбца выражает величину показателя.

{% cut "Пример" %}

{% list tabs %}

- Представление

  ![bar-chart-groupped](../../_assets/datalens/visualization-ref/bar-chart/bar-chart-groupped.png =800x)

- Исходная таблица

  Год |	Доставка|	Самовывоз
  -----|---------| ----------|
  2022|	2М |	4М
  2021|	8М |	19М
  2020|	5М |	13М
  2019|	3М | 6М
  2018|	331К |	918К

{% endlist %}

{% endcut %}


### С накоплением {#stacked}

Диаграмма показывает соотношение внутренних сегментов по периодам времени или категориям. При этом сегменты располагаются друг над другом – основанием для каждого следующего сегмента будет крайняя граница предыдущего.
Поскольку сумма всех сегментов выражается общей длиной столбца, то такую диаграмму используют, когда важна итоговая сумма столбца.

{% cut "Пример" %}

{% list tabs %}

- Представление

  ![bar-chart-stacked](../../_assets/datalens/visualization-ref/bar-chart/bar-chart-stacked.png =800x)

- Исходная таблица

  Год |	Доставка|	Самовывоз
  -----|---------| ----------|
  2022|	2М |	4М
  2021|	8М |	19М
  2020|	5М |	13М
  2019|	3М | 6М
  2018|	331К |	918К

{% endlist %}

{% endcut %}


## Секции в визарде {#wizard-sections}

Секция<br/> в визарде| Описание
----- | ----
X | Измерения. Может быть указано одно или два измерения. Влияет на группировку значений по оси X. Порядок указанных измерений влияет на порядок группировок по оси X. Для типов `Дата` и `Дата и время`можно задать группировку по времени: минуты, часы, недели и др.
Y | Показатель. Может быть указано несколько показателей. При добавлении в секцию более одного показателя в секции **Цвета** появится измерение [Measure Names](../concepts/chart/measure-values.md). 
Цвета | Измерение, показатель, поле [Measure Names или Measure Values](../concepts/chart/measure-values.md). Влияет на цвет столбцов. `Measure Names` и `Measure Values` удаляются из секции нажатием на значок ![image](../../_assets/datalens/cross.svg) или путем удаления показателей с оси Y.
Сортировка | Измерение или показатель. Влияет на сортировку столбцов. В сортировку выносится только то измерение, которое участвует в построении чарта. Направление сортировки отмечено значком рядом с полем: по возрастанию ![image](../../_assets/console-icons/bars-ascending-align-left.svg) или по убыванию ![image](../../_assets/console-icons/bars-descending-align-left.svg). Чтобы изменить направление сортировки, нажмите значок.
Подписи | Показатель. Отображает значения показателя на диаграмме. При использовании нескольких показателей для подписи добавляйте [Measure Values](../concepts/chart/measure-values.md). Поддерживается использование [функций разметки](../function-ref/markup-functions.md). Для полей с типом `Строка` можно настроить использование базового синтаксиса [{#T}](../dashboard/markdown.md): нажмите на значок перед названием поля и включите опцию **Markdown**.
Сплит | Измерение. Разбивает чарт по горизонтали по значениям выбранного измерения. Максимальное количество сплитов в одном чарте — 25.
Фильтры | Измерение или показатель. Используется в качестве фильтра. Фильтр может быть переопределен селектором дашборда, если селектор будет построен на том же поле.

## Создание столбчатой диаграммы {#create-diagram}

Чтобы создать столбчатую диаграмму:


{% include [datalens-workbooks-collections-note](../../_includes/datalens/operations/datalens-workbooks-collections-note-step4.md) %}


1. {% include [create-1](../../_includes/datalens/visualization-ref/create-1.md) %}
1. {% include [create-2](../../_includes/datalens/visualization-ref/create-2.md) %}
1. Нажмите кнопку **Создать чарт** → **Чарт в Wizard**.
1. {% include [create-4](../../_includes/datalens/visualization-ref/create-4.md) %}
1. Выберите тип чарта **Столбчатая диаграмма**.
1. Перетащите измерение из датасета в секцию **X**. Значения отобразятся в нижней части графика по оси X.
1. Перетащите один или несколько показателей из датасета в секцию **Y**. Значения отобразятся по оси Y в виде столбцов.

{% note info %}

* По умолчанию диаграмма с накоплением отображается, если у вас больше одного показателя.
* Чтобы отобразить [диаграмму с группировкой](#grouped-column-chart), используйте распределение по группам с помощью секции **Цвета**.

{% endnote %}

### Создание столбчатой диаграммы с группировкой {#grouped-column-chart}

Чтобы отобразить диаграмму с группировкой по оси X:

1. Откройте столбчатую диаграмму или [создайте](#create-diagram) новую.
1. В зависимости от количества показателей в секции **Y** выполните следующие действия:

   {% list tabs group=indicators_number %}

    - Один показатель {#one}

      1. Перетащите измерение, по которому хотите сгруппировать столбцы на диаграмме, в секцию **Цвета**.
      1. Продублируйте это измерение в секцию **Х**. Порядок измерений будет влиять на порядок группировки.

        {% cut "Пример" %}

        ![one-measure](../../_assets/datalens/visualization-ref/bar-chart/one-measure.png)

        {% endcut %}

    - Два и больше показателей {#more}

      1. Перетащите измерение `Measure Names` в секцию **Цвета**.
      1. Перетащите измерение `Measure Names` в секцию **X**. Порядок измерений будет влиять на порядок группировки.

        {% cut "Пример" %}

        ![two-measures](../../_assets/datalens/visualization-ref/bar-chart/two-measures.png =800x)

        {% endcut %}

   {% endlist %}

### Добавление цвета столбцов по показателю {#column-colors}

Чтобы окрасить столбцы на диаграмме в зависимости от значений показателя:

1. Откройте столбчатую диаграмму или создайте новую.
1. В зависимости от количества показателей в секции **Y** выполните:

   {% list tabs group=indicators_number %}

   - Один показатель {#one}

     Продублируйте показатель из секции **Y** в секцию **Цвета**.

     Столбцы на диаграмме окрасятся в зависимости от значений показателя.

     {% cut "Пример" %}

     ![image](../../_assets/datalens/operations/chart/column-colors-1.png)

     {% endcut %}

   - Два и больше показателей {#more}

     Перетащите показатель `Measure Values` в секцию **Цвета**.

     Столбцы на диаграмме окрасятся в зависимости от значений всех показателей, указанных в секции **Y**.

     {% cut "Пример" %}

     ![image](../../_assets/datalens/operations/chart/column-colors-2.png)

     {% endcut %}

   {% endlist %}

1. Дополнительно настройте градиент цвета для показателя. Для этого в правом верхнем углу секции **Цвета** нажмите значок ![image](../../_assets/console-icons/gear.svg) (значок появляется при наведении указателя на секцию).
1. В настройках цвета укажите:

   * **Тип градиента** — выберите двухцветный или трехцветный.
   * **Цвет градиента** — выберите цветовую гамму градиента из списка.
   * **Направление градиента** — измените направление градиента с помощью значка ![image](../../_assets/console-icons/arrow-right-arrow-left.svg).
   * **Задать пороговые значения** — установите пороговые числовые значения, которые будут соответствовать каждому цвету. Работает, если в секции **Y** один показатель.

### Добавление сортировки столбцов по агрегированному значению {#column-aggregate-sorting}

В секции **Сортировка** нельзя использовать значение с [агрегацией](../dataset/data-model.md#aggregation). 

Чтобы отсортировать столбцы по агрегированному значению (например, по сумме, количеству или среднему), сначала создайте [вычисляемое поле](../concepts/calculations/index.md) в датасете или чарте с помощью [формулы агрегации](../function-ref/aggregation-functions.md). Затем используйте его для построения чарта и сортировки.

Например, чтобы отсортировать продажи по значению суммы:

1. Откройте столбчатую диаграмму или создайте новую.
1. В левой части экрана над списком измерений и показателей нажмите значок ![image](../../_assets/console-icons/plus.svg) и выберите **Поле**.
1. В окне **Настройка поля** введите:

   * название поля — `sum_Price`;
   * формулу — `SUM([Price])`.

1. Нажмите кнопку **Создать**.
1. Перетащите новое поле в секции **Y** и **Сортировка**. Столбцы отсортируются по значению суммы продаж. Чтобы изменить направление сортировки, в секции **Сортировка** нажмите ![image](../../_assets/console-icons/bars-descending-align-left.svg) или ![image](../../_assets/console-icons/bars-ascending-align-left.svg) справа от названия поля.

{% cut "Пример" %}

![image](../../_assets/datalens/operations/chart/column-sorting.png =800x)

{% endcut %}

### Настройка отображения пустых (`null`) значений {#null-settings}

{% include [datalens-chart-null-settings](../../_includes/datalens/datalens-chart-null-settings.md) %}

## Рекомендации {#recomentations}

* **Подписи.** Если значения категорий содержат большое количество текста, постарайтесь сокращать текст — подписи на диаграмме будут выглядеть аккуратнее. Можно использовать строковые функции в вычисляемых полях или условные операторы `CASE`.
* **Сортировка.** Если каждый столбец является категорией, а не временем, попробуйте отсортировать столбцы по убыванию или возрастанию показателя. Это сделает график визуально более аккуратным и информативным. Сортировка может быть полезна и внутри подкатегорий каждого столбца.
* Столбчатая диаграмма рекомендуется для отображения изменения показателя(ей) во времени. В этом случае сортировку по оси Х используйте с осторожностью, так как обычно пользователь ожидает увидеть изменение во времени по оси X.
* {% include [colors](../../_includes/datalens/visualization-ref/colors.md) %}
* {% include [split](../../_includes/datalens/visualization-ref/split.md) %}

  {% cut "Пример чарта" %}

  ![bar-chart-split](../../_assets/datalens/visualization-ref/bar-chart/bar-chart-split.png)

  {% endcut %}

{% include [see-also](../../_includes/datalens/visualization-ref/see-also-sub.md) %}