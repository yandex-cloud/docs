# Обработка ошибок в Vision

Сервис Vision возвращает ошибки для трех уровней:

* [ошибка запроса](#request-error);
* [ошибка обработки файла](#file-error);
* [ошибка выполнения определенного типа анализа](#feature-error).

В этом разделе приведены возможные ошибки и описания для каждого из этих уровней.

## Ошибка запроса {#request-error}

Стандартная ошибка, возвращаемая {{ yandex-cloud }} в ответе, если операция не была выполнена. Список кодов ошибок с описаниями см. в [концепциях API](../../api-design-guide/concepts/errors.md).

## Ошибка обработки файла {#file-error}

Ошибка, возникающая, если сервис не смог обработать какой-то из переданных файлов. Например, если сервис не смог декодировать изображение:

```json
{
 "results": [
  {
   "error": {
    "code": 3,
    "message": "Can't decode Image"
   }
  },
  {
    "results": [{ ... }] // Результаты анализа другого файла.
  }
 ]
}
```

При ошибке обработки файла gRPC-код ошибки всегда `3`, а в `message` указывается причина ошибки. Вот некоторые примеры:

* Невозможно декодировать изображение.
* Размер изображения слишком большой.
* Разрешение изображения слишком большое.
* Ошибка конвертации в JPEG.

## Ошибка выполнения анализа {#feature-error}

Ошибка, возникающая, если сервис не смог выполнить анализ для какой-то из запрошенных возможностей (`Feature`) для файла. Например, не смог распознать текст из-за неправильной конфигурации:

```json
{
 "results": [
  {
   "results": [
    {
     "error": {
      "code": 3,
      "message": "Incorrect feature configuration: Incorrect number of language codes: 0"
     }
    }
   ]
  },
  {
    "results": [{ ... }] // Результаты анализа другого файла.
  }
 ]
}
```

Возможные ошибки:

Код ошибки | Описание ошибки
---- | ----
3 | Некорректные параметры запроса. Например, в конфигурации указано неправильное количество языков.
8 | Превышена [квота](../concepts/limits.md) для заданной возможности.
13 | Внутренняя ошибка сервера. Ошибка означает, что операция не может быть выполнена из-за технического состояния сервера. Например, из-за нехватки вычислительных ресурсов.
