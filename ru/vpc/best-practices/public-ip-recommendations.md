# Рекомендации по использованию публичных IP-адресов

[Публичные IPv4-адреса](../concepts/address.md#public-addresses) — это ограниченный ресурс, цена которого постоянно растет. При этом использование публичных IPv4-адресов часто не требуется, а в некоторых случаях может создавать уязвимости в вашей инфраструктуре. {{ yandex-cloud }} предоставляет набор сервисов и [образов виртуальных машин](../../compute/concepts/image.md), позволяющих минимизировать использование публичных IPv4 и построить более экономичную и устойчивую инфраструктуру.

#### Используйте NAT-шлюз {#use-nat}

Если вашим облачным ресурсам необходимо обмениваться данными с интернетом и другими внешними ресурсами (например, скачивать обновления, пакеты и код из публичных репозиториев), рекомендуется использовать [NAT-шлюзы](../operations/create-nat-gateway.md). Они позволяют организовать доступ к внешним ресурсам через общий пул [IP-адресов](../concepts/address.md) [облака](../../resource-manager/concepts/resources-hierarchy.md#cloud).

#### Настройте маршрутизацию через NAT-инстанс {#nat-instance-routing}

Чтобы организовать доступ в интернет с определенных IP-адресов, [воспользуйтесь выделенным NAT-инстансом](../../tutorials/routing/nat-instance.md) и зафиксируйте его адрес как статический. Например, такой вариант можно использовать для настройки политик или межсетевых экранов при взаимодействии с партнерскими организациями. Таким образом, ВМ в рамках [сети](../../vpc/concepts/network.md#network) доступа смогут использовать общий выход в интернет с фиксированного IP-адреса.

Также такая схема позволяет организовать безопасный доступ к сервису [{{ objstorage-full-name }}](../../storage/) без доступа в интернет. Для этого настройте [политику доступа](../../storage/concepts/policy.md) для [бакета](../../storage/concepts/bucket.md), добавив в белый список только фиксированный IP-адрес вашего NAT-инстанса (см. [пример настройки](https://github.com/alex-vlasov-l1/nat-insatnce-terraform-example)).

#### Используйте балансировщики нагрузки {#use-load-balancer}

Для публикации ваших приложений используйте балансировщики нагрузки [{{ network-load-balancer-full-name }}](../../network-load-balancer/) и [{{ alb-full-name }}](../../application-load-balancer/) или сервис типа `LoadBalancer` в [{{ managed-k8s-full-name }}](../../managed-kubernetes/operations/create-load-balancer.md). С их помощью можно публиковать сервисы на общем IP-адресе, используя разные порты или маршрутизацию по путям и SNI.

#### Публикуйте статические файлы с помощью {{ objstorage-name }} и {{ cdn-name }} {#publishing-static-files}

Для публикации статических файлов используйте сервис [{{ objstorage-name }}](../../storage/) в сочетании с сервисом [{{ cdn-full-name }}](../../cdn/). Таким образом вы и сэкономите вычислительные ресурсы ваших ВМ, и повысите экономическую эффективность. Также использование {{ cdn-full-name }} ускоряет отдачу контента пользователям и повышает надежность ваших сервисов.

Подробнее:
* [{#T}](../../storage/operations/hosting/setup.md).


* [{#T}](../../cdn/tutorials/blue-green-canary-deployment.md).


#### Используйте Site-to-Site VPN {#site-to-site}

Для настройки сетевого взаимодействия между разными площадками и внешними облаками используйте Site-to-Site [VPN](../../glossary/vpn.md). Так можно обезопасить ваши приложения от несанкционированного доступа и исключить доступ к ним извне. Также это поможет сэкономить на использовании публичных IP-адресов: вам будет необходим только один публичный IP-адрес для VPN-подключения.

Подробнее:
* [{#T}](../../tutorials/routing/ipsec-vpn.md).
* [Настройка VPN с облаком Azure](https://github.com/yandex-cloud/yc-solution-library-for-azure/tree/main/Yandex-Azure%20VPN).
* [Настройка VPN с облаком AWS](https://github.com/yandex-cloud/yc-solution-library-for-aws/tree/main/VPN/modules/vpn).

#### Используйте {{ interconnect-full-name }} {#cic}

Свяжите вашу локальную сетевую инфраструктуру с облачной с помощью сервиса [{{ interconnect-name }}](../../interconnect/). Это позволит не использовать публичные IP-адресов как со стороны вашей сети, так и со стороны {{ yandex-cloud }}. Вместо этого вы сможете использовать [внутренние IP-адреса](../concepts/address.md#internal-addresses) из [подсетей](../../vpc/concepts/network.md#subnet), диапазоны которых определите сами.

Подробнее:
* [Маршрутизация трафика с помощью {{ interconnect-name }}](../../interconnect/concepts/routing.md).

#### Подключайтесь к ВМ через серийную консоль {#serial-console}

Если вам нужен только [SSH-доступ](../../glossary/ssh-keygen.md) к ВМ — используйте [серийную консоль](../../compute/operations/index.md#serial-console) вместо подключения через публичный IP-адрес. Рекомендуем выключать возможность подключения через серийную консоль в то время, когда вы ей не пользуетесь.