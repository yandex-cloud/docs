# Мониторинг сетевых соединений

Для обеспечения работы сетевого балансировщика и [групп безопасности](security-groups.md) {{ vpc-short-name }} использует отслеживание сетевых соединений.

{% include [security-groups-note-services](../../_includes/vpc/security-groups-note-services.md) %}

Для каждого соединения создается две записи: для трафика к [виртуальной машине](../../glossary/vm.md) и от нее. Записи удаляются при достижении следующих условий:

{% include [conditions-for-deleting-records](../../_includes/vpc/conditions-for-deleting-records.md) %}

Подробнее о [просмотре графика подключений](../operations/connections-view.md).

Можно создать максимум 100 000 записей, что соответствует 50 000 соединений. При достижении этого ограничения, новые соединения отбрасываются. Ограничение на количество записей не зависит от размера или количества сетевых интерфейсов виртуальной машины. Если вам нужно увеличить лимит, [обратитесь]({{ link-console-support }}) в техническую поддержку.

При использовании групп безопасности запись создается, если первый пакет получен в направлении с разрешающим правилом. Поэтому для ОС виртуальной машины и для ваших приложений рекомендуется устанавливать параметр `keepalive` на время, меньше трех минут.

>Например, для ОС на базе Linux рекомендуются следующие настройки системных параметров sysctl:
>* net.ipv4.tcp_keepalive_time = 120
>* net.ipv4.tcp_keepalive_intvl = 60
>* net.ipv4.tcp_keepalive_probes = 4
