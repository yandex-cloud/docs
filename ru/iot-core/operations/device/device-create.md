# Создание устройства

{% list tabs %}

- Консоль управления

   Чтобы создать устройство:

   1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором вы хотите создать устройство.
   1. Выберите сервис **{{ iot-short-name }}**.
   1. Выберите в списке нужный реестр.
   1. В левой части окна выберите раздел **Устройства**.
   1. Нажмите кнопку **Добавить устройство**.
   1. В блоке **Общая информация** добавьте:
      * **Имя** устройства. Например, `my-device`.
      * (Опционально) **Описание** с дополнительной информацией об устройстве.
      * **Пароль**, который вы будете использовать для доступа к устройству.<br/>Для создания пароля можно воспользоваться [генератором паролей](https://passwordsgenerator.net/).<br/>Не забудьте сохранить пароль, он вам понадобится.
   1. (Опционально) Добавьте [алиасы](../../concepts/topic/usage.md#aliases):
      1. Нажмите кнопку **Добавить алиас**.
      1. Заполните поля: введите алиас (например, `events`) и тип топика после `$devices/<deviceID>` (например, `events`).<br/>Вы сможете использовать алиас `events` вместо топика `$devices/<deviceID>/events`.
   1. (Опционально) Добавьте [сертификаты](../../operations/certificates/create-certificates.md):
      * Чтобы добавить файл:
         1. Выберите способ **Файл**.
         1. Нажмите **Выбрать файл**.
         1. Укажите файл сертификата на вашем компьютере, нажмите **Открыть**.
         1. Нажмите **Добавить**.
      * Чтобы добавить текст:
         1. Выберите способ **Текст**.
         1. Вставьте тело сертификата в поле **Содержимое**.
         1. Нажмите **Добавить**.
   1. Нажмите кнопку **Создать**.

- CLI
  
  {% include [cli-install](../../../_includes/cli-install.md) %}
  
  1. [Посмотрите список реестров](../registry/registry-list.md#registry-list), в которых можно создать устройство, или [создайте новый реестр](../registry/registry-create.md).
  
  1. Создайте устройство:
  
      ```
      yc iot device create --registry-name my-registry --name my-device
      ```
	  
     {% include [name-format](../../../_includes/name-format.md) %}
	  
	  Результат:
	  ```
      id: b9135goeh1uc1s2i07nm
      registry_id: b91ki3851hab9m0l68je
      created_at: "2019-05-28T16:08:30.938Z"
      name: my-device
      ```
 
  1. Проверьте, что устройство создалось:
  
      ```
      yc iot device list --registry-name my-registry
	   ```
	  
	   Результат:
	   ```
      +----------------------+-----------+
      |          ID          |   NAME    |
      +----------------------+-----------+
      | b9135goeh1uc1s2i07nm | my-device |
      +----------------------+-----------+
      ```

- {{ TF }} 

   {% include [terraform-definition](../../../_tutorials/terraform-definition.md) %}

   Если у вас ещё нет {{ TF }}, [установите его и настройте провайдер {{ yandex-cloud }}](../../../tutorials/infrastructure-management/terraform-quickstart.md#install-terraform).  
   
   {% note info %}

   Чтобы добавить сертификаты устройству, [подготовьте](../certificates/create-certificates.md) их заранее.

   {% endnote %}

   Чтобы создать устройство: 
   
   1. [Посмотрите список реестров](../registry/registry-list.md#registry-list), в которых можно создать устройство, или [создайте новый реестр](../registry/registry-create.md).

   1. Опишите в конфигурационном файле параметры ресурса, который необходимо создать:

      * `yandex_iot_core_device` — параметры устройства:
       * `registry_id` — идентификатор реестра, в котором создается устройство.
       * `name` — имя устройства.
       * `description` — описание устройства.
       * `aliases` — алиасы топиков. Подробнее см. [Создание алиаса](../device/alias/alias-create.md)
       * `passwords` — список паролей для авторизации с помощью [логина и пароля](../../concepts/authorization.md#log-pass).
       * `certificates` — список сертификатов для авторизации с помощью [сертификатов](../../concepts/authorization.md#certs).

      Пример структуры ресурса в конфигурационном файле:
      
      ```
      resource "yandex_iot_core_device" "my_device" {
        registry_id = "<идентификатор реестра>"
        name        = "test-device"
        description = "test device for terraform provider documentation"
        
        aliases = {
          "some-alias1/subtopic" = "$devices/{id}/events/somesubtopic",
          "some-alias2/subtopic" = "$devices/{id}/events/aaa/bbb",
        }
        
        passwords = [
          "<пароль>",
        ]
        
        certificates = [
          file("<путь к файлу с сертификатом>")
        ]
      }
      ```
      
      Более подробную информацию о ресурсах, которые вы можете создать с помощью {{ TF }}, см. в [документации провайдера]({{ tf-provider-link }}/).
      
   1. Проверьте корректность конфигурационных файлов.
      
      1. В командной строке перейдите в папку, где вы создали конфигурационный файл.
      1. Выполните проверку с помощью команды:
         ```
         terraform plan
         ```
      Если конфигурация описана верно, в терминале отобразится список создаваемых ресурсов и их параметров. Если в конфигурации есть ошибки, {{ TF }} на них укажет. 
         
   1. Разверните облачные ресурсы.

      1. Если в конфигурации нет ошибок, выполните команду:
         ```
         terraform apply
         ```
      1. Подтвердите создание ресурсов.
      
      После этого в указанном каталоге будут созданы все требуемые ресурсы. Проверить появление ресурсов и их настройки можно в [консоли управления]({{ link-console-main }}).

- API

  Чтобы создать устройство, воспользуйтесь методом REST API [create](../../api-ref/Device/create.md) для ресурса [Device](../../api-ref/Device/index.md) или вызовом gRPC API [DeviceService/Create](../../api-ref/grpc/device_service.md#Create).

{% endlist %}
