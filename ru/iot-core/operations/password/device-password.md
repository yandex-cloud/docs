# Управление паролями устройства

Чтобы начать обмен данными и командами между устройствами и реестрами, необходимо [авторизоваться](../../concepts/authorization.md). В данном разделе описано, как управлять паролями устройства для соответствующего способа авторизации.

{% include [pass-priority-note](../../../_includes/iot-core/pass-priority-note.md) %}

* [Добавить пароль](#create-or-add)
* [Посмотреть список паролей](#list)
* [Удалить пароль](#delete)

## Добавить пароль устройству {#create-or-add}

Вы можете добавить пароль уже созданному устройству или задать его при создании устройства с помощью параметра `--password`.

{% include [read-pass](../../../_includes/iot-core/read-pass.md) %}

### Добавить пароль уже созданному устройству {#add}  

{% list tabs %}

- Консоль управления

   Чтобы добавить пароль уже созданному устройству:

   1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором вы хотите добавить пароль уже созданному устройству.
   1. Выберите сервис **{{ iot-name }}**.
   1. Выберите в списке реестр с нужным устройством.
   1. В левой части окна выберите раздел **Устройства**.
   1. Выберите в списке нужное устройство.
   1. В блоке **Пароли** нажмите кнопку **Добавить пароль**.
   1. В поле **Пароль** введите пароль, который вы будете использовать для доступа к устройству.<br/>Для создания пароля можно воспользоваться [генератором паролей](https://passwordsgenerator.net/).<br/>Не забудьте сохранить пароль, он вам понадобится.
   1. Нажмите кнопку **Добавить**.

- CLI
  
    {% include [cli-install](../../../_includes/cli-install.md) %}

    Чтобы добавить пароль: 
    1. Получите список устройств в реестре: 
    
        ```
        $ yc iot device --registry-name my-registry list
        +----------------------+--------+
        |          ID          |  NAME  |
        +----------------------+--------+
        | arenak5ciqss6pbas5tm | second |
        | areqjd6un3afc3cefuio | first  |
        +----------------------+--------+
        ```    
    1. Добавьте пароль устройству:
    
        ```
        $ yc iot device password add --device-name first --password Passw0rdForDevice
        device_id: areqjd6un3afc3cefcvm
        id: areqjd6un3afc3cefuio
        created_at: "2019-12-16T15:11:36.892167Z"
        ```
       
{% endlist %}

### Задать пароль устройству при создании {#create}

{% list tabs %}

- Консоль управления

   Как задать пароль устройству при создании, читайте в разделе [{#T}](../device/device-create.md).

- CLI
  
    {% include [cli-install](../../../_includes/cli-install.md) %}
    
    {% include [default-catalogue](../../../_includes/default-catalogue.md) %}
    
    Чтобы задать пароль при создании:
    1. Получите список реестров в каталоге: 
        
        ```
        $ yc iot registry list
        +----------------------+-------------------+
        |          ID          |       NAME        |
        +----------------------+-------------------+
        | arenou2oj4ct42eq8f4m | my-registry       |
        +----------------------+-------------------+
        ```
    1. Создайте устройство с паролем:       
    
        ```
        $ yc iot device create --registry-name my-registry --name device-with-pass --password Passw0rdForDevice
        id: arepomfambsg5biqc25n
        registry_id: arenou2oj4ct42eq8g3n
        created_at: "2019-12-16T15:18:39.358922Z"
        name: device-with-pass
        ```
       
{% endlist %}  

## Получить список паролей устройства {#list}

{% list tabs %}

- Консоль управления

   Чтобы просмотреть список паролей устройства:

   1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором вы хотите получить список паролей устройства.
   1. Выберите сервис **{{ iot-name }}**.
   1. Выберите в списке реестр с нужным устройством.
   1. В левой части окна выберите раздел **Устройства**.
   1. Выберите в списке нужное устройство.
   1. На странице **Обзор** перейдите к разделу **Пароли**.

   В разделе **Пароли** отобразится список паролей устройства.

- CLI
  
    {% include [cli-install](../../../_includes/cli-install.md) %}
    
    {% include [default-catalogue](../../../_includes/default-catalogue.md) %}
    
    Чтобы получить список паролей:  
    1. Получите список устройств в реестре: 
    
        ```
        $ yc iot device --registry-name my-registry list
        +----------------------+------------------+
        |          ID          |       NAME       |
        +----------------------+------------------+
        | arenak5ciqss6pbas5tm | second           |
        | arepomfambsg5biqc77p | device-with-pass |
        | areqjd6un3afc3cefuio | first            |
        +----------------------+------------------+
        ```
    1. Получите список паролей устройства: 
    
        ```
        $ yc iot device password list --device-name device-with-pass
        +----------------------+---------------------+
        |          ID          |     CREATED AT      |
        +----------------------+---------------------+
        | areuin5t7pndvlj6n4tr | 2019-12-16 15:18:39 |
        +----------------------+---------------------+
        ```

{% endlist %}     
   
## Удалить пароль устройства {#delete}

{% list tabs %}

- Консоль управления

   Чтобы удалить пароль устройства:

   1. В [консоли управления]({{ link-console-main }}) выберите каталог, в котором вы хотите удалить пароль устройства.
   1. Выберите сервис **{{ iot-name }}**.
   1. Выберите в списке реестр с нужным устройством.
   1. В левой части окна выберите раздел **Устройства**.
   1. Выберите в списке нужное устройство.
   1. Справа от удаляемого пароля нажмите значок ![image](../../../_assets/horizontal-ellipsis.svg), в выпадающем списке выберите **Удалить**.
   1. В открывшемся окне нажмите кнопку **Удалить**.

- CLI
  
    {% include [cli-install](../../../_includes/cli-install.md) %}
    
    {% include [default-catalogue](../../../_includes/default-catalogue.md) %}
    
    Чтобы удалить пароль:  
    1. Получите список паролей устройства: 
    
        ```
        $ yc iot device password list --device-name device-with-pass
        +----------------------+---------------------+
        |          ID          |     CREATED AT      |
        +----------------------+---------------------+
        | areuin5t7pndvlj6n4tr | 2019-12-16 15:18:39 |
        +----------------------+---------------------+
        ```
    1. Удалите пароль: 
    
        ```
        $ yc iot device password delete --device-name device-with-pass --password-id areuin5t7pndvlj6n4tr
        ```
    1. Убедитесь, что пароль действительно удален: 
        
        ```
        $ yc iot device password list --device-name device-with-pass
        +----+------------+
        | ID | CREATED AT |
        +----+------------+
        +----+------------+
        ```
       
{% endlist %}       
