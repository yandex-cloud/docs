# Инструмент поиска по файлам

Инструмент поиска по файлам расширяет возможности моделей, позволяя выполнять гибридный поиск по файлам пользователя при формирования ответа. Инструмент можно подключить в {{ responses-api }}. Стоимость использования инструмента см. в разделе [{#T}](../../../pricing.md).

Чтобы разрешить модели искать информацию в файлах, укажите инструмент `"file_search"` и идентификатор [поискового индекса {{ vector-store-name }}](../../../operations/agents/manage-searchindex.md). Поисковый индекс содержит информацию о файлах, которые будут использоваться для поиска. Количество возвращаемых результатов можно ограничить параметром `max_num_results`.

{% list tabs group=programming_language %}

- Python {#python}

  ```python
  response = client.responses.create(
      model=f"gpt://{YANDEX_CLOUD_FOLDER}/{YANDEX_CLOUD_MODEL}",
      # SpeechKit Voice Profiler — несуществующий, по крайней мере пока, продукт, описание которого было передано в документах.
      instructions="Ты помогаешь пользователю с документацией. При вопросах про SpeechKit Voice Profiler используй поиск по файлам.",
      input="Расскажи про продукт SpeechKit Voice Profiler",
      tools=[{
          "type": "file_search",
          "vector_store_ids": [<идентификатор_поискового_индекса>],
          "max_num_results": 3
      }]
  )
  ```

{% endlist %}

## Аннотации {#annotations}

Ответ с результатами поиска по файлам содержит объект `annotations`. Используйте его, чтобы отследить и показать пользователю источники данных. Поле `filename` объекта `annotations` содержит имя файла, в котором была найдена использованная информация, а `file_id` — его идентификатор. Остальные поля объекта заполняются значениями по умолчанию, чтобы сохранить совместимость с OpenAI:

```json
"annotations": [
  {
    "file_id": "...",
    "filename": "Yandex SpeechKit Voice Profiler.docx",
    "index": 0,
    "type": "file_citation"
  }
 ...
]
```

## Возможные сценарии использования инструмента {#use-cases}

Инструмент поиска по файлам может быть полезен при решении многих задач:

* **Корпоративный ассистент**: ответы по внутренним документам и регламентам организации.
* **Техподдержка по продукту**: поиск по технической документации, SDK и FAQ со ссылками на фрагменты.
* **Юридическая консультация**: ответы по внутренним юридическим документам с указанием цитат и источников в ответе.
* **Подготовка новых сотрудников**: ответы на вопросы стажера по внутренним политикам и архитектуре проекта.
* **Продажи**: поиск успешных сделок в директории с презентациями и коммерческими предложениями.

#### См. также {#see-also}

[{#T}](../../../operations/agents/create-filesearch-text-agent.md)