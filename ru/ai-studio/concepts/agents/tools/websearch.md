# Инструмент поиска в интернете Web Search

Инструмент поиска в интернете позволяет модели получать информацию из открытых источников и использовать ее для формирования более точных и актуальных ответов. Поиск может выполняться как по всему интернету, так и по ограниченному списку сайтов. Инструмент можно подключить в {{ responses-api }} и {{ realtime-api }}. Стоимость использования инструмента см. в разделе [{#T}](../../../pricing.md).

{% note tip %}

При каждом вызове инструмента веб-поиска расходуются [квоты на синхронные запросы](../../../../search-api/concepts/limits.md#search-api-quotas) {{ search-api-name }}. Учитывайте ограничения сервиса {{ search-api-name }} при интенсивном использовании инструмента.

{% endnote %}

Если инструмент подключен, модель самостоятельно принимает решение, нужна ли дополнительная информация для формирования ответа. Чтобы разрешить модели искать информацию в интернете при генерации ответов, в параметрах запроса укажите инструмент `web_search`. При подключении инструмента через {{ responses-api }} доступны следующие опциональные параметры:

* `allowed_domains` — массив, содержащий до 5 доменов для поиска. Если список доменов не будет задан, поиск будет выполняться по всему интернету. 
* `user_location` — ограничение региона поиска. Если необходимо, укажите [код региона](../../../../search-api/reference/regions.md) в поле `region`.
* `search_context_size` — объем полученного из поиска контекста. Регулирует полноту и детализацию ответа и потребление токенов при использовании инструмента. Доступны значения `low`, `medium`, `high`. По умолчанию — `medium`.

{% list tabs group=programming_language %}

- Python {#python}

    ```python
    response = client.responses.create(
        model=f"gpt://{YANDEX_CLOUD_FOLDER}/{YANDEX_CLOUD_MODEL}",
        input="Сделай краткий обзор последних новостей об LLM в 2025 году — только факты, без домыслов.",
        tools=[
            {
                "type": "web_search",
                "filters": {
                    "allowed_domains": [
                        "habr.ru"
                    ],
                    "user_location": {
                        "region": "213",
                    },
                },
                "search_context_size": "medium", # варианты: low | medium | high
            }
        ],
        temperature=0.3,
        max_output_tokens=1000
    )
    ```

{% endlist %}

Ответ, обогащенный поиском в интернете, содержит объект `annotations`. Используйте его, чтобы отследить и показать пользователю источники данных. Поле `url` объекта `annotations` содержит адрес сайта, на котором была найдена использованная информация. Все остальные поля объекта заполняются значениями по умолчанию, чтобы сохранить совместимость с OpenAI:

```json
"annotations": [
  {
    "end_index": 0,
    "start_index": 0,
    "title": "",
    "type": "url_citation",
    "url": "www.rbc.ru"
  },
  {
    "end_index": 0,
    "start_index": 0,
    "title": "",
    "type": "url_citation",
    "url": "ria.ru"
  }
]
```

## Возможные сценарии использования инструмента {#use-cases}

Инструмент поиска в интернете может быть полезен при решении многих задач:

* **Актуализация справочной информации**: составить резюме, что поменялось в правилах магазина приложений на этой неделе.
* **Конкурентный обзор**: собрать новинки и сценарии конкурентов на основе информации, опубликованной на их сайтах.
* **Проверка фактов в пресс-релизе**: сверить цитаты и цифры перед публикацией.
* **Радар трендов**: собрать быстрый обзор новостей на заданную тему за сутки или неделю для дайджеста.
* **Подготовка к встрече**: сделать описание компании клиента перед созвоном.

## Примеры использования {#examples}

[{#T}](../../../operations/agents/create-websearch-text-agent.md)
