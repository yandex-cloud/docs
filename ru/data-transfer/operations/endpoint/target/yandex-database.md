# Настройка эндпоинта-приемника {{ ydb-name }}

При [создании](../index.md#create) или [изменении](../index.md#update) эндпоинта вы можете задать:

* Настройки подключения к базе данных {{ ydb-full-name }}. Эти параметры обязательные.
* [Дополнительные параметры](#additional-settings).

## Кластер {{ ydb-full-name }} {#managed-service}

Подключение к БД с указанием идентификатора кластера в {{ yandex-cloud }}. Доступно только для кластеров, развернутых в сервисе [{{ ydb-full-name }}](../../../../ydb/).

{% list tabs %}

- Консоль управления

    {% include [YDB UI](../../../../_includes/data-transfer/necessary-settings/ui/yandex-database.md) %}

{% endlist %}

## Дополнительные настройки {#additional-settings}

{% list tabs %}

- Консоль управления

    * **Количество шардов для разделения трафика** — укажите нужное количество шардов `N`.

        Если настройка задана, в таблицы добавляется колонка `_shard_col`. Значения в ней вычисляются как остаток от деления `H/N`, где `H` — результат хеш-функции от текущего времени, а `N` — указанное настройкой количество шардов.

    * **Ротация таблиц**:

        * **Единица измерения** — час, день или месяц.

        * **Размер таблицы** — в выбранных единицах измерения.

            По истечении временного интервала, равного выбранной единице измерения, будет удалена самая старая таблица базы и создана новая.

        * **Количество таблиц** — необходимое количество таблиц в базе-приемнике.

        * **Разбивать по колонке** — по значениям какой колонки разбивать (_партицировать_) таблицу. Колонка должна иметь тип <q>время</q>.

            {% if audience != "internal" %}

            Подробнее о партицировании таблиц см. в документации [{{ ydb-full-name }}](https://ydb.tech/ru/docs/concepts/datamodel#partitioning)

            {% endif %}

        Если используется эта настройка, в базе-приемнике создается указанное количество таблиц для данных за различные интервалы времени. Имя каждой таблицы выбирается автоматически по дате и времени начала интервала. В зависимости от значений в указанной колонке таблицы-источника, исходные строки распределяются по соответствующим таблицам базы-приемника.

    * **Переопределение имен таблиц** — заполните, если необходимо переименовать таблицы базы-источника при переносе в базу-приемник.

    * **Поддиректория куда разместить таблицы** — укажите [поддиректорию](https://ydb.tech/ru/docs/concepts/datamodel#dir) для размещения таблиц.

        Итоговый путь размещения таблицы: `<Путь в Yandex Database>/<Поддиректория>/<Таблица>`.

    * {% include [Field Cleanup policy Disabled/Drop](../../../../_includes/data-transfer/fields/common/ui/cleanup-policy-disabled-drop.md) %}

{% endlist %}
