# Мониторинг состояния трансфера

Вы можете отслеживать состояние трансфера с помощью инструментов мониторинга в консоли управления. Эти инструменты предоставляют диагностическую информацию в виде графиков.

Собирает значения метрик трансфера и отображает графики сервис [{{ monitoring-name }}](../../monitoring/concepts/index.md). Чтобы перейти к работе с метриками, дашбордами или алертами в сервисе {{ monitoring-name }}, нажмите кнопку **Открыть в Мониторинге** на панели сверху.

Также вы можете настроить [алерты в сервисе {{ monitoring-full-name }}](#monitoring-integration) для автоматического мониторинга состояния кластера. В {{ monitoring-full-name }} используются два порога срабатывания алерта: `Warning` и `Alarm`. При превышении заданного порога вы получите оповещение.

## Мониторинг состояния трансфера {#monitoring}

Для просмотра информации о состоянии трансфера:

1. Перейдите на страницу каталога и выберите сервис **{{ data-transfer-name }}**.
2. Выберите вкладку **Трансферы**.
3. Нажмите на имя нужного трансфера и выберите вкладку **Мониторинг**.

На странице появятся графики:

- **Data upload lag** — отставание данных (в секундах).
- **Successfully pushed rows** — количество записанных в эндпоинт-приемник строк.
- **Maximum lag on delivery** — максимальное отставание данных (в секундах).
- **Successfully pushed rows by tables** — количество записанных в эндпоинт-приемник строк, сгруппированных по таблицам.
- **Read buffer size** — объем буфера или журнала опережающей записи (там, где он поддерживается) в эндпоинте-источнике (в байтах).
- **Read bytes from source** — объем считанных из эндпоинта-источника данных (в байтах).
- **Sink response time** — время ответа эндпоинта-приемника (в секундах).
- **Read rows** — количество считанных из эндпоинта-источника строк.
- **Snapshot task progress** — количество строк, ожидающих переноса.
- **Snapshot task status** — выполняющаяся операция (`0` — репликация, `1` — копирование).

## Интеграция с {{ monitoring-full-name }} {#monitoring-integration}

Чтобы настроить алерты показателей состояния трансфера:

1. В консоли управления выберите каталог с трансфером, для которого нужно настроить алерты.
1. В списке сервисов выберите раздел **Monitoring**.
1. В блоке **Сервисные дашборды** выберите **{{ data-transfer-name }}**.
1. На нужном графике с показателями нажмите на значок ![options](../../_assets/horizontal-ellipsis.svg) и выберите пункт **Создать алерт**.
1. Если показателей на графике больше одного, выберите запрос данных для формирования метрики и нажмите **Продолжить**. {% if audience == "external" %}Подробнее о языке запросов [см. документацию {{ monitoring-full-name }}](../../monitoring/concepts/querying.md). {% endif %}
1. Задайте значения порогов `Alarm` и `Warning` для оповещения.
1. Нажмите **Создать алерт**.

Рекомендуемые значения порогов для некоторых метрик:

| Метрика                               | Обозначение                          | `Alarm` | `Warning` |
|---------------------------------------|:------------------------------------:|:-------:|:---------:|
| Максимальная задержка передачи данных | `sinker.pusher.time.row_max_lag_sec` | `15`    | —         |
| Объем буфера в эндпоинте-источнике    | `publisher.consumer.log_usage_bytes` | —       | Не ниже максимального объема данных, поступающих в эндпоинт-источник в рамках одной транзакции |