# Управление эндпоинтом-приемником

[Эндпоинт](../concepts/index.md#endpoint)-приемник описывает настройки базы данных, в которую будет производиться перенос информации с помощью {{ data-transfer-name }}. Вы можете [создать](#create-endpoint), [изменить](#update-endpoint) или [удалить](#delete-endpoint) такой эндпоинт.

## Создать эндпоинт {#create-endpoint}

{% list tabs %}

* Консоль управления

    1. Перейдите на [страницу каталога]({{ link-console-main }}) и выберите сервис **{{ data-transfer-name}}**.
    1. На вкладке **Эндпоинты** нажмите кнопку **Создать эндпоинт**.
    1. В поле **Направление** выберите **Приемник**.
    1. Укажите имя эндпоинта. Используйте строчные латинские буквы и цифры.
    1. (Опционально) укажите описание эндпоинта.
    1. В поле **Тип базы данных** выберите тип СУБД, в которую вы хотите передавать данные.
    1. Задайте параметры эндпоинта:

        * [{#T}](#settings-clickhouse).
        * [{#T}](#settings-mongodb).
        * [{#T}](#settings-mysql).
        * [{#T}](#settings-postgresql).

    1. Нажмите кнопку **Создать**.

{% endlist %}

## Изменить эндпоинт {#update-endpoint}

{% list tabs %}

* Консоль управления

    1. Перейдите на [страницу каталога]({{ link-console-main }}) и выберите сервис **{{ data-transfer-name }}**.
    1. На вкладке **Эндпоинты** выберите эндпоинт и нажмите кнопку ![pencil](../../_assets/pencil.svg) **Редактировать** на панели сверху.
    1. Отредактируйте параметры эндпоинта:

        * [{#T}](#settings-clickhouse).
        * [{#T}](#settings-mongodb).
        * [{#T}](#settings-mysql).
        * [{#T}](#settings-postgresql).

    1. Нажмите кнопку **Применить**.

{% endlist %}

## Удалить эндпоинт {#delete-endpoint}

{% include [delete-endpoint](../../_includes/delete-endpoint.md) %}

## Параметры эндпоинтов {#endpoint-settings}

### {{ CH }} {#settings-clickhouse}

* **Тип подключения** — выбор типа подключения к БД:

    {% include [ch-connection-necessary-settings.md](../../_includes/data-transfer/ch-connection-necessary-settings.md) %}

* Дополнительные настройки:

    * **Переопределение имен таблиц**.
    * **Колонка шардирования**.
    * **Шардирование по идентификатору трансфера**.

        {% note warning %}

        Если одновременно включены настройки **Колонка шардирования** и **Шардирование по идентификатору трансфера**, то шардирование будет осуществляться только по идентификатору трансфера.

        {% endnote %}

    * **Мапинг шардов**.

        Если используется шардирование по колонке, настройте распределение значений по шардам кластера-приемника.

    * **Учитывать `DEFAULTS`** — для необязательных полей будут использованы значения по умолчанию, если они определены. Включите эту настройку, если трансфер будет подключаться к приемнику через HTTP-порт, а не нативный.

    * **Интервал записи**.
    * **Политика очистки** при активации, повторной активации или перезагрузке трансфера. Используются настройки `DISABLED`, `DROP` и `TRUNCATE`.

{% endlist %}

### {{ MG }} {#settings-mongodb}

* **Настройки подключения** — выбор типа подключения к БД:

    {% include  [mongodb-connection-necessary-settings.md](../../_includes/data-transfer/mongodb-connection-necessary-settings.md) %}

* Дополнительные настройки:

    * **Идентификатор подсети** — выберите подсеть, через которую сервис должен соединяться с кластером-приемником.
    * Для шифрования передаваемых данных в поле **PEM-сертификат** нажмите кнопку **Загрузить файл**.
        Загрузите файл [PEM-сертификата](../../managed-mongodb/operations/connect.md#get-ssl-cert) или добавьте его содержимое в текстовом виде.
    * **Политика очистки** данных в базе-приемнике перед переносом:
        * `DISABLED` — не очищать;
        * `DROP` — полная очистка базы;
        * `TRUNCATE` — удалить только данные, но оставить схему.

### {{ MY }} {#settings-mysql}

* **Настройки подключения** — выбор типа подключения к БД:

   {% include  [mysql-connection-necessary-settings.md](../../_includes/data-transfer/mysql-connection-necessary-settings.md) %}

* Дополнительные настройки:

   * [Режим sql_mode](https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html).

   * Отключение проверки внешних ключей на приемнике. Используются настройки `FOREIGN_KEY_CHECKS=0` и `UNIQUE_CHECKS=0`.

     {% note warning %}

     Отключение проверки внешних ключей (`FOREIGN_KEY_CHECKS=0`) ускорит репликацию, но может привести к нарушению целостности данных при использовании каскадных операций.

     {% endnote %}

   * **Часовой пояс базы**, указывается как идентификатор [IANA Time Zone Database](https://www.iana.org/time-zones). По умолчанию используется UTC+0.

### {{ PG }} {#settings-postgresql}

**Настройки подключения** — выбор типа подключения к БД:

   {% include  [pg-connection-necessary-settings.md](../../_includes/data-transfer/pg-connection-necessary-settings.md) %}
