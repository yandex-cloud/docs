# Особенности работы с PostgreSQL

{% include [features](../../_includes/data-transfer/features-of-work.md) %}

1. Если вы используете [User-defined](https://www.postgresql.org/docs/9.5/xtypes.html) в своих схемах, то необходимо заранее создать схему на приемнике.

    Из-за особенностей репликационного протокола репликация сможет сохранить данные из таких столбцов только с типом `text`.
1. На стадии копирования на приемнике должны быть выключены: проверка целостности внешних ключей, триггеры и другие `constraints`.
    
    Это необходимо из-за отсутствия возможности сделать проверку для конкретной вставки. В такой конфигурации источник обеспечивает гарантии по внешним ключам. 
1. Работа с [sequence](https://www.postgresql.org/docs/9.5/sql-createsequence.html). 

    Значения позиций в последовательности при репликации нельзя гарантированно сохранить, поэтому рекомендуется сделать обновление `sequence` на приемнике.
1. Репликационный протокол PostgreSQL не позволяет получать информацию об изменениях схем данных. 
    
    В случае изменения схемы базы на источнике операция репликации получит ошибку на первой вставке в новое поле или таблицу. На этой стадии потребуется вмешательство администратора на приемнике, чтобы произвести изменения схемы.