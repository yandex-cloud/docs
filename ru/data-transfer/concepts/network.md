# Сеть в {{ data-transfer-full-name }}

{% if audience != "internal" %}
При создании эндпоинта вы можете выбрать [облачную сеть](../../vpc/concepts/network.md) и [группы безопасности](../../vpc/concepts/security-groups.md) для сетевого трафика. Если используемые в эндпоинтах виртуальные машины или кластеры БД находятся в выбранной облачной сети, то во время трансфера к ним будут применены правила выбранных групп безопасности. Это позволяет выполнять трансферы, не изменяя правила существующих групп безопасности виртуальных машин или кластеров БД.
{% else %}
По умолчанию трансферы запускаются на кластере YT Vanga. Источник и приемник должны быть доступны из макроса `_YTVANGANETS_` либо `_YTNETS_`.

### Трансфер между Яндексом и внешним Яндекс.Облаком

Для переноса данных из внутреннего облака во внешнее, во внешнем облаке должна быть заведена специальная IPv6-сеть, которая обеспечивает связность со внутренней инфраструктурой Яндекса. Подробности есть в [политиках ИБ](https://wiki.yandex-team.ru/security/policies/yandex-cloud-rules/#setevajasvjaznostibalanceirovka).

Чтобы переносить данные во внешнее Облако, например, в Managed Service for ClickHouse, нужно выполнить следующее:

1. Если такая сеть не была создана при создании облака, запросите ее через [форму](https://st.yandex-team.ru/createTicket?queue=CLOUD&_form=54816). В форме выберите стенд **PROD**, укажите родительский макрос `_CLOUD_YANDEX_CLIENTS_`, и выберите пункт "требуется выделить project_id".
2. Запросите через [Puncher](https://puncher.yandex-team.ru/) доступ к выделенному project_id от макроса `_YTVANGANETS_` либо `_YTNETS_`. Для Managed Service for ClickHouse укажите порты TCP 8443 и 9440. Информацию о портах для других БД смотрите в документации соответствующих БД.
3. Создайте в облаке кластер Managed Service for ClickHouse или другой требуемой БД, разместив его хосты в сети из п.1
4. Создайте эндпоинты и трансфер **во [внутреннем Облаке](https://cloud.yandex-team.ru)**. При этом эндпоинт-приемник нужно настроить как **On-Premise**, явно указав список хостов БД.
5. Активируйте трансфер.

{% note warning %}

Использование выделенной IPv6-сети является предпочтительным способом трансфера в Яндекс.Облако. Не используйте для этого интернет.

{% endnote %}

### Трансферы между Яндексом и хранилищами в интернете

Для экспорта данных в интернет выполните следующее:

1. Согласуйте данное решение с СИБ. Запрещено выкачивать данные из Яндекса без явного одобрения СИБ.
2. Создайте эндпоинты и трансфер **во [внутреннем Облаке](https://cloud.yandex-team.ru)**. При этом эндпоинт в интернете нужно настроить как **On-Premise**, явно указав список хостов БД. Не забывайте включить SSL в настройках подключения, если это необходимо.
3. Заведите тикет на дежурного в очереди [DTSUPPORT](https://st.yandex-team.ru/DTSUPPORT) с указанием `id` трансфера из предыдущего пункта. В тикете обязательно должно присутствовать подтверждение того, что схема согласована с СИБ (например, комментарий или связанный тикет).
4. После того, как дежурный включит для трансфера доступ в интернет (пока что это никак не отображается в UI и где-либо еще), активируйте трансфер и убедитесь в том, что все работает.

Доступ в интернет выдается отдельно для каждого трансфера, поэтому постарайтесь выстроить сценарий работы с данными таким образом, чтобы трансфер можно было переиспользовать на регулярной основе, а не заводить каждый раз новый.
{% endif %}

## Пропускная способность {#bandwidth}

При копировании скорость может достигать 15 МБ/с. База размером 100 ГБ обычно копируется за 2–3 часа. Точное время зависит от настроек приемника.

При репликации пропускная способность может достигать 20–30 тысяч транзакций в секунду.
