# Метод UpdateShardCount

Обновляет количество [сегментов](../../concepts/glossary.md#shard) указанного [потока данных](../../concepts/glossary.md#stream-concepts). Доступно только увеличение числа сегментов.

При успехе метод переводит поток в статус `UPDATING` и возвращает HTTP-ответ с кодом 200 и данные в формате JSON. После завершения обновления поток будет переведен в статус `ACTIVE`. Время масштабирования зависит от размера потока и может занять несколько минут. Можно продолжать читать данные из потока и записывать данные в поток в статусе `UPDATING`.

## Запрос {#request}

Запрос содержит данные в формате JSON.

```json
{
  "ScalingType": "string",
  "StreamName": "string",
  "TargetShardCount": number
}
```

### Параметры запроса {#request-options}

Параметр | Описание
----- | -----
`ScalingType` | Тип масштабирования. Масштабирование `UNIFORM_SCALING` создает сегменты одинакового размера.<br/><br/>**Тип**: Строка<br/>**Возможные значения**: `UNIFORM_SCALING`<br/>**Обязательный**: Да
`StreamName` | Имя потока данных.<br/><br/>**Тип**: Строка<br/>**Размер**: `1`-`128` символов.<br/>**Возможные значения**: `[a-zA-Z][a-zA-Z0-9-]+*(?<!-)$`<br/>**Обязательный**: Да
`TargetShardCount` | Целевое количество сегментов.<br/><br/>**Тип**: Целое число<br/>**Минимальное значение**: `1`<br/>**Обязательный**: Да

## Ответ {#response}

В случае успеха возвращаются HTTP-ответ с кодом 200 и данные в формате JSON.

```json
{
  "CurrentShardCount": number,
  "StreamName": "string",
  "TargetShardCount": number
}
```

### Параметры ответа {#response-options}

Параметр | Описание
----- | -----
`CurrentShardCount` | Текущее количество сегментов.<br/><br/>**Тип**: Целое число<br/>**Минимальное значение**: `1`<br/>**Обязательный**: Да
`StreamName` | Имя потока данных.<br/><br/>**Тип**: Строка<br/>**Размер**: `1`-`128` символов.<br/>**Возможные значения**: `[a-zA-Z][a-zA-Z0-9-]+*(?<!-)$`<br/>**Обязательный**: Да
`TargetShardCount` | Целевое количество сегментов.<br/><br/>**Тип**: Целое число<br/>**Минимальное значение**: `1`<br/>**Обязательный**: Да

## Ошибки {#errors}

Параметр | Описание | Код HTTP
----- | ----- | -----
`InvalidArgumentException` | Недопустимый аргумент. Дополнительные сведения смотрите в сообщении об ошибке. | 400
`LimitExceededException` | Превышено максимальное число запросов. | 400
`ResourceInUseException` | Ресурс используется другой операцией. | 400
`ResourceNotFoundException` | Запрошенный ресурс не найден. | 400

Могут возникать [ошибки](../common-errors.md), общие для всех методов.
