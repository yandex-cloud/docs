# Синтаксис Yandex Flavored Markdown (YFM)

## Содержание

* [Заголовки](#headers)
    * [Якоря](#anchors)
* [Начертания](#tracings)
* [Списки](#lists)
    * [Неупорядоченный список](#unordered-list)
    * [Упорядоченный список](#ordered-list)
* [Таблицы](#tabels)
* [Ссылки](#links)
    * [Ссылки с автоматической подстановкой текста из заголовка](#auto-links)
* [Вставка кода](#code)
    * [Фрагмент кода внутри текста](#inline-code)
    * [Фрагмент кода отдельным блоком](#codeblock)
* [Изображения](#images)
    * [Прямая вставка](#direct-insert)
    * [Вставка через ссылку](#link-insert)
* [Заметки](#notes)
    * [Примечание](#info)
    * [Совет](#tip)
    * [Важно](#warning)
    * [Внимание](#alert)
    * [Свой заголовок](#custom-header)
* [Переиспользование контента](#includes)
* [Табы](#tabs)
* [Каты](#cuts)
* [Видео](#video)
* [Переменные](#vars)
    * [Подстановки](#substitudes)
    * [Условные операторы](#conditions)
    * [Фильтры](#filters)
    * [Циклы](#cycles)
    * [Функции](#functions)
* [Метаданные](#meta)

## Заголовки <a name="headers"></a>

Чтобы создать заголовок, используйте символ (#), например:

```markdown
# Заголовок h1
## Заголовок h2
### Заголовок h3
#### Заголовок h4
```

В YFM используется 4 уровня заголовков. Заголовок страницы должен быть первого уровня. Для заголовков подразделов можно использовать второй, третий и четвертый уровни.

**Важно!** Нельзя пропускать вложенность заголовков.

### Якоря <a name="anchors"></a>

Чтобы на заголовки документа можно было сослаться, во время сборки для каждого заголовка формируется якорь. По умолчанию якорь — это текст заголовка, записанный в латинской транслитерации. Такой якорь изменится, если вы измените текст заголовка.

Чтобы якорь не изменялся, укажите его в явном виде после заголовка. Вы можете указать несколько якорей одновременно:

```markdown
## Заголовок h2 {#custom} {#header} {#custom-header}
```

## Начертания <a name="tracings"></a>

Чтобы задать для текста **полужирное** начертание, заключите его в двойные звездочки (`*`):

```markdown
Этот текст выделен **полужирным шрифтом**.
```

Чтобы задать для текста _курсивное_ начертание, заключите его в знаки подчеркивания:

```markdown
Этот текст выделен _курсивом_.
```

Чтобы задать для текста _**полужирное и курсивное**_ начертание, заключите
его одновременно в двойные звездочки и знаки подчеркивания:

```markdown
Этот текст _**жирный и наклонный**_.
Этот текст **_жирный и наклонный_**.
```

Чтобы ввести символы в <sup>верхнем индексе</sup>, их нужно обернуть в ^:

```markdown
Этот текст в ^верхнем индексе^.
```

## Списки <a name="lists"></a>

### Неупорядоченный список <a name="unordered-list"></a>

Чтобы оформить неупорядоченный маркированный список, используйте символы `*`, `-` или `+`. Рекомендуемый символ — `*`.

Например, разметка:

```markdown
* Элемент 1
* Элемент 2
* Элемент 3
```

будет отображаться как:

* Элемент 1
* Элемент 2
* Элемент 3

Чтобы оформить вложенный маркированный список, добавьте отступ для элементов дочернего списка. Допустимый размер отступа — от двух до пяти пробелов. Рекомендуемый размер отступа — четыре пробела.

Например, разметка:

```markdown
* Элемент 1
   * Элемент A
   * Элемент B
* Элемент 2
```

будет отображаться как:

* Элемент 1
   * Элемент A
   * Элемент B
* Элемент 2

### Упорядоченный список <a name="ordered-list"></a>

Чтобы оформить упорядоченный нумерованный список, используйте цифры с символом `.` или `)`. Рекомендованный формат разметки: цифра `1` и символ `.`.

Например, разметка:

```
1. Первый пункт
1. Второй пункт
1. Третий пункт
```

будет отображаться как:

1. Первый пункт
2. Второй пункт
3. Третий пункт

Чтобы оформить вложенный упорядоченный список, добавьте отступ для элементов дочернего списка. Допустимый размер отступа — от двух до пяти пробелов. Рекомендуемый размер отступа — четыре пробела.

Например, разметка:

```
1. Первый пункт
    1. Вложенный пункт
    1. Вложенный пункт
1. Второй пункт
```

будет отображаться как:

1. Первый пункт
   1. Вложенный пункт
   1. Вложенный пункт
1. Второй пункт

## Таблицы <a name="tabels"></a>

Таблицы состоят из одной строки с заголовками, разделительной строки и строк с данными.

Каждая строка таблицы состоит из ячеек, отделенных друг от друга символами `|`.

В ячейках разделительной строки используются только символы `-` и `:`. Символ `:` ставится в начале, в конце или с обеих сторон содержимого ячейки разделительной строки, чтобы обозначить выравнивание текста в соответствующем столбце по левой стороне, по правой стороне или по центру.

Таблицу нужно отделять от предшествующего и последующего текста пустыми строками.

Например, разметка:

```markdown
Колонка по левому краю | Колонка по правому краю | Колонка по центру
:--- | ---: | :---:
Текст | Текст | Текст
```

будет отображаться как:

Колонка по левому краю | Колонка по правому краю | Колонка по центру
:--- | ---: | :---:
Текст | Текст | Текст

## Ссылки <a name="links"></a>

Ссылки имеют вид  `[текст](ссылка)`, где:

* `[текст]` — текст ссылки.
* `(ссылка)` — URL или путь до файла, на который делается ссылка.

Например, разметка:

```markdown
[ссылка на README.md](README.md)
```

будет отображаться так:

[ссылка на README.md](README.md)

### Ссылка на якоря

Вы можете внутри текста расставлять якоря для упрощения ссылок на какую-либо часть документации. Обычно якоря ставят у заголовков, но Вы можете их поставить в любом месте.

Якорь состоит из знака # и переменной, заключенных в фигурные скобки. Пример:

```markdown
## Пример {#example}
```

В Вашем YFM файле в последующем Вы сможете сослаться на якорь так:

```markdown
[ссылка на README.md](../ref/basic.md#example)
```

В примере выше отражена ссылка на якорь #example, расположенный в файле basic.md.

Следует отметить, что если файл (например basic.md) содержит конструкции 

```{% include [x](_includes/lexer.md) %}``` 

то ссылаться необходимо на файл basic.md а не на lexer.md. Т.е. ссылка на якорь будет выглядеть так: 
```markdown
[ссылка на lexer](../builtins/basic.md#lexer-anchor)
```

### Ссылки с автоматической подстановкой текста из заголовка <a name="auto-links"></a>

В YFM вы можете добавлять ссылки на другие md-файлы без указания текста ссылки. Он подставится автоматически из заголовка указанного файла.

Например, ссылка:

```markdown
[{#T}](README.md)
```

будет отображаться так:

[Yandex Flavored Markdown](README.md)

## Вставка кода <a name="code"></a>

Вы можете встроить фрагмент кода в текст абзаца или вынести его в отдельный блок.

### Фрагмент кода внутри текста <a name="inline-code"></a>

Чтобы вставить фрагмент кода в текст, используйте символ \`.

Например, разметка:

```markdown
Предложение с `фрагментом кода`.
```

будет отображаться так:

Предложение с `фрагментом кода`.

### Фрагмент кода отдельным блоком <a name="codeblock"></a>

Чтобы оформить фрагмент кода как отдельный блок, используйте утроенный символ \`. Для подсветки синтаксиса укажите язык, на котором написан код.

Например, разметка:


\`\`\`js<br>
let a= 10;<br>
\`\`\`


будет отобраться как фрагмент кода с подсветкой:

```js
let a= 10;
```

## Изображения <a name="images"></a>

### Прямая вставка <a name="direct-insert"></a>

Чтобы вставить изображение в документ, воспользуйтесь разметкой вида

```markdown
![alt text](_assets/image.png "Текст подсказки" =100x200)
```

Здесь:

* `[alt text]` —  альтернативный текст изображения;
* `_assets/image.png` — путь до файла изображения;

   **Важно!** изображения должны храниться в каталоге, имя которого начинается с символа `_`, иначе они будут удалены при сборке.

* `"Текст подсказки"` — текст подсказки при наведении указателя на изображение;
* `=100x200` — размер изображения в пикселях.

### Вставка через ссылку <a name="link-insert"></a>

Вы можете один раз объявить изображение в тексте документа, а затем вызывать его в тексте с помощью короткой ссылки. Для этого:

1. Объявите изображение:

   ```markdown
   [image]: _assets/image.png "Текст подсказки"
   ```

1. Вставьте изображение с помощью разметки:

   ```markdown
   ![alt text][image]
   ```

Такой способ может быть удобен, когда нужно вставить одно изображение несколько раз.

## Заметки <a name="notes"></a>

Заметка — это визуально выделенный блок, который позволяет привлечь внимание к определенному содержимому.

Существует 4 типа заметок: примечание (info), совет (tip), важно (warning) и внимание (alert).

Не следует часто использовать блоки заметок, так как они могут отвлекать пользователя от основного содержимого.
Также, хотя эти элементы могут содержать YFM, лучше не перегружать их, делая простыми и понятными.

### Примечание <a name="info"></a>

```markdown
{% note info %}

Это примечание.

{% endnote %}
```

### Совет <a name="tip"></a>

```markdown
{% note tip %}

Это совет.

{% endnote %}
```

### Важно <a name="warning"></a>

```markdown
{% note warning %}

Это важная информация.

{% endnote %}
```

### Внимание <a name="alert"></a>

```markdown
{% note alert %}

Это предупреждение.

{% endnote %}
```

### Свой заголовок <a name="custom-header"></a>

По умолчанию заметки имеют стандартный заголовок, но его можно переопределить:

```markdown
{% note info "Custom title" %}

Это важная информация.

{% endnote %}
```

Если в кавычках ничего не указывать, у заметки не будет никакого заголовка:

```markdown
{% note info "" %}

Это важная информация.

{% endnote %}
```

## Переиспользование контента <a name="includes"></a>

Вы можете вынести повторяющийся контент в отдельный файл и вставлять его в документ с помощью элемента **{% include %}**. Часто такой подход оказывается удобнее, чем "копировать-вставить".

Чтобы  использовать один и тот же контент в нескольких местах:

1. Сохраните такой текст в отдельном md-файле.

   **Важно!** Такие файлы должны храниться в каталоге, имя которого начинается с символа `_`, например `_includes`. Если этого не сделать, файлы будут удалены при сборке.

1. Вставьте в документ ссылку на файл:

   ```markdown
   {% include notitle [Описание](_includes/file.md) %}
   ```

   Здесь:
   * `notitle` — если параметр указан, заголовок файла будет не будет вставлен в текст.
   * `[Описание]` — описание файла. Не влияет на сборку, нужно только для удобства рефакторинга документа.
   * `(_includes/file.md)` — путь до файла.

В результате при сборке контент файла будет вставлен в документ. Если в файле есть относительные ссылки на другие документы или изображения, они будут перестроены.

## Вкладки <a name="tabs"></a>

Вы можете оформить текст в виде вкладок. Это может быть полезно, например, чтобы разделить схожий контент и не перегружать страницу текстом.

Чтобы создать вкладки, используйте разметку вида:

```markdown
{% list tabs %}

- Название таба1

  Контент таба1.

  * Можно использовать списки.
  * И **другую** разметку.

- Название таба2

  Контент таба2.

{% endlist %}
```

**Важно!** При использовании вкладок обязательно оставлять пустые строки:

* Перед и после строк `{% list tabs %}` и `{% endlist %}`.
* Между текстом одной вкладки и заголовком следующей вкладки.

Внутри вкладок можно использовать YFM-разметку: списки, таблицы, изображения, код и т.д.

## Каты <a name="cuts"></a>

Каты позволяют сворачивать контент ("убирать под кат"). Это можно использовать в длинных листингах, примерах кода и тд. Внутри катов можно использовать YFM.

Чтобы создать кат, используйте разметку вида:

```markdown
{% cut "Заголовок ката" %}

Контент который мы хотим скрыть

{% endcut %}
```

## Видео <a name="video"></a>

Вы можете вставлять в страницу видео с наиболее популярных платформ:

```
@[youtube](dQw4w9WgXcQ)
@[vimeo](19706846)
@[vine](etVpwB7uHlw)
@[prezi](1kkxdtlp4241)
```

Больше подробностей на [странице плагина](https://www.npmjs.com/package/markdown-it-video).

## Переменные <a name="vars"></a>

В YFM вы можете объявлять и использовать переменные. При сборке переменные будут подставлены в текст документации или использованы для вычисления условий. Это удобно, например, для сборки документации разных версий сервиса из одних и тех же исходных файлов.

### Подстановки <a name="substitudes"></a>

Чтобы объявить и использовать переменные в документе:

1. Создайте в корневом каталоге документа файл `presets.yaml`.
1. Объявите переменные в файле `presets.yaml` в формате:

   ```
   default:
     variable-name-1: значение переменной 1
     variable-name-2: значение переменной 2
   ```

1. Чтобы вставить значение переменной в документ как текст, используйте разметку:

   ```
   Какой-то текст {{ variable-name-1 }} продолжение текста.
   ```

1. Чтобы оставить значение в документе как текст, используйте разметку:

   ```
   Какой-то текст not_var{{ variable-name-1 }} продолжение текста.
   ```

### Условные операторы <a name="conditions"></a>

Вы можете включать в сборку документа тот или иной фрагмент текста в зависимости от значений переменных.

Например, чтобы собрать две версии документа для разных ОС используйте разметку вида:

```
{% if  OS == 'iOS' %}

Скачайте приложение в [App Store](https://www.apple.com/ios/app-store/).

{% else %}

Скачайте приложение в [Google Play](https://play.google.com).

{% endif %}
```

### Фильтры <a name="filters"></a>

**Важно!** Перед и после оператора фильтра обязательно ставить пробел

Переменные в `presets.yaml` для примеров ниже:

```
default:
  user:
    name: Alice
  users:
    - Alice
    - Mark
```

#### capitalize

```
Hello {{ user.name | capitalize }}! => Hello Alice!
```

#### length

```
{{ users | length }} => 2

{{ user.name | length }} | length => 5
```

### Циклы <a name="cycles"></a>

Переменные в `presets.yaml` для примеров ниже:

```
default:
  users:
    - Alice
    - Mark
```

#### Примеры циклов

```
Prefix {% for user in users %} {{user}} {% endfor %} Postfix

Prefix Alice Mark Postfix
```

```
Prefix
{% for user in users %}
{{user}}
{% endfor %}
Postfix

Prefix
Alice
Mark
Postfix
```

```
Prefix {% for user1 in users %} {% for user2 in users %} {{user1}}+{{user2}} {% endfor %} {% endfor %} Postfix

Prefix Alice+Alice Alice+Mark Mark+Alice Mark+Mark Postfix
```

### Функции <a name="functions"></a>

Переменные в `presets.yaml` для примеров ниже:

```
default:
  user:
    name: Pasha
```

#### slice

```
Hello M{{ user.name.slice(1) }}! => Hello Masha!
```

```
Hello M{{ user.name.slice(1, 2) }}sha! => Hello Masha!
```

## Метаданные <a name="meta"></a>

В начале файла можно добавить метаданные в формате yaml.

```
---
title: Заголовок
description: Описание
---
```

<!-- markdownlint-disable-file MD004 MD007 MD013 MD033 -->
