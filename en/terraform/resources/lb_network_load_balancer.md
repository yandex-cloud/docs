---
subcategory: Network Load Balancer (NLB)
page_title: 'Yandex: yandex_lb_network_load_balancer'
description: A network load balancer is used to evenly distribute the load across cloud resources.
sourcePath: en/terraform/tf-ref/yandex-cloud/resources/lb_network_load_balancer.md
---

# yandex_lb_network_load_balancer (Resource)

Creates a network load balancer in the specified folder using the data specified in the config. For more information, see [the official documentation](https://yandex.cloud/docs/load-balancer/concepts).

## Example usage

```terraform
//
// Create a new Network Load Balancer (NLB).
//
resource "yandex_lb_network_load_balancer" "my_nlb" {
  name = "my-network-load-balancer"

  listener {
    name = "my-listener"
    port = 8080
    external_address_spec {
      ip_version = "ipv4"
    }
  }

  attached_target_group {
    target_group_id = yandex_lb_target_group.my-target-group.id

    healthcheck {
      name = "http"
      http_options {
        port = 8080
        path = "/ping"
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `allow_zonal_shift` (Boolean) Flag that marks the network load balancer as available to zonal shift.
- `attached_target_group` (Block Set) An AttachedTargetGroup resource. (see [below for nested schema](#nestedblock--attached_target_group))
- `deletion_protection` (Boolean) The `true` value means that resource is protected from accidental deletion.
- `description` (String) The resource description.
- `folder_id` (String) The folder identifier that resource belongs to. If it is not provided, the default provider `folder-id` is used.
- `labels` (Map of String) A set of key/value label pairs which assigned to resource.
- `listener` (Block Set) Listener specification that will be used by a network load balancer.

~> One of `external_address_spec` or `internal_address_spec` should be specified. (see [below for nested schema](#nestedblock--listener))
- `name` (String) The resource name.
- `region_id` (String) ID of the availability zone where the network load balancer resides. If omitted, default region is being used.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `type` (String) Type of the network load balancer. Must be one of 'external' or 'internal'. The default is 'external'.

### Read-Only

- `created_at` (String) The creation timestamp of the resource.
- `id` (String) The ID of this resource.

<a id="nestedblock--attached_target_group"></a>
### Nested Schema for `attached_target_group`

Required:

- `healthcheck` (Block List, Min: 1) A HealthCheck resource.

~> One of `http_options` or `tcp_options` should be specified. (see [below for nested schema](#nestedblock--attached_target_group--healthcheck))
- `target_group_id` (String) ID of the target group.

<a id="nestedblock--attached_target_group--healthcheck"></a>
### Nested Schema for `attached_target_group.healthcheck`

Required:

- `name` (String) Name of the health check. The name must be unique for each target group that attached to a single load balancer.

Optional:

- `healthy_threshold` (Number) Number of successful health checks required in order to set the `HEALTHY` status for the target.
- `http_options` (Block List, Max: 1) Options for HTTP health check. (see [below for nested schema](#nestedblock--attached_target_group--healthcheck--http_options))
- `interval` (Number) The interval between health checks. The default is 2 seconds.
- `tcp_options` (Block List, Max: 1) Options for TCP health check. (see [below for nested schema](#nestedblock--attached_target_group--healthcheck--tcp_options))
- `timeout` (Number) Timeout for a target to return a response for the health check. The default is 1 second.
- `unhealthy_threshold` (Number) Number of failed health checks before changing the status to `UNHEALTHY`. The default is 2.

<a id="nestedblock--attached_target_group--healthcheck--http_options"></a>
### Nested Schema for `attached_target_group.healthcheck.http_options`

Required:

- `port` (Number) Port to use for HTTP health checks.

Optional:

- `path` (String) URL path to set for health checking requests for every target in the target group. For example `/ping`. The default path is `/`.


<a id="nestedblock--attached_target_group--healthcheck--tcp_options"></a>
### Nested Schema for `attached_target_group.healthcheck.tcp_options`

Required:

- `port` (Number) Port to use for TCP health checks.




<a id="nestedblock--listener"></a>
### Nested Schema for `listener`

Required:

- `name` (String) Name of the listener. The name must be unique for each listener on a single load balancer.
- `port` (Number) Port for incoming traffic.

Optional:

- `external_address_spec` (Block Set, Max: 1) External IP address specification. (see [below for nested schema](#nestedblock--listener--external_address_spec))
- `internal_address_spec` (Block Set, Max: 1) Internal IP address specification. (see [below for nested schema](#nestedblock--listener--internal_address_spec))
- `protocol` (String) Protocol for incoming traffic. TCP or UDP and the default is TCP.
- `target_port` (Number) Port of a target. The default is the same as listener's port.

<a id="nestedblock--listener--external_address_spec"></a>
### Nested Schema for `listener.external_address_spec`

Optional:

- `address` (String) External IP address for a listener. IP address will be allocated if it wasn't been set.
- `ip_version` (String) IP version of the external addresses that the load balancer works with. Must be one of `ipv4` or `ipv6`. The default is `ipv4`.


<a id="nestedblock--listener--internal_address_spec"></a>
### Nested Schema for `listener.internal_address_spec`

Required:

- `subnet_id` (String) ID of the subnet to which the internal IP address belongs.

Optional:

- `address` (String) Internal IP address for a listener. Must belong to the subnet that is referenced in subnet_id. IP address will be allocated if it wasn't been set.
- `ip_version` (String) IP version of the external addresses that the load balancer works with. Must be one of `ipv4` or `ipv6`. The default is `ipv4`.



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

The resource can be imported by using their `resource ID`. For getting the resource ID you can use Yandex Cloud [Web Console](https://console.yandex.cloud) or [YC CLI](https://yandex.cloud/docs/cli/quickstart).

```shell
# terraform import yandex_lb_network_load_balancer.<resource Name> <resource Id>
terraform import yandex_lb_network_load_balancer.my_nlb ...
```
