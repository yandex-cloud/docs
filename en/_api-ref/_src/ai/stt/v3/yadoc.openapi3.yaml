openapi: 3.0.0
info:
  title: Yandex Speech To Text Service API
  description: The service does not operate with resources. Actions are performed
    by sending HTTP requests to resource URLs or making RPC calls. For more information
    about Yandex.Cloud API architecture, see [API Concepts](/docs/api-design-guide/).
  version: v3
  x-y-docUri: v3/api-ref
  x-y-baseUrl: https://stt.api.cloud.yandex.net
paths: {}
components:
  schemas:
    Alternative:
      description: recognition of specific time frame
      type: object
      properties:
        words:
          description: words in time frame
          type: array
          items:
            $ref: '#/components/schemas/Word'
        text:
          description: text in time frame
          type: string
        startTimeMs:
          description: start of time frame
          type: string
          format: int64
        endTimeMs:
          description: end of time frame
          type: string
          format: int64
        confidence:
          description: hypothesis confidence. Currently is not used
          type: number
          format: double
    AlternativeUpdate:
      description: update of hypothesis
      type: object
      properties:
        alternatives:
          description: list of hypothesis for timeframes
          type: array
          items:
            $ref: '#/components/schemas/Alternative'
        channelTag:
          description: tag for distinguish audio channels.
          type: string
    AudioChunk:
      description: data chunk with audio
      type: object
      properties:
        data:
          description: bytes with audio data
          type: string
          format: byte
    AudioCursors:
      description: AudioCursors are state of ASR recognition stream
      type: object
      properties:
        receivedDataMs:
          description: amount of audio chunks server received. This cursor is moved
            after each audio chunk was received by server.
          type: string
          format: int64
        resetTimeMs:
          description: input stream reset data
          type: string
          format: int64
        partialTimeMs:
          description: |-
            how much audio was processed. This time includes trimming silences as well. This cursor is moved after server received enough data
             to update recognition results (includes silence as well)
          type: string
          format: int64
        finalTimeMs:
          description: |-
            Time of last final. This cursor is moved when server decides that recognition from start of audio until final_time_ms will not change anymore
             usually this even is followed by EOU detection (but this could change in future)
          type: string
          format: int64
        finalIndex:
          description: This is index of last final server send. Incremented after
            each new final.
          type: string
          format: int64
        eouTimeMs:
          description: |-
            Estimated time of EOU. Cursor is updated after each new EOU is sent
             For external classifier this equals to received_data_ms at the moment EOU event arrives
             For internal classifier this is estimation of time. The time is not exact and has the same guarantees as word timings
          type: string
          format: int64
    AudioFormatOptions:
      description: audio format options
      type: object
      allOf:
      - title: AudioFormat
        type: object
        maxProperties: 1
        properties:
          rawAudio:
            $ref: '#/components/schemas/RawAudio'
            description: audio without container
          containerAudio:
            $ref: '#/components/schemas/ContainerAudio'
            description: audio is wrapped in container
    CodeType:
      type: string
      enum:
      - WORKING
      - WARNING
      - CLOSED
    ContainerAudio:
      description: Audio with fixed type in container. used in AudioFormat options
      type: object
      properties:
        containerAudioType:
          $ref: '#/components/schemas/ContainerAudioContainerAudioType_in_ContainerAudio_containerAudioType'
    ContainerAudioContainerAudioType:
      type: string
      enum:
      - WAV
      - OGG_OPUS
    DefaultEouClassifier:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/DefaultEouClassifierEouSensitivity_in_DefaultEouClassifier_type'
        maxPauseBetweenWordsHintMs:
          description: hint for max pause between words. Our EoU detector could use
            this information to distinguish between end of utterance and slow speech
            (like one <long pause> two <long pause> three, etc)
          type: string
          format: int64
    DefaultEouClassifierEouSensitivity:
      type: string
      enum:
      - DEFAULT
      - HIGH
    Eou:
      description: force EOU, works only with externalEOUClassifier
      type: object
      properties: {}
    EouClassifierOptions:
      type: object
      allOf:
      - title: Classifier
        type: object
        maxProperties: 1
        properties:
          defaultClassifier:
            $ref: '#/components/schemas/DefaultEouClassifier'
            description: EOU classifier provided by SpeechKit. Default
          externalClassifier:
            $ref: '#/components/schemas/ExternalEouClassifier'
            description: EoU is enforced by external messages from user
    EouUpdate:
      description: Update information from
      type: object
      properties:
        timeMs:
          description: end of utterance estimated time
          type: string
          format: int64
    ExternalEouClassifier:
      description: use EOU provided by user
      type: object
      properties: {}
    FinalRefinement:
      description: refinement for final hypo. For example, text normalization is refinement.
      type: object
      allOf:
      - type: object
        properties:
          finalIndex:
            description: index of final for which server sends additional information
            type: string
            format: int64
      - title: Type
        type: object
        maxProperties: 1
        properties:
          normalizedText:
            $ref: '#/components/schemas/AlternativeUpdate'
            description: normalized text instead of raw one
    RawAudio:
      description: RAW Audio format spec (no container to infer type). used in AudioFormat
        options
      type: object
      properties:
        audioEncoding:
          $ref: '#/components/schemas/RawAudioAudioEncoding_in_RawAudio_audioEncoding'
        sampleRateHertz:
          description: PCM sample rate
          type: string
          format: int64
        audioChannelCount:
          description: PCM channel count. Currently only single channel audio is supported
            in real-time recognition
          type: string
          format: int64
    RawAudioAudioEncoding:
      type: string
      enum:
      - LINEAR16_PCM
    RecognitionModelOptions:
      type: object
      properties:
        model:
          description: model name
          type: string
        audioFormat:
          $ref: '#/components/schemas/AudioFormatOptions_in_RecognitionModelOptions_audioFormat'
        textNormalization:
          $ref: '#/components/schemas/TextNormalizationOptions_in_RecognitionModelOptions_textNormalization'
    SessionUuid:
      description: session identifier
      type: object
      properties:
        uuid:
          description: internal session identifier
          type: string
        userRequestId:
          description: user session identifier
          type: string
    SilenceChunk:
      type: object
      properties:
        durationMs:
          description: duration of silence chunk in ms
          type: string
          format: int64
    StatusCode:
      description: status message
      type: object
      properties:
        codeType:
          $ref: '#/components/schemas/CodeType_in_StatusCode_codeType'
        message:
          description: human readable message
          type: string
    StreamingOptions:
      type: object
      properties:
        recognitionModel:
          $ref: '#/components/schemas/RecognitionModelOptions_in_StreamingOptions_recognitionModel'
        eouClassifier:
          $ref: '#/components/schemas/EouClassifierOptions_in_StreamingOptions_eouClassifier'
    StreamingResponse:
      description: |-
        responses from server
        each response contains session uuid
        AudioCursors
        plus specific even
      type: object
      allOf:
      - type: object
        properties:
          sessionUuid:
            $ref: '#/components/schemas/SessionUuid'
            description: session identifier
          audioCursors:
            $ref: '#/components/schemas/AudioCursors'
            description: 'progress bar for stream session recognition: how many data
              we obtained; final and partial times; etc'
          responseWallTimeMs:
            description: wall clock on server side. This is time when server wrote
              results to stream
            type: string
            format: int64
      - title: Event
        type: object
        maxProperties: 1
        properties:
          partial:
            $ref: '#/components/schemas/AlternativeUpdate'
            description: |-
              partial results, server will send them regularly after enough audio data was received from user. This are current text estimation
                 from final_time_ms to partial_time_ms. Could change after new data will arrive
          final:
            $ref: '#/components/schemas/AlternativeUpdate'
            description: final results, the recognition is now fixed until final_time_ms.
              For now, final is sent only if the EOU event was triggered. This could
              be change in future releases
          eouUpdate:
            $ref: '#/components/schemas/EouUpdate'
            description: |-
              After EOU classifier, send the message with final, send the EouUpdate with time of EOU
               before eou_update we send final with the same time. there could be several finals before eou update
          finalRefinement:
            $ref: '#/components/schemas/FinalRefinement'
            description: |-
              For each final, if normalization is enabled, sent the normalized text (or some other advanced post-processing).
                 Final normalization will introduce additional latency
          statusCode:
            $ref: '#/components/schemas/StatusCode'
            description: Status messages, send by server with fixed interval (keep-alive)
    TextNormalizationOptions:
      description: options
      type: object
      properties:
        textNormalization:
          $ref: '#/components/schemas/TextNormalizationOptionsTextNormalization_in_TextNormalizationOptions_textNormalization'
        profanityFilter:
          description: Profanity filter
          type: boolean
          format: boolean
    TextNormalizationOptionsTextNormalization:
      description: |-
        Normalization

         - TEXT_NORMALIZATION_ENABLED: Enable normalization
         - TEXT_NORMALIZATION_DISABLED: Disable normalization
      type: string
      enum:
      - TEXT_NORMALIZATION_ENABLED
      - TEXT_NORMALIZATION_DISABLED
    Word:
      description: recognized word
      type: object
      properties:
        text:
          description: word text
          type: string
        startTimeMs:
          description: estimation of word start time in ms
          type: string
          format: int64
        endTimeMs:
          description: estimation of word end time in ms
          type: string
          format: int64
    ContainerAudioContainerAudioType_in_ContainerAudio_containerAudioType:
      description: type of audio container
      type: string
      enum:
      - WAV
      - OGG_OPUS
    DefaultEouClassifierEouSensitivity_in_DefaultEouClassifier_type:
      description: EOU sensitivity.  Currently two levels, faster with more error
        and more conservative (our default)
      type: string
      enum:
      - DEFAULT
      - HIGH
    RawAudioAudioEncoding_in_RawAudio_audioEncoding:
      description: type of audio encoding
      type: string
      enum:
      - LINEAR16_PCM
    AudioFormatOptions_in_RecognitionModelOptions_audioFormat:
      description: |-
        config for input audio

        audio format options
      type: object
      allOf:
      - title: AudioFormat
        type: object
        maxProperties: 1
        properties:
          rawAudio:
            $ref: '#/components/schemas/RawAudio'
            description: audio without container
          containerAudio:
            $ref: '#/components/schemas/ContainerAudio'
            description: audio is wrapped in container
    TextNormalizationOptions_in_RecognitionModelOptions_textNormalization:
      description: |-
        text normalization options

        options
      type: object
      properties:
        textNormalization:
          $ref: '#/components/schemas/TextNormalizationOptionsTextNormalization_in_TextNormalizationOptions_textNormalization'
        profanityFilter:
          description: Profanity filter
          type: boolean
          format: boolean
    CodeType_in_StatusCode_codeType:
      description: code type
      type: string
      enum:
      - WORKING
      - WARNING
      - CLOSED
    RecognitionModelOptions_in_StreamingOptions_recognitionModel:
      description: configuration for speech recognition model
      type: object
      properties:
        model:
          description: model name
          type: string
        audioFormat:
          $ref: '#/components/schemas/AudioFormatOptions_in_RecognitionModelOptions_audioFormat'
        textNormalization:
          $ref: '#/components/schemas/TextNormalizationOptions_in_RecognitionModelOptions_textNormalization'
    EouClassifierOptions_in_StreamingOptions_eouClassifier:
      description: configuration for end of utterance detection model
      type: object
      allOf:
      - title: Classifier
        type: object
        maxProperties: 1
        properties:
          defaultClassifier:
            $ref: '#/components/schemas/DefaultEouClassifier'
            description: EOU classifier provided by SpeechKit. Default
          externalClassifier:
            $ref: '#/components/schemas/ExternalEouClassifier'
            description: EoU is enforced by external messages from user
    TextNormalizationOptionsTextNormalization_in_TextNormalizationOptions_textNormalization:
      description: |-
        Normalization

         - TEXT_NORMALIZATION_ENABLED: Enable normalization
         - TEXT_NORMALIZATION_DISABLED: Disable normalization
      type: string
      enum:
      - TEXT_NORMALIZATION_ENABLED
      - TEXT_NORMALIZATION_DISABLED
tags:
- name: Recognizer
  description: A set of methods for voice recognition.
