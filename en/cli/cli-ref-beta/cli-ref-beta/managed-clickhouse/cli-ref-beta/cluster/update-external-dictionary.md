---
editable: false
noIndex: true
sourcePath: en/_cli-ref-beta/cli-ref-beta/managed-clickhouse/cli-ref-beta/cluster/update-external-dictionary.md
---

# yc beta managed-clickhouse cluster update-external-dictionary

Updates an external dictionary for the specified ClickHouse cluster.

#### Command Usage

Syntax: 

`yc beta managed-clickhouse cluster update-external-dictionary <CLUSTER-ID>`

#### Flags

| Flag | Description |
|----|----|
|`--cluster-id`|<b>`string`</b><br/>ID of the ClickHouse cluster to update the external dictionary for.<br/>To get the cluster ID, use a [List] request.|
|`--external-dictionary`|<b>`shorthand/json`</b><br/>Configuration of the external dictionary.<br/><br/>Example:|
|`--external-dictionary`|<b>`layout={access-to-key-from-attributes=true,`</b><br/>allow-read-expired-keys=true, initial-array-size=1, max-array-size=1, max-threads-for-updates=1, max-update-queue-size=1, query-wait-timeout-milliseconds=1, size-in-cells=1, type=FLAT, update-queue-push-timeout-milliseconds=1}, lifetime={fixed-lifetime=1}, name=value, source={clickhouse-source={db=value, host=value, password=value, port=1, secure=true, table=value, user=value, where=value}}, structure={attributes=[{expression=value, hierarchical=true, injective=true, name=value, null-value=value, type=value}], id={name=value}, key={attributes=[{expression=value, hierarchical=true, injective=true, name=value, null-value=value, type=value}]}, range-max={expression=value, hierarchical=true, injective=true, name=value, null-value=value, type=value}, range-min={expression=value, hierarchical=true, injective=true, name=value, null-value=value, type=value}}<br/><br/>Shorthand Syntax:<br/>{layout={access-to-key-from-attributes=bool, allow-read-expired-keys=bool, initial-array-size=int, max-array-size=int, max-threads-for-updates=int, max-update-queue-size=int, query-wait-timeout-milliseconds=int, size-in-cells=int, type=FLAT\|HASHED\|COMPLEX_KEY_HASHED\|RANGE_HASHED\|CACHE\|COMPLEX_KEY_CACHE\|SPARSE_HASHED\|COMPLEX_KEY_SPARSE_HASHED\|COMPLEX_KEY_RANGE_HASHED\|DIRECT\|COMPLEX_KEY_DIRECT\|IP_TRIE, update-queue-push-timeout-milliseconds=int}, lifetime={fixed-lifetime=int \| lifetime-range={max=int, min=int}}, name=str, source={clickhouse-source={db=str, host=str, password=str, port=int, secure=bool, table=str, user=str, where=str} \| http-source={format=str, headers=[{name=str, value=str},...], url=str} \| mongodb-source={collection=str, db=str, host=str, options=str, password=str, port=int, user=str} \| mysql-source={close-connection=bool, db=str, invalidate-query=str, password=str, port=int, replicas=[{host=str, password=str, port=int, priority=int, user=str},...], share-connection=bool, table=str, user=str, where=str} \| postgresql-source={db=str, hosts=str,..., invalidate-query=str, password=str, port=int, ssl-mode=DISABLE\|ALLOW\|PREFER\|VERIFY_CA\|VERIFY_FULL, table=str, user=str}}, structure={attributes=[{expression=str, hierarchical=bool, injective=bool, name=str, null-value=str, type=str},...], id={name=str}, key={attributes=[{expression=str, hierarchical=bool, injective=bool, name=str, null-value=str, type=str},...]}, range-max={expression=str, hierarchical=bool, injective=bool, name=str, null-value=str, type=str}, range-min={expression=str, hierarchical=bool, injective=bool, name=str, null-value=str, type=str}}}<br/>Fields:<br/>layout     struct                                                                              required  — Layout determining how to store the dictionary in memory.<br/><br/>For details, see https://clickhouse.com/docs/sql-reference/dictionaries#ways-to-store-dictionaries-in-memory.<br/>access-to-key-from-attributes           bool                                                                                                                                                                                    — Allows to retrieve key attribute using **dictGetString** function.<br/>Enabling this option increases memory usage.<br/>Applicable only for **IP_TRIE** layout type.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#ip_trie).<br/>allow-read-expired-keys                 bool                                                                                                                                                                                    — Allows to read expired keys.<br/>Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types.<br/><br/>Default value: **false**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#cache).<br/>initial-array-size                      int                                                                                                                                                                                     — Initial dictionary key size.<br/>Applicable only for **FLAT** layout type.<br/><br/>Default value: **1024**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#flat).<br/>max-array-size                          int                                                                                                                                                                                     — Maximum dictionary key size.<br/>Applicable only for **FLAT** layout type.<br/><br/>Default value: **500000**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#flat).<br/>max-threads-for-updates                 int                                                                                                                                                                                     — Max threads for cache dictionary update.<br/>Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types.<br/><br/>Default value: **4**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#cache).<br/>max-update-queue-size                   int                                                                                                                                                                                     — Max size of update queue.<br/>Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types.<br/><br/>Default value: **100000**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#cache).<br/>query-wait-timeout-milliseconds         int                                                                                                                                                                                     — Max wait timeout in milliseconds for update task to complete.<br/>Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types.<br/><br/>Default value: **60000** (1 minute).<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#cache).<br/>size-in-cells                           int                                                                                                                                                                                     — Number of cells in the cache. Rounded up to a power of two.<br/>Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types.<br/><br/>Default value: **1000000000**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#cache).<br/>type                                    enum<CACHE\|COMPLEX_KEY_CACHE\|COMPLEX_KEY_DIRECT\|COMPLEX_KEY_HASHED\|COMPLEX_KEY_RANGE_HASHED\|COMPLEX_KEY_SPARSE_HASHED\|DIRECT\|FLAT\|HASHED\|IP_TRIE\|RANGE_HASHED\|SPARSE_HASHED>  required  — Layout type.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#ways-to-store-dictionaries-in-memory).<br/>update-queue-push-timeout-milliseconds  int                                                                                                                                                                                     — Max timeout in milliseconds for push update task into queue.<br/>Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types.<br/><br/>Default value: **10**.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/sql-reference/dictionaries#cache).<br/>name       string                                                                              required  — Name of the external dictionary.<br/>structure  struct                                                                              required  — Structure of the external dictionary.<br/>attributes  []struct  — Description of the fields available for database queries.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/en/query_language/dicts/external_dicts_dict_structure/#attributes).<br/>expression    string            — Expression, describing the attribute, if applicable.<br/>hierarchical  bool              — Indication of hierarchy support.<br/><br/>Default value: **false**.<br/>injective     bool              — Indication of injective mapping "id -> attribute".<br/><br/>Default value: **false**.<br/>name          string  required  — Name of the column.<br/>null-value    string            — Default value for an element without data (for example, an empty string).<br/>type          string  required  — Type of the column.<br/>id          struct    — Single numeric key column for the dictionary.<br/>name  string  required  — Name of the numeric key.<br/>key         struct    — Composite key for the dictionary, containing of one or more key columns.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/en/query_language/dicts/external_dicts_dict_structure/#composite-key).<br/>attributes  []struct  — Attributes of a complex key.<br/>expression    string            — Expression, describing the attribute, if applicable.<br/>hierarchical  bool              — Indication of hierarchy support.<br/><br/>Default value: **false**.<br/>injective     bool              — Indication of injective mapping "id -> attribute".<br/><br/>Default value: **false**.<br/>name          string  required  — Name of the column.<br/>null-value    string            — Default value for an element without data (for example, an empty string).<br/>type          string  required  — Type of the column.<br/>range-max   struct    — Field holding the end of the range for dictionaries with **RANGE_HASHED** layout.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/en/query_language/dicts/external_dicts_dict_layout/#range-hashed).<br/>expression    string            — Expression, describing the attribute, if applicable.<br/>hierarchical  bool              — Indication of hierarchy support.<br/><br/>Default value: **false**.<br/>injective     bool              — Indication of injective mapping "id -> attribute".<br/><br/>Default value: **false**.<br/>name          string  required  — Name of the column.<br/>null-value    string            — Default value for an element without data (for example, an empty string).<br/>type          string  required  — Type of the column.<br/>range-min   struct    — Field holding the beginning of the range for dictionaries with **RANGE_HASHED** layout.<br/><br/>For details, see [ClickHouse documentation](https://clickhouse.com/docs/en/query_language/dicts/external_dicts_dict_layout/#range-hashed).<br/>expression    string            — Expression, describing the attribute, if applicable.<br/>hierarchical  bool              — Indication of hierarchy support.<br/><br/>Default value: **false**.<br/>injective     bool              — Indication of injective mapping "id -> attribute".<br/><br/>Default value: **false**.<br/>name          string  required  — Name of the column.<br/>null-value    string            — Default value for an element without data (for example, an empty string).<br/>type          string  required  — Type of the column.<br/>lifetime   oneof<fixed-lifetime\|lifetime-range>                                                          — Oneof lifetime field<br/>fixed-lifetime  int     — Fixed interval between dictionary updates.<br/>lifetime-range  struct  — Range of intervals between dictionary updates for ClickHouse to choose from.<br/>max  int  — Maximum dictionary lifetime.<br/>min  int  — Minimum dictionary lifetime.<br/>source     oneof<clickhouse-source\|http-source\|mongodb-source\|mysql-source\|postgresql-source>            — Oneof source field<br/>http-source        struct  — HTTP source for the dictionary.<br/>format   string    required  — The data format. Valid values are all formats [supported by ClickHouse SQL dialect](https://clickhouse.com/docs/en/interfaces/formats/).<br/>headers  []struct            — HTTP headers.<br/>name   string  required  — Header name.<br/>value  string  required  — Header value.<br/>url      string    required  — URL of the source dictionary available over HTTP.<br/>mysql-source       struct  — MySQL source for the dictionary.<br/>close-connection  bool                — Should a connection be closed after each request.<br/>db                string    required  — Database name.<br/>invalidate-query  string              — Query for checking the dictionary status, to pull only updated data.<br/>password          string              — Password of the user for replicas of the dictionary source.<br/>port              int                 — Port to use when connecting to a replica of the dictionary source.<br/>replicas          []struct            — List of MySQL replicas of the database used as dictionary source.<br/>host      string  required  — MySQL host of the replica.<br/>password  string            — Password of the MySQL database user.<br/>If a password is not specified for a replica, ClickHouse uses the password specified for the source.<br/>port      int               — Port to use when connecting to the replica.<br/>If a port is not specified for a replica, ClickHouse uses the port specified for the source.<br/>priority  int               — The priority of the replica that ClickHouse takes into account when connecting.<br/>Replica with the highest priority should have this field set to the lowest number.<br/>user      string            — Name of the MySQL database user.<br/>If a user is not specified for a replica, ClickHouse uses the user specified for the source.<br/>share-connection  bool                — Should a connection be shared for some requests.<br/>table             string    required  — Table name.<br/>user              string    required  — Name of the user for replicas of the dictionary source.<br/>where             string              — Selection criteria for the data in the specified MySQL table.<br/>clickhouse-source  struct  — ClickHouse source for the dictionary.<br/>db        string  required  — Database name.<br/>host      string            — ClickHouse host.<br/>password  string            — Password of the ClickHouse database user.<br/>port      int               — Port to use when connecting to the host.<br/>secure    bool              — Determines whether to use TLS for connection.<br/>table     string  required  — Table name.<br/>user      string  required  — Name of the ClickHouse database user.<br/>where     string            — Selection criteria for the data in the specified ClickHouse table.<br/>mongodb-source     struct  — MongoDB source for the dictionary.<br/>collection  string  required  — Collection name.<br/>db          string  required  — Database name.<br/>host        string  required  — MongoDB host.<br/>options     string            — Dictionary source options.<br/>password    string            — Password of the MongoDB database user.<br/>port        int               — Port to use when connecting to the host.<br/>user        string  required  — Name of the MongoDB database user.<br/>postgresql-source  struct  — PostgreSQL source for the dictionary.<br/>db                string                                            required  — Database name.<br/>hosts             []string                                                    — PostgreSQL hosts.<br/>invalidate-query  string                                                      — Query for checking the dictionary status, to pull only updated data.<br/>password          string                                                      — Password of the PostrgreSQL database user.<br/>port              int                                                         — Port to use when connecting to the PostgreSQL hosts.<br/>ssl-mode          enum<ALLOW\|DISABLE\|PREFER\|VERIFY_CA\|VERIFY_FULL>            — Mode of SSL TCP/IP connection to the PostgreSQL host.<br/>table             string                                            required  — Table name.<br/>user              string                                            required  — Name of the PostrgreSQL database user.<br/>|
|`--async`|Display information about the operation in progress, without waiting for the operation to complete.|

#### Global Flags

| Flag | Description |
|----|----|
|`--profile`|<b>`string`</b><br/>Set the custom profile.|
|`--region`|<b>`string`</b><br/>Set the region.|
|`--debug`|Debug logging.|
|`--debug-grpc`|Debug gRPC logging. Very verbose, used for debugging connection problems.|
|`--no-user-output`|Disable printing user intended output to stderr.|
|`--pager`|<b>`string`</b><br/>Set the custom pager.|
|`--format`|<b>`string`</b><br/>Set the output format: text, yaml, json, table, json-rest.|
|`--retry`|<b>`int`</b><br/>Enable gRPC retries. By default, retries are enabled with maximum 5 attempts.<br/>Pass 0 to disable retries. Pass any negative value for infinite retries.<br/>Even infinite retries are capped with 2 minutes timeout.|
|`--timeout`|<b>`string`</b><br/>Set the timeout.|
|`--token`|<b>`string`</b><br/>Set the IAM token to use.|
|`--impersonate-service-account-id`|<b>`string`</b><br/>Set the ID of the service account to impersonate.|
|`--no-browser`|Disable opening browser for authentication.|
|`--query`|<b>`string`</b><br/>Query to select values from the response using jq syntax|
|`-h`,`--help`|Display help for the command.|
