---
editable: false
noIndex: true
sourcePath: en/_cli-ref-beta/cli-ref-beta/managed-clickhouse/cli-ref-beta/cluster/create-external-dictionary.md
---

# yc beta managed-clickhouse cluster create-external-dictionary

Creates an external dictionary for the specified ClickHouse cluster.

#### Command Usage

Syntax: 

`yc beta managed-clickhouse cluster create-external-dictionary <CLUSTER-ID>`

#### Flags

| Flag | Description |
|----|----|
|`-r`,`--request-file`|<b>`string`</b><br/>Path to a request file.|
|`--example-json`|Generates a JSON template of the request.<br/>The template can be customized and used as input for the command.<br/>Usage example:<br/><br/>1. Generate template: yc beta compute instance create --example-json > request.json<br/>2. Edit the template: vim request.json<br/>3. Run with template: yc beta compute instance create -r request.json|
|`--example-yaml`|Generates a YAML template of the request.<br/>The template can be customized and used as input for the command.<br/>Usage example:<br/><br/>1. Generate template: yc beta compute instance create --example-yaml > request.yaml<br/>2. Edit the template: vim request.yaml<br/>3. Run with template: yc beta compute instance create -r request.yaml|
|`--cluster-id`|<b>`string`</b><br/>ID of the ClickHouse cluster to create the external dictionary for. To get the cluster ID, use a [ClusterService.List] request.|
|`--external-dictionary`|<b>`shorthand/json`</b><br/>Configuration of the external dictionary.<br/>Shorthand Syntax:<br/>{<br/>layout = {<br/>access-to-key-from-attributes = bool,<br/>allow-read-expired-keys = bool,<br/>initial-array-size = int,<br/>max-array-size = int,<br/>max-threads-for-updates = int,<br/>max-update-queue-size = int,<br/>query-wait-timeout-milliseconds = int,<br/>size-in-cells = int,<br/>type = FLAT\|HASHED\|COMPLEX_KEY_HASHED\|RANGE_HASHED\|CACHE\|COMPLEX_KEY_CACHE\|SPARSE_HASHED\|COMPLEX_KEY_SPARSE_HASHED\|COMPLEX_KEY_RANGE_HASHED\|DIRECT\|COMPLEX_KEY_DIRECT\|IP_TRIE,<br/>update-queue-push-timeout-milliseconds = int<br/>},<br/>lifetime = fixed-lifetime=int \| lifetime-range={<br/>max = int,<br/>min = int<br/>},<br/>name = str,<br/>source = clickhouse-source={<br/>db = str,<br/>host = str,<br/>password = str,<br/>port = int,<br/>secure = bool,<br/>table = str,<br/>user = str,<br/>where = str<br/>} \| http-source={<br/>format = str,<br/>headers = [<br/>{<br/>name = str,<br/>value = str<br/>}, ...<br/>],<br/>url = str<br/>} \| mongodb-source={<br/>collection = str,<br/>db = str,<br/>host = str,<br/>options = str,<br/>password = str,<br/>port = int,<br/>user = str<br/>} \| mysql-source={<br/>close-connection = bool,<br/>db = str,<br/>invalidate-query = str,<br/>password = str,<br/>port = int,<br/>replicas = [<br/>{<br/>host = str,<br/>password = str,<br/>port = int,<br/>priority = int,<br/>user = str<br/>}, ...<br/>],<br/>share-connection = bool,<br/>table = str,<br/>user = str,<br/>where = str<br/>} \| postgresql-source={<br/>db = str,<br/>hosts = str,...,<br/>invalidate-query = str,<br/>password = str,<br/>port = int,<br/>ssl-mode = DISABLE\|ALLOW\|PREFER\|VERIFY_CA\|VERIFY_FULL,<br/>table = str,<br/>user = str<br/>},<br/>structure = {<br/>attributes = [<br/>{<br/>expression = str,<br/>hierarchical = bool,<br/>injective = bool,<br/>name = str,<br/>null-value = str,<br/>type = str<br/>}, ...<br/>],<br/>id = {<br/>name = str<br/>},<br/>key = {<br/>attributes = [<br/>{<br/>expression = str,<br/>hierarchical = bool,<br/>injective = bool,<br/>name = str,<br/>null-value = str,<br/>type = str<br/>}, ...<br/>]<br/>},<br/>range-max = {<br/>expression = str,<br/>hierarchical = bool,<br/>injective = bool,<br/>name = str,<br/>null-value = str,<br/>type = str<br/>},<br/>range-min = {<br/>expression = str,<br/>hierarchical = bool,<br/>injective = bool,<br/>name = str,<br/>null-value = str,<br/>type = str<br/>}<br/>}<br/>}<br/>JSON Syntax:<br/>"{<br/>"layout": {<br/>"access-to-key-from-attributes": "bool",<br/>"allow-read-expired-keys": "bool",<br/>"initial-array-size": "int",<br/>"max-array-size": "int",<br/>"max-threads-for-updates": "int",<br/>"max-update-queue-size": "int",<br/>"query-wait-timeout-milliseconds": "int",<br/>"size-in-cells": "int",<br/>"type": "FLAT\|HASHED\|COMPLEX_KEY_HASHED\|RANGE_HASHED\|CACHE\|COMPLEX_KEY_CACHE\|SPARSE_HASHED\|COMPLEX_KEY_SPARSE_HASHED\|COMPLEX_KEY_RANGE_HASHED\|DIRECT\|COMPLEX_KEY_DIRECT\|IP_TRIE",<br/>"update-queue-push-timeout-milliseconds": "int"<br/>},<br/>"lifetime": {<br/>"fixed-lifetime": "int",<br/>"lifetime-range": {<br/>"max": "int",<br/>"min": "int"<br/>}<br/>},<br/>"name": "str",<br/>"source": {<br/>"clickhouse-source": {<br/>"db": "str",<br/>"host": "str",<br/>"password": "str",<br/>"port": "int",<br/>"secure": "bool",<br/>"table": "str",<br/>"user": "str",<br/>"where": "str"<br/>},<br/>"http-source": {<br/>"format": "str",<br/>"headers": [<br/>{<br/>"name": "str",<br/>"value": "str"<br/>}, ...<br/>],<br/>"url": "str"<br/>},<br/>"mongodb-source": {<br/>"collection": "str",<br/>"db": "str",<br/>"host": "str",<br/>"options": "str",<br/>"password": "str",<br/>"port": "int",<br/>"user": "str"<br/>},<br/>"mysql-source": {<br/>"close-connection": "bool",<br/>"db": "str",<br/>"invalidate-query": "str",<br/>"password": "str",<br/>"port": "int",<br/>"replicas": [<br/>{<br/>"host": "str",<br/>"password": "str",<br/>"port": "int",<br/>"priority": "int",<br/>"user": "str"<br/>}, ...<br/>],<br/>"share-connection": "bool",<br/>"table": "str",<br/>"user": "str",<br/>"where": "str"<br/>},<br/>"postgresql-source": {<br/>"db": "str",<br/>"hosts": [<br/>"str", ...<br/>],<br/>"invalidate-query": "str",<br/>"password": "str",<br/>"port": "int",<br/>"ssl-mode": "DISABLE\|ALLOW\|PREFER\|VERIFY_CA\|VERIFY_FULL",<br/>"table": "str",<br/>"user": "str"<br/>}<br/>},<br/>"structure": {<br/>"attributes": [<br/>{<br/>"expression": "str",<br/>"hierarchical": "bool",<br/>"injective": "bool",<br/>"name": "str",<br/>"null-value": "str",<br/>"type": "str"<br/>}, ...<br/>],<br/>"id": {<br/>"name": "str"<br/>},<br/>"key": {<br/>"attributes": [<br/>{<br/>"expression": "str",<br/>"hierarchical": "bool",<br/>"injective": "bool",<br/>"name": "str",<br/>"null-value": "str",<br/>"type": "str"<br/>}, ...<br/>]<br/>},<br/>"range-max": {<br/>"expression": "str",<br/>"hierarchical": "bool",<br/>"injective": "bool",<br/>"name": "str",<br/>"null-value": "str",<br/>"type": "str"<br/>},<br/>"range-min": {<br/>"expression": "str",<br/>"hierarchical": "bool",<br/>"injective": "bool",<br/>"name": "str",<br/>"null-value": "str",<br/>"type": "str"<br/>}<br/>}<br/>}"<br/>Fields:<br/>layout -> (struct)<br/>Layout determining how to store the dictionary in memory. For details, see https://clickhouse.com/docs/sql-reference/dictionaries#ways-to-store-dictionaries-in-memory.<br/>access-to-key-from-attributes -> (bool)<br/>Allows to retrieve key attribute using **dictGetString** function. Enabling this option increases memory usage. Applicable only for **IP_TRIE** layout type. For details, see ClickHouse documentation.<br/>allow-read-expired-keys -> (bool)<br/>Allows to read expired keys. Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types. Default value: **false**. For details, see ClickHouse documentation.<br/>initial-array-size -> (int)<br/>Initial dictionary key size. Applicable only for **FLAT** layout type. Default value: **1024**. For details, see ClickHouse documentation.<br/>max-array-size -> (int)<br/>Maximum dictionary key size. Applicable only for **FLAT** layout type. Default value: **500000**. For details, see ClickHouse documentation.<br/>max-threads-for-updates -> (int)<br/>Max threads for cache dictionary update. Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types. Default value: **4**. For details, see ClickHouse documentation.<br/>max-update-queue-size -> (int)<br/>Max size of update queue. Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types. Default value: **100000**. For details, see ClickHouse documentation.<br/>query-wait-timeout-milliseconds -> (int)<br/>Max wait timeout in milliseconds for update task to complete. Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types. Default value: **60000** (1 minute). For details, see ClickHouse documentation.<br/>size-in-cells -> (int)<br/>Number of cells in the cache. Rounded up to a power of two. Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types. Default value: **1000000000**. For details, see ClickHouse documentation.<br/>type -> (enum<CACHE\|COMPLEX_KEY_CACHE\|COMPLEX_KEY_DIRECT\|COMPLEX_KEY_HASHED\|COMPLEX_KEY_RANGE_HASHED\|COMPLEX_KEY_SPARSE_HASHED\|DIRECT\|FLAT\|HASHED\|IP_TRIE\|RANGE_HASHED\|SPARSE_HASHED>)<br/>Layout type. For details, see ClickHouse documentation.<br/>update-queue-push-timeout-milliseconds -> (int)<br/>Max timeout in milliseconds for push update task into queue. Applicable only for **CACHE** and **COMPLEX_KEY_CACHE** layout types. Default value: **10**. For details, see ClickHouse documentation.<br/>name -> (string)<br/>Name of the external dictionary.<br/>structure -> (struct)<br/>Structure of the external dictionary.<br/>attributes -> ([]struct)<br/>Description of the fields available for database queries. For details, see ClickHouse documentation.<br/>expression -> (string)<br/>Expression, describing the attribute, if applicable.<br/>hierarchical -> (bool)<br/>Indication of hierarchy support. Default value: **false**.<br/>injective -> (bool)<br/>Indication of injective mapping "id -> attribute". Default value: **false**.<br/>name -> (string)<br/>Name of the column.<br/>null-value -> (string)<br/>Default value for an element without data (for example, an empty string).<br/>type -> (string)<br/>Type of the column.<br/>id -> (struct)<br/>Single numeric key column for the dictionary.<br/>name -> (string)<br/>Name of the numeric key.<br/>key -> (struct)<br/>Composite key for the dictionary, containing of one or more key columns. For details, see ClickHouse documentation.<br/>attributes -> ([]struct)<br/>Attributes of a complex key.<br/>expression -> (string)<br/>Expression, describing the attribute, if applicable.<br/>hierarchical -> (bool)<br/>Indication of hierarchy support. Default value: **false**.<br/>injective -> (bool)<br/>Indication of injective mapping "id -> attribute". Default value: **false**.<br/>name -> (string)<br/>Name of the column.<br/>null-value -> (string)<br/>Default value for an element without data (for example, an empty string).<br/>type -> (string)<br/>Type of the column.<br/>range-max -> (struct)<br/>Field holding the end of the range for dictionaries with **RANGE_HASHED** layout. For details, see ClickHouse documentation.<br/>expression -> (string)<br/>Expression, describing the attribute, if applicable.<br/>hierarchical -> (bool)<br/>Indication of hierarchy support. Default value: **false**.<br/>injective -> (bool)<br/>Indication of injective mapping "id -> attribute". Default value: **false**.<br/>name -> (string)<br/>Name of the column.<br/>null-value -> (string)<br/>Default value for an element without data (for example, an empty string).<br/>type -> (string)<br/>Type of the column.<br/>range-min -> (struct)<br/>Field holding the beginning of the range for dictionaries with **RANGE_HASHED** layout. For details, see ClickHouse documentation.<br/>expression -> (string)<br/>Expression, describing the attribute, if applicable.<br/>hierarchical -> (bool)<br/>Indication of hierarchy support. Default value: **false**.<br/>injective -> (bool)<br/>Indication of injective mapping "id -> attribute". Default value: **false**.<br/>name -> (string)<br/>Name of the column.<br/>null-value -> (string)<br/>Default value for an element without data (for example, an empty string).<br/>type -> (string)<br/>Type of the column.<br/>lifetime -> (oneof<fixed-lifetime\|lifetime-range>)<br/>Oneof lifetime field<br/>fixed-lifetime -> (int)<br/>Fixed interval between dictionary updates.<br/>lifetime-range -> (struct)<br/>Range of intervals between dictionary updates for ClickHouse to choose from.<br/>max -> (int)<br/>Maximum dictionary lifetime.<br/>min -> (int)<br/>Minimum dictionary lifetime.<br/>source -> (oneof<clickhouse-source\|http-source\|mongodb-source\|mysql-source\|postgresql-source>)<br/>Oneof source field<br/>http-source -> (struct)<br/>HTTP source for the dictionary.<br/>format -> (string)<br/>The data format. Valid values are all formats supported by ClickHouse SQL dialect.<br/>headers -> ([]struct)<br/>HTTP headers.<br/>name -> (string)<br/>Header name.<br/>value -> (string)<br/>Header value.<br/>url -> (string)<br/>URL of the source dictionary available over HTTP.<br/>mysql-source -> (struct)<br/>MySQL source for the dictionary.<br/>close-connection -> (bool)<br/>Should a connection be closed after each request.<br/>db -> (string)<br/>Database name.<br/>invalidate-query -> (string)<br/>Query for checking the dictionary status, to pull only updated data.<br/>password -> (string)<br/>Password of the user for replicas of the dictionary source.<br/>port -> (int)<br/>Port to use when connecting to a replica of the dictionary source.<br/>replicas -> ([]struct)<br/>List of MySQL replicas of the database used as dictionary source.<br/>host -> (string)<br/>MySQL host of the replica.<br/>password -> (string)<br/>Password of the MySQL database user. If a password is not specified for a replica, ClickHouse uses the password specified for the source.<br/>port -> (int)<br/>Port to use when connecting to the replica. If a port is not specified for a replica, ClickHouse uses the port specified for the source.<br/>priority -> (int)<br/>The priority of the replica that ClickHouse takes into account when connecting. Replica with the highest priority should have this field set to the lowest number.<br/>user -> (string)<br/>Name of the MySQL database user. If a user is not specified for a replica, ClickHouse uses the user specified for the source.<br/>share-connection -> (bool)<br/>Should a connection be shared for some requests.<br/>table -> (string)<br/>Table name.<br/>user -> (string)<br/>Name of the user for replicas of the dictionary source.<br/>where -> (string)<br/>Selection criteria for the data in the specified MySQL table.<br/>clickhouse-source -> (struct)<br/>ClickHouse source for the dictionary.<br/>db -> (string)<br/>Database name.<br/>host -> (string)<br/>ClickHouse host.<br/>password -> (string)<br/>Password of the ClickHouse database user.<br/>port -> (int)<br/>Port to use when connecting to the host.<br/>secure -> (bool)<br/>Determines whether to use TLS for connection.<br/>table -> (string)<br/>Table name.<br/>user -> (string)<br/>Name of the ClickHouse database user.<br/>where -> (string)<br/>Selection criteria for the data in the specified ClickHouse table.<br/>mongodb-source -> (struct)<br/>MongoDB source for the dictionary.<br/>collection -> (string)<br/>Collection name.<br/>db -> (string)<br/>Database name.<br/>host -> (string)<br/>MongoDB host.<br/>options -> (string)<br/>Dictionary source options.<br/>password -> (string)<br/>Password of the MongoDB database user.<br/>port -> (int)<br/>Port to use when connecting to the host.<br/>user -> (string)<br/>Name of the MongoDB database user.<br/>postgresql-source -> (struct)<br/>PostgreSQL source for the dictionary.<br/>db -> (string)<br/>Database name.<br/>hosts -> ([]string)<br/>PostgreSQL hosts.<br/>invalidate-query -> (string)<br/>Query for checking the dictionary status, to pull only updated data.<br/>password -> (string)<br/>Password of the PostrgreSQL database user.<br/>port -> (int)<br/>Port to use when connecting to the PostgreSQL hosts.<br/>ssl-mode -> (enum<ALLOW\|DISABLE\|PREFER\|VERIFY_CA\|VERIFY_FULL>)<br/>Mode of SSL TCP/IP connection to the PostgreSQL host.<br/>table -> (string)<br/>Table name.<br/>user -> (string)<br/>Name of the PostrgreSQL database user.|
|`--async`|Display information about the operation in progress, without waiting for the operation to complete.|

#### Global Flags

| Flag | Description |
|----|----|
|`--profile`|<b>`string`</b><br/>Set the custom profile.|
|`--region`|<b>`string`</b><br/>Set the region.|
|`--debug`|Debug logging.|
|`--debug-grpc`|Debug gRPC logging. Very verbose, used for debugging connection problems.|
|`--no-user-output`|Disable printing user intended output to stderr.|
|`--pager`|<b>`string`</b><br/>Set the custom pager.|
|`--format`|<b>`string`</b><br/>Set the output format: text, yaml, json, table, json-rest.|
|`--retry`|<b>`int`</b><br/>Enable gRPC retries. By default, retries are enabled with maximum 5 attempts.<br/>Pass 0 to disable retries. Pass any negative value for infinite retries.<br/>Even infinite retries are capped with 2 minutes timeout.|
|`--timeout`|<b>`string`</b><br/>Set the timeout.|
|`--token`|<b>`string`</b><br/>Set the IAM token to use.|
|`--impersonate-service-account-id`|<b>`string`</b><br/>Set the ID of the service account to impersonate.|
|`--no-browser`|Disable opening browser for authentication.|
|`--query`|<b>`string`</b><br/>Query to select values from the response using jq syntax|
|`-h`,`--help`|Display help for the command.|
