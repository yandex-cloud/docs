---
sourcePath: ru/tracker/api-ref/concepts/issues/post-attachment.md
---
# Прикрепить файл к задаче с помощью запроса к API

Запрос позволяет прикрепить файл к задаче.

## Формат запроса {#query}

Перед выполнением запроса [получите доступ к API](../access.md).

Чтобы прикрепить файл, используйте HTTP-запрос с методом `POST`.

```
POST /{{ ver }}/issues/<issue-id>/attachments/
Host: {{ host }}
Authorization: OAuth <OAuth-токен>
{{ org-id }}
Content-Type: multipart/form-data

<file_data>
```

{% cut "Заголовки" %}

- **Host**
    Адрес узла, предоставляющего API:

    ```
    {{ host }}
    ```

- **Authorization**

    OAuth-токен в формате `OAuth <значение токена>`, например:

    ```
    OAuth 0c4181a7c2cf4521964a72ff57a34a07
    ```


- **X-Org-ID** или **X-Cloud-Org-ID**

    Идентификатор организации. Если у вас только организация {{ org-full-name }}, используйте заголовок `X-Cloud-Org-ID`, если только {{ ya-360 }} или оба типа организаций — `X-Org-ID`.


- **Content-Type**

    Формат тела запроса. Должен иметь значение `multipart/form-data`.

{% endcut %}

{% cut "Ресурс" %}

Параметр | Описание | Тип данных
----- | ----- | -----
\<issue-id\> | Идентификатор или ключ задачи | Строка

{% endcut %}

{% cut "Параметры запроса" %}

**Дополнительные параметры**

Параметр | Описание | Тип данных
----- | ----- | -----
\<filename\> | Новое имя файла, с которым он будет храниться на сервере | Строка

{% endcut %}

{% cut "Параметры тела запроса" %}

**Обязательные параметры**

Параметр | Описание | Тип данных
----- | ----- | -----
\<file_data\> | Файл в бинарном формате. Размер файла не должен превышать 1024 Мбит. | Файл

{% endcut %}

## Формат ответа {#answer}

{% list tabs %}

- Запрос выполнен успешно

    {% include [answer-201](../../../_includes/tracker/api/answer-201.md) %}

    Тело ответа содержит параметры прикрепленного файла в формате JSON.

    ```json
    {
      "self": "<адрес ресурса API, соответствующего прикрепленному файлу>",
      "id": "<идентификатор файла>",
      "name": "<имя файла>",
      "content": "<адрес для скачивания файла>",
      "thumbnail": "<адрес для скачивания превью>",
      "createdBy": {
        "self": "<ресурс, соответствующий создателю файла>",
        "id": "<логин создателя>",
        "display": "<имя создателя>"
      },
      "createdAt": "<дата и время добавления файла>",
      "mimetype": "<тип данных файла>",
      "size": <размер файла>,
      "metadata": {
        "size": "<геометрический размер (для изображений)>"
      }
    }
    ```

    {% cut "Параметры ответа" %}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    self | Адрес ресурса API, который соответствует прикрепленному файлу. | Строка
    id | Уникальный идентификатор файла. | Строка
    name | Имя файла. | Строка
    content | Адрес ресурса для скачивания файла. | Строка
    thumbnail | Адрес ресурса для скачивания миниатюры предпросмотра. Доступно только для графических файлов. | Строка
    [createdBy](#createdBy) | Объект с информацией о пользователе, прикрепившем файл. | Объект
    createdAt | Дата и время загрузки файла в формате:<br/>``` YYYY-MM-DDThh:mm:ss.sss±hhmm ``` | Строка
    mimetype | Тип файла, например:<ul><li>`text/plain` — текстовый файл;</li><li>`image/png` — изображение в формате png.</li></ul> | Строка
    size | Размер файла в байтах. | Целое число
    [metadata](#metadata) | Объект с метаданными файла. | Объект

    **Поля объекта** `createdBy` {#createdBy}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    self | Адрес ресурса, соответствующего пользователю, загрузившему файл | Строка
    id | Логин пользователя | Строка
    display | Имя пользователя (как в интерфейсе) | Строка

    **Поля объекта** `metadata` {#metadata}

    Параметр | Описание | Тип данных
    ----- | ----- | -----
    size | Размер изображения в пикселях | Строка

    {% endcut %}

- Запрос выполнен с ошибкой

    Если запрос не был успешно обработан, API возвращает ответ с кодом ошибки:

    {% include [answer-error-404](../../../_includes/tracker/api/answer-error-404.md) %}

{% endlist %}
