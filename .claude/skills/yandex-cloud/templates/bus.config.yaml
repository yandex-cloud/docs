# Bus Configuration - Shared Context Backend
# Supports multiple backends: json (default), sqlite, redis, graph (neo4j)

backend: ${BUS_BACKEND:-json}

# JSON Backend (default, lightweight, file-based)
json:
  path: "./.claude/bus/shared-context.jsonl"
  max_events: 10000
  rotate_on_size_mb: 10

# SQLite Backend (structured queries, better performance)
sqlite:
  path: "./.claude/bus/shared-context.db"
  pragma:
    journal_mode: "WAL"
    synchronous: "NORMAL"

# Redis Backend (distributed, real-time)
redis:
  url: "${REDIS_URL:-redis://localhost:6379/0}"
  prefix: "yc-skill:"
  ttl_seconds: 86400  # 24 hours

# Neo4j Graph Backend (relationships, complex queries)
graph:
  uri: "${NEO4J_URI:-bolt://localhost:7687}"
  user: "${NEO4J_USER:-neo4j}"
  password_env: "NEO4J_PASSWORD"
  database: "yandex-cloud-skills"

# Performance settings
performance:
  async_writes: true
  batch_size: 100
  compression: false

# Security settings
security:
  encrypt_values: false
  audit_log: true
  secrets_prefix: "SECRET_"
